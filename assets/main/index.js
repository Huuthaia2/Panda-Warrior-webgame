window.__require=function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({ActionUtils:[function(t,e,i){"use strict";cc._RF.push(e,"16fb5lmymNIab3l0A/KAR4o","ActionUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("TypeUtils"),a=function(){function t(){}return t.tweenTo=function(t,e,i){var n=cc.tween().to(e,i);cc.tween(t).then(n).start()},t.tweenBy=function(t,e,i){var n=cc.tween().by(e,i);cc.tween(t).then(n).start()},t.sequence=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=t.getActionList.apply(t,i);e.runAction(cc.sequence(o))},t.repeat=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=t.getActionList.apply(t,i);e.runAction(cc.repeatForever(cc.sequence(o)))},t.getActionList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],n=0;n<t.length;n++)r.default.isNumber(t[n])?i.push(cc.delayTime(t[n])):r.default.isFunction(t[n])?i.push(cc.callFunc(t[n])):i.push(t[n]);return i},t.moveToBySpeed=function(e,i,n,o){t.repeat(e,.05,function(){var t=cc.v2(i.x-e.x,i.y-e.y),r=t.mag(),a=cc.v2(t.x/r,t.y/r),s=.05*n;a.mulSelf(s),e.runAction(cc.moveBy(.05,a)),o&&o()})},t.getDieFlyAction=function(t,e,i){var n=[cc.v2(0,i+214.2),cc.v2(e,i+60*3.63),cc.v2(e,i)],o=[cc.v2(0,i+107.1),cc.v2(e/2,i+30*3.63),cc.v2(e/2,i)];return cc.sequence(cc.bezierBy(.56*t,n),cc.bezierBy(.42*t,o))},t.runningWidthNoFairly=function(t,e,i){t.stopAllActions();var n=e;t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1/60),cc.callFunc(function(){var e=t.width,o=e-n;Math.abs(o)>3?t.width=e-o*i:(t.width=n,t.stopAllActions())}))))},t}();o.default=a,cc._RF.pop()},{}],AdMgr:[function(t,e,i){"use strict";cc._RF.push(e,"48720+TMutFPqbKk7qjq0lC","AdMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("DataHelper"),l=o("CommonConst"),c=o("LoggerUtils"),u=(o("AdVideoAndroid"),o("AdVideoH5TT")),p=o("AdVideoHuawei"),d=(o("AdVideoIOS"),o("AdVideoOPPO")),h=o("AdVideoWechat"),f=o("AdVideoVIVO"),g=function(t){function e(){var e=t.call(this)||this;return e._adVideo=null,e.initialize(),e}return a(e,t),e.prototype.initialize=function(){switch(this.init(l.DataNameEnum.CycleMgr),c.default.info("init adMgr, platform type: ",cc.sys.platform),cc.sys.platform){case cc.sys.BYTEDANCE_GAME:case cc.sys.BYTEDANCE_GAME_SUB:this._adVideo=new u.default;break;case cc.sys.WECHAT_GAME:this._adVideo=new h.default;break;case l.PlatformTypeEnum.OPPO_GAME:this._adVideo=new d.default;break;case l.PlatformTypeEnum.VIVO_GAME:this._adVideo=new f.default;break;case l.PlatformTypeEnum.HUAWEI_GAME:this._adVideo=new p.default}},e.prototype.show=function(t){null!=this._adVideo?this._adVideo.show(t):(console.warn("[AdMgr] \u6ca1\u6709 AdVideo \u9ed8\u8ba4\u64ad\u653e\u6210\u529f\u3002"),t.callback(!0,!1))},e.prototype.autoShow=function(t){null!=this._adVideo?this._adVideo.autoShow(t):(console.warn("[AdMgr] \u6ca1\u6709 AdVideo \u9ed8\u8ba4\u64ad\u653e\u6210\u529f\u3002"),t.callback(!0,!1))},e.prototype.finalize=function(){},e.prototype.onTick=function(t){this._adVideo&&this._adVideo.onTick(t)},e.prototype.isVideoPlaying=function(){return null!=this._adVideo&&this._adVideo.isVideoPlaying()},e.prototype.setAdVideo=function(t){this._adVideo.setAdVideo(t)},e.prototype.showBanner=function(t){null!=this._adVideo&&this._adVideo.showBanner(t)},e.prototype.hideBanner=function(){null!=this._adVideo&&this._adVideo.hideBanner()},e.prototype.setNativeBannerAdId=function(t){null!=this._adVideo&&this._adVideo.setNativeBannerAdId(t)},e.prototype.reportShowNativeBannerAd=function(){null!=this._adVideo&&this._adVideo.reportShowNativeBannerAd()},e.prototype.clickNativeBannerAd=function(){null!=this._adVideo&&this._adVideo.clickNativeBannerAd()},e.prototype.createNativeBannerAd=function(){null!=this._adVideo&&this._adVideo.createNativeBannerAd()},e.prototype.createNativeBannerBackupAd=function(){null!=this._adVideo&&this._adVideo.createNativeBannerBackupAd()},e.prototype.setNativeIconId=function(t){null!=this._adVideo&&this._adVideo.setNativeIconId(t)},e.prototype.reportShowNativeIcon=function(){null!=this._adVideo&&this._adVideo.reportShowNativeIcon()},e.prototype.clickNativeIcon=function(){null!=this._adVideo&&this._adVideo.clickNativeIcon()},e.prototype.showNativeAd=function(t,e){null!=this._adVideo&&this._adVideo.showNativeAd(t,e)},e.prototype.showNativeBackupAd=function(t){null!=this._adVideo&&this._adVideo.showNativeBackupAd(t)},e.prototype.setNativeAdId=function(t){null!=this._adVideo&&this._adVideo.setNativeAdId(t)},e.prototype.reportShowNativeAd=function(){null!=this._adVideo&&this._adVideo.reportShowNativeAd()},e.prototype.clickNativeAd=function(){null!=this._adVideo&&this._adVideo.clickNativeAd()},e.prototype.closeNativeAd=function(){null!=this._adVideo&&this._adVideo.closeNativeAd()},e.prototype.closeBannerAd=function(){null!=this._adVideo&&this._adVideo.closeBannerAd()},e.prototype.showPortalAd=function(){null!=this._adVideo&&this._adVideo.showPortalAd()},e.prototype.destroyPortalAd=function(){null!=this._adVideo&&this._adVideo.destroyPortalAd()},e.prototype.showNativeInterstitialAd=function(){null!=this._adVideo&&this._adVideo.showNativeInterstitialAd()},e.prototype.showNativeInterstitialBackupAd=function(){null!=this._adVideo&&this._adVideo.showNativeInterstitialBackupAd()},e.prototype.showInterstitialAd=function(t){null!=this._adVideo&&this._adVideo.showInterstitialAd(t)},e.prototype.setNativeInterstitialAdId=function(t){null!=this._adVideo&&this._adVideo.setNativeInterstitialAdId(t)},e.prototype.reportShowNativeInterstitialAd=function(){null!=this._adVideo&&this._adVideo.reportShowNativeInterstitialAd()},e.prototype.clickNativeInterstitialAd=function(){null!=this._adVideo&&this._adVideo.clickNativeInterstitialAd()},e.prototype.isHuaweiRewardReady=function(){return null!=this._adVideo&&this._adVideo.isHuaweiRewardReady()},e}(s.default);r.default=g,cc._RF.pop()},{}],AdUtils:[function(t,e,i){"use strict";cc._RF.push(e,"96266wjWGxLW6TNZX9wNXwX","AdUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){},cc._RF.pop()},{}],AdVideoAndroid:[function(t,e,i){"use strict";cc._RF.push(e,"7f4dcE0uCNCtJoQNJ/zoiz+","AdVideoAndroid");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),o("App"),o("LoggerUtils");var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deviceId=null,e.playFinish=!1,e.isRewardADPlay=!1,e.param=null,e}return a(e,t),e.prototype.init=function(){},e.prototype.onLoad=function(){},e.prototype.callbackJs=function(){},e.prototype.onClose=function(){},e.prototype.onTimeout=function(){},e.prototype.onError=function(){},e.prototype.showInterstitialAd=function(){},e.prototype.show=function(){},e.prototype.RewardedClose=function(){},e.prototype.RewardedFinish=function(){},e}(o("AdVideoBase").default);r.default=s,cc._RF.pop()},{}],AdVideoBase:[function(t,e,i){"use strict";cc._RF.push(e,"578f1EXgPlDALbfnEffofr9","AdVideoBase");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.AdEvent=void 0;var r=n("CCEvent"),a=n("UI"),s=n("App"),l=n("Recorder"),c=n("TaskConst"),u=n("LoggerUtils"),p=n("TipsUtils"),d=n("Utils");(function(t){t.APP_AD_VEDIO_Init_SUCCESS="APP_AD_VEDIO_Init_SUCCESS",t.APP_AD_VEDIO_LOAD_SUCCESS="APP_AD_VEDIO_LOAD_SUCCESS",t.APP_AD_VEDIO_ON_SHOW="APP_AD_VEDIO_ON_SHOW",t.APP_AD_VEDIO_CLOSE="APP_AD_VEDIO_CLOSE",t.APP_AD_VEDIO_PLAY_FINISH="APP_AD_VEDIO_PLAY_FINISH",t.APP_AD_VEDIO_ERROR="APP_AD_VEDIO_ERROR",t.APP_AD_VEDIO_SKIP="APP_AD_VEDIO_SKIP",t.APP_AD_VEDIO_REWARD_DID_SUCCESS="APP_AD_VEDIO_REWARD_DID_SUCCESS"})(o.AdEvent||(o.AdEvent={}));var h=function(){function t(){this._param=null,this._isFinish=!1,this._adVideo=null,this.interstitialInterval=0,this.init()}return t.prototype.init=function(){s.default.event.on(r.default.PLATFORM_EVENT,this.callbackJs,this),this.interstitialInterval=s.default.getTime()},t.prototype.callbackJs=function(){},t.prototype.onTick=function(t){null!=this._param&&null!=this._param.timeout&&(this._param.timeout-=t,this._param.timeout<0&&(this._param.timeout=null,this.onTimeout()))},t.prototype.isVideoPlaying=function(){return null!=this._param},t.prototype.showBanner=function(){},t.prototype.hideBanner=function(){},t.prototype.setNativeBannerAdId=function(){},t.prototype.reportShowNativeBannerAd=function(){},t.prototype.clickNativeBannerAd=function(){},t.prototype.createNativeBannerAd=function(){},t.prototype.createNativeBannerBackupAd=function(){},t.prototype.setNativeIconId=function(){},t.prototype.reportShowNativeIcon=function(){},t.prototype.clickNativeIcon=function(){},t.prototype.showNativeAd=function(){},t.prototype.showNativeBackupAd=function(){},t.prototype.setNativeAdId=function(){},t.prototype.reportShowNativeAd=function(){},t.prototype.clickNativeAd=function(){},t.prototype.closeNativeAd=function(){},t.prototype.closeBannerAd=function(){},t.prototype.showPortalAd=function(){},t.prototype.destroyPortalAd=function(){},t.prototype.showNativeInterstitialAd=function(){},t.prototype.setNativeInterstitialAdId=function(){},t.prototype.showNativeInterstitialBackupAd=function(){},t.prototype.showInterstitialAd=function(t){var e=s.default.getTime();return!(s.default.roleServer.isNewHand()&&s.default.getRunningTime()<60)&&!(e-this.interstitialInterval<30||t&&d.default.rand(0,1)>t)},t.prototype.reportShowNativeInterstitialAd=function(){},t.prototype.clickNativeInterstitialAd=function(){},t.prototype.isHuaweiRewardReady=function(){return!0},t.prototype.load=function(){},t.prototype.onLoad=function(){},t.prototype.show=function(t){return l.default.getInstance().dotTouchVideo(t.adType),l.default.getInstance().dotClickVideoBtn(t.adType),null!=this._param?(console.error("[AdVideoBase] \u89c6\u9891\u64ad\u653e\u9501\u5b9a\u4e2d\uff0c\u4e0d\u70b9\u64ad\u653e\uff01"),!1):(this._param=t,s.default.audioMgr.musicVolume=0,l.default.getInstance().dotTouchVideo(t.adType),s.default.viewMgr.showUI(a.UI.AD_PAUSE_VIEW),!0)},t.prototype.autoShow=function(t){return null!=this._param?(console.error("[AdVideoBase] \u89c6\u9891\u64ad\u653e\u9501\u5b9a\u4e2d\uff0c\u4e0d\u70b9\u64ad\u653e\uff01"),!1):(this._param=t,s.default.audioMgr.musicVolume=0,l.default.getInstance().dotTouchVideo(t.adType),s.default.viewMgr.showUI(a.UI.AD_PAUSE_VIEW),!0)},t.prototype.onShow=function(){l.default.getInstance().dotVideoBegin(this._param.adType),console.log("[AdVideoBase] \u5e7f\u544a\u7ec4\u4ef6\u663e\u793a\u6210\u529f\u3002"),u.default.info("\u505c\u6b62\u8d85\u65f6\u68c0\u6d4b"),this._param.timeout=null},t.prototype.onFinish=function(){l.default.getInstance().dotVideoEnd(this._param.adType),l.default.getInstance().dotVideoPlayOver(this._param.adType),1!=this._isFinish&&(console.log("[AdVideoBase] \u89c6\u9891\u64ad\u653e\u5b8c\u6210\u3002"),this._isFinish=!0,s.default.taskMgr.incrStep(c.TaskEventType.WatchAds,1))},t.prototype.onClose=function(){var t=this;s.default.timeMgr.delayCallback(function(){if(s.default.viewMgr.hideUI(a.UI.AD_PAUSE_VIEW),null!=t._param){l.default.getInstance().dotVideoEnd(t._param.adType);try{t._param.callback&&t._param.callback(t._isFinish,!0,t._isFinish)}catch(t){u.default.error(t)}finally{u.default.info("clear param"),t._param=null,u.default.info(t._param)}}t._isFinish=!1,s.default.audioMgr.musicVolume=1,s.default.event.emit(r.default.AD_FINISH)},.5)},t.prototype.onTimeout=function(){this.onError("\u8d85\u65f6")},t.prototype.onError=function(t){console.log("[AdVideoBase] onError, err: %s,",t),null!=this._param&&(null!=this._param.errorCallback&&this._param.errorCallback(),this._param=null,s.default.viewMgr.hideUI(a.UI.AD_PAUSE_VIEW),s.default.audioMgr.musicVolume=1,console.log("[AdVideoBase] onError \u6682\u65e0\u5e7f\u544a"),p.default.showTips("Ads is not ready, try later."))},t.prototype.onErrorWithoutShow=function(t){console.log("[AdVideoBase] onError, err: %s,",t),null!=this._param&&(null!=this._param.errorCallback&&this._param.errorCallback(),this._param=null,s.default.viewMgr.hideUI(a.UI.AD_PAUSE_VIEW),s.default.audioMgr.musicVolume=1,console.log("[AdVideoBase] onError \u4e0d\u9700\u8981\u6253\u5f00\u5e7f\u544a"))},t.prototype.setAdVideo=function(t){this._adVideo=t},t}();o.default=h,cc._RF.pop()},{}],AdVideoH5TT:[function(t,e,i){"use strict";cc._RF.push(e,"460bad7J4ZKbrMhPqhG3tGU","AdVideoH5TT");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((n=n.apply(t,e||[])).next())})},l=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ttAdVideo=null,e}return a(e,t),e.prototype.init=function(){var e=this;console.log("[AdVideoH5TT] init"),t.prototype.init.call(this),this._ttAdVideo=tt.createRewardedVideoAd({adUnitId:"fi5j03j4ceed1jmn8c"}),null!=this._ttAdVideo?(this._ttAdVideo.onLoad(function(){return s(e,void 0,void 0,function(){return l(this,function(){return console.log("\u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u6210\u529f"),this.onLoad(),console.log("\u5e7f\u544a\u7ec4\u4ef6\u663e\u793a\u6210\u529f"),[2]})})}),this._ttAdVideo.onClose(function(t){t.isEnded&&e.onFinish(),e.onClose()}),this._ttAdVideo.onError(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u663e\u793a\u5931\u8d25",t),e.onError(t)})):console.error("[AdVideoH5TT] init falid!")},e.prototype.onLoad=function(){console.log("[AdVideoH5TT] \u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u6210\u529f\u3002"),t.prototype.onLoad.call(this),this._ttAdVideo.show(),this.onShow()},e.prototype.onClose=function(){console.log("[AdVideoH5TT] \u5e7f\u544a\u5173\u95ed\u3002"),t.prototype.onClose.call(this)},e.prototype.onTimeout=function(){console.log("[AdVideoH5TT] \u5e7f\u544a\u52a0\u8f7d\u8d85\u65f6\u3002"),t.prototype.onTimeout.call(this)},e.prototype.onError=function(e){console.log("[AdVideoH5TT] \u5e7f\u544a\u5f02\u5e38\u3002err:%s",e),t.prototype.onError.call(this,e)},e.prototype.show=function(e){var i=this;return 0!=t.prototype.show.call(this,e)&&(null==this._ttAdVideo&&(console.log("[AdVideoH5TT] createRewardedVideoAd!"),this._ttAdVideo=tt.createRewardedVideoAd({adUnitId:"fi5j03j4ceed1jmn8c"})),this._ttAdVideo.load().then(function(){console.log("[AdVideoH5TT] \u5e7f\u544a\u52a0\u8f7d\u6210\u529f\u3002"),i.onLoad()}).catch(function(t){console.error("\u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u51fa\u73b0\u95ee\u9898",t)}),!0)},e}(o("AdVideoBase").default);r.default=c,cc._RF.pop()},{}],AdVideoHuawei:[function(t,e,i){"use strict";cc._RF.push(e,"64134vBfaxAAKJCzPj8hKXi","AdVideoHuawei");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.HuaweiAdUnitIdEnum=void 0;var s,l=o("CCEvent"),c=o("UI"),u=o("App"),p=o("LoggerUtils"),d=o("TipsUtils"),h=o("AdVideoBase");(function(t){t.TestNative="u7m3hc4gvm",t.TestReward="e7hm5vx799",t.TestBanner="j1pcnpx5tu",t.Native="z416sxidwb",t.Reward="q4vf4k7kxs",t.Banner="l8pdfs8vkk",t.Icon="d54kt5almq"})(s=r.HuaweiAdUnitIdEnum||(r.HuaweiAdUnitIdEnum={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._huaweiRewardAd=null,e._huaweiBannerAd=null,e._huaweiNativeAd=null,e._huaweiInterstitialAd=null,e._huaweiRewardCount=0,e._huaweiNativeAdId=null,e._huaweiInterstitialAdId=null,e._huaweiInterstitialIntervalCount=0,e._huaweiInterstitialIntervalLimit=60,e.sysInfo=null,e.canPlayVideo=!1,e.isLoadingVideo=!1,e.isPlayingVideo=!1,e.timeCount=0,e.createCount=0,e.tryCreateCount=0,e.isFirstFinish=!1,e.lastShowNative=0,e.lastShowBanner=0,e}return a(e,t),e.prototype.init=function(){var e=this;console.log("[AdVideoHuawei] init"),t.prototype.init.call(this),qg.getSystemInfo({success:function(t){e.sysInfo=t}})},e.prototype.isHuaweiRewardReady=function(){return!0},e.prototype.onLoad=function(){console.log("[AdVideoHuawei] \u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u6210\u529f\u3002"),t.prototype.onLoad.call(this)},e.prototype.onClose=function(){console.log("[AdVideoHuawei] \u5e7f\u544a\u5173\u95ed\u3002"),t.prototype.onClose.call(this)},e.prototype.onTimeout=function(){console.log("[AdVideoHuawei] \u5e7f\u544a\u52a0\u8f7d\u8d85\u65f6\u3002"),t.prototype.onTimeout.call(this)},e.prototype.onError=function(e){console.log("[AdVideoHuawei] \u5e7f\u544a\u5f02\u5e38\u3002err:%s",e),t.prototype.onError.call(this,e)},e.prototype.createRewardAd=function(){var t=this;this.tryCreateCount++,p.default.info("try to createRewardAd, times: ",this.tryCreateCount),this._huaweiRewardAd=qg.createRewardedVideoAd({adUnitId:s.Reward,success:function(){p.default.info("huawei rewardAd create succ"),t.createCount++,p.default.info("createRewardAd times: ",t.createCount)},fail:function(){p.default.error("huawei rewardAd create fail")},complete:function(){p.default.info("huawei rewardAd create complete")}}),this._huaweiRewardAd.onError(function(e){t._huaweiRewardAd=null,t.canPlayVideo=!1,t.isLoadingVideo=!1,console.warn("rewardAd onerror",JSON.stringify(e)),t._huaweiRewardAd.offError(),t._huaweiRewardAd.offLoad(),t._huaweiRewardAd.destroy()}),this._huaweiRewardAd.onLoad(function(e){p.default.info("rewardAd loadsucc",e),t.canPlayVideo=!0,t.isLoadingVideo=!1,t._huaweiRewardAd.offError(),t._huaweiRewardAd.offLoad()}),this.isLoadingVideo=!0,this.canPlayVideo=!1,this._huaweiRewardAd.load()},e.prototype.show=function(e){var i=this;return 0!=t.prototype.show.call(this,e)&&(this.canPlayVideo?(this._huaweiRewardAd.show?(this._huaweiRewardAd.onClose(function(t){p.default.info("rewardAd close",t),i.isPlayingVideo=!1,i._huaweiRewardAd.offClose(),i._huaweiRewardAd.offError(),t&&t.isEnded&&i.onFinish(),i._huaweiRewardAd.destroy(),i._huaweiRewardAd=null,i.createRewardAd(),i.onClose()}),this._huaweiRewardAd.onError(function(t){p.default.error("reward show eror",JSON.stringify(t)),i.isPlayingVideo=!1,i._huaweiRewardAd.offClose(),i._huaweiRewardAd.offError(),i._huaweiRewardAd.destroy(),i._huaweiRewardAd=null,i.createRewardAd(),d.default.showTips("\u6682\u65e0\u5e7f\u544a\uff0c\u8bf7\u91cd\u65b0\u5c1d\u8bd5"),i.onError(t)}),this._huaweiRewardAd.show().then(function(){p.default.info("\u6fc0\u52b1\u5e7f\u544a\u89c6\u9891 \u663e\u793a\u6210\u529f"),i.isPlayingVideo=!0,i.onShow()}).catch(function(t){p.default.warn("\u6fc0\u52b1\u5e7f\u544a\u89c6\u9891 \u663e\u793a\u5931\u8d25"),i.isPlayingVideo=!1,i.onError(t)})):(this._huaweiRewardAd=null,this.createRewardAd()),!0):(d.default.showTips("\u5f53\u524d\u6682\u65e0\u5408\u9002\u7684\u5e7f\u544a"),void this.onError("\u5f53\u524d\u6682\u65e0\u5408\u9002\u7684\u5e7f\u544a")))},e.prototype.showBanner=function(){if((new Date).getTime()-this.lastShowBanner>u.default.channelMgr.getHuaweiBannerInterval()){this.lastShowBanner=(new Date).getTime(),this._huaweiBannerAd&&(this._huaweiBannerAd.hide(),this._huaweiBannerAd.destroy(),this._huaweiBannerAd=null);var t=this.sysInfo.safeArea.height-57;this._huaweiBannerAd=qg.createBannerAd({adUnitId:s.Banner,style:{top:t,left:0,width:360,height:57},adIntervals:60}),null!=this._huaweiBannerAd&&null!=this._huaweiBannerAd.style&&(this._huaweiBannerAd.onLoad(function(){p.default.warn("huawei banner load succ")}),this._huaweiBannerAd.onError(function(t){p.default.error("huawei banner error"+JSON.stringify(t))}),this._huaweiBannerAd.show())}},e.prototype.hideBanner=function(){this._huaweiBannerAd.hide(),this._huaweiBannerAd.destroy(),this._huaweiBannerAd=null},e.prototype.showNativeAd=function(t,e){if((new Date).getTime()-this.lastShowNative>u.default.channelMgr.getHuaweiNativeInterval()){this.lastShowNative=(new Date).getTime(),this._huaweiBannerAd&&this.hideBanner(),this._huaweiNativeAd&&(this._huaweiNativeAd.destroy(),this._huaweiNativeAd=null),this._huaweiNativeAd=qg.createNativeAd({adUnitId:s.Native}),this._huaweiNativeAd.offLoad(),this._huaweiNativeAd.offError();var i=u.default;this._huaweiNativeAd.onLoad(function(t){p.default.warn("nativeAd onload , ",t.adList);var n=t.adList[0];null!=n?(p.default.warn("nativeAdInfo:",n),i.adMgr.setNativeAdId(n.adId),i.viewMgr.showUI(c.UI.AD_NATIVE,n,e),i.adMgr.reportShowNativeAd()):p.default.error("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._huaweiNativeAd.onError(function(t){p.default.error("native fail, ",t)}),this._huaweiNativeAd.load()}},e.prototype.setNativeAdId=function(t){this._huaweiNativeAdId=t},e.prototype.reportShowNativeAd=function(){null!=this._huaweiNativeAdId?(p.default.warn("\u66dd\u5149\u5e7f\u544a",this._huaweiNativeAdId),this._huaweiNativeAd.reportAdShow({adId:this._huaweiNativeAdId})):p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeAd=function(){if(null!=this._huaweiNativeAdId){p.default.warn("\u70b9\u51fb\u5e7f\u544a",this._huaweiNativeAdId);var t=this._huaweiNativeAdId;this._huaweiNativeAd.reportAdClick({adId:t}),this._huaweiNativeAdId=null}else p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.showNativeInterstitialAd=function(){if((new Date).getTime()-this.lastShowNative>u.default.channelMgr.getHuaweiNativeInterval()&&(this.lastShowNative=(new Date).getTime(),this.isCanPlayInterstitial())){this._huaweiInterstitialIntervalCount=0,this._huaweiInterstitialAd&&(this._huaweiInterstitialAd.destroy(),this._huaweiInterstitialAd=null),this._huaweiInterstitialAd=qg.createNativeAd({adUnitId:s.Native}),this._huaweiInterstitialAd.offLoad(),this._huaweiInterstitialAd.offError();var t=u.default;this._huaweiInterstitialAd.onLoad(function(e){p.default.warn("nativeAd onload , ",e.adList);var i=e.adList[0];null!=i?(p.default.warn("nativeInterstitialAdInfo:",i),t.adMgr.setNativeInterstitialAdId(i.adId),t.viewMgr.showUI(c.UI.AD_INTERSTITIAL,i),t.adMgr.reportShowNativeInterstitialAd()):p.default.error("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._huaweiInterstitialAd.onError(function(t){p.default.error("nativeInterstitial fail, ",t)}),this._huaweiInterstitialAd.load()}},e.prototype.setNativeInterstitialAdId=function(t){this._huaweiInterstitialAdId=t},e.prototype.reportShowNativeInterstitialAd=function(){null!=this._huaweiInterstitialAdId?(p.default.warn("\u66dd\u5149\u5e7f\u544a",this._huaweiInterstitialAdId),this._huaweiInterstitialAd.reportAdShow({adId:this._huaweiInterstitialAdId})):p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeInterstitialAd=function(){if(null!=this._huaweiInterstitialAdId){p.default.warn("\u70b9\u51fb\u5e7f\u544a",this._huaweiInterstitialAdId);var t=this._huaweiInterstitialAdId;this._huaweiInterstitialAd.reportAdClick({adId:t}),this._huaweiInterstitialAdId=null}else p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.isCanPlayInterstitial=function(){return p.default.warn("count: %s, limit: %s",this._huaweiInterstitialIntervalCount,this._huaweiInterstitialIntervalLimit),this._huaweiInterstitialIntervalCount>this._huaweiInterstitialIntervalLimit},e.prototype.closeNativeAd=function(){u.default.event.emit(l.default.HUAWEI_CLOSE_NATIVE)},e.prototype.onTick=function(e){if(t.prototype.onTick.call(this,e),this._huaweiInterstitialIntervalCount+=e,this.timeCount+=e,this.timeCount>5){if(this.timeCount=0,this.canPlayVideo||this.isPlayingVideo||this.isLoadingVideo)return;if(this.isFirstFinish)return;this.createRewardAd(),this.isFirstFinish=!0}},e}(h.default);r.default=f,cc._RF.pop()},{}],AdVideoIOS:[function(t,e,i){"use strict";cc._RF.push(e,"a81caN+PyVFbL+OivC2lPr8","AdVideoIOS");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("AdVideoBase"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){console.log("[AdVideoIOS] init"),t.prototype.init.call(this)},e.prototype.onLoad=function(){console.log("[AdVideoIOS] \u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u6210\u529f\u3002"),t.prototype.onLoad.call(this),jsb.reflection.callStaticMethod("RootViewController","showExpAdVideoRealJs:","")},e.prototype.callbackJs=function(e,i){switch(console.log("[AdVideoIOS] callbackJs > %s",e),t.prototype.callbackJs.call(this,e,i),e){case s.AdEvent.APP_AD_VEDIO_LOAD_SUCCESS:this.onLoad();break;case s.AdEvent.APP_AD_VEDIO_ON_SHOW:this.onShow();break;case s.AdEvent.APP_AD_VEDIO_PLAY_FINISH:this.onFinish();break;case s.AdEvent.APP_AD_VEDIO_CLOSE:this.onClose();break;case s.AdEvent.APP_AD_VEDIO_ERROR:this.onError(i);break;case s.AdEvent.APP_AD_VEDIO_SKIP:break;case s.AdEvent.APP_AD_VEDIO_REWARD_DID_SUCCESS:this.onFinish();break;default:console.warn("[AdVideoIOS] \u4e8b\u4ef6\u672a\u88ab\u5904\u7406\uff1a%s",e)}},e.prototype.onClose=function(){console.log("[AdVideoIOS] \u5e7f\u544a\u5173\u95ed\u3002"),t.prototype.onClose.call(this)},e.prototype.onTimeout=function(){console.log("[AdVideoIOS] \u5e7f\u544a\u52a0\u8f7d\u8d85\u65f6\u3002"),t.prototype.onTimeout.call(this)},e.prototype.onError=function(e){console.log("[AdVideoIOS] \u5e7f\u544a\u5f02\u5e38\u3002err:%s",e),t.prototype.onError.call(this,e)},e.prototype.show=function(e){return 0!=t.prototype.show.call(this,e)&&(jsb.reflection.callStaticMethod("RootViewController","showExpAdVideoJs:extra:userId:","945696396","","0"),!0)},e}(s.default);r.default=l,cc._RF.pop()},{}],AdVideoOPPO:[function(t,e,i){"use strict";cc._RF.push(e,"7bddf0N7sRFM4/Ldx9wH8O/","AdVideoOPPO");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.OPPOAdUnitIdEnum=void 0;var s,l=o("CCEvent"),c=o("UI"),u=o("App"),p=o("LoggerUtils"),d=o("TipsUtils"),h=o("AdVideoBase");(function(t){t[t.Banner_Main=301357]="Banner_Main",t[t.Banner_2Pick1=301371]="Banner_2Pick1",t[t.Banner_Battle=301372]="Banner_Battle",t[t.Banner_Shop=301376]="Banner_Shop",t[t.Banner_Task=301386]="Banner_Task",t[t.Banner_Warhonor=301387]="Banner_Warhonor",t[t.Banner_Equipment=302513]="Banner_Equipment",t[t.Banner_Card=301388]="Banner_Card",t[t.GameBanner=301390]="GameBanner",t[t.Native_Reborn=301391]="Native_Reborn",t[t.Native_CommonReward=301392]="Native_CommonReward",t[t.Native_SkillUpgrade=301393]="Native_SkillUpgrade",t[t.Native_FinalReport=301394]="Native_FinalReport",t[t.Native_SkillOne=301395]="Native_SkillOne",t[t.Native_RandomReward=301406]="Native_RandomReward",t[t.Native_ShopFast=301407]="Native_ShopFast",t[t.Native_ShopRefresh=301408]="Native_ShopRefresh",t[t.Native_Card=301409]="Native_Card",t[t.Native_SkillReward=301410]="Native_SkillReward",t[t.Native_Pause=301411]="Native_Pause",t[t.Banner_Native=301412]="Banner_Native",t[t.Ad_RewardDouble=301414]="Ad_RewardDouble",t[t.Ad_SkillUpgrade=301415]="Ad_SkillUpgrade",t[t.Ad_ShopFast=301416]="Ad_ShopFast",t[t.Ad_ShopRefresh=301417]="Ad_ShopRefresh",t[t.Ad_Warhonor=301418]="Ad_Warhonor",t[t.Ad_KingReward=301419]="Ad_KingReward",t[t.Native_640_backup=302450]="Native_640_backup",t[t.Ad_backup=302447]="Ad_backup",t[t.Ad_FinalReward=302445]="Ad_FinalReward",t[t.Ad_Skill_All=302441]="Ad_Skill_All",t[t.Ad_Skill_Change=302440]="Ad_Skill_Change",t[t.Icon_Native=301413]="Icon_Native",t[t.Ad_Equipment=302512]="Ad_Equipment",t[t.Banner_Signin=302511]="Banner_Signin",t[t.Ad_Signin=302510]="Ad_Signin",t[t.Native_Offline=302509]="Native_Offline",t[t.Ad_Offline=302507]="Ad_Offline"})(s=r.OPPOAdUnitIdEnum||(r.OPPOAdUnitIdEnum={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._oppoAdVideo=null,e._oppoAdVideoId=null,e._oppoBannerAd=null,e._oppoNativeBannerAd=null,e._oppoNativeIcon=null,e._oppoNativeIconId=null,e._oppoNativeAd=null,e._oppoNativeAdId=null,e._bannerId=null,e._nativeBannerAdId=null,e._oppoPortalAd=null,e.bannerBeginTime=60,e.bannerIntervalLimit=0,e.bannerIntervalCount=0,e.sysInfo=null,e}return a(e,t),e.prototype.init=function(){var e=this;console.log("[AdVideoOPPO] init"),t.prototype.init.call(this),qg.getSystemInfo({success:function(t){e.sysInfo=t}})},e.prototype.showBanner=function(t){void 0===t&&(t=null),this._oppoPortalAd?p.default.warn("\u6709\u4e92\u63a8\u76d2\u5b50\uff0c\u4e0d\u4e88\u5c55\u793abanner"):0!=this.isCanPlayBannerAndNative()?(this.bannerIntervalCount=0,null!=t&&(this._bannerId=t),null!=this._bannerId?(this.bannerIntervalCount=0,this.createBannerAd(this._bannerId),this._oppoBannerAd?this._oppoBannerAd.show():(p.default.error("\u6b63\u5e38banner\u52a0\u8f7d\u5931\u8d25\uff0c\u9700\u8981\u5c55\u793a\u539f\u751fbanner"),u.default.adMgr.createNativeBannerAd())):p.default.error("\u6ca1\u6709bannerId\uff0c \u4e0d\u80fd\u8c03\u7528")):p.default.warn("\u5c55\u793a\u95f4\u9694\u672a\u5230\uff0c\u4e0d\u4e88\u62c9\u53d6")},e.prototype.hideBanner=function(){this.closeBannerAd()},e.prototype.createBannerAd=function(t){var e=this;this._oppoBannerAd&&(this._oppoBannerAd.destroy(),this._oppoBannerAd=null),this._oppoNativeBannerAd&&(this._oppoNativeBannerAd.destroy(),this._oppoNativeBannerAd=null);var i={adUnitId:""+t};this._oppoBannerAd=qg.createBannerAd(i);var n=this._oppoBannerAd;this._oppoBannerAd.onResize(function(t){var i=e.sysInfo.screenWidth,o=e.sysInfo.screenHeight;n.style.left=(i-t.width)/2,n.style.top=o-t.height,p.default.info("banner resize succ")})},e.prototype.bannerOnError=function(){var t=u.default;this._oppoBannerAd.onError(function(){p.default.error("\u6b63\u5e38banner\u52a0\u8f7d\u5931\u8d25\uff0c\u9700\u8981\u5c55\u793a\u539f\u751fbanner"),t.adMgr.createNativeBannerAd()})},e.prototype.createNativeBannerAd=function(){this._oppoBannerAd&&(this._oppoBannerAd.destroy(),this._oppoBannerAd=null),this._oppoNativeBannerAd&&(this._oppoNativeBannerAd.destroy(),this._oppoNativeBannerAd=null),this._oppoNativeBannerAd=qg.createNativeAd({adUnitId:"301412"});var t=u.default;this._oppoNativeBannerAd.onLoad(function(e){p.default.warn("nativebanner onload , ",e.adList);var i=e.adList[0];null!=i?(t.adMgr.setNativeBannerAdId(i.adId),t.viewMgr.showUI(c.UI.AD_BANNER,i),t.adMgr.reportShowNativeBannerAd()):p.default.error("\u539f\u751fbanner\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._oppoNativeBannerAd.onError(function(e){p.default.error("nativeBanner fail, ",e),t.adMgr.showBanner()}),this._oppoNativeBannerAd.load()},e.prototype.setNativeBannerAdId=function(t){this._nativeBannerAdId=t},e.prototype.reportShowNativeBannerAd=function(){null!=this._nativeBannerAdId?this._oppoNativeBannerAd.reportAdShow({adId:this._nativeBannerAdId}):p.default.error("\u6ca1\u6709\u539f\u751fbanner\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeBannerAd=function(){if(null!=this._nativeBannerAdId){var t=this._nativeBannerAdId;this._oppoNativeBannerAd.reportAdClick({adId:t}),this._nativeBannerAdId=null}else p.default.error("\u6ca1\u6709\u539f\u751fbanner\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.onLoad=function(){console.log("[AdVideoOPPO] \u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u6210\u529f\u3002"),t.prototype.onLoad.call(this),this._oppoAdVideo.show(),this.onShow()},e.prototype.onClose=function(){console.log("[AdVideoOPPO] \u5e7f\u544a\u5173\u95ed\u3002"),t.prototype.onClose.call(this)},e.prototype.onTimeout=function(){console.log("[AdVideoOPPO] \u5e7f\u544a\u52a0\u8f7d\u8d85\u65f6\u3002"),t.prototype.onTimeout.call(this)},e.prototype.onError=function(e){console.log("[AdVideoOPPO] \u5e7f\u544a\u5f02\u5e38\u3002err:%s",e),t.prototype.onError.call(this,e)},e.prototype.show=function(e){var i=this;if(0==t.prototype.show.call(this,e))return!1;var n=e.adUnitId||s.Ad_backup;return this._oppoAdVideo=qg.createRewardedVideoAd({adUnitId:""+n}),this._oppoAdVideo.onLoad(function(){p.default.info("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),i.onLoad()}),this._oppoAdVideo.onClose(function(t){t.isEnded&&i.onFinish(),i.onClose()}),this._oppoAdVideo.onError(function(t){i.onError(t)}),this._oppoAdVideo.load(),!0},e.prototype.showNativeIcon=function(){if(0!=this.isCanPlayBannerAndNative()){this.bannerIntervalCount=0,this._oppoNativeIcon&&(this._oppoNativeIcon.destroy(),this._oppoNativeIcon=null),this._oppoNativeIcon=qg.createNativeAd({adUnitId:"301413"});var t=u.default;this._oppoNativeIcon.onLoad(function(e){p.default.warn("nativeicon onload , ",e.adList);var i=e.adList[0];null!=i?(t.adMgr.setNativeIconId(i.adId),t.event.emit(l.default.OPPO_SHOW_NATIVE_ICON,i),t.adMgr.reportShowNativeIcon()):p.default.error("\u539f\u751fIcon\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._oppoNativeIcon.onError(function(t){p.default.error("nativeIcon fail, ",t)}),this._oppoNativeIcon.load()}else p.default.warn("\u5c55\u793a\u95f4\u9694\u672a\u5230\uff0c\u4e0d\u4e88\u62c9\u53d6")},e.prototype.setNativeIconId=function(t){this._oppoNativeIconId=t},e.prototype.reportShowNativeIcon=function(){null!=this._oppoNativeIconId?this._oppoNativeIcon.reportAdShow({adId:this._oppoNativeIconId}):p.default.error("\u6ca1\u6709\u539f\u751fIcon\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeIcon=function(){if(null!=this._oppoNativeIconId){var t=this._oppoNativeIconId;this._oppoNativeIcon.reportAdClick({adId:t}),this._oppoNativeIconId=null}else p.default.error("\u6ca1\u6709\u539f\u751fIcon\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.showNativeAd=function(t,e){if(0!=this.isCanPlayBannerAndNative())if(this.bannerIntervalCount=0,null!=t&&(this._oppoNativeAdId=t),null!=this._oppoNativeAdId){this._oppoBannerAd&&(this._oppoBannerAd.destroy(),this._oppoBannerAd=null),this._oppoNativeBannerAd&&(this._oppoNativeBannerAd.destroy(),this._oppoNativeBannerAd=null),this._oppoNativeAd&&(this._oppoNativeAd.destroy(),this._oppoNativeAd=null);var i={adUnitId:""+t};this._oppoNativeAd=qg.createNativeAd(i);var n=u.default,o=t;this._oppoNativeAd.onLoad(function(t){p.default.warn("nativeAd onload , ",t.adList);var i=t.adList[0];null!=i?(p.default.warn("nativeAdInfo:",i),n.adMgr.setNativeAdId(i.adId),n.viewMgr.showUI(c.UI.AD_NATIVE,i,e,o),n.adMgr.reportShowNativeAd()):p.default.error("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._oppoNativeAd.onError(function(t){p.default.error("native fail, ",t)}),this._oppoNativeAd.load()}else p.default.error("\u6ca1\u6709nativeId, \u4e0d\u80fd\u5c55\u793a\u539f\u751f\u5e7f\u544a");else p.default.warn("\u5c55\u793a\u95f4\u9694\u672a\u5230\uff0c\u4e0d\u4e88\u62c9\u53d6")},e.prototype.setNativeAdId=function(t){this._oppoNativeAdId=t},e.prototype.reportShowNativeAd=function(){null!=this._oppoNativeAdId?(p.default.warn("\u66dd\u5149\u5e7f\u544a",this._oppoNativeAdId),this._oppoNativeAd.reportAdShow({adId:this._oppoNativeAdId})):p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeAd=function(){if(null!=this._oppoNativeAdId){p.default.warn("\u70b9\u51fb\u5e7f\u544a",this._oppoNativeAdId);var t=this._oppoNativeAdId;this._oppoNativeAd.reportAdClick({adId:t}),this._oppoNativeAdId=null}else p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.isCanPlayBannerAndNative=function(){return!(u.default.getRunningTime()<this.bannerBeginTime)},e.prototype.closeNativeAd=function(){this._oppoNativeAd&&this._oppoNativeAd.destroy()},e.prototype.closeBannerAd=function(){this._oppoBannerAd&&this._oppoBannerAd.destroy(),this._oppoNativeBannerAd&&this._oppoNativeBannerAd.destroy()},e.prototype.showPortalAd=function(){var t=this;0!=u.default.channelMgr.getSwtich()&&(this._oppoBannerAd&&this._oppoBannerAd.destroy(),this._oppoNativeBannerAd&&this._oppoNativeBannerAd.destroy(),qg.getSystemInfoSync().platformVersionCode>=1076?this._oppoPortalAd=qg.createGamePortalAd({adUnitId:""+s.GameBanner}):d.default.showTips("\u5feb\u5e94\u7528\u5e73\u53f0\u7248\u672c\u53f7\u4f4e\u4e8e1076\uff0c\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API"),this._oppoPortalAd.load().then(function(){p.default.info("portal load succ"),t._oppoPortalAd.show().then(function(){p.default.info("portal show success")}).catch(function(t){p.default.error("portal show fail with:"+t.errCode+","+t.errMsg)})}).catch(function(t){p.default.error("portal load fail with:"+t.errCode+","+t.errMsg)}))},e.prototype.destroyPortalAd=function(){0!=u.default.channelMgr.getSwtich()&&this._oppoPortalAd&&this._oppoPortalAd.destroy().then(function(){console.log("destroy success")}).catch(function(t){console.log("destroy fail with:"+t.errCode+","+t.errMsg)})},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.bannerIntervalCount+=e},e}(h.default);r.default=f,cc._RF.pop()},{}],AdVideoShouQ:[function(t,e,i){"use strict";cc._RF.push(e,"30d983IushDaKncB8QB3f9j","AdVideoShouQ");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("App"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._shouQAdVideo=null,e}return a(e,t),e.prototype.init=function(){console.log("[AdVideoShouQ] init"),t.prototype.init.call(this)},e.prototype.onLoad=function(){console.log("[AdVideoShouQ] \u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u6210\u529f\u3002"),t.prototype.onLoad.call(this)},e.prototype.onClose=function(){console.log("[AdVideoShouQ] \u5e7f\u544a\u5173\u95ed\u3002"),t.prototype.onClose.call(this)},e.prototype.onTimeout=function(){console.log("[AdVideoShouQ] \u5e7f\u544a\u52a0\u8f7d\u8d85\u65f6\u3002"),t.prototype.onTimeout.call(this)},e.prototype.onError=function(e){console.log("[AdVideoShouQ] \u5e7f\u544a\u5f02\u5e38\u3002err:%s",e),t.prototype.onError.call(this,e)},e.prototype.onErrorWithoutShow=function(e){console.log("[AdVideoShouQ] \u5e7f\u544a\u5173\u95ed\u4e0d\u5f39\u6d88\u606f\u3002err:%s",e),t.prototype.onErrorWithoutShow.call(this,e)},e.prototype.show=function(e){var i=this;return 0==t.prototype.show.call(this,e)?(console.info("111111112222222"),!1):(this.onShow(),s.default.sdkMgr.showAd(function(){i.onFinish(),i.onClose()},function(){i.onError("err")}),!0)},e.prototype.autoShow=function(e){var i=this;return 0==t.prototype.autoShow.call(this,e)?(console.info("2222222221111111111"),!1):(this.onShow(),s.default.sdkMgr.autoShowAd(function(){i.onFinish(),i.onClose()},function(){i.onError("err")},function(){i.onErrorWithoutShow("err")}),!0)},e}(o("AdVideoBase").default);r.default=l,cc._RF.pop()},{}],AdVideoVIVO:[function(t,e,i){"use strict";cc._RF.push(e,"19be6HcmKdGHp8hdJNReOSV","AdVideoVIVO");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.VIVOAdUnitIdEnum=void 0;var s,l=o("CCEvent"),c=o("UI"),u=o("App"),p=o("LoggerUtils"),d=o("AdVideoBase");(function(t){t.bannerAd="6758d459317d459c8a5d20e0dd2f10d3",t.interstitialAd="ba2d75d31d6d400bb5dc9c1491a79245",t.nativeAd1="565bcc564b754663873bf9224e6d9ac8",t.nativeAd2="0ff11896717f44c5bb6615d51e6b2b03",t.rewardAd1="463c3ee4b95b4692ac5a887e8ee68b42",t.rewardAd2="49f2cc3c34194879821a9098148a6ed1"})(s=r.VIVOAdUnitIdEnum||(r.VIVOAdUnitIdEnum={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vivoNativeAd=null,e._vivoBannerAd=null,e._vivoNativeBannerAd=null,e._vivoInterstitialAd=null,e._vivoNativeInterstitialAd=null,e._vivoRewardAd=null,e.curRewardAdId=null,e._vivoNativeBannerAdId=null,e._vivoNativeAdId=null,e._vivoNativeInterstitialAdId=null,e._vivoBannerIntervalLimit=10,e._vivoInterstitialIntervalLimit=60,e._vivoNativeIntervalLimit=10,e._vivoBannerIntervalCount=0,e._vivoInterstitialIntervalCount=0,e._vivoNativeIntervalCount=0,e}return a(e,t),e.prototype.init=function(){console.log("[AdVideoVIVO] init"),t.prototype.init.call(this)},e.prototype.onLoad=function(){console.log("[AdVideoVIVO] \u5e7f\u544a\u7ec4\u4ef6\u52a0\u8f7d\u6210\u529f\u3002"),t.prototype.onLoad.call(this),this._vivoRewardAd.show(),this.onShow()},e.prototype.onClose=function(){console.log("[AdVideoVIVO] \u5e7f\u544a\u5173\u95ed\u3002"),t.prototype.onClose.call(this)},e.prototype.onTimeout=function(){console.log("[AdVideoVIVO] \u5e7f\u544a\u52a0\u8f7d\u8d85\u65f6\u3002"),t.prototype.onTimeout.call(this)},e.prototype.onError=function(e){console.log("[AdVideoVIVO] \u5e7f\u544a\u5f02\u5e38\u3002err:%s",e),t.prototype.onError.call(this,e)},e.prototype.show=function(e){var i=this;return 0!=t.prototype.show.call(this,e)&&(this._vivoRewardAd&&this.curRewardAdId==s.rewardAd1?this._vivoRewardAd.load():(this._vivoRewardAd=qg.createRewardedVideoAd({posId:s.rewardAd1}),this.curRewardAdId=s.rewardAd1,this._vivoRewardAd.onLoad(function(){p.default.info("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),i.onLoad()}),this._vivoRewardAd.onClose(function(t){t.isEnded&&i.onFinish(),i.onClose()}),this._vivoRewardAd.onError(function(){i.showBackup()})),!0)},e.prototype.showBackup=function(){var t=this;this._vivoRewardAd=qg.createRewardedVideoAd({posId:s.rewardAd2}),this.curRewardAdId=s.rewardAd2,this._vivoRewardAd.onLoad(function(){p.default.info("\u5907\u7528\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),t.onLoad()}),this._vivoRewardAd.onClose(function(e){e.isEnded&&t.onFinish(),t.onClose()}),this._vivoRewardAd.onError(function(e){p.default.error("vivo rewardAd fail: ",e),t.onError("err")})},e.prototype.showBanner=function(t){var e=this;void 0===t&&(t=null),this._vivoBannerAd&&(this._vivoBannerAd.destroy(),this._vivoBannerAd=null),this._vivoBannerAd=qg.createBannerAd({posId:s.bannerAd,adIntervals:30}),this._vivoBannerAd.onLoad(function(){e._vivoBannerAd.show()}),this._vivoBannerAd.onSize(function(t){p.default.info("banner width:"+t.width+", height: "+t.height)}),this._vivoBannerAd.onError(function(t){p.default.error("banner fail",t)})},e.prototype.hideBanner=function(){this._vivoBannerAd.hide(),this._vivoBannerAd.destroy()},e.prototype.createNativeBannerAd=function(){if(!u.default.viewMgr.isViewShowing(c.UI.AD_BANNER)){this._vivoBannerAd&&(this._vivoBannerAd.destroy(),this._vivoBannerAd=null),u.default.event.emit(l.default.VIVO_CLOSE_BANNER),this._vivoNativeBannerAd=qg.createNativeAd({posId:s.nativeAd1});var t=u.default;this._vivoNativeBannerAd.onLoad(function(e){p.default.warn("nativebanner onload , ",e.adList);var i=e.adList[0];null!=i?(t.adMgr.setNativeBannerAdId(i.adId),t.channelMgr.setVIVOnativeParams(i),t.viewMgr.showUI(c.UI.AD_BANNER,i),t.adMgr.reportShowNativeBannerAd()):p.default.error("\u539f\u751fbanner\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._vivoNativeBannerAd.onError(function(e){var i=t.channelMgr.getVIVONativeParams();i&&t.viewMgr.showUI(c.UI.AD_BANNER,i),p.default.error("nativeBanner fail, ",e),t.adMgr.createNativeBannerBackupAd()}),this._vivoNativeBannerAd.load()}},e.prototype.createNativeBannerBackupAd=function(){this._vivoNativeBannerAd=qg.createNativeAd({posId:s.nativeAd2});var t=u.default;this._vivoNativeBannerAd.onLoad(function(e){p.default.warn("nativebanner onload , ",e.adList);var i=e.adList[0];null!=i?(t.adMgr.setNativeBannerAdId(i.adId),t.channelMgr.setVIVOnativeParams(i),t.viewMgr.showUI(c.UI.AD_BANNER,i),t.adMgr.reportShowNativeBannerAd()):p.default.error("\u539f\u751fbanner\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._vivoNativeBannerAd.onError(function(e){var i=t.channelMgr.getVIVONativeParams();i&&t.viewMgr.showUI(c.UI.AD_BANNER,i),p.default.error("nativeBannerBackup fail, ",e),t.adMgr.showBanner()}),this._vivoNativeBannerAd.load()},e.prototype.setNativeBannerAdId=function(t){this._vivoNativeBannerAdId=t},e.prototype.reportShowNativeBannerAd=function(){null!=this._vivoNativeBannerAdId?this._vivoNativeBannerAd.reportAdShow({adId:this._vivoNativeBannerAdId}):p.default.error("\u6ca1\u6709\u539f\u751fbanner\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeBannerAd=function(){if(null!=this._vivoNativeBannerAdId){var t=this._vivoNativeBannerAdId;this._vivoNativeBannerAd.reportAdClick({adId:t}),u.default.channelMgr.resetVIVONativeParams(),this._vivoNativeBannerAdId=null}else p.default.error("\u6ca1\u6709\u539f\u751fbanner\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.showNativeAd=function(t,e){this._vivoNativeAd=qg.createNativeAd({posId:s.nativeAd1});var i=u.default,n=s.nativeAd1;this._vivoNativeAd.onLoad(function(t){p.default.warn("nativeAd onload , ",t.adList);var o=t.adList[0];null!=o?(p.default.warn("nativeAdInfo:",o),i.adMgr.setNativeAdId(o.adId),i.channelMgr.setVIVOnativeParams(o),i.viewMgr.showUI(c.UI.AD_NATIVE,o,e,n),i.adMgr.reportShowNativeAd()):p.default.error("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._vivoNativeAd.onError(function(t){var o=i.channelMgr.getVIVONativeParams();o&&i.viewMgr.showUI(c.UI.AD_NATIVE,o,e,n),p.default.error("native fail, ",t),i.adMgr.showNativeBackupAd(e)}),this._vivoNativeAd.load()},e.prototype.showNativeBackupAd=function(t){this._vivoNativeAd=qg.createNativeAd({posId:s.nativeAd2});var e=u.default,i=s.nativeAd2;this._vivoNativeAd.onLoad(function(n){p.default.warn("nativeAd onload , ",n.adList);var o=n.adList[0];null!=o?(p.default.warn("nativeBackupAdInfo:",o),e.adMgr.setNativeAdId(o.adId),e.channelMgr.setVIVOnativeParams(o),e.viewMgr.showUI(c.UI.AD_NATIVE,o,t,i),e.adMgr.reportShowNativeAd()):p.default.error("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._vivoNativeAd.onError(function(n){var o=e.channelMgr.getVIVONativeParams();o&&e.viewMgr.showUI(c.UI.AD_NATIVE,o,t,i),p.default.error("nativeBackup fail, ",n)}),this._vivoNativeAd.load()},e.prototype.setNativeAdId=function(t){this._vivoNativeAdId=t},e.prototype.reportShowNativeAd=function(){null!=this._vivoNativeAdId?(p.default.warn("\u66dd\u5149\u5e7f\u544a",this._vivoNativeAdId),this._vivoNativeAd.reportAdShow({adId:this._vivoNativeAdId})):p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeAd=function(){if(null!=this._vivoNativeAdId){p.default.warn("\u70b9\u51fb\u5e7f\u544a",this._vivoNativeAdId);var t=this._vivoNativeAdId;this._vivoNativeAd.reportAdClick({adId:t}),u.default.channelMgr.resetVIVONativeParams(),this._vivoNativeAdId=null}else p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.showNativeInterstitialAd=function(){if(this.isCanPlayInterstitial()){this._vivoInterstitialIntervalCount=0,this._vivoNativeInterstitialAd=qg.createNativeAd({posId:s.nativeAd1});var t=u.default;this._vivoNativeInterstitialAd.onLoad(function(e){p.default.warn("nativeAd onload , ",e.adList);var i=e.adList[0];null!=i?(p.default.warn("nativeInterstitialAdInfo:",i),t.adMgr.setNativeInterstitialAdId(i.adId),t.channelMgr.setVIVOnativeParams(i),t.viewMgr.showUI(c.UI.AD_INTERSTITIAL,i),t.adMgr.reportShowNativeInterstitialAd()):p.default.error("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._vivoNativeInterstitialAd.onError(function(e){var i=t.channelMgr.getVIVONativeParams();i&&t.viewMgr.showUI(c.UI.AD_INTERSTITIAL,i),p.default.error("nativeInterstitial fail, ",e),t.adMgr.showNativeInterstitialBackupAd()}),this._vivoNativeInterstitialAd.load()}},e.prototype.showNativeInterstitialBackupAd=function(){this._vivoNativeInterstitialAd=qg.createNativeAd({posId:s.nativeAd2});var t=u.default;this._vivoNativeInterstitialAd.onLoad(function(e){p.default.warn("nativeAd onload , ",e.adList);var i=e.adList[0];null!=i?(p.default.warn("nativeInterstitialAdInfo:",i),t.adMgr.setNativeInterstitialAdId(i.adId),t.channelMgr.setVIVOnativeParams(i),t.viewMgr.showUI(c.UI.AD_INTERSTITIAL,i),t.adMgr.reportShowNativeInterstitialAd()):p.default.error("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6709\u95ee\u9898\uff0c\u6570\u636e\u4e3a\u7a7a")}),this._vivoNativeInterstitialAd.onError(function(e){var i=t.channelMgr.getVIVONativeParams();i&&t.viewMgr.showUI(c.UI.AD_INTERSTITIAL,i),p.default.error("nativeInterstitial fail, ",e)}),this._vivoNativeInterstitialAd.load()},e.prototype.showInterstitialAd=function(){var t=this;u.default.viewMgr.isViewShowing(c.UI.GUIDE_VIEW)||(this._vivoInterstitialAd=qg.createInterstitialAd({posId:s.interstitialAd}),this._vivoInterstitialAd.onLoad(function(){t._vivoInterstitialAd.show().then(function(){p.default.info("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(t){p.default.error("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})}),this._vivoInterstitialAd.onError(function(t){p.default.error("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}))},e.prototype.setNativeInterstitialAdId=function(t){this._vivoNativeInterstitialAdId=t},e.prototype.reportShowNativeInterstitialAd=function(){null!=this._vivoNativeInterstitialAdId?(p.default.warn("\u66dd\u5149\u5e7f\u544a",this._vivoNativeInterstitialAdId),this._vivoNativeInterstitialAd.reportAdShow({adId:this._vivoNativeInterstitialAdId})):p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.clickNativeInterstitialAd=function(){if(null!=this._vivoNativeInterstitialAdId){p.default.warn("\u70b9\u51fb\u5e7f\u544a",this._vivoNativeInterstitialAdId);var t=this._vivoNativeInterstitialAdId;this._vivoNativeInterstitialAd.reportAdClick({adId:t}),u.default.channelMgr.resetVIVONativeParams(),this._vivoNativeInterstitialAdId=null}else p.default.error("\u6ca1\u6709\u539f\u751f\u5e7f\u544aID\uff0c\u65e0\u6cd5\u4e0a\u62a5")},e.prototype.isCanPlayInterstitial=function(){return 0!=u.default.channelMgr.getVivoInterstitialSwitch()&&this._vivoInterstitialIntervalCount>this._vivoInterstitialIntervalLimit},e.prototype.closeNativeAd=function(){u.default.event.emit(l.default.VIVO_CLOSE_ADVIEW)},e.prototype.closeBannerAd=function(){u.default.event.emit(l.default.VIVO_CLOSE_BANNER)},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this._vivoBannerIntervalCount+=e,this._vivoInterstitialIntervalCount+=e,this._vivoNativeIntervalCount+=e},e}(d.default);r.default=h,cc._RF.pop()},{}],AdVideoWechat:[function(t,e,i){"use strict";cc._RF.push(e,"10f10XMXg9GXbjlifKVfX9i","AdVideoWechat");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("App"),l=o("LoggerUtils"),c=o("UI"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._wechatGameBannerAd=null,e._wechatRewardAd=null,e._customAd1=null,e._customAd2=null,e._portalAd=null,e}return a(e,t),e.prototype.init=function(){console.log("[AdVideoWechat] init"),console.log("[AdVideoWechat] bannerAd init"),this._wechatGameBannerAd=wx.createBannerAd({adUnitId:"adunit-3af70c369985430b",adIntervals:50,style:{left:0,top:0,width:350}}),this._wechatGameBannerAd.onError(function(t){console.log(t)}),t.prototype.init.call(this)},e.prototype.showBanner=function(t){var e=this;if(void 0===t&&(t=null),console.log("[AdVideoWechat] showBanner"),null==this._wechatGameBannerAd){this._wechatGameBannerAd=wx.createBannerAd({adUnitId:"adunit-3af70c369985430b",adIntervals:50,style:{left:0,top:0,width:350}});var i=wx.getSystemInfoSync(),n=i.windowHeight-i.safeArea.bottom,o=i.screenWidth/2,r=i.screenHeight;this._wechatGameBannerAd.onResize(function(){e._wechatGameBannerAd.style.left=o-e._wechatGameBannerAd.style.realWidth/2+.1,e._wechatGameBannerAd.style.top=r-e._wechatGameBannerAd.style.realHeight-n})}this._wechatGameBannerAd.show(),this._wechatGameBannerAd.onError(function(t){console.log(t)}),this._wechatGameBannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")})},e.prototype.hideBanner=function(){console.log("[AdVideoWechat] hideBanner"),this._wechatGameBannerAd.hide()},e.prototype.onLoad=function(){console.log("[AdVideoWechat] _wechatRewardAd\u52a0\u8f7d\u6210\u529f\u3002"),t.prototype.onLoad.call(this),this.onShow()},e.prototype.show=function(e){var i=this;return console.log(e),console.log("[AdVideoWechat] \u8c03\u7528 \u5c55\u793a\u6fc0\u52b1\u5e7f\u544a"),0!=t.prototype.show.call(this,e)&&(this._wechatRewardAd=wx.createRewardedVideoAd({adUnitId:"adunit-8af39be0ab5f2e8e"}),this._wechatRewardAd.onLoad(function(){l.default.info("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),i.onLoad()}),this._wechatRewardAd.show().then(function(){console.log("[AdVideoWechat] wechatRewardAd show: \u5c55\u793a\u6210\u529f!"),i.onShow()}).catch(function(){i._wechatRewardAd.load().then(function(){return i._wechatRewardAd.show()})}),this._wechatRewardAd.onError(function(){console.log("[AdVideoWechat] wechatRewardAd onError")}),this._wechatRewardAd.onClose(function(t){i._wechatRewardAd.offClose(),(t&&t.isEnded||void 0===t)&&(e.callback(!0,!1),i.onFinish()),i.onClose()}),!0)},e.prototype.showInterstitialAd=function(){var e=this;if(0==t.prototype.showInterstitialAd.call(this))return console.log("[AdVideoWechat] showInterstitialAd CD\u65f6\u95f4\u4e0d\u591f"),!1;if(console.log("[AdVideoWechat] showInterstitialAd \u8c03\u7528\u63d2\u5c4f\u5e7f\u544a"),!s.default.viewMgr.isViewShowing(c.UI.GUIDE_VIEW)){var i=wx.createInterstitialAd({adUnitId:"adunit-be540de84f24ba2d"});i.show().catch(function(t){console.error("[AdVideoWechat] showInterstitialAd show().catch \u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"),console.error(t),i=null}),i.onLoad(function(){console.error("[AdVideoWechat] showInterstitialAd onLoad \u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),i.onError(function(t){console.error("[AdVideoWechat] showInterstitialAd onError \u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"),l.default.error("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t),i=null}),i.onClose(function(){console.error("[AdVideoWechat] showInterstitialAd onClose \u63d2\u5c4f \u5e7f\u544a\u5173\u95ed"),e.onClose(),i=null,e.interstitialInterval=s.default.getTime()})}},e.prototype.showNativeAd=function(){console.log("[AdVideoWechat] showNativeAd"),this._customAd1=wx.createCustomAd({adUnitId:"adunit-f03c132018a24b76",style:{left:10,top:91,width:375,fixed:!0}}),this._customAd1.onError(function(t){return console.log(t)}),this._customAd1.onLoad(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this._customAd1.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u663e\u793a")}),this._customAd1.onClose(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5173\u95ed")});var t=wx.getSystemInfoSync().windowWidth-90;this._customAd2=wx.createCustomAd({adUnitId:"adunit-f03c132018a24b76",style:{left:t,top:91,width:375,fixed:!0}}),this._customAd2.onError(function(t){return console.log(t)}),this._customAd2.onLoad(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this._customAd2.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u663e\u793a")}),this._customAd2.onClose(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5173\u95ed")})},e.prototype.closeNativeAd=function(){this._customAd1.hide(),this._customAd2.hide(),this._customAd1.destroy(),this._customAd2.destroy()},e.prototype.showPortalAd=function(){this._portalAd=wx.createCustomAd({adUnitId:"adunit-279ef643296914b9",style:{left:10,top:126,width:375,fixed:!0}}),this._portalAd.onError(function(t){return console.log(t)}),this._portalAd.onLoad(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this._portalAd.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u663e\u793a")}),this._portalAd.onClose(function(){return console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5173\u95ed")})},e.prototype.destroyPortalAd=function(){this._portalAd.hide(),this._portalAd.destroy()},e.prototype.onClose=function(){console.log("[AdVideoWechat] \u5e7f\u544a\u5173\u95ed\u3002"),t.prototype.onClose.call(this)},e.prototype.onTimeout=function(){console.log("[AdVideoWechat] \u5e7f\u544a\u52a0\u8f7d\u8d85\u65f6\u3002"),t.prototype.onTimeout.call(this)},e.prototype.onError=function(e){console.log("[AdVideoWechat] \u5e7f\u544a\u5f02\u5e38\u3002err:%s",e),t.prototype.onError.call(this,e)},e.prototype.onErrorWithoutShow=function(e){console.log("[AdVideoWechat] \u5e7f\u544a\u5173\u95ed\u4e0d\u5f39\u6d88\u606f\u3002err:%s",e),t.prototype.onErrorWithoutShow.call(this,e)},e.prototype.autoShow=function(e){var i=this;return 0==t.prototype.autoShow.call(this,e)?(console.info("2222222221111111111"),!1):(this.onShow(),s.default.sdkMgr.autoShowAd(function(){i.onFinish(),i.onClose()},function(){i.onError("err")},function(){i.onErrorWithoutShow("err")}),!0)},e}(o("AdVideoBase").default);r.default=u,cc._RF.pop()},{}],AdaptUtils:[function(t,e,i){"use strict";cc._RF.push(e,"cfbb5nkdd1LIq9rLcN0tsgx","AdaptUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0}),n("CommonConst"),n("LoggerUtils"),n("NodeUtils");var r=function(){function t(){}return t.adaptSize2Winsize=function(){},t.adaptBgHeight2Screen=function(){},t.adaptNodeToTopNode=function(){},t.adaptNodeToTop=function(){},t.adaptNodeToTopInsideSafeArea=function(){},t.adaptNodeToBottom=function(){},t.adaptNodeToBottomInsideSafeArea=function(){},t.adaptScrollview=function(){},t.adaptScrollviewInsideSafeArea=function(){},t.getSafeAreaRect=function(){},t.getScreenBangsRect=function(){},t.getScreenBangsSize=function(){},t}();o.default=r,cc._RF.pop()},{}],AiConst:[function(t,e,i){"use strict";cc._RF.push(e,"6c709gNDndC7L+b7cb0gUmg","AiConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.AiBehaviorStateEnum=n.AiBehaviorTypeEnum=void 0,n.AiBehaviorTypeEnum||(n.AiBehaviorTypeEnum={}),n.AiBehaviorStateEnum||(n.AiBehaviorStateEnum={}),cc._RF.pop()},{}],Alias:[function(t,e,i){"use strict";cc._RF.push(e,"77699ByKGNK950fRmwF1lZp","Alias");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],AnimationEnum:[function(t,e,i){"use strict";cc._RF.push(e,"66ef0m/1DtNOpm3jFCi0Emu","AnimationEnum");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ObjTurret2AniEnum=n.ObjTurret1AniEnum=n.ObjEmptyPlaneAniEnum=n.ObjSpineAnimationEnum=void 0,function(t){t.Standby="standby",t.Climb="appear_1",t.Drop="drop",t.Die_ready="die_ready",t.Die_continue="die_continue",t.Die_end="die_end",t.Ready="ready",t.Continue="continue",t.End="end",t.Storage="storage",t.Casting="casting",t.summon="summon",t.Attack="attack",t.Hit="hit",t.Walk="walk",t.Jump="jump",t.JumpStart="jump_start",t.JumpLoop="jump_loop",t.JumpDown="jump_down",t.JumpEnd="jump_end",t.Die="die",t.DieFallLoop="die_fall_loop",t.DieFallEnd="die_fall_end",t.Run="run",t.Idle="idle",t.Idle1="idle_1",t.Appear1="appear_1",t.Appear2="appear_2",t.Appear3="appear_3",t.AppearBoss="appear_boss",t.AttackStart="attack_start",t.AttackLoop="attack_loop",t.AttackEnd="attack_end",t.Shoot="shoot",t.ShootStart="shoot_start",t.ShootLoop="shoot_loop",t.ShootEnd="shoot_end",t.Skill1="skill_1",t.Skill2="skill_2",t.Skill3="skill_3",t.Skill4="skill_4",t.Skill1Start="skill_1_start",t.Skill1Loop="skill_1_loop",t.Skill1End="skill_1_end",t.AppearShow="appear_show",t.AppearClimb="appear_climb",t.AppearJumpin="appear_jumpin",t.AppearDrop="appear_drop"}(n.ObjSpineAnimationEnum||(n.ObjSpineAnimationEnum={})),function(t){t.AttackContinue="attack_continue",t.AttackEnd="attack_end",t.AttackReady="attack_ready",t.Attack="attack",t.Die="die",t.Revive="revive",t.Standby="standby",t.Walk="walk"}(n.ObjEmptyPlaneAniEnum||(n.ObjEmptyPlaneAniEnum={})),function(t){t.Attack="attack",t.Die="die",t.Standby="standby",t.Walk="walk",t.WalkBack="walkback"}(n.ObjTurret1AniEnum||(n.ObjTurret1AniEnum={})),function(t){t.Attack="attack",t.Die="die",t.Revive="revive",t.Walk="walk",t.Standby="standby"}(n.ObjTurret2AniEnum||(n.ObjTurret2AniEnum={})),cc._RF.pop()},{}],App:[function(t,e,i){"use strict";cc._RF.push(e,"161d6fAuqlH35CgNvSsYExB","App");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ResMgr"),l=o("CCEvent"),c=o("ViewMgr"),u=o("Singleton"),p=o("DataMgr"),d=o("SceneMgr"),h=o("Utils"),f=o("AudioMgr"),g=o("BagMgr"),y=o("TimeMgr"),m=o("CycleMgr"),v=o("CountingMgr"),_=o("OutputMgr"),C=o("LevelServer"),b=o("RoleServer"),S=o("EventMgr"),O=o("CardMgr"),E=o("Tbl"),I=o("TaskMgr"),w=o("VipMgr"),A=o("WarHonorMgr"),R=o("GuideMgr"),T=o("LoggerUtils"),P=o("AdMgr"),L=o("ShopMgr"),M=o("CommonCfgUtils"),k=o("redPointMgr"),B=o("SystemOpenMgr"),V=o("NodePoolMgr"),N=o("RecorderMgrTT"),D=o("HeroMgr"),F=o("EquipmentMgr"),U=o("HongbaoMgr"),j=o("sdkMgr"),G=o("ChannelMgr"),x=function(t){function e(){var e=t.call(this)||this;return e.initialize(),e}return a(e,t),e.prototype.initialize=function(){e.data=p.default.getInstance(),e.event=S.default.getInstance(),e.timeMgr=y.default.getInstance(),e.resMgr=s.default.getInstance(),e.viewMgr=c.default.getInstance(),e.audioMgr=f.default.getInstance(),e.sceneMgr=d.default.getInstance(),e.levelServer=C.default.getInstance(),e.roleServer=b.default.getInstance(),e.guideMgr=R.default.getInstance(),e.adMgr=P.default.getInstance(),e.recordMgrTT=N.default.getInstance(),e.heroMgr=D.default.getInstance(),e.sdkMgr=j.default.getInstance(),e.channelMgr=G.default.getInstance()},e.lazyInitialize=function(){this.isLazyInitialize||(this.isLazyInitialize=!0,e.cycleMgr=m.default.getInstance(),e.nodePoolMgr=V.default.getInstance(),e.countingMgr=v.default.getInstance(),e.outputMgr=_.default.getInstance(),e.systemOpenMgr=B.default.getInstance(),e.cardMgr=O.default.getInstance(),e.warHonorMgr=A.default.getInstance(),e.vipMgr=w.default.getInstance(),e.taskMgr=I.default.getInstance(),e.shopMgr=L.default.getInstance(),e.equipmentMgr=F.default.getInstance(),e.bagMgr=g.default.getInstance(),e.redPointMgr=k.default.getInstance(),e.hongbaoMgr=U.default.getInstance(),this.initData(),this.onFix(),e.timeMgr.registerTimer(this.onTick,this,1))},e.getServerTime=function(){return null==e.timeMgr||null==e.timeMgr.getServerTime()?e.getTime():e.timeMgr.getServerTime()/1e3},e.getRunningTime=function(){return e.timeMgr.getRunningTime()/1e3},e.getTime=function(){return(new Date).getTime()/1e3},e.getGravity=function(){return M.default.get("Gravity").number},e.onFix=function(){e.taskMgr.onFix(),e.vipMgr.onFix(),e.systemOpenMgr.onFix(),e.bagMgr.onFix(),e.hongbaoMgr.onFix(),e.roleServer.onFix()},e.onTick=function(t){e.taskMgr.onTick(t),e.adMgr.onTick(t)},e.initData=function(){this.btnDefaultSoundId=E.default.CommonTable.findByKey("ButtonDefaultSoundId").number},e.prototype.finalize=function(){cc.log("TODO \u91ca\u653e\u7ba1\u7406\u5668"),e.timeMgr.finalize()},e.getItem=function(t,e){var i=cc.sys.localStorage.getItem(t);return i?"object"==typeof e?JSON.parse(i):"number"==typeof e?Number(i):i:e},e.getPlatformType=function(){return cc.sys.platform},e.setItem=function(t,e){"object"==typeof e?cc.sys.localStorage.setItem(t,JSON.stringify(e)):cc.sys.localStorage.setItem(t,e)},e.instantiate=function(t,e){var i=cc.instantiate(t);return e?i.getComponent(e):i},e.onClick=function(t,i){var n=null;t instanceof cc.Button?n=t.node:t instanceof cc.Node&&(n=t),null!=n&&(n.targetOff(this),n.on(l.default.CLICK,function(){e.audioMgr.playSoundByResId(this.btnDefaultSoundId),i(this)},this))},e.onClickWithoutSound=function(t,e){var i=null;t instanceof cc.Button?i=t.node:t instanceof cc.Node&&(i=t),null!=i&&(i.targetOff(this),i.on(l.default.CLICK,function(){e(this)},this))},e.offClick=function(t,e,i){t.node.off(l.default.CLICK,e,i)},e.onTouch=function(t,e,i){t.on(l.default.TOUCH_START,e,i)},e.offTouch=function(t,e,i){t.off(l.default.TOUCH_START,e,i)},e.onMove=function(t,e,i){t.on(l.default.TOUCH_MOVE,e,i)},e.offMove=function(t,e,i){t.off(l.default.TOUCH_MOVE,e,i)},e.onTouched=function(t,e,i){t.on(l.default.TOUCH_END,e,i)},e.offTouched=function(t,e,i){t.off(l.default.TOUCH_END,e,i)},e.onCancel=function(t,e,i){t.on(l.default.TOUCH_CANCEL,e,i)},e.offCancel=function(t,e,i){t.off(l.default.TOUCH_CANCEL,e,i)},e.setMulTestDemage=function(t){void 0===t&&(t=1),this.testMulDemage*=t},e.getMulTestDemage=function(){return this.testMulDemage||1},e.ocCallback=function(t,e){JSON.parse(e),T.default.info("eventName = ",t),T.default.info("jsonStr = ",e)},e.setRockerLength=function(t){this.testRockerLength=t,cc.game.emit(l.default.ROCKER_LENGTH_CHANGE,t)},e.getRockerLength=function(){return this.testRockerLength},e.setRockerCheckTime=function(t){this.testRockerCheckTime=t,cc.game.emit(l.default.ROCKER_CHECKTIME_CHANGE,t)},e.getRockerCheckTime=function(){return this.testRockerCheckTime},e.channelMgr=null,e.sdkMgr=null,e.hongbaoMgr=null,e.recordMgrTT=null,e.nodePoolMgr=null,e.data=null,e.event=null,e.sceneMgr=null,e.resMgr=null,e.viewMgr=null,e.audioMgr=null,e.utils=h.default,e.systemOpenMgr=null,e.bagMgr=null,e.cardMgr=null,e.timeMgr=null,e.cycleMgr=null,e.taskMgr=null,e.warHonorMgr=null,e.vipMgr=null,e.countingMgr=null,e.logger=null,e.outputMgr=null,e.levelServer=null,e.shopMgr=null,e.equipmentMgr=null,e.roleServer=null,e.heroMgr=null,e.guideMgr=null,e.isLazyInitialize=null,e.testMulDemage=1,e.testRockerLength=30,e.testRockerCheckTime=.25,e.adMgr=null,e}(u.default);r.default=x,cc._RF.pop()},{}],ArrayUtils:[function(t,e,i){"use strict";cc._RF.push(e,"d4e47R3rj1FGp/BFeUS7NwY","ArrayUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Utils"),a=function(){function t(){}return t.filter=function(t,e){for(var i=[],n=0;n<t.length;n++)e(t[n],n)&&i.push(t[n]);return i},t.filterFirst=function(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i))return t[i]},t.safeRemove=function(e,i){if(0!=e.length){for(var n=[],o=0;o<e.length;o++)i(o,e[o])&&n.push(o);for(o=n.length-1;o>=0;o--)t.remove(e,n[o])}},t.caculateFinalId=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var o=n[i];o[1]/1e4>r.default.rand()&&e.push(o[0])}return e},t.merge=function(t,e){for(var i=0;i<e.length;i++)t.push(e[i])},t.concat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.concat.apply(t,e)},t.insert=function(t,e,i){t.splice(e,0,i)},t.remove=function(t,e,i){return void 0===i&&(i=1),t.splice(e,i)},t.removeVal=function(t,e){var i=this.keyOf(t,e);null!=i&&this.remove(t,i)},t.keyOf=function(t,e){for(var i=0;i<t.length;i++)if(e==t[i])return i;return null},t.isInside=function(t,e){return null!=this.keyOf(t,e)},t.swap2=function(t,e,i,n,o){var r=t[e][i];t[e][i]=t[n][o],t[n][o]=r},t.clone=function(t){return t.slice()},t.sort=function(t,e){t.sort(e)},t.bubbleSort=function(t,e){for(var i=t.length,n=0;n<i;n++)for(var o=0;o<i-1-n;o++)if(e(t[o],t[o+1])){var r=t[o+1];t[o+1]=t[o],t[o]=r}return t},t.Max=function(t,e){if(t){if(0!==t.length){for(var i=t[0],n=1;n<t.length;n++){var o=t[n];e(i,o)&&(i=o)}return i}cc.error("arr.length === 0")}else cc.error("arr == null")},t.splitArray=function(t,e){if(1==e||null==e)return t;for(var i=[],n=0;n<t.length;n+=e){for(var o=[],r=n;r<n+e;r++)o.push(t[r]);i.push(o)}return i},t.getNumByWeight=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i][1];var n=r.default.rand(e);for(i=0;i<t.length;i++)if(n>=(e-=t[i][1]))return t[i][0]},t.removeRepeat=function(e){for(var i=0;i<e.length;i++)for(var n=e[i],o=i+1;o<e.length;o++)n==e[o]&&t.remove(e,o)},t}();o.default=a,cc._RF.pop()},{}],ArrowView:[function(t,e,i){"use strict";cc._RF.push(e,"634eaxQV99Kr7GMk1N5g72z","ArrowView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("SpineUtils"),c=o("BaseView"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){var e=this;t.prototype.start.call(this);var i=this.getC("arrow"),n=l.default.createSpineByResId(92,!0,i);if(n){var o=n.getComponent(sp.Skeleton);if(o){o.setAnimation(0,"play",!1);var r=5;o.setCompleteListener(function(){--r<=0?e.closeSelf(!1):o.addAnimation(0,"play",!1)})}else this.closeSelf(!1)}else this.closeSelf(!1)},s([p],e)}(c.default));r.default=d,cc._RF.pop()},{}],AtlasUtils:[function(t,e,i){"use strict";cc._RF.push(e,"cb709czfGBHv4Sa/EHQLWg3","AtlasUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getSpriteFrame=function(t,e){var i=new RegExp("/","g"),n=e.replace(i,"-");return t.getSpriteFrame(n)},t}();n.default=o,cc._RF.pop()},{}],AttributeConst:[function(t,e,i){"use strict";cc._RF.push(e,"5f926wWBuNOCKzHAqrG+wDC","AttributeConst");var n,o,r,a=i;Object.defineProperty(a,"__esModule",{value:!0}),a.AttrTypeLimit=a.AttrConst=a.AttrTypeEnum=void 0,function(t){t[t.hpmax=10]="hpmax",t[t.hp=11]="hp",t[t.attackType=20]="attackType",t[t.attack=21]="attack",t[t.attackPao1=22]="attackPao1",t[t.attackPao1Times=23]="attackPao1Times",t[t.attackPao2=24]="attackPao2",t[t.attackPao2Times=25]="attackPao2Times",t[t.attackPao3=26]="attackPao3",t[t.attackPao3Times=27]="attackPao3Times",t[t.attackPao4=28]="attackPao4",t[t.attackPao4Times=29]="attackPao4Times",t[t.defense=30]="defense",t[t.dodge=40]="dodge",t[t.hit=50]="hit",t[t.penetration=60]="penetration",t[t.crit=70]="crit",t[t.critDamage=71]="critDamage",t[t.bloodSucking=80]="bloodSucking",t[t.hitHealing=81]="hitHealing",t[t.bloodSuckingChance=82]="bloodSuckingChance",t[t.hitHealingChance=83]="hitHealingChance",t[t.attackSpeed=100]="attackSpeed",t[t.attackRange=101]="attackRange",t[t.speed=110]="speed",t[t.jumpTime=120]="jumpTime",t[t.jumpSpeed=121]="jumpSpeed",t[t.penetrate=130]="penetrate",t[t.scale=200]="scale",t[t.holdLimitTime=205]="holdLimitTime",t[t.hitDefense=210]="hitDefense",t[t.bedamageDefense=211]="bedamageDefense",t[t.frozenDefense=212]="frozenDefense",t[t.reduceDamagePrecent=220]="reduceDamagePrecent",t[t.throughNum=1e3]="throughNum",t[t.oneHitOneKill=1001]="oneHitOneKill"}(r=a.AttrTypeEnum||(a.AttrTypeEnum={})),a.AttrConst=((n={})[r.hpmax]={ChineseName:"Max HP",color:cc.color(85,242,68)},n[r.hp]={ChineseName:"Current HP",color:cc.color(255,255,255)},n[r.attackType]={ChineseName:"Attack type",color:cc.color(255,255,255)},n[r.attack]={ChineseName:"ATK",color:cc.color(255,219,75)},n[r.defense]={ChineseName:"Defense",color:cc.color(255,255,255)},n[r.dodge]={ChineseName:"Dodge",color:cc.color(52,190,235),isShowPrecent:!0},n[r.hit]={ChineseName:"Hit",color:cc.color(255,255,255)},n[r.penetration]={ChineseName:"Block",color:cc.color(255,255,255)},n[r.crit]={ChineseName:"Critical hit",color:cc.color(255,72,81),isShowPrecent:!0},n[r.critDamage]={ChineseName:"Critical damage",color:cc.color(161,79,218)},n[r.bloodSucking]={ChineseName:"Vampire",color:cc.color(255,255,255)},n[r.hitHealing]={ChineseName:"Hit recovery",color:cc.color(255,255,255)},n[r.bloodSuckingChance]={ChineseName:"Vampire odds",color:cc.color(255,255,255),isShowPrecent:!0},n[r.hitHealingChance]={ChineseName:"Hit recovery odds",color:cc.color(255,255,255)},n[r.attackSpeed]={ChineseName:"Attack speed",color:cc.color(255,255,255)},n[r.attackRange]={ChineseName:"Attack range",color:cc.color(366,103,12)},n[r.speed]={ChineseName:"Move speed",color:cc.color(255,255,255)},n[r.jumpTime]={ChineseName:"Jump counts",color:cc.color(255,255,255)},n[r.jumpSpeed]={ChineseName:"Jump initial speed",color:cc.color(255,255,255)},n[r.penetrate]={ChineseName:"Penetrate",color:cc.color(255,255,255)},n[r.scale]={ChineseName:"Ads Scale",color:cc.color(255,255,255)},n[r.holdLimitTime]={ChineseName:"Time for full power",color:cc.color(255,255,255)},n[r.hitDefense]={ChineseName:"Hit defense",color:cc.color(255,255,255),isShowPrecent:!0},n[r.bedamageDefense]={ChineseName:"Damage defense",color:cc.color(255,255,255),isShowPrecent:!0},n[r.frozenDefense]={ChineseName:"Frozen defense",color:cc.color(255,255,255),isShowPrecent:!0},n[r.reduceDamagePrecent]={ChineseName:"% of Damage Reduction(All Damage)",color:cc.color(255,255,255),isShowPrecent:!0},n[r.throughNum]={ChineseName:"No of bullet penetrations",color:cc.color(255,255,255)},n[r.oneHitOneKill]={ChineseName:"One-Hit Kill",color:cc.color(255,255,255),isShowPrecent:!0},n),a.AttrTypeLimit=((o={})[r.reduceDamagePrecent]=[0,7e3],o),cc._RF.pop()},{}],AttributeTable:[function(t,e,i){"use strict";cc._RF.push(e,"37869Ql4b1AZJVw6KMkyckp","AttributeTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("AttributeVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("attribute_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],AttributeVO:[function(t,e,i){"use strict";cc._RF.push(e,"5f8e9/XfJxIC5Q3aeQQqiba","AttributeVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.desc=t[2],this.isPrecent=t[3]},cc._RF.pop()},{}],Attribute:[function(t,e,i){"use strict";cc._RF.push(e,"83e42pHewJFV7c7GSgirWdv","Attribute");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("AttributeConst"),a=function(){function t(){this._fightPoint=null,this._attributeArray=new Map}return t.prototype.reset=function(){this._fightPoint=null},t.prototype.initByConfig=function(t){this.initAttr(t),this.calcAttribute()},t.prototype.initAttr=function(t){for(var e in t)if(r.AttrTypeEnum[e]){var i=t[e];this.setAttr(r.AttrTypeEnum[e],i),r.AttrTypeEnum[e]==r.AttrTypeEnum.hpmax&&this.setAttr(r.AttrTypeEnum.hp,i)}},t.prototype.initByOther=function(t){for(var e in this.reset(),t)if(r.AttrTypeEnum[e]){var i=t[e];this.setAttr(r.AttrTypeEnum[e],i.value,i.ratio)}this.calcAttribute()},t.prototype.diffAttrByConfig=function(t,e){this._fightPoint=null;var i={};for(var n in e)r.AttrTypeEnum[n]&&(i[n]=e[n]-(t[n]||0));return i},t.prototype.addAttrByConfig=function(t){for(var e in t)if(r.AttrTypeEnum[e]){var i=t[e];this.addAttr(r.AttrTypeEnum[e],i),r.AttrTypeEnum[e]==r.AttrTypeEnum.hpmax&&this.addAttr(r.AttrTypeEnum.hp,i)}},t.prototype.deductAttrByConfig=function(t){this._fightPoint=null,this.initAttr(t)},t.prototype.addOtherAttribute=function(t){for(var e in this._fightPoint=null,t._attributeArray){var i=t._attributeArray[e];this.addAttr(r.AttrTypeEnum[e],i.final)}},t.prototype.getAttrAllInfo=function(){return this._attributeArray},t.prototype.getAttrInfo=function(t){return"number"!=typeof t&&(t=r.AttrTypeEnum[t]),this._attributeArray[t]||{}},t.prototype.getAttr=function(t){if(r.AttrTypeEnum[t])return"number"!=typeof t&&(t=r.AttrTypeEnum[t]),this._attributeArray[t]?this._attributeArray[t].final:0;cc.error("Attribute:getAttr(attrType) attrType:%s",t)},t.prototype.setAttr=function(t,e,i){"number"!=typeof t&&(t=r.AttrTypeEnum[t]),t!=r.AttrTypeEnum.hp&&(this._fightPoint=null),(e=Math.ceil(e||0))<0&&(e=0),(i=Math.ceil(i||0))<0&&(i=0),this._attributeArray[t]||(this._attributeArray[t]={value:0,ratio:0,final:0}),this._attributeArray[t].value=e,this._attributeArray[t].ratio=i,this._attributeArray[t].final=Math.ceil(e+e*i*1e-4)},t.prototype.addAttr=function(t,e,i){if("number"!=typeof t&&(t=r.AttrTypeEnum[t]),r.AttrTypeEnum[t]){t!=r.AttrTypeEnum.hp&&(this._fightPoint=null),e=Math.ceil(e||0),i=Math.ceil(i||0);var n=this.getAttr(t);this._attributeArray[t]||(this._attributeArray[t]={value:0,ratio:0,final:0});var o=this._attributeArray[t];o.value=o.value+e,o.value<0&&(o.value=0),o.ratio=o.ratio+i,o.final=Math.ceil(o.value+o.value*o.ratio*1e-4);var a=r.AttrTypeLimit[r.AttrTypeEnum[t]];a&&(o.final<a[0]&&(o.final=a[0]),o.final>a[1]&&(o.final=a[1]));var s=this.getAttr(t)-n;if(t==r.AttrTypeEnum.hpmax)s>0&&this.addAttr(r.AttrTypeEnum.hp,s);else if(t==r.AttrTypeEnum.hp){var l=this.getAttr(r.AttrTypeEnum.hpmax);this.getAttr(r.AttrTypeEnum.hp)>l&&this.setAttr(r.AttrTypeEnum.hp,l,0)}return s}cc.error("Attribute:addAttr(attrType, value, ratio) attrType:%s",t)},t.prototype.calcAttribute=function(){this.calcFightpoint()},t.prototype.calcFightpoint=function(){},t.prototype.getAttrShow=function(){var t=[];for(var e in this.getAttrAllInfo()){var i=r.AttrConst[e];if(i){var n=this._attributeArray[e];t.push({ChineseName:i.ChineseName,value:""+n.final,attrType:e,attrStrType:r.AttrTypeEnum[e]})}}return t},t.prototype.forEach=function(t){for(var e in this._attributeArray)t(r.AttrTypeEnum[e],this._attributeArray[e])},t}();o.default=a,cc._RF.pop()},{}],AudioMgr:[function(t,e,i){"use strict";cc._RF.push(e,"2bb00cScGZIOb0FkSLZl50K","AudioMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Singleton"),l=o("ENUMS"),c=o("RES"),u=o("App"),p=o("ArrayUtils"),d=o("Tbl"),h=o("SkillConst"),f=function(t){function e(){var e=t.call(this)||this;return e._vibrate=!0,e._musicVolume=-1,e._soundVolume=-1,e._scene=null,e.music=-1,e.sounds={},e.soundsVolume={},e.occupySoundIdList=[],e.musicVolume=u.default.getItem(l.STORAGE.MUSIC_VOLUME,1),e.soundVolume=u.default.getItem(l.STORAGE.SOUND_VOLUME,1),e}return a(e,t),Object.defineProperty(e.prototype,"vibrate",{get:function(){return this._vibrate},set:function(t){this._vibrate=t,u.default.setItem(l.STORAGE.VIBRATE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(t){this._musicVolume=t,-1!=this.music&&(0==t?cc.audioEngine.pauseMusic():cc.audioEngine.resumeMusic(),cc.audioEngine.setMusicVolume(t)),u.default.setItem(l.STORAGE.MUSIC_VOLUME,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(t){for(var e in this._soundVolume=t,this.sounds){var i=this.sounds[e];cc.audioEngine.getState(i)!=cc.audioEngine.AudioState.ERROR&&cc.audioEngine.setVolume(i,t)}u.default.setItem(l.STORAGE.SOUND_VOLUME,t)},enumerable:!1,configurable:!0}),e.prototype.playMusic=function(t,e){void 0===e&&(e=!0),-1!=this.music&&cc.audioEngine.stop(this.music);var i=u.default.resMgr.getAudioClip(t);return i&&(this.music=cc.audioEngine.playMusic(i,e),cc.audioEngine.setMusicVolume(this._musicVolume)),this.music},e.prototype.playMusicByResId=function(t,e){void 0===e&&(e=!0);var i=d.default.AudioTable.findById(t).param1,n=c.ClientRes[i];-1!=this.music&&cc.audioEngine.stop(this.music);var o=u.default.resMgr.getAudioClip(n.url);return o&&(this.music=cc.audioEngine.playMusic(o,e),cc.audioEngine.setMusicVolume(this._musicVolume*this.getSoundVolume(t))),this.music},e.prototype.stopMusic=function(){-1!=this.music&&cc.audioEngine.getState(this.music)!=cc.audioEngine.AudioState.ERROR&&(cc.audioEngine.stopMusic(),this.music=-1)},e.prototype.playSound=function(t,e){var i=this;if(void 0===e&&(e=!1),0==this._soundVolume)return-1;var n=u.default.resMgr.getAudioClip(t);if(n){var o=cc.audioEngine.play(n,e,this._soundVolume);return cc.audioEngine.setFinishCallback(o,function(){delete i.sounds[o]}),o}return-1},e.prototype.test_occupySoundResId=function(t,e){for(var i=0;i<this.occupySoundIdList.length;i++){var n=this.occupySoundIdList[i],o=n[0];if(n[1],t==o){p.default.remove(this.occupySoundIdList,i);break}}this.occupySoundIdList.push([t,e])},e.prototype.test_getOccupyResId=function(t){for(var e=0;e<this.occupySoundIdList.length;e++){var i=this.occupySoundIdList[e],n=i[0],o=i[1];if(t==n)return o}},e.prototype.getSoundVolume=function(t){if(this.soundsVolume[String(t)])return this.soundsVolume[String(t)];var e=d.default.ClientTable.findById(t);if(!e)return 1;if(e.resType==h.ResourceTypeEnum.Audio){var i=e.param2||1;return i>1&&(i=1),this.soundsVolume[String(t)]=i,i}return 1},e.prototype.playSoundByResId=function(t,e){var i=this;void 0===e&&(e=!1);var n=d.default.AudioTable.findById(t).param1,o=this.test_getOccupyResId(n);o&&(n=o);var r=u.default.sceneMgr.getScene().getCoolDownMgr().getCoolDown(String(n));if(!r||r.do()){var a=c.ClientRes[n];if(0==this._soundVolume)return-1;var s=this.getSoundVolume(n),l=u.default.resMgr.getAudioClip(a.url);if(l){var p=cc.audioEngine.play(l,e,this._soundVolume*s);return cc.audioEngine.setFinishCallback(p,function(){delete i.sounds[p]}),p}return-1}},e.prototype.stopSound=function(t){-1!=t&&cc.audioEngine.getState(t)!=cc.audioEngine.AudioState.ERROR&&(cc.audioEngine.stop(t),delete this.sounds[t])},e.prototype.stopSounds=function(){for(var t in this.sounds){var e=this.sounds[t];cc.audioEngine.getState(e)!=cc.audioEngine.AudioState.ERROR&&(cc.audioEngine.stop(e),delete this.sounds[e])}},e}(s.default);r.default=f,cc._RF.pop()},{}],AudioTable:[function(t,e,i){"use strict";cc._RF.push(e,"eef1cYzNq1ESo/DiXzmCVef","AudioTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("AudioVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("audio_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],AudioVO:[function(t,e,i){"use strict";cc._RF.push(e,"027b2I1Tv5L7J1g32rijtp8","AudioVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.param1=t[1],this.param2=t[2]},cc._RF.pop()},{}],BagConst:[function(t,e,i){"use strict";cc._RF.push(e,"ee9eb+jMNxARprYHVF8S7rh","BagConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.BagSourceEnum=n.ItemIdEnum=n.ItemStampType=n.ItemTypeEnum=void 0,function(t){t[t.Currency=1]="Currency",t[t.Item=2]="Item",t[t.Gift=3]="Gift",t[t.RealItem=4]="RealItem",t[t.BiaoXianItem=5]="BiaoXianItem",t[t.Equip=6]="Equip",t[t.EquipComponents=7]="EquipComponents",t[t.BuffBook=8]="BuffBook",t[t.InitiativeSkill=9]="InitiativeSkill",t[t.Card=10]="Card"}(n.ItemTypeEnum||(n.ItemTypeEnum={})),function(t){t[t.Mini=0]="Mini",t[t.Big=1]="Big",t[t.God=2]="God"}(n.ItemStampType||(n.ItemStampType={})),function(t){t[t.Gold=1]="Gold",t[t.Diamond=2]="Diamond",t[t.TaskActivity=3]="TaskActivity",t[t.VipExp=4]="VipExp",t[t.WarHonorExp=5]="WarHonorExp",t[t.MythFragments=6]="MythFragments"}(n.ItemIdEnum||(n.ItemIdEnum={})),function(t){t[t.Unknow=0]="Unknow",t[t.MonsterDrop=1]="MonsterDrop",t[t.RewardSelect=10]="RewardSelect",t[t.UpgradeCard=100]="UpgradeCard",t[t.OfflineReward=101]="OfflineReward",t[t.SigninReward=102]="SigninReward",t[t.TaskAward=1e3]="TaskAward",t[t.TaskActivityAward=1001]="TaskActivityAward",t[t.ShopBuyCost=2e3]="ShopBuyCost",t[t.ShopBuyGet=2001]="ShopBuyGet",t[t.EquipmentSell=3e3]="EquipmentSell",t[t.EquipmentStrengthenCost=3001]="EquipmentStrengthenCost",t[t.EquipmentImproveTier=3002]="EquipmentImproveTier",t[t.FinalReward=4e3]="FinalReward",t[t.AddCollect=4001]="AddCollect",t[t.AddMy=4002]="AddMy"}(n.BagSourceEnum||(n.BagSourceEnum={})),cc._RF.pop()},{}],BagMgr:[function(t,e,i){"use strict";cc._RF.push(e,"41c9eOPGqtGI4WbeaLmHSri","BagMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("DataHelper"),c=o("BagConst"),u=o("CommonConst"),p=o("ArrayUtils"),d=o("TypeUtils"),h=o("App"),f=o("CCEvent"),g=o("TaskConst"),y=o("GuideMgr"),m=o("UI"),v=function(t){function e(){var e=t.call(this)||this;return e.itemList=null,e.oldItemList=null,e.init(u.DataNameEnum.BagMgr),e.initBagData(),e}return a(e,t),e.prototype.initBagData=function(){this.itemList=this.getValue("itemList",this.dataFix())},e.prototype.dataFix=function(){return[]},e.prototype.onFix=function(){if(h.default.roleServer.isNewHand()){var t=s.default.CommonTable.findByKey("Player_Init_Resource").multiArrays;this.addItemList(t,c.BagSourceEnum.Unknow)}else h.default.guideMgr.isFinishGuide(y.GuideLineEnum.GuideClickEquipment)||0!=h.default.equipmentMgr.getEquipmentNum()||this.addItem(1000100,1)},e.prototype.getInitialItemList=function(){var t=[],e=s.default.CommonTable.findByKey("Player_Init_Resource").multiArrays;if(e)for(var i in e)t.push({id:e[i][0],num:e[i][1]});return t},e.prototype.getItemList=function(){return this.itemList},e.prototype.getItemListByType=function(t){var e=this.getItemList(),i=[];for(var n in e){var o=e[n],r=o.id;s.default.ItemTable.findById(r).type==t&&i.push(o)}return i},e.prototype.setItemList=function(){this.setValue("itemList",this.getItemList())},e.prototype.getHasObtainItemList=function(){if(null==this.oldItemList){for(var t=[],e=0,i=this.getItemList();e<i.length;e++){var n=i[e];t.push(n)}this.oldItemList=this.getValue("oldItemList",t)}return this.oldItemList},e.prototype.setHasObtainItemList=function(){this.setValue("oldItemList",this.getHasObtainItemList())},e.prototype.checkNewItem=function(t){for(var e=this.getHasObtainItemList(),i=0,n=e;i<n.length;i++)if(n[i]==t)return;e.push(t),this.setHasObtainItemList()},e.prototype.getItemNum=function(t){for(var e=0,i=0,n=this.getItemList();i<n.length;i++){var o=n[i];o.id==Number(t)&&(e+=o.num)}return e},e.prototype.isItemListEnough=function(t){if(null==t)return!0;var e=[];for(var i in t){var n=t[i],o=0,r=0;if(d.default.isObj(n))o=n.itemId||n.id,r=n.amount||n.num;else{if(!d.default.isArray(n))return cc.error("isItemListEnough(itemList) itemList:",t),!1;o=n[1],r=n[2]}e[i]?e[o]=e[o]+r:e[o]=r}for(var i in e){if(null==i||null==e[i])return cc.error("isItemListEnough(itemList) itemList:",t),!1;if(this.getItemNum(Number(i))<e[i])return!1}return!0},e.prototype.addItem=function(t,e,i){if(void 0===e&&(e=1),void 0===i&&(i=c.BagSourceEnum.Unknow),0==(e=Math.floor(e)))return!0;var n=s.default.ItemTable.findById(t);if(null==n)return cc.error("addItem(itemId, num) \u627e\u4e0d\u5230\u914d\u7f6e\u8868\uff01 itemId:",t),!1;if(h.default.taskMgr.incrStep(g.TaskEventType.ItemGet,e,[t,i]),null!=n.autoUse&&1==n.autoUse)return this.useItem(n,e),!0;switch(t){case c.ItemIdEnum.TaskActivity:return void h.default.taskMgr.addActivity(e);case c.ItemIdEnum.VipExp:return void h.default.vipMgr.addExp(e);case c.ItemIdEnum.WarHonorExp:return void h.default.warHonorMgr.addProgress(e)}var o=n.type;if(this.checkNewItem(t,o),o!=c.ItemTypeEnum.Equip)if(o!=c.ItemTypeEnum.BuffBook)if(o!=c.ItemTypeEnum.InitiativeSkill){for(var r=this.getItemList(),a=!1,l=0,u=0,p=r;u<p.length;u++){var d=p[u];d.id==Number(t)&&(d.num=d.num+e,l=d.num,a=!0)}if(!a){var f={id:Number(t),num:e};r.push(f),l=e}this.setItemList(),this.handleItemChange(Number(t),e,l,i)}else h.default.roleServer.studySkillItem(t),cc.warn("addInitiativeSkill ,itemId = %s",t);else h.default.roleServer.studySkillItem(t),cc.warn("todo RoleServer");else h.default.equipmentMgr.addEquipment(t)},e.prototype.isEnoughGold=function(t){return t<=this.getGoldNum()},e.prototype.isItemEnough=function(t,e){return this.getItemNum(t)>=e},e.prototype.getGoldNum=function(){for(var t=0,e=0,i=this.getItemList();e<i.length;e++){var n=i[e];1==n.id&&(t+=n.num)}return t},e.prototype.getDiamondNum=function(){for(var t=0,e=0,i=this.getItemList();e<i.length;e++){var n=i[e];2==n.id&&(t+=n.num)}return t},e.prototype.addGold=function(t,e){return void 0===e&&(e=c.BagSourceEnum.Unknow),this.addItem(1,t,e)},e.prototype.addDiamond=function(t,e){return void 0===e&&(e=c.BagSourceEnum.Unknow),this.addItem(2,t,e)},e.prototype.removeGold=function(t,e){return void 0===e&&(e=c.BagSourceEnum.Unknow),this.removeItem(1,t,e)},e.prototype.removeDiamond=function(t,e){return void 0===e&&(e=c.BagSourceEnum.Unknow),this.removeItem(2,t,e)},e.prototype.removeItem=function(t,e,i){if(void 0===i&&(i=c.BagSourceEnum.Unknow),0==(e=Math.ceil(e)))return!0;if(this.getItemNum(Number(t))<e)return t==c.ItemIdEnum.Gold&&h.default.viewMgr.showUI(m.UI.GET_GOLD),t==c.ItemIdEnum.Diamond&&h.default.viewMgr.showUI(m.UI.GET_DIAMOND),cc.error("\u9053\u5177\u6570\u91cf\u4e0d\u8db3, itemId: %s",t),!1;for(var n=0,o=e,r=this.getItemList(),a=0,s=r;a<s.length;a++){var l=s[a];if(l.id==Number(t)){var u=l.num<o&&l.num||o;if(o-=u,l.num=l.num-u,n=l.num,0==o)break}}return p.default.safeRemove(r,function(t,e){return 0==e.num}),this.setItemList(),h.default.taskMgr.incrStep(g.TaskEventType.ItemCost,e,[t,i]),this.handleItemChange(Number(t),-e,n,i),!0},e.prototype.formatItemList=function(t,e){void 0===e&&(e=!1);var i=[];if(null==t||0==t.length)return i;if(1==e)for(var n=0,o=t;n<o.length;n++)l=l=o[n],i.push({itemId:l[0],amount:l[1]});else{for(var r=new Map,a=0,s=t;a<s.length;a++){var l;l=l=s[a],0!=r.has(l[0])?r.get(l[0]).amount+=l[1]:r.set(l[0],{itemId:l[0],amount:l[1]})}r.forEach(function(t){i.push(t)})}return i},e.prototype.addItemList=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=n[i],r=0,a=0;if("[object Array]"==Object.prototype.toString.call(o))r=(o=o)[0],a=o[1];else{if("[object Object]"!=Object.prototype.toString.call(o)){cc.error("addItemList(itemList) type:%s itemList:",Object.prototype.toString.call(o),t);continue}r=(o=o).itemId||o.id,a=o.amount||o.num}this.addItem(r,a,e)}},e.prototype.removeItemList=function(t,e){if(void 0===e&&(e=c.BagSourceEnum.Unknow),null==t)return!0;for(var i=0,n=t;i<n.length;i++){var o=(l=n[i]).id||l.itemId||Number(0),r=l.amount||l.num||Number(0);if(0==this.isItemEnough(o,r))return o==c.ItemIdEnum.Gold?h.default.viewMgr.showUI(m.UI.GET_GOLD):o==c.ItemIdEnum.Diamond&&h.default.viewMgr.showUI(m.UI.GET_DIAMOND),!1}for(var a=0,s=t;a<s.length;a++){var l=s[a];if(o=0,r=0,d.default.isObj(l))o=l.itemId||l.id,r=l.amount||l.num;else{if(!d.default.isArray(l))return cc.error("addItemList(itemList) itemList:",t),!1;o=l[1],r=l[2]}this.removeItem(o,r,e)}return!0},e.prototype.useItem=function(){},e.prototype.handleItemChange=function(t,e,i,n){void 0===n&&(n=c.BagSourceEnum.Unknow),h.default.event.emit(f.default.BAG_ITEM_CHANGE,{itemId:t,changeNumber:e,ownNum:i,source:n})},e}(l.default);r.default=v,cc._RF.pop()},{}],BaseAi:[function(t,e,i){"use strict";cc._RF.push(e,"ba392XOT9NCmJstK+OBCKtZ","BaseAi");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this._obj=null,this._behaviorList=[],this._obj=t}return t.prototype.getObj=function(){return this._obj},t.prototype.addBehavior=function(t){this._behaviorList.push(t)},t.prototype.doBehavior=function(t){this._behaviorList.splice(0,0,t)},t.prototype.onTick=function(t){if(null!=this._behaviorList&&0!=this._behaviorList.length){var e=this._behaviorList[0];e.onTick(t),e.isFinished()&&this._behaviorList.splice(0,1)}else console.error("\u6ca1\u6709\u6307\u5b9aAI\u884c\u4e3a")},t}();n.default=o,cc._RF.pop()},{}],BaseBehavior:[function(t,e,i){"use strict";cc._RF.push(e,"a3bf8P+HthPVYr3WizTJaCd","BaseBehavior");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,i){void 0===i&&(i=Number.MAX_VALUE),this._owner=null,this._params=null,this._duration=null,this._isFinished=null,this._owner=t,this._params=e,this._duration=i,this._isFinished=!1}return t.prototype.isFinished=function(){return this._isFinished},t.prototype.onTick=function(t){this._duration-=t,this._duration<=0&&(this._isFinished=!0)},t}();n.default=o,cc._RF.pop()},{}],BaseComponent:[function(t,e,i){"use strict";cc._RF.push(e,"7cfafI2SFhOLZFMJepjrM48","BaseComponent");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},l=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var c=o("NodeUtils"),u=o("LoggerUtils"),p=o("App"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._eventMap=[],e._eventRedPointList=[],e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.onDestroy=function(){for(var t=0;t<this._eventMap.length;t++){var e=this._eventMap[t];p.default.event.off(e.type,e.callback,e.target)}for(t=0;t<this._eventRedPointList.length;t++)e=this._eventRedPointList[t],p.default.redPointMgr.removeEventListener(e)},e.prototype.getC=function(t){return c.default.seekC(this.node,t)},e.prototype.seekC=function(t,e){return c.default.seekC(t,e)},e.prototype.fetchUI=function(t,e){var i=p.default.resMgr.getPrefab(t),n=cc.instantiate(i);n?(n.active=!0,e(n)):u.default.error("BaseComponent >>>>>>>> 29 \u52a0\u8f7dUI\u5931\u8d25:",t)},e.prototype.setString=function(t,e){var i=t.getComponent(cc.Label);i||(i=t.getComponent(cc.RichText))?i.string=e:console.error("cant find label or richtext, chekc again!")},e.prototype.eventOn=function(t,e,i){p.default.event.on(t,e,i),this._eventMap.push({type:t,callback:e,target:i})},e.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=p.default.event).emit.apply(e,l([t],i))},e.prototype.eventOnRedPoint=function(t){p.default.redPointMgr.registerEventListener(t),this._eventRedPointList.push(t)},s([h],e)}(cc.Component));r.default=f,cc._RF.pop()},{}],BaseMiniView:[function(t,e,i){"use strict";cc._RF.push(e,"aaf32ZMQqhPuJ19VOr4/Z76","BaseMiniView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("ActionUtils"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e}return a(e,t),e.prototype.exitFromTheLeft=function(t){c.default.sequence(this.node,cc.moveTo(.4,cc.v2(1.5*-cc.winSize.width,this.node.y)).easing(cc.easeExponentialOut()),t)},e.prototype.exitFromTheRight=function(t){c.default.sequence(this.node,cc.moveTo(.4,cc.v2(1.5*cc.winSize.width,this.node.y)).easing(cc.easeExponentialOut()),t)},e.prototype.enterFromTheLeft=function(t){this.node.x=1.5*-cc.winSize.width,c.default.sequence(this.node,cc.moveTo(.4,cc.v2(0,this.node.y)).easing(cc.easeExponentialOut()),t)},e.prototype.enterFromTheRight=function(t){this.node.x=1.5*cc.winSize.width,c.default.sequence(this.node,cc.moveTo(.4,cc.v2(0,this.node.y)).easing(cc.easeExponentialOut()),t)},e.prototype.refresh=function(){},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this.onStart(),this.onAdaptUI(),this.onLaterStart()},e.prototype.onStart=function(){},e.prototype.onLaterStart=function(){},e.prototype.onAdaptUI=function(){},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.setTouchable=function(t){this.mask||(this.mask=new cc.Node("mask"),this.mask.addComponent(cc.Button),this.mask.parent=this.node,this.mask.width=cc.winSize.width,this.mask.height=cc.winSize.height,this.mask.zIndex=100),this.mask.active=!t},s([p],e)}(l.default));r.default=d,cc._RF.pop()},{}],BaseScene:[function(t,e,i){"use strict";cc._RF.push(e,"8320bucpIhIyoxd5ywlHWTo","BaseScene");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("CoolDownMgr"),u=o("Clock"),p=o("Tbl"),d=o("CommonCfgUtils"),h=o("BaseView"),f=o("CCEvent"),g=o("ZIndexConst"),y=o("ArrayUtils"),m=o("ComKeyboard"),v=o("UI"),_=o("ResGroupLoader"),C=o("RES"),b=o("SceneMgr"),S=.5,O=cc._decorator,E=O.ccclass,I=(O.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._coolDownMgr=null,e._clock=null,e._tipsWordList=[],e._tipsBreakTime=S,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._recordScene(),this._initClock(),this.initCoolDownMgr(),this._addEventListenter(),this._initKeyboard()},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._clock&&(this._clock.finalize(),this._clock=null)},e.prototype.onTick=function(){},e.prototype._addEventListenter=function(){this.eventOn(f.default.SHOW_TIPS_WORD,this._showTipsWord_,this),this.eventOn(f.default.KEYBOARD_DOWN,this._keyboardDown_,this),this.eventOn(f.default.EQUIPMENT_SELL_EQUIP_INCOME,this._onEquipmentIncome,this)},e.prototype.update=function(t){this.updateTipsWord(t)},e.prototype._recordScene=function(){l.default.sceneMgr.setScene(this)},e.prototype.updateTipsWord=function(t){if(this._tipsBreakTime-=t,this._tipsBreakTime<0&&this._tipsWordList.length>0){var e=this._tipsWordList[0];y.default.remove(this._tipsWordList,0),this._showTipsWordNow_(e.word)}},e.prototype.resetTipsBreakTime=function(){this._tipsBreakTime=S},e.prototype._showTipsWord_=function(t){this._tipsWordList.push({word:t})},e.prototype._showTipsWordNow_=function(t){var e=this,i=new _.default([C.ResCommon.prefab.COM_TIPS_WORD],null,function(i){if(i)e._showTipsWord_(t);else{var n=cc.instantiate(l.default.resMgr.getPrefab(C.ResCommon.prefab.COM_TIPS_WORD.url));n.parent=l.default.sceneMgr.getSceneLayer(b.SceneLayerConfig.Tips.name),n.zIndex=g.default.TipsLayer,n.getComponent("ComTipsWord").initialize(t)}});i.setMaxTreads(1),i.start()},e.prototype._keyboardDown_=function(t){t.isKeyOn([cc.macro.KEY.f1])&&(l.default.viewMgr.isViewShowing(v.UI.TEST_VIEW)?l.default.viewMgr.hideUI(v.UI.TEST_VIEW):l.default.viewMgr.showUI(v.UI.TEST_VIEW))},e.prototype.showTips=function(){},e.prototype._initClock=function(){var t=this;this._clock=new u.default(1,function(){},function(e){t.onTick(e)})},e.prototype.setClockRate=function(t){this._clock.setRate(t)},e.prototype.closeClock=function(){this._clock.finalize()},e.prototype.pauseClock=function(t){this._clock.setPause(t)},e.prototype.getClock=function(){return this._clock},e.prototype.getTime=function(){return this._clock.getTime()},e.prototype.initCoolDownMgr=function(){this._coolDownMgr=new c.default(this.getClock());for(var t=p.default.AudioTable.findAll(function(){return!0}),e=0;e<t.length;e++){var i=String(t[e].param1);this._coolDownMgr.alloc().init(i,d.default.get("SoundInterval").number)}},e.prototype.getCoolDownMgr=function(){return this._coolDownMgr},e.prototype._onEquipmentIncome=function(t){for(var e=new Map,i=0;i<t.length;i++){var n=t[i],o=n.itemId;if(e.has(o)){var r=e.get(o);r+=n.amount,e.set(o,r)}else e.set(o,n.amount)}var a=[];e.forEach(function(t,e){a.push([e,t])}),l.default.viewMgr.showUI(v.UI.COMMONREWARD_VIEW,a)},e.prototype._initKeyboard=function(){this.node.addComponent(m.default)},s([E],e)}(h.default));r.default=I,cc._RF.pop()},{}],BaseView:[function(t,e,i){"use strict";cc._RF.push(e,"dc054MzMpFEe5hu3TQKSRTG","BaseView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=o("BaseComponent"),u=o("ViewInfo"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this.onAdaptUI()},e.prototype.onDisable=function(){t.prototype.onDisable.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.emit(s.default.CLOSE_VIEW)},e.prototype.onAdaptUI=function(){},e.prototype.closeSelf=function(t){if(void 0===t&&(t=!0),null!=this.node){var e=this.node.getComponent("ViewInfo").getViewUIData();l.default.viewMgr.hideUI(e,t)}},e.prototype.closeNode=function(t,e){void 0===t&&(t=!0);var i=e.getComponent(u.default).getViewUIData();l.default.viewMgr.hideUI(i,t)},e.prototype.getArgs=function(){return this.node.getComponent("ViewInfo").getArgs()},e.prototype.addMask=function(){this.node.getComponent(cc.Button)||this.node.addComponent(cc.Button)},e.prototype.setTouchable=function(t){this.mask||(this.mask=new cc.Node("mask"),this.mask.addComponent(cc.Button),this.mask.parent=this.node,this.mask.width=cc.winSize.width,this.mask.height=cc.winSize.height,this.mask.zIndex=100),this.mask.active=!t},e.prototype.viewFadeOutExit=function(t){var e=this;cc.tween(this.node).to(t,{opacity:0},{easing:"cubicOut"}).call(function(){e.closeSelf()}).start()},e.prototype.viewFadeIn=function(t){this.node.opacity=0,this.node.runAction(cc.fadeIn(t))},e.prototype.viewScaleBig=function(t){this.node.scale=.2,cc.tween(this.node).to(t,{scale:1},{easing:"backInOut"}).start()},e}(c.default);r.default=p,cc._RF.pop()},{}],BattleScene:[function(t,e,i){"use strict";cc._RF.push(e,"623ea9uzLVFvaXTBNhoAO0f","BattleScene");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},l=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var c=o("App"),u=o("ComBattleScene"),p=o("ObjConst"),d=o("ActionUtils"),h=o("LoggerUtils"),f=o("NodeUtils"),g=o("Tbl"),y=o("ENUMS"),m=o("UI"),v=o("ZIndexConst"),_=o("CCEvent"),C=o("GlobalUtils"),b=o("SpineUtils"),S=o("RES"),O=o("PointUtils"),E=o("MathUtils"),I=o("CommonCfgUtils"),w=o("ItemUtils"),A=o("Utils"),R=o("ComGravite"),T=o("ArrayUtils"),P=o("PrefabUtils"),L=o("SummonsConst"),M=o("BagConst"),k=o("BornEnum"),B=o("CommonConst"),V=o("ComCircleRocker"),N=o("CombatConst"),D=o("ComFollowDog"),F=o("EffectConst"),U=o("Recorder"),j=o("RandomRewardUtils"),G=o("AdVideoOPPO"),x=cc._decorator,H=x.ccclass,W=x.property,q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HeroPrefab=null,e.MonsterPrefab=null,e.BOSSPrefab=null,e.ComDropIconPrefab=null,e.Rocker=null,e.RockerCtrl=null,e.touchMove=null,e.touchMoveCtrl=null,e.heroMoveType=null,e.map=null,e.ComMap=null,e.keyDirection=[],e._createMonsterContainer=null,e._damageNumberMgr=null,e._mapMgr=null,e._levelMgr=null,e._bossBlood=null,e._bossBloodCtrl=null,e.tastList=[],e._drawNode=null,e._graphics=null,e._battleUICtrl=null,e._UIMask=null,e._dropAdsorbRange=null,e._otherComList=[],e.dropItemList=[],e.stayCount=0,e.hideCount=0,e.hideCount1=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.isCreateRole(),this.addEventListener(),this.initData(),this.initNode(),this.initLevelElement(),this.initCircleRocker(),this.initBattleUI(),this.initTouchMove(),this.initDamageNumberMgr(),this.initHero(),this.initCamera(),this.initLevelMgr(),this.initKeyboardListent(),this.preLoad(),U.default.getInstance().isShowRecordVideoView()&&d.default.sequence(this.node,1,function(){c.default.viewMgr.showUI(m.UI.RECORD_VIDEO_VIEW)}),c.default.roleServer.enterFight()},e.prototype.start=function(){t.prototype.start.call(this),this.initStart(),c.default.audioMgr.playMusicByResId(1),c.default.channelMgr.initChannel(),U.default.getInstance().dotGameEnterFightingStart(),U.default.getInstance().dotGameBeginEnterFighting();var e=S.ResBattleScene.lazyLoadList||[];c.default.resMgr.loadRes(e),cc.sys.platform==B.PlatformTypeEnum.OPPO_GAME?c.default.adMgr.showBanner(G.OPPOAdUnitIdEnum.Banner_Battle):cc.sys.platform==B.PlatformTypeEnum.VIVO_GAME?c.default.adMgr.createNativeBannerAd():cc.sys.platform==B.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.showBanner(),this.checkHideReward()},e.prototype.checkHideReward=function(){var t=this;if(1==c.default.levelServer.getCurChapter()&&1==c.default.levelServer.getCurLevel()){var e=this.getC("hideReward");e&&c.default.onClick(e,function(){c.default.roleServer.isGetHideReward(1)||(t.hideCount++,t.hideCount>=3&&(t.showDropItem(1000402,1,f.default.getWorldPos(e)),c.default.roleServer.getHideReward(1)))});var i=this.getC("hideReward1");i&&c.default.onClick(i,function(){c.default.roleServer.isGetHideReward(2)||(t.hideCount1++,t.hideCount1>=3&&(t.showDropItem(1002301,1,f.default.getWorldPos(i)),c.default.roleServer.getHideReward(2)))})}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),c.default.roleServer.reset(),this.resetLevel()},e.prototype.isCreateRole=function(){c.default.roleServer.isNewHand()&&c.default.sdkMgr.createRole()},e.prototype.preLoad=function(){h.default.info("\u4e34\u65f6\u4ee3\u7801,\u9884\u52a0\u8f7d\u602a\u7269\u52a8\u753b,\u51cf\u5c11\u5728\u4e00\u4e9b\u602a\u7269\u591a\u7684\u60c5\u51b5\u4e0b,\u5361\u987f"),c.default.nodePoolMgr.createNodePool(8210,4,this.nodeMonsterLayer),c.default.nodePoolMgr.createNodePool(8220,4,this.nodeMonsterLayer)},e.prototype.resetLevel=function(){this.checkIsNormalExit()&&c.default.levelServer.resetLevelInfo()},e.prototype.checkIsNormalExit=function(){return!!this.isState(y.LevelStatusEnum.Exiting)},e.prototype.initStart=function(){1==c.default.levelServer.getCurLevel()?this.initHeroIn():this.getObjhero().clearSkinState()},e.prototype.initHeroIn=function(){var t=this,e=c.default.levelServer.getCurLevel(),i=this.getObjhero();1==e&&this.setUITouchable(!1);var n=i.getHeroBlood(),o=i.getSkin();n.x=-200,o.x=-200,n.runAction(cc.moveBy(1,200,0)),o.runAction(cc.sequence(cc.moveBy(1,200,0),cc.callFunc(function(){if(i.clearSkinState(),i.idle(),1==c.default.levelServer.getCurLevel()){var e=c.default.levelServer.getChapterSelectOneDropSkillList();null!=e?t.emit(_.default.REWARD_SKILL_ONE,e):(t.pauseScene(!1),h.default.error("\u7f3a\u5c11\u914d\u7f6e\u5f00\u5c401\u90091\u6389\u843d\u5b57\u6bb5 , \u7ae0\u8282:%s",c.default.levelServer.getCurChapter()),t.checkStartSelectThree())}})))},e.prototype.checkStartSelectThree=function(){var t=c.default.levelServer.getChapterSelect3DropSkillList();if(null!=t){var e={skillList:t,videoAllSelect:0,videoChange:0,videoUpgrade:0,rewardSkillView:0};this.emit(_.default.REWARD_SKILL_THREE,e)}else this.pauseScene(!1),h.default.error("\u7f3a\u5c11\u914d\u7f6e\u5f00\u5c403\u90091\u6389\u843d\u5b57\u6bb5 , \u7ae0\u8282:%s",c.default.levelServer.getCurChapter())},e.prototype.initBattleUI=function(){var t=cc.instantiate(c.default.resMgr.getPrefab(S.ResBattleScene.prefab.UI_BattleUI.url));this.nodeUI.addChild(t),this._battleUICtrl=t.getComponent("ComUIBattle"),this._battleUICtrl.setScene(this),this._UIMask=t.addComponent(cc.Button),this.setUITouchable(!0),this.initTestMoveBtn(t)},e.prototype.initTestMoveBtn=function(t){var e=this,i=this.seekC(t,"btnTouch"),n=this.seekC(t,"btnCircleRocker"),o=this.seekC(t,"btnRocker"),r=this.seekC(t,"btnTestLength1"),a=this.seekC(t,"btnTestLength2"),s=this.seekC(t,"btnTestLength3"),l=this.seekC(t,"btnTestLength4"),u=this.seekC(t,"btnTestLength5"),p=this.seekC(t,"btnTestLength6");c.default.onClick(i,function(){e.touchMove.active=!0,e.circleRocker.active=!1,e.Rocker.active=!1}),c.default.onClick(n,function(){e.circleRocker.active=!0,e.touchMove.active=!1,e.Rocker.active=!1}),c.default.onClick(o,function(){e.Rocker.active=!0,e.circleRocker.active=!1,e.touchMove.active=!1}),C.default.isDebug()?(c.default.onClick(r,function(){c.default.setRockerLength(25)}),c.default.onClick(a,function(){c.default.setRockerLength(30)}),c.default.onClick(s,function(){c.default.setRockerLength(35)}),c.default.onClick(l,function(){c.default.setRockerCheckTime(.2)}),c.default.onClick(u,function(){c.default.setRockerCheckTime(.25)}),c.default.onClick(p,function(){c.default.setRockerCheckTime(.3)})):(r.destroy(),a.destroy(),s.destroy(),l.destroy(),u.destroy(),p.destroy())},e.prototype.initNode=function(){this.nodeGame=this.getC("nodeGame"),this.nodeGame.x=-cc.winSize.width/2,this.nodeUI=this.getC("nodeUI"),this.nodeMonsterDieLayer=this.getC("nodeMonsterDieLayer"),this.nodeMonsterDieEffectLayer=this.getC("nodeMonsterDieEffectLayer"),this.nodeHeroLayer=this.getC("nodeHeroLayer"),this.nodeMonsterLayer=this.getC("nodeMonsterLayer"),this.dropItemLayer=this.getC("dropItemLayer"),this.monterTipsLayer=this.getC("monterTipsLayer"),this.nodeBulletLayer=this.getC("monsterBulletLayer"),this.nodeBulletTrail=this.getC("nodeBulletTrail"),this.nodeParticleBack=this.getC("nodeParticleBack"),this.nodeParticleFront=this.getC("nodeParticleFront")},e.prototype.initColiisionMgr=function(){var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!0},e.prototype.initTouchMove=function(){this.touchMove=new cc.Node("touchMove"),this.nodeUI.addChild(this.touchMove),this.touchMoveCtrl=this.touchMove.addComponent("ComTouchMove"),this.touchMoveCtrl.setScene(this),this.touchMove.active=!1},e.prototype.initCircleRocker=function(){this.circleRocker=cc.instantiate(c.default.resMgr.getPrefab(S.ResBattleScene.prefab.ComCircleRocker.url)),this.nodeUI.addChild(this.circleRocker),this.comCircleRocker=this.circleRocker.getComponent(V.default),this.comCircleRocker.setScene(this),this.circleRocker.active=!0,this.circleRocker.y+=30},e.prototype.resetStayCount=function(){this.stayCount=0},e.prototype.hideRocker=function(){this.RockerCtrl.hideRocker()},e.prototype.showRocker=function(){this.RockerCtrl.showRocker()},e.prototype.initRocker=function(){this.Rocker=this.seekC(this.nodeUI,"Rocker"),this.RockerCtrl=this.Rocker.addComponent("ComRocker"),this.RockerCtrl.setScene(this),this.Rocker.active=!1},e.prototype.initMap=function(){this._mapMgr=this.node.addComponent("MapMgr"),this._mapMgr.initialize(this)},e.prototype.initLevelMgr=function(){this._levelMgr=this.node.addComponent("LevelMgr");var t=c.default.levelServer.getCurChapter(),e=c.default.levelServer.getCurLevel();this._levelMgr.initialize(this,t,e)},e.prototype.getLevelLastMonsterNum=function(){return this._levelMgr.getLevelLastMonsterNum()},e.prototype.initDamageNumberMgr=function(){this._damageNumberMgr=this.node.addComponent("DamageNumberMgr"),this._damageNumberMgr.initialize(this)},e.prototype.initHero=function(){this.Hero=cc.instantiate(this.HeroPrefab),this.Hero.group=y.GROUP.HERO,this.nodeHeroLayer.addChild(this.Hero,v.default.Hero,"hero"),this._objHero=this.Hero.addComponent("ObjHero"),this._objHero.initById(1,this),c.default.heroMgr.initHero(this._objHero),this.pushBackObj(this._objHero)},e.prototype.initCamera=function(){var t=this.getC("GameCamera");this._mapMgr.initGameCamera(t),this.gameCamera=t.getComponent(cc.Camera);var e=t.addComponent("ComBattleCamera");e.initialize(this.Hero,this._mapMgr,this.nodeUI),e.setScene(this),this.comCamera=e},e.prototype.convertScreenToWorldPoint=function(t){var e=cc.v2();return this.gameCamera.getScreenToWorldPoint(t,e),e},e.prototype.convertWorldToScreenPoint=function(t){var e=cc.v2();return this.gameCamera.getWorldToScreenPoint(t,e),e},e.prototype.initDrawNode=function(){C.default.isDebug()&&(this._drawNode=new cc.Node(""),this.node.addChild(this._drawNode,v.default.drawNode),this._graphics=this._drawNode.addComponent(cc.Graphics),f.default.setWorldPos(this._drawNode,0,0),this._graphics.lineWidth=5)},e.prototype.removeDrawNode=function(){this._drawNode.destroy(),this._drawNode=null,this._graphics=null},e.prototype.drawRect=function(t,e){this._graphics&&(this._graphics.rect(t.x,t.y,t.width,t.height),e&&this._graphics.strokeColor.fromHEX(e.toHEX("#rrggbb")),this._graphics.stroke())},e.prototype.drawRorationRect=function(t,e,i,n){if(void 0===i&&(i=0),this._graphics){n&&this._graphics.strokeColor.fromHEX(n.toHEX("#rrggbb"));var o=E.default.StdRadian(i),r=cc.v2(t.xMin,t.yMin),a=cc.v2(t.xMax,t.yMin),s=cc.v2(t.xMax,t.yMax),l=cc.v2(t.xMin,t.yMax),c=E.default.pointRoundPoint(r,e,o),u=E.default.pointRoundPoint(a,e,o),p=E.default.pointRoundPoint(s,e,o),d=E.default.pointRoundPoint(l,e,o);this._graphics.moveTo(c.x,c.y),this._graphics.lineTo(u.x,u.y),this._graphics.lineTo(p.x,p.y),this._graphics.lineTo(d.x,d.y),this._graphics.lineTo(c.x,c.y),this._graphics.stroke()}},e.prototype.drawCircle=function(t,e,i){this._graphics&&(this._graphics.circle(t.x,t.y,e),i&&this._graphics.strokeColor.fromHEX(i.toHEX("#rrggbb")),this._graphics.stroke())},e.prototype.initLevelElement=function(){this.initLevelState(),this.initMap(),this.clearMonsterContainer(),this.initLevelMonster(),c.default.nodePoolMgr.clearNodePool()},e.prototype.initLevelState=function(){this.setState(y.LevelStatusEnum.Fighting)},e.prototype.initLevelMonster=function(){},e.prototype.showRewardView=function(t){if(null!=t.skillList){this.pauseScene(!0);var e=c.default.levelServer.getCurLevel()-1,i=c.default.levelServer.getCurChapter(),n=g.default.ChapterLevelTable.findFirst(function(t){return t.id==i&&t.level==e});if(n.skillDrop)c.default.audioMgr.playSoundByResId(111),c.default.viewMgr.showUIWithoutSound(m.UI.REWARD_SKILL,this,t);else if(n.rewardSkillVIew!=B.RewardViewTypeEnum.TwoPickOne){if(n){var o=n.randomEvent||[],r=j.default.getRandomEventByList(o);if(r)return void c.default.viewMgr.showUI(m.UI.RANDOMEVENT_VIEW,this,r)}}else c.default.viewMgr.showUI(m.UI.REWARD_2SELECT1,this,t)}else this._battleUICtrl.updateLevelInfo(),this.setState(y.LevelStatusEnum.Fighting),this.pauseScene(!1),this.showArrow()},e.prototype.showUpgradeLine=function(t){b.default.playSpineOnce(90,t)},e.prototype.showDamageNumber=function(t,e,i,n,o,r){void 0===o&&(o=F.DamageTypeEnum.Real),this._damageNumberMgr.showDamageNumber(t,e,i,n,o,r)},e.prototype.showWudiNumber=function(t){this._damageNumberMgr.showWudi(t)},e.prototype.showDodgeLab=function(t){this._damageNumberMgr.showDodge(t)},e.prototype.showFrozenDefense=function(t){this._damageNumberMgr.showFrozenDefense(t)},e.prototype.initKeyboardListent=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onKeyDown=function(t){switch(h.default.info("BattleScene >>>>>>>> 680 e.keyCode = ",t.keyCode),t.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.up:this.setDirByKey("up");break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.setDirByKey("down");break;case cc.macro.KEY.d:case cc.macro.KEY.right:this.setDirByKey("right");break;case cc.macro.KEY.a:case cc.macro.KEY.left:this.setDirByKey("left");break;case cc.macro.KEY.num1:this.setNum1();break;case cc.macro.KEY.num2:this.setNum2();break;case cc.macro.KEY.num9:c.default.taskMgr.addActivity(10),h.default.info("\u589e\u52a0\u6d3b\u8dc310,\u5f53\u524d\u6d3b\u8dc3:",c.default.taskMgr.getDailyActivity());break;case cc.macro.KEY.num0:h.default.info("############ \u6570\u5b57\u952e\u76d8\u8bf4\u660e ############"),h.default.info("1 = \u589e\u52a0\u8840\u91cf:buff --\x3e 110000"),h.default.info("2 = \u6263\u8840:buff --\x3e 500001"),h.default.info("3 = \u589e\u52a0\u6d3b\u8dc310"),h.default.info("\u5de6shift = \u663e\u793a/\u9690\u85cf\u78b0\u649e\u533a\u57df");break;case cc.macro.KEY.shift:c.default.event.emit(_.default.KEYBOARD_SHOW_DEBUG)}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.up:this.exitDirByKey("up");break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.exitDirByKey("down");break;case cc.macro.KEY.d:case cc.macro.KEY.right:this.exitDirByKey("right");break;case cc.macro.KEY.a:case cc.macro.KEY.left:this.exitDirByKey("left")}},e.prototype.setNum1=function(){console.info("\u56de\u8840"),this._objHero.addBuff(11e4,this._objHero)},e.prototype.setNum2=function(){console.info("\u6263\u8840"),this._objHero.addBuff(500001,this._objHero)},e.prototype.setDirByKey=function(t){this.getState()!=y.LevelStatusEnum.RewardSelect&&-1==this.keyDirection.indexOf(t)&&this.keyDirection.push(t)},e.prototype.exitDirByKey=function(t){var e=this.keyDirection.indexOf(t);-1!=e&&this.keyDirection.splice(e,1)},e.prototype.clearDirByKey=function(){this.keyDirection=[]},e.prototype.heroMoveByKey=function(t){for(var e=this.Hero.getComponent("ObjHero"),i=0,n=this.keyDirection;i<n.length;i++){var o=n[i];e.moveHeroByRocker(o,t)}},e.prototype.getFloorHeight=function(){return this._mapMgr.getFloorHeight()},e.prototype.getGameCameraNode=function(){return this.gameCamera.node},e.prototype.getCameraLimitRect=function(){return this.comCamera.getLimitRect()},e.prototype.getCameraLeftRightLimit=function(){return this.comCamera.getLeftRightLimit()},e.prototype.getCameraRect=function(){return this.comCamera.getCameraRect()},e.prototype.setState=function(e){t.prototype.setState.call(this,e),e==y.LevelStatusEnum.RewardSelect&&this.clearDirByKey()},e.prototype.setUITouchable=function(t){this._UIMask.enabled=!t},e.prototype.getSteps=function(){return this._mapMgr.getSteps()},e.prototype.getFloors=function(){return this._mapMgr.getFloors()},e.prototype.getMyFloorY=function(t){for(var e=this._mapMgr.getFloorsRangeList(),i=0;i<e.length;i++)if(t>=(n=e[i]).left&&t<=n.right)return n.top;for(h.default.error("BattleScene getMyFloorY \u627e\u4e0d\u5230\u76ee\u524d\u4f60\u6240\u5728\u7684\u5730\u677f\u4f4d\u7f6e,\u8fd4\u56de0"),h.default.info("####### BattleScene getMyFloorY \u4e0b\u9762\u6253\u5370\u5730\u677f\u4fe1\u606f : ########"),h.default.info("BattleScene getMyFloorY wPosX = ",t),h.default.info("BattleScene floorRangeList = ",e),i=0;i<e.length;i++){var n=e[i];h.default.info("BattleScene getMyFloorY floorRange:",n.left,n.right)}return 0},e.prototype.getAreaIdList=function(t){return this._mapMgr.getAreaIdList(t)},e.prototype.getEnemies=function(){var t=[];return this.foreachObj(function(t){return t.getType()==p.ObjTypeEnum.Monster},function(e){t.push(e.node)}),t},e.prototype.getGameNode=function(){return this.nodeGame},e.prototype.getUINode=function(){return this.nodeUI},e.prototype.getBattleUICom=function(){return this._battleUICtrl},e.prototype.getMapMgr=function(){return this._mapMgr},e.prototype.getHero=function(){return this.Hero},e.prototype.getObjhero=function(){return this._objHero},e.prototype.isNodeAtCamera=function(t){var e=f.default.getWorldPos(t),i=this.getCameraLeft(),n=this.getCameraRight();return e.x>=i&&e.x<=n},e.prototype.isNodeAtCameraLeft=function(t){return this.comCamera.isNodeAtCameraLeft(t)},e.prototype.getCameraLeft=function(){return this.convertScreenToWorldPoint(cc.v2(0,0)).x},e.prototype.getCameraRight=function(){return this.convertScreenToWorldPoint(cc.v2(cc.winSize.width,0)).x},e.prototype.syncHeroPos=function(){var t=this._objHero.getWorldPos();this.comCamera.syncHeroPos(t)},e.prototype.isDropOnStep=function(t,e,i){if(!t)return!1;var n=f.default.getWorldPos(i),o=n.y+i.height*(1-i.anchorY),r=n.x-i.width*i.anchorX,a=n.x+i.width*(1-i.anchorY);return t.x+t.width>r&&t.x<a&&t.y>=o&&t.y+e<o},e.prototype.isDropOnFloor=function(t,e,i){if(!t)return!1;var n=f.default.getWorldPos(i),o=n.y+i.height*(1-i.anchorY),r=n.x-i.width*i.anchorX,a=n.x+i.width*(1-i.anchorY);return t.x+t.width>r&&t.x<a&&t.y>=o&&t.y+e<o},e.prototype.clearAllBullets=function(){this.foreachObj(function(t){return t.getType()==p.ObjTypeEnum.Bullet},function(t){t.setLegal(!1)})},e.prototype.clearMonsterBullet=function(){this.foreachObj(function(t){return t.getType()==p.ObjTypeEnum.Bullet},function(t){t.setLegal(!1)})},e.prototype.createBullet=function(t,e,i,n){var o=g.default.SkillbulletTable.findById(t);if(null==o)return h.default.error("BattleScene bulletVO == null,bulletId = %s",t),!1;var r=new cc.Node("");r.group="bullet",this.nodeBulletLayer.addChild(r,100,"bullet");var a=o.bulletType,s=r.addComponent("Bullet_"+a);return r.zIndex=o.bulletZOrder||1,null==s?(h.default.error("\u521b\u5efa\u5b50\u5f39\u7ec4\u4ef6\u5931\u8d25:",a),!1):(s.init(t,e,i,n,this,null,null),this.pushBackObj(s),this.createBulletParticle(r,t,s),this.createBulletTrail(r,t),!0)},e.prototype.createBulletTrail=function(t,e){var i=g.default.SkillbulletTable.findById(e);if(null==i)return h.default.error("BattleScene bulletVO == null,bulletId = %s",e),!1;if(null!=i.isOpenStreak&&i.isOpenStreak!=N.StdBool.False){var n=i.streakResId,o=i.streakTime,r=i.streakWidth,a=i.streakColor,s=i.streakOffset,l=P.default.createByResId(n);if(null!=l){var c=l.getComponent(cc.MotionStreak);c.fadeTime=o,c.stroke=r,a&&(l.color=cc.color(a[0],a[1],a[2]));var u=l.addComponent(D.default);u.initialize(p.ObjTypeEnum.Particle,this),u.setFollowMove(!0),u.setFollowRotation(!1),u.setFollowOffset(cc.v2(s[0],s[1])),u.setFollowNode(t),this.nodeBulletTrail.addChild(l),this.pushBackObj(u)}}},e.prototype.createBulletParticle=function(t,e,i){var n=g.default.SkillbulletTable.findById(e);if(null==n)return h.default.error("BattleScene bulletVO == null,bulletId = %s",e),!1;var o=n.headParticleResData;o&&this.createBulletParticleByParticleData(t,o,i);var r=n.tailParticleResData;r&&this.createBulletParticleByParticleData(t,r,i)},e.prototype.createBulletParticleByParticleData=function(t,e,i){var n=e[0],o=e[1]==N.StdBool.True,r=e[2]||0,a=e[3]||0,s=P.default.createByResId(n);if(null!=s){var l=s.getComponent(cc.ParticleSystem);i.addParticleList(l);var c=s.addComponent(D.default);c.initialize(p.ObjTypeEnum.Particle,this),c.setFollowMove(!0),c.setFollowRotation(!0),c.setFollowOffset(cc.v2(r,a)),c.setFollowNode(t),o?this.nodeParticleFront.addChild(s):this.nodeParticleBack.addChild(s),this.pushBackObj(c)}},e.prototype.clearMonsterContainer=function(){this._createMonsterContainer=[]},e.prototype.createBossBlood=function(){this._bossBlood=cc.instantiate(c.default.resMgr.getPrefab(S.ResBattleScene.prefab.ComNodeBossBlood.url)),this.nodeUI.addChild(this._bossBlood),this._bossBloodCtrl=this._bossBlood.addComponent("ComBossBlood"),this._bossBloodCtrl.init(),this._bossBlood.y+=400},e.prototype.refreBossBlood=function(t){this._bossBloodCtrl.refreshBossHp(t)},e.prototype.destroyBossBlood=function(){this._bossBlood.destroy()},e.prototype.createMonster=function(t,e,i,n,o,r){if(void 0===i&&(i=!1),null!=o){var a=g.default.MonsterTable.findById(t);if(null!=a){var s;(s=a.type==p.MonsterTypeEnum.Boss?cc.instantiate(this.BOSSPrefab):cc.instantiate(this.MonsterPrefab)).group=y.GROUP.MONSTER,this.nodeMonsterLayer.addChild(s,t,"monster"),f.default.setWorldPos(s,o);var l=s.addComponent("ObjMonster");a.type==p.MonsterTypeEnum.Boss?(c.default.audioMgr.playMusicByResId(43),this.emit(_.default.BOSS_BORN)):this.emit(_.default.MONSTER_BORN,o.x),l.initById(t,this,i,n,r),this.pushBackObj(l),this.showMonsterTips(l)}else h.default.error("BattleScene monsterVO == null,monsterId = %s,bornPointId = %s",t,e)}else h.default.error("[BattleScene] createMonster wpos ==null ,bornPointId = ",e)},e.prototype.createSummons=function(t,e){var i=g.default.SummonsTable.findById(t);if(null!=i){var n=P.default.createByResId(i.resId);n.parent=e.node.parent;var o=f.default.getWorldPos(e.node);f.default.setWorldPos(n,o);var r=i.type,a=L.SummonsComponent[r];if(null!=a){var s=n.addComponent(a);s.initById(t,e,this),this.pushBackObj(s)}else h.default.error("BattleScene createSummons component == null,summonsId = %s,summonsVO.type = %s",t,i.type)}else h.default.error("BattleScene createSummons summonsVO == null,summonsId = ",t)},e.prototype.showClimbAnimation=function(t,e,i){void 0===i&&(i=1);var n=b.default.createSpineByResId(56,!1,this.nodeMonsterLayer);n.zIndex=1e3,f.default.setWorldPos(n,t),n.getComponent("ComSpine").setCompleteListener(function(t){"play"==t.animation.name&&n.destroy()}),n.scale=i},e.prototype.showMonsterTips=function(t){var e=cc.instantiate(c.default.resMgr.getPrefab(S.ResBattleScene.prefab.MonsterTipsPrefab.url));e.parent=this.monterTipsLayer,e.getComponent("ComMonsterTipsPrefab").initialize(t,this)},e.prototype.addEventListener=function(){this.eventOn(_.default.CHAPTER_FINISH,this.handlerChapterFinish,this),this.eventOn(_.default.LEVEL_FINISH,this.handlerLevelFinish,this),this.eventOn(_.default.OPEN_REBORN_VIEW,this.handlerOpenRebornView,this),this.eventOn(_.default.MAP_UPDATE,this.handlerLevelMapUpdate,this),this.eventOn(_.default.ROLE_ADD_BUFF,this.handlerRoleAddBuff,this),this.eventOn(_.default.CLOSE_VIEW,this.handlerCloseView,this),this.eventOn(_.default.SHOW_VIEW,this.handlerShowView,this),this.eventOn(_.default.KEYBOARD_SHOW_DEBUG,this.handlerShowDebug,this),this.eventOn(_.default.MONSTER_DROP_ITEM,this.handlerMonsterDropItem,this),this.eventOn(_.default.BOSS_DROP_ITEM,this.handlerBossDropItem,this),this.eventOn(_.default.LEVEL_WARNING,this.handlerLevelWarning,this),this.eventOn(_.default.REWARD_SKILL_ONE,this.handlerRewardSkillOne,this),this.eventOn(_.default.REWARD_SKILL_THREE,this.handlerShowRewardView,this),this.eventOn(cc.game.EVENT_HIDE,this.handlerGameHide,this),this.eventOn(cc.game.EVENT_SHOW,this.handlerShowGame,this),this.eventOn(_.default.LEVEL_SUCC,this.handlerLevelSucc,this),this.eventOn(_.default.LEVEL_FAIL,this.handlerLevelFail,this),this.eventOn(_.default.LEVEL_BOSS_JUSE_DIE,this.handlerLevelBossJustDie,this)},e.prototype.handlerGameHide=function(){this.pauseScene(!0),c.default.roleServer.setOfflineTime(),c.default.adMgr.isVideoPlaying()||(c.default.audioMgr.playSoundByResId(110),0==c.default.viewMgr.isViewShowing(m.UI.FINAL_REPORT)&&c.default.viewMgr.showUIWithoutSound(m.UI.PAUSE_VIEW,this))},e.prototype.handlerShowGame=function(){var t=c.default.roleServer.getOfflineReward();c.default.roleServer.resetOfflineTime(),null!=t&&c.default.viewMgr.showUI(m.UI.OFFLINE_REWARD,t)},e.prototype.initData=function(){var t=g.default.CommonTable.findByKey("DropAdsorbRange");this._dropAdsorbRange=null!=t?t.arrays:[-1,-1,-1]},e.prototype.handlerLevelSucc=function(){var t=cc.instantiate(this.levelSuccPrefab);t.parent=this.getUINode(),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.getChildByName("Label").active=!1,t.destroy()}),t.getChildByName("Label").active=!0,t.group="ui",f.default.setWorldPos(t,cc.winSize.width/2,.56*cc.winSize.height)},e.prototype.handlerLevelFail=function(){var t=cc.instantiate(this.levelFailPrefab);t.parent=this.getUINode(),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.destroy()}),t.group="ui",f.default.setWorldPos(t,cc.winSize.width/2,.56*cc.winSize.height)},e.prototype.onMonsterChange=function(){this._battleUICtrl.onMonsterChange()},e.prototype.handlerChapterFinish=function(t){var e=this;this.closeClock();var i=t||0;cc.sys.platform,B.PlatformTypeEnum.WECHAT_GAME,d.default.sequence(this.node,i,function(){c.default.audioMgr.playSoundByResId(114),c.default.viewMgr.showUIWithoutSound(m.UI.FINAL_REPORT,e)})},e.prototype.handlerLevelBossJustDie=function(){this._collectDropItems()},e.prototype.handlerLevelFinish=function(t){var e=c.default.levelServer.getCurChapter(),i=c.default.levelServer.getCurLevel();this._levelMgr.initialize(this,e,i),this.showRewardView(t)},e.prototype.handlerShowRewardView=function(t){this.pauseScene(!0),this.showRewardView(t)},e.prototype.handlerLevelMapUpdate=function(){h.default.info("BattleScene >>>>>>>> 500 ")},e.prototype.handlerOpenRebornView=function(){var t=this;this.pauseScene(!0),cc.tween(this.node).delay(I.default.get("FinalReportBreath").number).call(function(){c.default.viewMgr.showUI(m.UI.REBORN_VIEW,t)}).start()},e.prototype.handlerRoleAddBuff=function(t){this._objHero.addBuff(t,this._objHero),this._state=y.LevelStatusEnum.Fighting},e.prototype.passLevel=function(){var t=this;this.isState(y.LevelStatusEnum.RewardSelect)||(this.clearMonsterBullet(),this.emit(_.default.LEVEL_SUCC),this.setState(y.LevelStatusEnum.RewardSelect),this.node.runAction(cc.sequence(cc.delayTime(I.default.get("RewardSkillBreath").number),cc.callFunc(function(){c.default.levelServer.setCurHeroHp(t._objHero.getHp()),c.default.levelServer.passLevel()}))))},e.prototype.handlerShowView=function(t){t==m.UI.RECORD_VIDEO_SHARE_VIEW.config.url&&this.pauseClock(!1)},e.prototype.handlerCloseView=function(t){if(t==m.UI.REWARD_SKILL.config.url){var e=c.default.levelServer.getCurLevel()-1,i=c.default.levelServer.getCurChapter(),n=g.default.ChapterLevelTable.findFirst(function(t){return t.id==i&&t.level==e}),o=c.default.levelServer.getLastLevelDropInfo();if(n.rewardSkillVIew==B.RewardViewTypeEnum.TwoPickOne)return void c.default.viewMgr.showUI(m.UI.REWARD_2SELECT1,this,o);if(n.randomEvent&&(r=j.default.getRandomEventByList(n.randomEvent)))return void c.default.viewMgr.showUI(m.UI.RANDOMEVENT_VIEW,this,r);cc.sys.platform==B.PlatformTypeEnum.OPPO_GAME?c.default.adMgr.showBanner(G.OPPOAdUnitIdEnum.Banner_Battle):cc.sys.platform==B.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.showBanner(),this._battleUICtrl.updateLevelInfo(),this.setState(y.LevelStatusEnum.Fighting),this.pauseScene(!1),this.setUITouchable(!0),this.showUpgradeLine(this.getHero()),this.showArrow()}if(t==m.UI.REWARD_2SELECT1.config.url){var r,a=c.default.levelServer.getCurLevel()-1,s=c.default.levelServer.getCurChapter();if((n=g.default.ChapterLevelTable.findFirst(function(t){return t.id==s&&t.level==a})).randomEvent&&(r=j.default.getRandomEventByList(n.randomEvent)))return void c.default.viewMgr.showUI(m.UI.RANDOMEVENT_VIEW,this,r);cc.sys.platform==B.PlatformTypeEnum.OPPO_GAME?c.default.adMgr.showBanner(G.OPPOAdUnitIdEnum.Banner_Battle):cc.sys.platform==B.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.showBanner(),this._battleUICtrl.updateLevelInfo(),this.setState(y.LevelStatusEnum.Fighting),this.pauseScene(!1),this.setUITouchable(!0),this.showUpgradeLine(this.getHero()),this.showArrow()}t==m.UI.REWARD_SKILL_ONE.config.url&&(cc.sys.platform==B.PlatformTypeEnum.OPPO_GAME?c.default.adMgr.showBanner(G.OPPOAdUnitIdEnum.Banner_Battle):cc.sys.platform==B.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.showBanner(),this._battleUICtrl.updateLevelInfo(),this.setState(y.LevelStatusEnum.Fighting),this.pauseScene(!1),this.setUITouchable(!0),this.showUpgradeLine(this.getHero()),this.showArrow()),t!=m.UI.RANDOMEVENT_VIEW.config.url&&t!=m.UI.RECORD_VIDEO_SHARE_VIEW.config.url||(cc.sys.platform==B.PlatformTypeEnum.OPPO_GAME?c.default.adMgr.showBanner(G.OPPOAdUnitIdEnum.Banner_Battle):cc.sys.platform==B.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.showBanner(),this._battleUICtrl.updateLevelInfo(),this.setState(y.LevelStatusEnum.Fighting),this.pauseScene(!1),this.setUITouchable(!0),this.showArrow()),t==m.UI.PAUSE_VIEW.config.url&&(this.pauseScene(!1),this.setUITouchable(!0)),t==m.UI.STORYBG_VIEW.config.url&&(this.initHeroIn(),this.pauseScene(!1),this.setUITouchable(!0))},e.prototype.showUpgradeLineFromHero=function(){this.showUpgradeLine(this.getHero())},e.prototype.handlerShowDebug=function(){this._drawNode?this.removeDrawNode():this.initDrawNode()},e.prototype.handlerMonsterDropItem=function(t){var e=t.wPos.add(cc.v2(0,150)),i=A.default.rand(2,4);if(null!=this.spilitGold(t.itemList,i))for(var n=0;n<t.itemList.length;n++){var o=t.itemList[n],r=o[0],a=o[1];this.showDropItem(r,a,e)}else console.error("\u7b56\u5212\u914d\u7684\u91d1\u5e01\u90fd\u4e0d\u591f\u5206\uff0c\u600e\u4e48\u641e")},e.prototype.handlerBossDropItem=function(t){var e=t.wPos.add(cc.v2(0,150)),i=I.default.get("BossDropGoldNum").number;if(null!=this.spilitGold(t.itemList,i))for(var n=0;n<t.itemList.length;n++){var o=t.itemList[n],r=o[0],a=o[1];this.showDropItem(r,a,e)}else console.error("\u7b56\u5212\u914d\u7684\u91d1\u5e01\u90fd\u4e0d\u591f\u5206\uff0c\u600e\u4e48\u641e")},e.prototype.spilitGold=function(t,e){for(var i=0,n=0;n<t.length;n++){var o=t[n];o[0]==M.ItemIdEnum.Gold&&(i=o[1],t.splice(n,1))}if(0==i)return t;var r=i/e;for(n=0;n<e;n++)t.push([M.ItemIdEnum.Gold,r]);return t},e.prototype.handlerLevelWarning=function(t){c.default.viewMgr.showUI(m.UI.WARNING_VIEW,t)},e.prototype.handlerRewardSkillOne=function(t){this.pauseScene(!0),c.default.viewMgr.showUI(m.UI.REWARD_SKILL_ONE,this,t),cc.sys.platform==B.PlatformTypeEnum.WECHAT_GAME&&c.default.roleServer.isNewHand()&&h.default.warn("\u7b2c\u4e00\u6b21\u8fdb\u5165\u6e38\u620f\uff0c\u6253\u5f00\u4e00\u4e0b\u7ea2\u5305\u754c\u9762")},e.prototype.handleHeroTimeStopEnter=function(){this.setState(y.LevelStatusEnum.Pause),this.foreachMonster(function(t){t.setState(p.ObjStateEnum.TimeStop)})},e.prototype.handleHeroTimeStopExit=function(){this.setState(y.LevelStatusEnum.Fighting),this.foreachMonster(function(t){t.exitState(p.ObjStateEnum.TimeStop)})},e.prototype.showArrow=function(){c.default.viewMgr.showUIWithoutSound(m.UI.ARROW_VIEW)},e.prototype._collectDropItems=function(){var t=this,e=g.default.CommonTable.findByKey("FinalReportAdsorbTime");e.number?d.default.sequence(this.node,e.number,function(){t._collectDropItem()}):this._collectDropItem()},e.prototype._collectDropItem=function(t){void 0===t&&(t=1e3);for(var e=0;e<this.dropItemList.length;e++){var i=this.dropItemList[e];this._dropItemFlyToHero(i[0],i[1],i[2],t)}},e.prototype._removeDropItemNode=function(t){for(var e=0;e<this.dropItemList.length;e++)if(this.dropItemList[e][0]==t)return void T.default.remove(this.dropItemList,e)},e.prototype._dropItemFlyToHero=function(t,e,i,n){var o=this;void 0===n&&(n=1e3),d.default.moveToBySpeed(t,this.Hero,n,function(){O.default.getVector(cc.v2(o.Hero.x,o.Hero.y),cc.v2(t.x,t.y)).len()<50&&(c.default.levelServer.addLevelDropItem(e,i),c.default.bagMgr.addItem(e,i,M.BagSourceEnum.MonsterDrop),o._battleUICtrl.updateGold(),o._battleUICtrl.updateDiamond(),c.default.audioMgr.playSoundByResId(40),o._removeDropItemNode(t),t.destroy())})},e.prototype.showDropItem=function(t,e,i){var n=this;e=Math.ceil(e);var o,r=w.default.getItemIconSpriteFrame(t),a=null;if(r){a=cc.instantiate(this.ComDropIconPrefab),this.dropItemLayer.addChild(a),this.dropItemList.push([a,t,e]);var s=w.default.getItemVO(t),l=this.seekC(a,"sprIcon");l.scale=.6;var c=s.dropScale||1e4;if(l.scale*=c/1e4,l.getComponent(cc.Sprite).spriteFrame=w.default.getItemIconSpriteFrame(t),s){var u=s.iconLightRedId;if(u&&u>=116&&u<=120&&(b.default.createSpineByResId(u,!0,a,function(t,e){e.addAnimation(0,"play_ready",!1),e.addAnimation(0,"play_continue",!0)}).zIndex=l.zIndex-2),s){var p=s.iconPart;if(p&&p>=121&&p<=125){var d=P.default.createByResId(p);a.addChild(d),d.zIndex=l.zIndex-1}}}o=cc.rect(0,0,l.width,l.height);var h=this.seekC(a,"lab1"),y=h.getComponent(cc.Label),m=this.seekC(a,"imgbg");if(t<100)h.active=!1,m.active=!1;else{var v=g.default.ItemTable.findById(t).name;y.string=v,y.fontSize=35,y.lineHeight=35,cc.tween(h).delay(1/60).call(function(){m.width=h.width+12,m.height=h.height}).start()}f.default.setWorldPos(a,i);var _=2,C=a.addComponent("ComGravite");this._otherComList.push(C);var S=A.default.rand(0,1),E=A.default.rand(0,280),I=A.default.rand(0,1200);S&&(E=-E);var T=30;C.initialize(this,cc.v2(E,I),o,function(i){if(f.default.setWorldPos(a,i.targetWPos),(T-=.017)<0)a.destroy();else if(i.eventType==R.GravityEvent.DropOnGround||i.eventType==R.GravityEvent.DropOnStep){if(2==_){var o=C.getSpeed();o.y=.4*-o.y,C.setSpeed(o)}else 1==_&&(C.setSpeed(cc.v2(0,0)),C.stopDrop(!0));_--}else if(i.eventType==R.GravityEvent.Dropping){if(0!=_)return;if(null==n._dropAdsorbRange)return;if(n._dropAdsorbRange[0]>=0)return void((r=O.default.getVector(cc.v2(n.Hero.x,n.Hero.y),cc.v2(a.x,a.y))).len()<n._dropAdsorbRange[0]&&(C.stop(!0),n._dropItemFlyToHero(a,t,e)));if(n._dropAdsorbRange[1]>=0){var r=O.default.getVector(cc.v2(n.Hero.x,n.Hero.y),cc.v2(a.x,a.y));return void(Math.abs(r.x)<n._dropAdsorbRange[1]&&(C.stop(!0),n._dropItemFlyToHero(a,t,e)))}if(n._dropAdsorbRange[2]>=0)return r=O.default.getVector(cc.v2(n.Hero.x,n.Hero.y),cc.v2(a.x,a.y)),void(Math.abs(r.y)<n._dropAdsorbRange[2]&&(C.stop(!0),n._dropItemFlyToHero(a,t,e)))}})}else console.error("\u7b56\u5212\u6ca1\u6709\u914d\u7f6e\u6389\u843d\u7269\u56fe\u7247\uff0c\u8bf7\u4fee\u6539\u3002\u6389\u843d\u7269ID\uff1a%s",t)},e.prototype.pauseScene=function(t){this.pauseClock(t)},e.prototype.clearScene=function(){},e.prototype.onTick=function(e){this.isState(y.LevelStatusEnum.Pause),this.clearGraphics(),t.prototype.onTick.call(this,e),this.heroMoveByKey(e),this.updateTask(),this.onTickMgr(e),this.syncHeroPos(),this.onTickOtherCom(e),this.updateCom(e),this.checkGuideMove(e)},e.prototype.checkGuideMove=function(t){this.stayCount+=t,this.stayCount>=3?this.comCircleRocker.guideMove(!0):this.comCircleRocker.guideMove(!1)},e.prototype.updateCom=function(t){this.comCamera.onTick(t),this.comCircleRocker.onTick(t),this._battleUICtrl.onTick(t)},e.prototype.clearGraphics=function(){this._graphics&&this._graphics.clear()},e.prototype.updateTask=function(){var t;if(0!=this.tastList.length){for(var e=0;e<this.tastList.length;e++){var i=this.tastList[e];(t=i.callback).call.apply(t,l([i.target],i.argsList))}this.tastList=[]}},e.prototype.setHeroPosByTouchMove=function(t){var e=this.touchMove.getComponent("ComTouchMove");this.Hero.getComponent("ObjHero").moveHeroByRocker(e.leftRight,t)},e.prototype.heroJumpByRocker=function(){this._objHero.moveHeroByRocker("up",1/60)},e.prototype.setHeroPosByRocker=function(t){this._objHero.moveHeroByRocker(this.RockerCtrl.leftRight,t),this._objHero.moveHeroByRocker(this.RockerCtrl.upDown,t)},e.prototype.setHeroPosByCircleRocker=function(t){this._objHero.moveHeroByRocker(this.comCircleRocker.facing,t)},e.prototype.onTickMgr=function(t){this._mapMgr.onTick(t),this._state==y.LevelStatusEnum.Fighting&&this._levelMgr.onTick(t),this._damageNumberMgr.onTick(t)},e.prototype.onTickOtherCom=function(t){for(var e=this._otherComList.length-1;e>=0;e--){var i=this._otherComList[e];i.isValid&&i.onTick?i.onTick(t):T.default.remove(this._otherComList,e)}},e.prototype.showMonsterBornWaring=function(t,e,i){void 0===i&&(i=0);var n=b.default.createSpineByResId(58,!1,this.node),o=n.getComponent(sp.Skeleton);if(o.setAnimation(0,"play_ready",!1),o.addAnimation(0,"play_continue",!0),e==k.MonsterBornTypeEnum.Fly){var r=this.getPosYByFloorAndStep(t);f.default.setWorldPos(n,cc.v2(t.x,r+100))}else e==k.MonsterBornTypeEnum.Dig?(r=this.getMyFloorY(t.x),f.default.setWorldPos(n,cc.v2(t.x,r+100))):f.default.setWorldPos(n,cc.v2(t.x,t.y+100));var a=1+i;cc.tween(n).delay(a).call(function(){n.destroy()}).start()},e.prototype.getPosYByFloorAndStep=function(t){for(var e=this.getSteps(),i=0;i<e.length;i++){var n=e[i],o=f.default.getWorldPos(n);if(Math.abs(t.x-o.x)<=n.width/2&&t.y>=o.y+n.height/2)return o.y+n.height/2}return this.getMyFloorY(t.x)},e.prototype.isAnyMonsterScreenLeft=function(){var t=this,e=!1;return this.foreachMonster(function(i){i.isState(p.ObjStateEnum.Die)||t.convertWorldToScreenPoint(i.getWorldPos()).x<=0&&(e=!0)}),e},s([W(cc.Prefab)],e.prototype,"HeroPrefab",void 0),s([W(cc.Prefab)],e.prototype,"MonsterPrefab",void 0),s([W(cc.Prefab)],e.prototype,"BOSSPrefab",void 0),s([W(cc.Prefab)],e.prototype,"ComDropIconPrefab",void 0),s([W(cc.Prefab)],e.prototype,"levelSuccPrefab",void 0),s([W(cc.Prefab)],e.prototype,"levelFailPrefab",void 0),s([H],e)}(u.default);r.default=q,cc._RF.pop()},{}],BornEnum:[function(t,e,i){"use strict";cc._RF.push(e,"60053pIB8pGbKxwdw7vomie","BornEnum");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.MonsterBornTypeEnum=void 0,function(t){t[t.Fly=1]="Fly",t[t.Dig=2]="Dig"}(n.MonsterBornTypeEnum||(n.MonsterBornTypeEnum={})),cc._RF.pop()},{}],BuffTable:[function(t,e,i){"use strict";cc._RF.push(e,"e28b9tdLDFBxo72U+QSbRKQ","BuffTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("BuffVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("buff_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.buffId,n)}},t.prototype.findByBuffid=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],BuffVO:[function(t,e,i){"use strict";cc._RF.push(e,"5df119i1YRNZqyzsVcgkKjc","BuffVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.buffId=t[0],this.actionType=t[1],this.continueTime=t[2],this.intervalTime=t[3],this.round=t[4],this.mutexId=t[5],this.priorityId=t[6],this.isNotBeReplace=t[7],this.effectIds=t[8],this.exitBuffAddOnOwner=t[9],this.exitBuffAddOnCaster=t[10],this.playAni=t[11],this.aniPlayType=t[12]},cc._RF.pop()},{}],Buff:[function(t,e,i){"use strict";cc._RF.push(e,"67dd94tVCJB/q/KFy5Bfop9","Buff");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tbl"),a=n("Utils"),s=n("EffectFactory"),l=n("SkillConst"),c=function(){function t(e,i,n,o){void 0===o&&(o=[]),this._uid=null,this._BuffVO=null,this._isExited=!1,this._targeter=null,this._attacker=null,this._params=[],this._continueCount=0,this._continueTime=0,this._intervalCount=0,this._intervalTime=0,this._actCount=0,this._nexActAt=0,this._actMaxCount=0,this._effectList=[],this._uid=t._objUidIndex++,this._BuffVO=r.default.BuffTable.findByBuffid(e),this._isExited=!1,this._targeter=i,this._attacker=n,this._params=o,this._continueTime=-1==this._BuffVO.continueTime?Number.MAX_VALUE:this._BuffVO.continueTime,this._intervalTime=this._BuffVO.intervalTime||Number(0),this._effectList=[];for(var l=this._BuffVO.effectIds||[],c=0;c<l.length;c++){var u=l[c],p=u[0];if(null!=r.default.EffectTable.findByEffectid(p)){if(!(a.default.rand(1,1e4)>u[1])){var d=s.default.create(p,i,n,this);d&&(d.begin(),this._effectList.push(d))}}else console.error("\u4e0d\u5b58\u5728\u7684\u6548\u679cID\uff1a%s buffId:%s",p,e)}this._BuffVO.playAni&&this._targeter.playAniFromBuff(this._BuffVO.buffId,this._BuffVO.aniPlayType)}return t.prototype.getUid=function(){return this._uid},t.prototype.getBuffVO=function(){return this._BuffVO},t.prototype.getBuffParams=function(){return this._params},t.prototype.checkMutex=function(){return!1},t.prototype.onTick=function(t){if(this.isOnce())for(var e=0;e<this._effectList.length;e++)this._effectList[e].actOnce();else if(this._continueCount+=t,this._intervalCount+=t,!(this._intervalCount<this._intervalTime))for(this._intervalCount=0,e=0;e<this._effectList.length;e++)this._effectList[e].actOnce()},t.prototype.isOnce=function(){return this._BuffVO.actionType==l.BuffActionEnum.Once},t.prototype.isExpired=function(){return!(this._continueCount<this._continueTime)},t.prototype.onExit=function(){if(this._BuffVO.playAni&&-1!=this._BuffVO.continueTime&&this._targeter.stopAniFromBuff(this._BuffVO.buffId),!this._isExited){this._isExited=!0;for(var t=0;t<this._effectList.length;t++)this._effectList[t].end()}},t.prototype.getDamageRatio=function(){return 1},t._objUidIndex=0,t}();o.default=c,cc._RF.pop()},{}],Bullet100Collision:[function(t,e,i){"use strict";cc._RF.push(e,"1b642OzwghB1aV22EPTfx0H","Bullet100Collision");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AudioMgr"),c=o("ComCollision"),u=o("NodeUtils"),p=o("SpineUtils"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onCollisionEnter=function(t,e){var i=e.node.getComponent("Bullet_100");l.default.getInstance().playSoundByResId(i.getSkillBulletVO().explosionSound);var n=e.node.getComponent("Bullet_100").getScene(),o=p.default.createSpineByResId(1,!1,n.node);u.default.setWorldPos(o,u.default.getWorldPos(e.node)),e.node.getComponent("ObjBullet").setLegal(!1),t.node.getComponent("ObjMonster").setLegal(!1)},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},s([h],e)}(c.default));r.default=f,cc._RF.pop()},{}],BulletFeatureTable:[function(t,e,i){"use strict";cc._RF.push(e,"8f6b0fGAwNLWbRacRh+TOXk","BulletFeatureTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("BulletFeatureVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("bullet_feature_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],BulletFeatureVO:[function(t,e,i){"use strict";cc._RF.push(e,"2e7cfYIIvdHA51s/XRlA2mT","BulletFeatureVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.hitTargetType=t[1],this.targetBuffIds=t[2],this.resId=t[3],this.hitResId=t[4],this.explosionSound=t[5],this.hitAniPlayTime=t[6],this.weight=t[7],this.param1=t[8],this.param2=t[9]},cc._RF.pop()},{}],BulletFeature:[function(t,e,i){"use strict";cc._RF.push(e,"3a6c9x9k85M8Zv0T2cWQMwO","BulletFeature");var n=t,o=i,r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("Tbl"),s=n("App"),l=n("ComSpine"),c=n("NodeUtils"),u=n("PointUtils"),p=n("SpineUtils"),d=n("Utils"),h=n("SkillConst"),f=cc._decorator,g=f.ccclass,y=(f.property,function(){function t(t,e,i,n){this._featureId=null,this._skillTypeList=null,this._featureVO=null,this._scene=null,this._owner=null,this.electroLineList=[],this.initData(t,e,i,n)}return t.prototype.initData=function(t,e,i,n){this._featureId=t,this._skillTypeList=e,this._featureVO=a.default.BulletFeatureTable.findById(t),this._scene=i,this._owner=n},t.prototype.getExploSound=function(){return this._featureVO.explosionSound},t.prototype.getScene=function(){return this._scene},t.prototype.getSkinResId=function(){return this._featureVO.resId},t.prototype.getFeatureId=function(){return this._featureVO.id},t.prototype.getWeight=function(){return this._featureVO.weight},t.prototype.getBulletBombResId=function(){return this._featureVO.hitResId},t.prototype.getBulletBombAniPlayTime=function(){return this._featureVO.hitAniPlayTime},t.prototype.isTargetSkill=function(t){for(var e=t.getSkillType(),i=0,n=this._skillTypeList;i<n.length;i++)if(n[i]==e)return!0;return!1},t.prototype.isTargetBullet=function(t){for(var e=t.getSkillBulletVO().bulletType,i=0,n=this._skillTypeList;i<n.length;i++)if(n[i]==e)return!0;return!1},t.prototype.getTargetBuffIdList=function(){for(var t=[],e=0,i=this._featureVO.targetBuffIds;e<i.length;e++){var n=i[e];n[1]/1e4>d.default.rand()&&t.push(n[0])}return t},t.prototype.getHitTargetType=function(){return this._featureVO.hitTargetType},t.prototype.isHitTrggerSkillidList=function(){return null!=this._featureVO.hitTargetType},t.prototype.runActionByFeatureType=function(t){var e=this;if(this.getHitTargetType()!=h.BulletHitTypeEnum.Electronic)this.getHitTargetType()!=h.BulletHitTypeEnum.Ice||(n=this.getTargetBuffIdList(),t.addBuffIdList(n,this._owner));else{var i=t.getUid(),n=this.getTargetBuffIdList(),o=[];this.getScene().foreachMonster(function(i){if(i.getUid()!=t.getUid()){var n=i.getWorldPos(),r=t.getWorldPos().sub(n),a=r.len();a<e._featureVO.param2&&o.push([n,r,a,i])}}),o.sort(function(t,e){return t[2]-e[2]});for(var r=Math.min(this._featureVO.param1,o.length),a=c.default.seekC(this.getScene().node,"monsterBulletExploLayer"),f=function(r){var h=o[r][3];h.addBuffIdList(n,g._owner);var f=h.getUid(),y=t.getWorldPos(),m=t.getCollBox();y.x+=m.width*(d.default.rand()-.5),y.y+=m.height*d.default.rand();var v=h.getWorldPos(),_=h.getCollBox();v.x+=_.width*(d.default.rand()-.5),v.y+=_.height*d.default.rand();var C=p.default.playSpineOnce(149,a);c.default.setWorldPos(C,v);for(var b=0;b<g.electroLineList.length;b++)if(g.electroLineList[b][0]==i&&g.electroLineList[b][1]==f)return{value:void 0};var S=p.default.playSpineOnce(150,a);S.getComponent(l.default).setCompleteListener(function(){for(var t=0;t<e.electroLineList.length;t++)e.electroLineList[t][0]==i&&e.electroLineList[t][1]==f&&e.electroLineList.splice(t,1);s.default.nodePoolMgr.returnNodeToPool(150,S)}),c.default.setWorldPos(S,y),S.getComponent(sp.Skeleton).updateWorldTransform(),S.angle=u.default.getAngleByVector(o[r][1])+90,S.scaleY=o[r][2]/740,g.electroLineList.push([i,f])},g=this,y=0;y<r;y++){var m=f(y);if("object"==typeof m)return m.value}}},r([g],t)}());o.default=y,cc._RF.pop()},{}],Bullet_100:[function(t,e,i){"use strict";cc._RF.push(e,"683c24kbVpDBL5AR+Bcd6H/","Bullet_100");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ENUMS"),c=o("CollisionUtils"),u=o("MathUtils"),p=o("NodeUtils"),d=o("PointUtils"),h=o("AttributeConst"),f=o("ObjBullet"),g=o("ObjConst"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveDistance=0,e.isAimTarget=0,e.targetPos=cc.v2(0,0),e._lastWPos=null,e._curWPos=cc.v2(),e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initAngle(),this.initFirstPos(),this.initDirection(),this.initMove()},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.offset=cc.v2(this.bulletVO.param1[0],this.bulletVO.param1[1]),this.angle=this.bulletVO.param2,2==this.bulletVO.isRotate?this.isRotate=!1:this.isRotate=!0;var t=this.getAttacker().getAttr(h.AttrTypeEnum.penetrate)||Number(0);this.chuantou=this.bulletVO.param3+t,this.isAimTarget=this.bulletVO.isAimTarget,this.speed=this.bulletVO.speed,this.recycleDistance=this.bulletVO.recycleDistance},e.prototype.initAngle=function(){this.initTargetPos(),this.initDirectionVector()},e.prototype.initTargetPos=function(){if(this.isAimTarget==l.BulletAimTypeEnum.Target&&this.getTarget()&&this.getTarget().node)this.targetPos=this.getTarget().getWorldPos();else if(this.isAimTarget==l.BulletAimTypeEnum.TargetX&&this.getTarget()&&this.getTarget().node){this.targetPos=this.getTarget().getWorldPos();var t=p.default.getWorldPos(this.getAttacker().node);this.targetPos.x<t.x?(this.targetPos=cc.v2(-99999,0),this.angle*=-1):this.targetPos=cc.v2(99999,0)}else this.targetPos=cc.v2(99999,0)},e.prototype.initDirectionVector=function(){var t=p.default.getWorldPos(this.getAttacker().node),e=d.default.getVector(t,this.targetPos),i=d.default.getAngleByVector(e);if((i+=this.angle)%90==0)i%360==0?this.directionVector=cc.v2(1,0):i%270==0?this.directionVector=cc.v2(0,-1):i%180==0?this.directionVector=cc.v2(-1,0):i%90==0&&(this.directionVector=cc.v2(0,1));else{var n=u.default.Angle2Radian(i);this.directionVector=cc.v2(Math.cos(n),Math.sin(n))}},e.prototype.initFirstPos=function(){var t=this.getAttacker().getMuzzle(),e=p.default.getWorldPos(t).sub(this.offset);p.default.setWorldPos(this.node,e.x,e.y)},e.prototype.initDirection=function(){1==this.isRotate&&this.setOrientation(this.directionVector)},e.prototype.initMove=function(){this.moveVector=this.directionVector.mul(this.speed)},e.prototype.updateMover=function(t){this._lastWPos=p.default.getWorldPos(this.node);var e=this.node.getPosition();e.addSelf(this.moveVector.mul(t)),this.node.setPosition(e),this._curWPos=p.default.getWorldPos(this.node),this.moveDistance+=this.moveVector.mul(t).mag(),this.moveDistance>=this.recycleDistance&&this.setLegal(!1)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e),this.chuantou--,this.chuantou<=0&&this.setLegal(!1)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.checkSegmentLineCollision()},e.prototype.checkSegmentLineCollision=function(){var t=this;if(this.isLegal()){var e=this.getAttacker();e.isValid&&this.getScene().foreachEnemy(e.getCamp(),function(e){if(null!=t._lastWPos&&null!=t._curWPos&&e.getType()!=g.ObjTypeEnum.Bullet&&e.isCanAttacked()&&t.isLegal()&&!e.isState(g.ObjStateEnum.Die)){if(t.isTargetInHistory(e))return!1;var i=e.getCollBox();c.default.lineSegmentIntersectRect(t._lastWPos,t._curWPos,i)&&(p.default.setWorldPos(t.node,t._lastWPos),t.hitActionGroup(e))}})}},s([m],e)}(f.ObjBullet));r.default=v,cc._RF.pop()},{}],Bullet_101:[function(t,e,i){"use strict";cc._RF.push(e,"9aa60Dp8hhIZbR27IYRmLzr","Bullet_101");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ENUMS"),c=o("MathUtils"),u=o("NodeUtils"),p=o("PointUtils"),d=o("AttributeConst"),h=o("ObjBullet"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAimTarget=0,e.moveDistance=0,e.targetPos=cc.v2(0,0),e.firstDistance=0,e.firstDistanceCount=0,e.secondSpeed=0,e.secondAcce=0,e.secondAngle=0,e.directionVector2=cc.v2(0,0),e.state=null,e.stateFirst=1,e.stateSecond=2,e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initAngle(),this.initFirstPos(),this.initDirection(),this.initMove()},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.offset=cc.v2(this.bulletVO.param1[0],this.bulletVO.param1[1]),this.angle=this.bulletVO.param2,2==this.bulletVO.isRotate?this.isRotate=!1:this.isRotate=!0;var t=this.getAttacker().getAttr(d.AttrTypeEnum.penetrate)||Number(0);this.chuantou=this.bulletVO.param3+t,this.speed=this.bulletVO.speed,this.isAimTarget=this.bulletVO.isAimTarget,this.firstDistance=this.bulletVO.param3,this.secondSpeed=this.bulletVO.param4,this.secondAcce=this.bulletVO.param5[0],this.secondAngle=this.bulletVO.param6,this.state=this.stateFirst,this.recycleDistance=this.bulletVO.recycleDistance},e.prototype.initAngle=function(){this.initTargetPos(),this.initDirectionVector()},e.prototype.initTargetPos=function(){if(this.isAimTarget==l.BulletAimTypeEnum.Target&&this.getTarget()&&this.getTarget().node)this.targetPos=this.getTarget().getWorldPos();else if(this.isAimTarget==l.BulletAimTypeEnum.TargetX&&this.getTarget()&&this.getTarget().node){this.targetPos=this.getTarget().getWorldPos();var t=u.default.getWorldPos(this.getAttacker().node);this.targetPos.x<t.x?(this.targetPos=cc.v2(-99999,0),this.angle*=-1):this.targetPos=cc.v2(99999,0)}else this.targetPos=cc.v2(99999,0)},e.prototype.initDirectionVector=function(){var t=u.default.getWorldPos(this.getAttacker().node),e=p.default.getVector(t,this.targetPos),i=p.default.getAngleByVector(e);if((i+=this.angle)%90==0)i%360==0?this.directionVector=cc.v2(1,0):i%270==0?this.directionVector=cc.v2(0,-1):i%180==0?this.directionVector=cc.v2(-1,0):i%90==0&&(this.directionVector=cc.v2(0,1));else{var n=c.default.Angle2Radian(i);this.directionVector=cc.v2(Math.cos(n),Math.sin(n))}(i+=this.secondAngle)%90==0?i%360==0?this.directionVector2=cc.v2(1,0):i%270==0?this.directionVector2=cc.v2(0,-1):i%180==0?this.directionVector2=cc.v2(-1,0):i%90==0&&(this.directionVector2=cc.v2(0,1)):(n=c.default.Angle2Radian(i),this.directionVector2=cc.v2(Math.cos(n),Math.sin(n)))},e.prototype.initFirstPos=function(){var t=this.getAttacker().getMuzzle(),e=u.default.getWorldPos(t).sub(this.offset);u.default.setWorldPos(this.node,e.x,e.y)},e.prototype.initDirection=function(){1==this.isRotate&&this.setOrientation(this.directionVector)},e.prototype.initMove=function(){this.moveVector=this.directionVector.mul(this.speed)},e.prototype.updateMover=function(t){if(this.state==this.stateFirst){var e=this.moveVector.mul(t);this.setPos(this.getPos().add(e)),this.firstDistanceCount+=e.len(),this.firstDistanceCount>=this.firstDistance&&(this.state=this.stateSecond,this.setOrientation(this.directionVector2)),this.moveDistance+=e.mag(),this.moveDistance>=this.recycleDistance&&this.setLegal(!1)}else if(this.state==this.stateSecond){this.secondSpeed+=this.secondAcce*t;var i=this.directionVector2.mul(this.secondSpeed);this.setPos(this.getPos().add(i)),this.moveDistance+=i.mag(),this.moveDistance>=this.recycleDistance&&this.setLegal(!1)}},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e),this.chuantou--,this.chuantou<=0&&this.setLegal(!1)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},s([g],e)}(h.ObjBullet));r.default=y,cc._RF.pop()},{}],Bullet_102:[function(t,e,i){"use strict";cc._RF.push(e,"16b36XeU15KhLfPhQYU4sZT","Bullet_102");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ENUMS"),c=o("MathUtils"),u=o("NodeUtils"),p=o("PointUtils"),d=o("AttributeConst"),h=o("ObjBullet"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAimTarget=0,e.moveDistance=0,e.targetPos=cc.v2(0,0),e.gravity=0,e.speedX=0,e.speedY=0,e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initAngle(),this.initFirstPos(),this.initDirection(),this.initMove()},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.offset=cc.v2(this.bulletVO.param1[0],this.bulletVO.param1[1]),this.angle=this.bulletVO.param2,2==this.bulletVO.isRotate?this.isRotate=!1:this.isRotate=!0;var t=this.getAttacker().getAttr(d.AttrTypeEnum.penetrate)||Number(0);this.chuantou=this.bulletVO.param3+t,this.isAimTarget=this.bulletVO.isAimTarget,this.speed=this.bulletVO.speed,this.gravity=this.bulletVO.param4,this.recycleDistance=this.bulletVO.recycleDistance},e.prototype.initAngle=function(){this.initTargetPos(),this.initDirectionVector()},e.prototype.initTargetPos=function(){if(this.isAimTarget==l.BulletAimTypeEnum.Target&&this.getTarget()&&this.getTarget().node)this.targetPos=this.getTarget().getWorldPos();else if(this.isAimTarget==l.BulletAimTypeEnum.TargetX&&this.getTarget()&&this.getTarget().node){this.targetPos=this.getTarget().getWorldPos();var t=u.default.getWorldPos(this.getAttacker().node);this.targetPos.x<t.x?(this.targetPos=cc.v2(-99999,0),this.angle*=-1):this.targetPos=cc.v2(99999,0)}else this.targetPos=cc.v2(99999,0)},e.prototype.initDirectionVector=function(){var t=u.default.getWorldPos(this.getAttacker().node),e=p.default.getVector(t,this.targetPos),i=p.default.getAngleByVector(e);if((i+=this.angle)%90==0)i%360==0?this.directionVector=cc.v2(1,0):i%270==0?this.directionVector=cc.v2(0,-1):i%180==0?this.directionVector=cc.v2(-1,0):i%90==0&&(this.directionVector=cc.v2(0,1));else{var n=c.default.Angle2Radian(i);this.directionVector=cc.v2(Math.cos(n),Math.sin(n))}},e.prototype.initFirstPos=function(){var t=this.getAttacker().getMuzzle(),e=u.default.getWorldPos(t).sub(this.offset);u.default.setWorldPos(this.node,e.x,e.y)},e.prototype.initDirection=function(){1==this.isRotate&&this.setOrientation(this.directionVector)},e.prototype.initMove=function(){this.moveVector=this.directionVector.mul(this.speed),this.speedX=this.moveVector.x,this.speedY=this.moveVector.y},e.prototype.updateMover=function(t){var e=cc.v2(this.speedX*t,this.speedY*t);this.setOrientation(e),this.node.setPosition(this.node.getPosition().add(e)),this.speedY+=this.gravity*t,this.moveDistance+=e.len(),this.moveDistance>=this.recycleDistance&&this.setLegal(!1)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e),this.chuantou--,this.chuantou<=0&&this.setLegal(!1)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},s([g],e)}(h.ObjBullet));r.default=y,cc._RF.pop()},{}],Bullet_103:[function(t,e,i){"use strict";cc._RF.push(e,"a7448qpOtxP8J5kISneUGaU","Bullet_103");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ENUMS"),c=o("MathUtils"),u=o("NodeUtils"),p=o("PointUtils"),d=o("ObjBullet"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAimTarget=0,e.targetPos=cc.v2(0,0),e.constTimeCount=0,e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initAngle(),this.initFirstPos(),this.initDirection()},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.offset=cc.v2(this.bulletVO.param1[0],this.bulletVO.param1[1]),this.angle=this.bulletVO.param2,this.constTime=this.bulletVO.param3,this.isAimTarget=this.bulletVO.isAimTarget,2==this.bulletVO.isRotate?this.isRotate=!1:this.isRotate=!0},e.prototype.initAngle=function(){this.initTargetPos(),this.initDirectionVector()},e.prototype.initTargetPos=function(){if(this.isAimTarget==l.BulletAimTypeEnum.Target&&this.getTarget()&&this.getTarget().node)this.targetPos=this.getTarget().getWorldPos();else if(this.isAimTarget==l.BulletAimTypeEnum.TargetX&&this.getTarget()&&this.getTarget().node){this.targetPos=this.getTarget().getWorldPos();var t=u.default.getWorldPos(this.getAttacker().node);this.targetPos.x<t.x?(this.targetPos=cc.v2(-99999,0),this.angle*=-1):this.targetPos=cc.v2(99999,0)}else this.targetPos=cc.v2(99999,0)},e.prototype.initDirectionVector=function(){var t=u.default.getWorldPos(this.getAttacker().node),e=p.default.getVector(t,this.targetPos),i=p.default.getAngleByVector(e);if((i+=this.angle)%90==0)i%360==0?this.directionVector=cc.v2(1,0):i%270==0?this.directionVector=cc.v2(0,-1):i%180==0?this.directionVector=cc.v2(-1,0):i%90==0&&(this.directionVector=cc.v2(0,1));else{var n=c.default.Angle2Radian(i);this.directionVector=cc.v2(Math.cos(n),Math.sin(n))}},e.prototype.initFirstPos=function(){var t=this.getAttacker(),e=t.getPunchPoint();null==e&&(e=t.node);var i=u.default.getWorldPos(e).sub(this.offset);u.default.setWorldPos(this.node,i.x,i.y)},e.prototype.initDirection=function(){1==this.isRotate&&this.setOrientation(this.directionVector)},e.prototype.updateMover=function(t){this.constTimeCount+=t,this.constTimeCount>this.constTime&&this.setLegal(!1)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},s([f],e)}(d.ObjBullet));r.default=g,cc._RF.pop()},{}],Bullet_104:[function(t,e,i){"use strict";cc._RF.push(e,"78e2aJF6wJB0bM3Rag1tw3U","Bullet_104");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,c=o("MathUtils"),u=o("NodeUtils"),p=o("PointUtils"),d=o("Utils"),h=o("ObjBullet"),f=o("ObjConst");(function(t){t[t.SEARCH_TARGET=0]="SEARCH_TARGET",t[t.ROTATION_FLY=1]="ROTATION_FLY",t[t.FOLLOW_FLY=2]="FOLLOW_FLY",t[t.FREELY=3]="FREELY"})(l||(l={}));var g=cc._decorator,y=g.ccclass,m=(g.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initFirstPos(),this.initFirstAngle(),this.searchLatelyEnemy(),this.initAngleSpeed(),this.initPassAngle(),this.initRandomTime()},e.prototype.initData=function(){this.m_offset=this._skillBulletVO.param1,this.m_speed=this._skillBulletVO.speed,this.m_state=l.ROTATION_FLY},e.prototype.initRandomTime=function(){var t=this._skillBulletVO.param5;this.m_rangeTime=d.default.randFloat(t[0],t[1])},e.prototype.initFirstPos=function(){var t=this.getAttacker().getMuzzleWPos();u.default.setWorldPos(this.node,t),this.setOrientation(cc.v2(1,0))},e.prototype.initFirstAngle=function(){this.getAttacker().isFlipX()?(this.setOrientation(cc.v2(-1,0)),this.isPositive=!1):(this.setOrientation(cc.v2(1,0)),this.isPositive=!0)},e.prototype.searchLatelyEnemy=function(){var t=this;this.m_state=l.SEARCH_TARGET;var e=[],i=u.default.getWorldPos(this.node),n=this.getAttacker();n.isValid?(this.getScene().foreachEnemy(n.getCamp(),function(n){if(!n.isState(f.ObjStateEnum.Die)){var o=u.default.getWorldPos(n.node).sub(i).len();o<50?t.setFollowTarget(n):e.push({enemy:n,len:o})}}),e.sort(function(t,e){return t.len-e.len}),e[0]?(this.setFollowTarget(e[0].enemy),this.m_state=l.ROTATION_FLY):this.m_state=l.FREELY):this.m_state=l.FREELY},e.prototype.setFollowTarget=function(t){this.m_followTarget=t},e.prototype.getFollowTarget=function(){return this.m_followTarget},e.prototype.initAngleSpeed=function(){this.m_angleSpeed=d.default.randFloat(this.m_minAngleSpeed,this.m_maxAngleSpeed)},e.prototype.initPassAngle=function(){var t=this.getFollowTarget();if(null!=t){var e=t.getWorldPos(),i=this.getWorldPos(),n=e.sub(i),o=p.default.getAngleByVector(n);if(o=c.default.StdAngle(o),this.isPositive)o>270&&o<360?this.setPassAngle(-(360-o)):this.setPassAngle(o);else if(o>180&&o<270)this.setPassAngle(270-o);else{var r=c.default.StdSignAngle(o);this.setPassAngle(-(180-r))}}},e.prototype.setPassAngle=function(t){this.passAngle=t},e.prototype.updateMover=function(t){this.m_state==l.SEARCH_TARGET?this.searchLatelyEnemy():this.m_state==l.ROTATION_FLY?this.updateRandomRotation(t):this.m_state==l.FOLLOW_FLY?this.follow(t):this.flyFreely(t)},e.prototype.flyFreely=function(){if(this.m_lastVector){var t=cc.v2(this.getWorldPos());this.setWorldPos(t.add(this.m_lastVector))}else this.setLegal(!1)},e.prototype.isTargetValid=function(t){return null!=t&&!!t.isValid&&!!t.isLegal()&&!t.isState(f.ObjStateEnum.Die)},e.prototype.follow=function(t){var e=this.getFollowTarget();if(this.isTargetValid(e)){var i=e.getCollisionRangeCenter(),n=this.getWorldPos(),o=i.sub(n),r=p.default.getAngleByVector(o),a=p.default.angle2VectorUnit(r),s=p.default.extendVector(a,this.m_speed*t),c=n.add(s);this.setWorldPos(c),this.setOrientation(s),this.m_lastVector=s}else this.m_state=l.SEARCH_TARGET},e.prototype.updateRandomRotation=function(t){var e=this.getWorldPos(),i=this.passAngle*t/this.m_rangeTime;this.passAngle=this.passAngle-i;var n=this.glAngle+i,o=p.default.angle2VectorUnit(n),r=p.default.extendVector(o,this.m_speed*t),a=e.add(r);this.setWorldPos(a),this.setOrientation(r),this.m_lastVector=r,this.m_rangeTime-=t,this.m_rangeTime<=0&&(this.m_state=l.FOLLOW_FLY)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e),this.setLegal(!1)},e.prototype.isHit=function(t){var e=u.default.getWorldPos(t.node),i=this.getWorldPos();return e.sub(i).len(),this.isHit_norepeat(t)},s([y],e)}(h.ObjBullet));r.default=m,cc._RF.pop()},{}],Bullet_105:[function(t,e,i){"use strict";cc._RF.push(e,"8d9cdIPbeJBSq4CF3+rDAUa","Bullet_105");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjBullet"),c=cc._decorator,u=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAimTarget=0,e.targetPos=cc.v2(0,0),e.constTimeCount=0,e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initFirstPos()},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.offset=cc.v2(this.bulletVO.param1[0],this.bulletVO.param1[1]),this.angle=this.bulletVO.param2,this.constTime=this.bulletVO.param3,this.isAimTarget=this.bulletVO.isAimTarget,2==this.bulletVO.isRotate?this.isRotate=!1:this.isRotate=!0},e.prototype.initFirstPos=function(){var t=this._scene.convertScreenToWorldPoint(cc.v2(0,0));this.setWorldPos(t)},e.prototype.updateMover=function(t){this.constTimeCount+=t,this.constTimeCount>this.constTime&&this.setLegal(!1)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e)},e.prototype.isHit=function(t){return!!t.isInsideScreen()},s([u],e)}(l.ObjBullet));r.default=p,cc._RF.pop()},{}],Bullet_106:[function(t,e,i){"use strict";cc._RF.push(e,"ab6a2bHLcFGkakpIvIgH86y","Bullet_106");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ENUMS"),c=o("MathUtils"),u=o("NodeUtils"),p=o("PointUtils"),d=o("SpineUtils"),h=o("Utils"),f=o("ObjBullet"),g=cc._decorator,y=g.ccclass,m=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAimTarget=0,e.targetPos=cc.v2(0,0),e.constTimeCount=0,e.followNode=null,e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initAngle(),this.initFirstPos(),this.initDirection(),this.initAttack()},e.prototype.initAttack=function(){for(var t=this,e=this._skin.getComponent(sp.Skeleton),i=e.skeletonData.getRuntimeData().animations,n=0,o=0;o<i.length;o++)"play_end"==i[o].name&&(n=i[o].duration);var r=this.constTime-n;this.node.runAction(cc.sequence(cc.delayTime(r),cc.callFunc(function(){e.setAnimation(0,"play_end",!1)}))),e.setAnimation(0,"play_ready",!1),e.addAnimation(0,"play_continue",!0),e.setCompleteListener(function(e){"play_end"==e.animation.name&&t.setLegal(!1)})},e.prototype.initSkin=function(){this._skin=d.default.createSpineByResId(this.getSkillBulletVO().bulletResID,!1,this.node),this._skin.name="skin",this._skin.scaleY=2},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.offset=cc.v2(this.bulletVO.param1[0],this.bulletVO.param1[1]),this.angle=0,this.isAimTarget=this.bulletVO.isAimTarget,this.constTime=this.bulletVO.param2,this.isRotate=!1},e.prototype.initAngle=function(){this.initTargetPos(),this.initDirectionVector()},e.prototype.initTargetPos=function(){if(this.isAimTarget==l.BulletAimTypeEnum.Target&&this.getAttacker().getTarget()&&this.getAttacker().getTarget().node)this.targetPos=this.getAttacker().getTarget().getWorldPos();else if(this.isAimTarget==l.BulletAimTypeEnum.TargetX&&this.getAttacker().getTarget()&&this.getAttacker().getTarget().node){this.targetPos=this.getAttacker().getTarget().getWorldPos();var t=u.default.getWorldPos(this.getAttacker().node);this.targetPos.x<t.x?this.targetPos=cc.v2(-99999,0):this.targetPos=cc.v2(99999,0)}else this.targetPos=cc.v2(99999,0)},e.prototype.showCollExplose=function(t){var e;if(this._bulletFeature){var i=this._bulletFeature.getBulletBombResId();if(i&&null==(e=d.default.createSpineByResId(i,!1,this.getScene().node)))return void console.error("\u7206\u70b8\u521b\u5efa\u4e0d\u51fa\u6765")}else if(null==(e=d.default.createSpineByResId(this._skillBulletVO.hitPathId,!1,this.getScene().node)))return void console.error("\u7206\u70b8\u521b\u5efa\u4e0d\u51fa\u6765");var n=90*(h.default.rand()-.5);if(e.scale*=this.randBombScale,e.angle=e.angle+n,e.getComponent("ComSpine").setCompleteListener(function(t){"play"==t.animation.name&&e.destroy()}),t){var o=u.default.getWorldPos(this.node),r=t.getWorldPos();u.default.setWorldPos(e,cc.v2(r.x,o.y))}else console.warn("not target, bulletId: %s",this._skillBulletVO.id),e.destroy()},e.prototype.initDirectionVector=function(){var t=u.default.getWorldPos(this.getAttacker().node),e=p.default.getVector(t,this.targetPos),i=p.default.getAngleByVector(e);if((i+=this.angle)%90==0)i%360==0?this.directionVector=cc.v2(1,0):i%270==0?this.directionVector=cc.v2(0,-1):i%180==0?this.directionVector=cc.v2(-1,0):i%90==0&&(this.directionVector=cc.v2(0,1));else{var n=c.default.Angle2Radian(i);this.directionVector=cc.v2(Math.cos(n),Math.sin(n))}},e.prototype.initFirstPos=function(){var t=this.getAttacker().getMuzzle();this.followNode=t;var e=u.default.getWorldPos(this.followNode).sub(this.offset);u.default.setWorldPos(this.node,e.x,e.y)},e.prototype.updateMover=function(){this.initTargetPos();var t=u.default.getWorldPos(this.followNode).sub(this.offset);u.default.setWorldPos(this.node,t.x,t.y);var e=this.targetPos.sub(t);this.setOrientation(e)},e.prototype.initDirection=function(){this.setOrientation(this.directionVector)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},s([y],e)}(f.ObjBullet));r.default=m,cc._RF.pop()},{}],Bullet_107:[function(t,e,i){"use strict";cc._RF.push(e,"39428tEs5FF7qBD9QkPTJ9m","Bullet_107");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjBullet"),c=cc._decorator,u=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s)},s([u],e)}(l.ObjBullet));r.default=p,cc._RF.pop()},{}],Bullet_108:[function(t,e,i){"use strict";cc._RF.push(e,"5da65XNBu5ODIRgOGo5gmBP","Bullet_108");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ENUMS"),c=o("CollisionUtils"),u=o("MathUtils"),p=o("NodeUtils"),d=o("PointUtils"),h=o("AttributeConst"),f=o("ObjBullet"),g=o("ObjConst"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitOnce=!1,e.moveDistance=0,e.isAimTarget=0,e.targetPos=cc.v2(0,0),e.hitEffectNum=0,e._lastWPos=null,e._curWPos=cc.v2(),e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initAngle(),this.initFirstPos(),this.initDirection(),this.initMove()},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.offset=cc.v2(this.bulletVO.param1[0],this.bulletVO.param1[1]),this.angle=this.bulletVO.param2,2==this.bulletVO.isRotate?this.isRotate=!1:this.isRotate=!0;var t=this.getAttacker().getAttr(h.AttrTypeEnum.penetrate)||Number(0);this.chuantou=this.bulletVO.param3+t,this.isAimTarget=this.bulletVO.isAimTarget,this.speed=this.bulletVO.speed,this.recycleDistance=this.bulletVO.recycleDistance,this.hitEffectNum=1},e.prototype.initAngle=function(){this.initTargetPos(),this.initDirectionVector()},e.prototype.initTargetPos=function(){if(this.isAimTarget==l.BulletAimTypeEnum.Target&&this.getTarget()&&this.getTarget().node)this.targetPos=this.getTarget().getWorldPos();else if(this.isAimTarget==l.BulletAimTypeEnum.TargetX&&this.getTarget()&&this.getTarget().node){this.targetPos=this.getTarget().getWorldPos();var t=p.default.getWorldPos(this.getAttacker().node);this.targetPos.x<t.x?(this.targetPos=cc.v2(-99999,0),this.angle*=-1):this.targetPos=cc.v2(99999,0)}else this.targetPos=cc.v2(99999,0)},e.prototype.initDirectionVector=function(){var t=p.default.getWorldPos(this.getAttacker().node),e=d.default.getVector(t,this.targetPos),i=d.default.getAngleByVector(e);if((i+=this.angle)%90==0)i%360==0?this.directionVector=cc.v2(1,0):i%270==0?this.directionVector=cc.v2(0,-1):i%180==0?this.directionVector=cc.v2(-1,0):i%90==0&&(this.directionVector=cc.v2(0,1));else{var n=u.default.Angle2Radian(i);this.directionVector=cc.v2(Math.cos(n),Math.sin(n))}},e.prototype.initFirstPos=function(){var t=this.getAttacker().getMuzzle(),e=p.default.getWorldPos(t).sub(this.offset);p.default.setWorldPos(this.node,e.x,e.y)},e.prototype.initDirection=function(){1==this.isRotate&&this.setOrientation(this.directionVector)},e.prototype.initMove=function(){this.moveVector=this.directionVector.mul(this.speed)},e.prototype.hitActionGroup=function(e){var i=this;this.hitOnce||(this.hitOnce=!0,this._skin.active=!1,t.prototype.hitActionGroup.call(this,e),cc.tween(this.node).delay(.8).call(function(){var t=[],n=i.getSkill().getTargetBuffIdList();i.getScene().foreachMonster(function(n){if(n.getUid()!=e.getUid()){var o=n.getWorldPos();e.getWorldPos().sub(o).len()>i._skillBulletVO.param3||t.push(n)}});for(var o=0;o<t.length;o++)t[o].addBuffIdList(n)}).delay(.5).call(function(){i.setLegal(!1)}).start())},e.prototype.updateMover=function(t){this._lastWPos=p.default.getWorldPos(this.node);var e=this.node.getPosition();e.addSelf(this.moveVector.mul(t)),this.node.setPosition(e),this._curWPos=p.default.getWorldPos(this.node),this.moveDistance+=this.moveVector.mul(t).mag(),this.moveDistance>=this.recycleDistance&&(this.showCollExplose(),this.setLegal(!1))},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},e.prototype.onTick=function(e){this.hitOnce||(t.prototype.onTick.call(this,e),this.checkSegmentLineCollision())},e.prototype.checkSegmentLineCollision=function(){var t=this;if(this.isLegal()){var e=this.getAttacker();e.isValid&&this.getScene().foreachEnemy(e.getCamp(),function(e){if(e.getType()!=g.ObjTypeEnum.Bullet&&e.isCanAttacked()&&t.isLegal()&&!e.isState(g.ObjStateEnum.Die)){if(t.isTargetInHistory(e))return!1;var i=e.getCollBox();c.default.lineSegmentIntersectRect(t._lastWPos,t._curWPos,i)&&(p.default.setWorldPos(t.node,t._lastWPos),t.hitActionGroup(e))}})}},s([m],e)}(f.ObjBullet));r.default=v,cc._RF.pop()},{}],Bullet_109:[function(t,e,i){"use strict";cc._RF.push(e,"3a7737IP2pB7pdaRrlw1tm4","Bullet_109");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ComSpine"),c=o("SpineUtils"),u=o("ObjBullet"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletVO=null,e.resId=null,e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initFirstPos(),this.initPlayingSpine()},e.prototype.initPlayingSpine=function(){var t=this,e=c.default.createSpineByResId(this.resId,!1,this.node).getComponent(l.default);e.setEventListener(function(){t.checkCollision_enemyGroup()}),e.setCompleteListener(function(){t.setLegal(!1)})},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.resId=this.bulletVO.param2},e.prototype.initFirstPos=function(){var t=this.getAttacker();this.node.parent=t.node,this.node.x=0,this.node.y=300},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.hitOne_norepeat(e)},e.prototype.isHit=function(t){return!!t.isCanAttacked()&&!this.isTargetInHistory(t)&&!!t.isInsideScreen},e.prototype.onTick=function(){},s([d],e)}(u.ObjBullet));r.default=h,cc._RF.pop()},{}],Bullet_1:[function(t,e,i){"use strict";cc._RF.push(e,"6bc36PBFB1FDbk3iLTXwlIE","Bullet_1");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjBullet"),c=cc._decorator,u=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([u],e)}(l.ObjBullet));r.default=p,cc._RF.pop()},{}],Bullet_200:[function(t,e,i){"use strict";cc._RF.push(e,"2b30fx9sy9Ipbjn7yM9klwS","Bullet_200");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjBullet"),c=cc._decorator,u=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([u],e)}(l.ObjBullet));r.default=p,cc._RF.pop()},{}],Bullet_300:[function(t,e,i){"use strict";cc._RF.push(e,"3d735cS9NlMt4a9zI2itQvv","Bullet_300");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("MathUtils"),c=o("NodeUtils"),u=o("PointUtils"),p=o("SpineUtils"),d=o("ObjBullet"),h=o("ObjConst"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveDistance=0,e.targetPos=cc.v2(0,0),e.bornType=null,e.firstPos=cc.v2(0,0),e.delayTime=null,e.delayTimeCount=0,e.warningRes=[],e}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s),this.initData(),this.initAngle(),this.initFirstPos(),this.initDirection(),this.initMove(),this.initWarning()},e.prototype.initWarning=function(){if(0!=this.delayTime)if(null!=this.warningRes){var t=p.default.createSpineByResId(this.warningRes[0],!0,this.node),e=p.default.createSpineByResId(this.warningRes[1],!0,this.node);this.bornType==h.BulletBornTypeEnum.BORNXRIGHT?(t.x=t.x-this._skin.height-30,t.y=t.y-(this._skin.height+30)*Math.tan(l.default.Angle2Radian(this.angle)),e.angle+=this.angle):this.bornType==h.BulletBornTypeEnum.BORNY?(t.y=t.y-this._skin.height-30,t.x=t.x+(this._skin.height+30)*Math.tan(l.default.Angle2Radian(this.angle)),e.angle+=this.angle+90):this.bornType==h.BulletBornTypeEnum.BORNXLEFT&&(t.x=t.x+this._skin.height+30,t.y=t.y+(this._skin.height+30)*Math.tan(l.default.Angle2Radian(this.angle)),e.angle+=this.angle+180),e.scaleX=3,this.node.runAction(cc.sequence(cc.delayTime(this.delayTime),cc.callFunc(function(){t.destroy(),e.destroy()})))}else console.error("\u7b56\u5212\u5c11\u914d\u7f6e\u4e86\u5bfc\u5f39\u7684\u9884\u8b66\u8d44\u6e90\uff0c\u5b50\u5f39ID\uff1a %s",this.bulletVO.id)},e.prototype.initData=function(){this.bulletVO=this.getSkillBulletVO(),this.bornType=this.bulletVO.param1[0],this.offset=this.bulletVO.param1[1]/1e4||1e4,2==this.bulletVO.isRotate?this.isRotate=!1:this.isRotate=!0,this.angle=this.bulletVO.param2,this.delayTime=this.bulletVO.param3,this.speed=this.bulletVO.speed,this.recycleDistance=this.bulletVO.recycleDistance,this.warningRes=this.bulletVO.param5},e.prototype.initAngle=function(){this.initDirectionVector()},e.prototype.initTargetPos=function(){null==this.getTarget()?(this.targetPos=cc.v2(1e4,0),this.setLegal(!1)):this.targetPos=c.default.getWorldPos(this.getTarget().node)},e.prototype.initDirectionVector=function(){if(this.bornType==h.BulletBornTypeEnum.BORNXRIGHT){var t=180+this.angle;this.directionVector=u.default.craeteVectorByRadian(l.default.Angle2Radian(t))}else this.bornType==h.BulletBornTypeEnum.BORNY?(t=270+this.angle,this.directionVector=u.default.craeteVectorByRadian(l.default.Angle2Radian(t))):this.bornType==h.BulletBornTypeEnum.BORNXLEFT&&(t=this.angle,this.directionVector=u.default.craeteVectorByRadian(l.default.Angle2Radian(t)))},e.prototype.initFirstPos=function(){var t=cc.winSize;this.firstPos=cc.v2(0,0),this.bornType==h.BulletBornTypeEnum.BORNXRIGHT?(this.firstPos.x=t.width+this._skin.height,this.firstPos.y=cc.winSize.height*this.offset):this.bornType==h.BulletBornTypeEnum.BORNY?(this.firstPos.y=t.height+this._skin.height,this.firstPos.x=cc.winSize.width*this.offset):this.bornType==h.BulletBornTypeEnum.BORNXLEFT&&(this.firstPos.y=cc.winSize.height*this.offset,this.firstPos.x=-this._skin.height);var e=this.getScene().convertScreenToWorldPoint(this.firstPos);c.default.setWorldPos(this.node,e)},e.prototype.initDirection=function(){1==this.isRotate&&this.setOrientation(this.directionVector)},e.prototype.initMove=function(){this.moveVector=this.directionVector.mul(this.speed)},e.prototype.updateMover=function(t){if(this.delayTimeCount+=t,this.delayTimeCount<this.delayTime)if(this.bornType==h.BulletBornTypeEnum.BORNXRIGHT){var e=this.getScene().convertScreenToWorldPoint(this.firstPos);c.default.setWorldPos(this.node,e)}else this.bornType==h.BulletBornTypeEnum.BORNXLEFT&&(e=this.getScene().convertScreenToWorldPoint(this.firstPos),c.default.setWorldPos(this.node,e));else this.node.setPosition(this.node.getPosition().add(this.moveVector.mul(t))),this.moveDistance+=this.moveVector.mul(t).mag(),this.moveDistance>=this.recycleDistance&&this.setLegal(!1)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e),this.setLegal(!1)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},s([g],e)}(d.ObjBullet));r.default=y,cc._RF.pop()},{}],Bullet_400:[function(t,e,i){"use strict";cc._RF.push(e,"a056aAR849ISLolrT8i49uK","Bullet_400");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("NodeUtils"),c=o("ObjBullet"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(e,i,n,o,r,a,s){t.prototype.init.call(this,e,i,n,o,r,a,s)},e.prototype.hitOne=function(e){t.prototype.hitOne.call(this,e)},e.prototype.isHit=function(t){return this.isHit_norepeat(t)},e.prototype.onTick=function(e){0!=this.getAttacker().isLegal()&&null!=this.getAttacker()||this.setLegal(!1),t.prototype.onTick.call(this,e);var i=this.getAttacker().getWorldPos();l.default.setWorldPos(this.node,i)},e.prototype.setLegal=function(e){t.prototype.setLegal.call(this,e)},s([p],e)}(c.ObjBullet));r.default=d,cc._RF.pop()},{}],CCEvent:[function(t,e,i){"use strict";cc._RF.push(e,"aca2c0LY+pELqp54sRQQI3e","CCEvent");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.CCEventRedPoint=void 0,function(t){t.CardHasNewCard="CardHasNewCard",t.CardHasUpgrade="CardHasUpgrade",t.HonorFreeBox="HonorFreeBox",t.TaskDailyBox="TaskDailyBox",t.TaskWeeklyBox="TaskWeeklyBox",t.TaskAward="TaskAward",t.ShopBox="ShopBox",t.EquipmentEquip="EquipmentEquip",t.NewEquipment="NewEquipment",t.StrenthEquipment="StrenthEquipment",t.AwakeEquipment="AwakeEquipment",t.SigninChange="SigninChange"}(n.CCEventRedPoint||(n.CCEventRedPoint={})),n.default={LOAD_SCENE:"LOAD_SCENE",SCENE_LOAD_FINISH:"SCENE_LOAD_FINISH",GAME_STARTLOAD:"GAME_STARTLOAD",RES_LOAD_SUCC:"RES_LOAD_SUCC",SHOW_TIPS_WORD:"SHOW_TIPS_WORD",CLOSE_VIEW:"CLOSE_VIEW",SHOW_VIEW:"SHOW_VIEW",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",CLICK:"click",CLICK_CHAPTER:"CLICK_CHAPTER",ROLE_ADD_BUFF:"ROLE_ADD_BUFF",HERO_HURT:"HERO_HURT",HERO_JUMP:"HERO_JUMP",HERO_FALL:"HERO_FALL",HERO_DROP:"HERO_DROP",HERO_DEAD:"HERO_DEAD",HERO_REBORN:"HERO_REBORN",HERO_USE_INITIATIVE_SKILL:"HERO_USE_INITIATIVE_SKILL",BAG_ITEM_CHANGE:"BAG_ITEM_CHANGE",FIGHT_ATTRCHANGE:"FIGHT_ATTRCHANGE",MAP_UPDATE:"MAP_UPDATE",CHAPTER_FINISH:"CHAPTER_FINISH",LEVEL_FINISH:"LEVEL_FINISH",LEVEL_BEGIN:"LEVEL_BEGIN",LEVEL_WARNING:"LEVEL_WARNING",LEVEL_WAVE_CHANGE:"LEVEL_WAVE_CHANGE",LEVEL_SUCC:"LEVEL_SUCC",LEVEL_FAIL:"LEVEL_FAIL",LEVEL_REMOVE_PAUSEVIEW_LIMIT:"",LEVEL_BOSS_JUSE_DIE:"LEVEL_BOSS_JUSE_DIE",MONSTER_TARGET_MONSTER_APPEAR:"MONSTER_TARGET_MONSTER_APPEAR",MONSTER_DROP_ITEM:"MONSTER_DROP_ITEM",BOSS_DROP_ITEM:"BOSS_DROP_ITEM",MONSTER_BORN:"MONSTER_BORN",BOSS_BORN:"BOSS_BORN",REWARD_SKILL_ONE:"REWARD_SKILL_ONE",REWARD_SKILL_THREE:"REWARD_SKILL_THREE",REWARD_VIEW_REFLASH_DROP:"REWARD_VIEW_REFLASH_DROP",REWARD_VIEW_FETCH_ALL_DROP:"REWARD_VIEW_FETCH_ALL_DROP",OPEN_REBORN_VIEW:"OPEN_REBORN_VIEW",CARD_ADD_CARD:"CARD_ADD_CARD",CARD_VIEW_CLICK_BG:"CARD_VIEW_CLICK_BG",CARD_UPGRADE:"CARD_UPGRADE",CARD_REMOVE_SLOT_CARD:"CARD_REMOVE_SLOT_CARD",CARD_ADD_SLOT_CARD:"CARD_ADD_SLOT_CARD",CARD_SHINEONCE:"CARD_SHINEONCE",CARD_NEW_CHANGE:"CARD_NEW_CHANGE",CARD_CLEAR_UPGRADE_TAG:"CARD_CLEAR_UPGRADE_TAG",CARD_CLICK_CARD:"CARD_CLICK_CARD",KEYBOARD_SHOW_DEBUG:"KEYBOARD_SHOW_DEBUG",WAR_HONOR_RECEIVE_AWARD:"WAR_HONOR_RECEIVE_AWARD",WAR_HONOR_RECEIVE_AWARD_REPEAT:"WAR_HONOR_RECEIVE_AWARD_REPEAT",WAR_HONOR_PROGRESS_CHANGE:"WAR_HONOR_PROGRESS_CHANGE",DailyActivity_CREASE:"DailyActivity_CREASE",DailyActivity_Receive_WeekActivityAward:"DailyActivity_Receive_WeekActivityAward",DailyActivity_Receive_DayActivityAward:"DailyActivity_Receive_DayActivityAward",DailyActivity_Receive_Award:"DailyActivity_Receive_Award",GUIDE_CLICK_REWARD_SKILL_ONE_SELECT:"GUIDE_CLICK_REWARD_SKILL_ONE_SELECT",GUIDE_CLICK_ROCKER_MOVE:"GUIDE_CLICK_ROCKER_MOVE",GUIDE_CLICK_JUMP:"GUIDE_CLICK_JUMP",GUIDE_ENTER_FIGHT:"GUIDE_ENTER_FIGHT",GUIDE_CLICK_INITIATIVESKILL:"GUIDE_CLICK_INITIATIVESKILL",GUIDE_ENTER_SHOP:"GUIDE_ENTER_SHOP",GUIDE_SHOP_ACCELERATE:"GUIDE_SHOP_ACCELERATE",GUIDE_SHOP_ACCELERATECONFIRM:"GUIDE_SHOP_ACCELERATECONFIRM",GUIDE_SHOP_RAREREWARD:"GUIDE_SHOP_RAREREWARD",GUIDE_SHOP_KINGREWARD:"GUIDE_SHOP_KINGREWARD",GUIDE_SHOP_REFRESH:"GUIDE_SHOP_REFRESH",GUIDE_SHOP_REFRESH_CONFIRM:"GUIDE_SHOP_REFRESH_CONFIRM",GUIDE_ENTER_CARD:"GUIDE_ENTER_CARD",GUIDE_CARD_CLICK:"GUIDE_CARD_CLICK",GUIDE_CARD_EQUIP:"GUIDE_CARD_EQUIP",GUIDE_CARD_CHAPTER:"GUIDE_CARD_CHAPTER",GUIDE_CARD_FIGHT:"GUIDE_CARD_FIGHT",GUIDE_SHOP_COMMONREWARD:"GUIDE_SHOP_COMMONREWARD",GUIDE_SHOP_SENIORREWARD:"GUIDE_SHOP_SENIORREWARD",GUIDE_CHAPTERVIEW_AFTER_SHOP:"GUIDE_CHAPTERVIEW_AFTER_SHOP",GUIDE_FIGHTSCENE_AFTER_SHOP:"GUIDE_FIGHTSCENE_AFTER_SHOP",GUIDE_ENTER_EQUIPMENT:"GUIDE_ENTER_EQUIPMENT",GUIDE_EQUIPMENT_CLICK:"GUIDE_EQUIPMENT_CLICK",GUIDE_EQUIPMENT_EQUIP:"GUIDE_EQUIPMENT_EQUIP",GUIDE_EQUIPMENT_CHAPTER:"GUIDE_EQUIPMENT_CHAPTER",GUIDE_EQUIPMENT_FIGHT:"GUIDE_EQUIPMENT_FIGHT",SHOP_SHOW_REWARD:"SHOP_SHOW_REWARD",PLATFORM_EVENT:"PLATFORM_EVENT",ROCKER_LENGTH_CHANGE:"ROCKER_LENGTH_CHANGE",ROCKER_CHECKTIME_CHANGE:"ROCKER_CHECKTIME_CHANGE",KEYBOARD_DOWN:"KEYBOARD_DOWN",KEYBOARD_UP:"KEYBOARD_UP",AD_FINISH:"AD_FINISH",EQUIPMENT_SELL_EQUIP_INCOME:"EQUIPMENT_SELL_EQUIP_INCOME",EQUIPMENT_SLOT_CHANGE:"EQUIPMENT_SLOT_CHANGE",EQUIPMENT_EQUIP_IMPROVETIER_FALSE:"EQUIPMENT_EQUIP_IMPROVETIER_FALSE",EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS:"EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS",EQUIPMENT_EQUIP_STRENTHEN_FALSE:"EQUIPMENT_EQUIP_STRENTHEN_FALSE",EQUIPMENT_EQUIP_STRENTHEN_SUC:"EQUIPMENT_EQUIP_STRENTHEN_SUC",EQUIPMENT_GET:"EQUIPMENT_GET",EQUIPMENT_THROW:"EQUIPMENT_THROW",EQUIPMENT_CLICK_UPGRADE:"EQUIPMENT_CLICK_UPGRADE",EQUIPMENT_TOUCH:"EQUIPMENT_TOUCH",HONGBAO_GET:"HONGBAO_GET",HONGBAO_INFO_GET:"HONGBAO_INFO_GET",OFFLINE_REWARD_GET:"OFFLINE_REWARD_GET",SIGNIN_CHANGE:"SIGNIN_CHANGE",OPPO_SHOW_NATIVE_ICON:"OPPO_SHOW_NATIVE_ICON",OPPO_CLOSE_ADVIEW:"OPPO_CLOSE_ADVIEW",VIVO_CLOSE_BANNER:"VIVO_CLOSE_BANNER",VIVO_CLOSE_ADVIEW:"VIVO_CLOSE_ADVIEW",VIVO_CLOSE_INTERSTITIAL:"VIVO_CLOSE_INTERSTITIAL",VIVO_ADBANNER_OPEN:"VIVO_ADBANNER_OPEN",VIVO_ADBANNER_CLOSE:"VIVO_ADBANNER_CLOSE",HUAWEI_CLOSE_NATIVE:"HUAWEI_CLOSE_NATIVE"},cc._RF.pop()},{}],CHAPTER:[function(t,e,i){"use strict";cc._RF.push(e,"53da6RCVrBPQ5eaVTr4XdoR","CHAPTER");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=[{name:"Gray Ruins(Newbie)",titleNormal:"hall-new1-xinshou_z",titleDisable:"hall-new1-xinshou_w",backdropeNormal:"hall-new1-yi_tongguan",backdropDisable:"hall-new1-wei_tongguan"},{name:"Deep Lorrain(Simple)",titleNormal:"hall-new1-jiandan_z",titleDisable:"hall-new1-jiandan_w",backdropeNormal:"hall-new1-yi_tongguan",backdropDisable:"hall-new1-wei_tongguan"},{name:"Giant Beast(Normal)",titleNormal:"hall-new1-putong_z",titleDisable:"hall-new1-putong_w",backdropeNormal:"hall-new1-yi_tongguan",backdropDisable:"hall-new1-wei_tongguan"},{name:"Gray Ruins(Hard)",titleNormal:"hall-new1-kunnan_z",titleDisable:"hall-new1-kunnan_w",backdropeNormal:"hall-new1-yi_tongguan",backdropDisable:"hall-new1-wei_tongguan"},{name:"Lost Village(Doomsday)",titleNormal:"hall-new1-mori_z",titleDisable:"hall-new1-mori_w",backdropeNormal:"hall-new1-yi_tongguan",backdropDisable:"hall-new1-wei_tongguan"},{name:"Death Tower(Endless)",titleNormal:"hall-new1-wangzhe_z",titleDisable:"hall-new1-wangzhe_w",backdropeNormal:"hall-new1-yi_tongguan",backdropDisable:"hall-new1-wei_tongguan"},{name:"Sad Cave(King)",titleNormal:"hall-new1-wujin_z",titleDisable:"hall-new1-wujin_w",backdropeNormal:"hall-new1-yi_tongguan",backdropDisable:"hall-new1-wei_kaiqi"}],cc._RF.pop()},{}],CardConst:[function(t,e,i){"use strict";cc._RF.push(e,"e4200YQydVB0bORzdu4n0DH","CardConst");var n,o,r=i;Object.defineProperty(r,"__esModule",{value:!0}),r.SlotSystemOpenId=r.CardSlotEnum=void 0,function(t){t[t.SLOT_1=1]="SLOT_1",t[t.SLOT_2=2]="SLOT_2",t[t.SLOT_3=3]="SLOT_3",t[t.SLOT_4=4]="SLOT_4",t[t.SLOT_5=5]="SLOT_5",t[t.SLOT_6=6]="SLOT_6",t[t.SLOT_7=7]="SLOT_7",t[t.SLOT_8=8]="SLOT_8"}(o=r.CardSlotEnum||(r.CardSlotEnum={})),r.SlotSystemOpenId=((n={})[o.SLOT_1]=201,n[o.SLOT_2]=202,n[o.SLOT_3]=203,n[o.SLOT_4]=204,n[o.SLOT_5]=205,n[o.SLOT_6]=206,n[o.SLOT_7]=207,n[o.SLOT_8]=208,n),cc._RF.pop()},{}],CardMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3d7dcqmd+VCb6nQo7RO9vhn","CardMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("Attribute"),p=o("DataHelper"),d=o("BagConst"),h=o("CommonConst"),f=o("redPointCheckerCardUpgrade"),g=o("ArrayUtils"),y=o("LoggerUtils"),m=o("CardConst"),v=function(t){function e(){var e=t.call(this)||this;return e._cardList=null,e._slotList=null,e.init(h.DataNameEnum.CardMgr),e.initData(),c.default.event.on(l.default.BAG_ITEM_CHANGE,e.handleBagItemChange,e),e}return a(e,t),e.prototype.initData=function(){this._cardList=this.getValue("cardList"),null==this._cardList&&(this._cardList=[],this.saveCardList()),this._slotList=this.getValue("slotList"),null==this._slotList&&(this._slotList=[])},e.prototype.getCardList=function(){return this._cardList},e.prototype.getCardListClone=function(){return this._cardList.concat()},e.prototype.getCardListNotAtSlot=function(){for(var t=this.getCardListClone(),e=0;e<this._slotList.length;e++)for(var i=this._slotList[e],n=0;n<t.length;n++)if(t[n].cardId==i){g.default.remove(t,n);break}return t},e.prototype.addCard=function(t){this._cardList.push(t),this.saveCardList(),c.default.event.emit(l.default.CARD_ADD_CARD)},e.prototype.getCardInfo=function(t){if(null==t)return null;for(var e=0;e<this._cardList.length;e++){var i=this._cardList[e];if(i.cardId==t)return i}return null},e.prototype.getCardLevelVO=function(t,e){return s.default.CardLevelTable.findFirst(function(i){return i.id==t&&i.level==e})},e.prototype.getCardNextLevelVO=function(t){var e=this.getCardInfo(t);return this.getCardLevelVO(t,e.level+1)},e.prototype.getCardAttribute=function(t){var e=this.getCardInfo(t);if(null!=e){var i=this.getCardLevelVO(t,e.level);if(null==i)return console.error("[CardMgr] getCardAttribute not find CardLevelVO! cardId:%s level:%s",t,e.level),null;var n=new u.default;return n.initByConfig(i),n}},e.prototype.getAllCardAttribute=function(){for(var t=new u.default,e=0;e<this._slotList.length;e++){var i=this._slotList[e],n=this.getCardInfo(i);if(null!=n){var o=this.getCardLevelVO(i,n.level);null!=o?t.addAttrByConfig(o):console.error("[CardMgr] getCardAttribute not find CardLevelVO! cardId:%s level:%s",i,n.level)}}return t},e.prototype.getCardLevel=function(t){var e=this.getCardInfo(t);return null==e?0:e.level},e.prototype.saveCardList=function(){this.setValue("cardList",this.getCardList())},e.prototype.getSlotList=function(){return this._slotList},e.prototype.getSlotListClone=function(){return this._slotList.concat()},e.prototype.getSlotCardId=function(t){return t>=this._slotList.length?0:this._slotList[t]},e.prototype.getSlotCardInfo=function(t){var e=this.getSlotCardId(t);return this.getCardInfo(e)},e.prototype.isCardInSlot=function(t){return-1!=this.getSlotList().indexOf(t)},e.prototype.saveSlotList=function(){this.setValue("slotList",this.getSlotList())},e.prototype.handleBagItemChange=function(t){if(!(t.changeNumber<=0)){var e=t.itemId,i=s.default.ItemTable.findById(e);null!=i?i.type==d.ItemTypeEnum.Card&&(this.getCardLevel(e)>0?this.checkUpdateUpgradeTag(e):this.upgradeCard(e)):console.error("[CardMgr] handleBagItemChange not find itemVO!")}},e.prototype.checkUpdateUpgradeTag=function(t){var e=this.getCardInfo(t);this.isCardEnoughtCardToUpgrade(t)&&this.isCardEnoughtGoldToUpgrade(t)?e.isCanUpgrade=!0:e.isCanUpgrade=!1},e.prototype.isCardEnoughtCardToUpgrade=function(t){var e=c.default.cardMgr.getCardInfo(t),i=c.default.cardMgr.getCardLevelVO(t,e.level+1);return null!=i&&c.default.bagMgr.getItemNum(t)>=i.needCardNum},e.prototype.getUpgradeReourceList=function(t){var e=c.default.cardMgr.getCardInfo(t);return c.default.cardMgr.getCardLevelVO(t,e.level+1).cost},e.prototype.getUpgradeGoldNumber=function(t){for(var e=this.getUpgradeReourceList(t),i=0;i<e.length;i++){var n=e[i];if(n[0]==d.ItemIdEnum.Gold)return n[1]}return 9999999},e.prototype.isCardEnoughtGoldToUpgrade=function(t){var e=this.getUpgradeGoldNumber(t);return c.default.bagMgr.getItemNum(d.ItemIdEnum.Gold)>=e},e.prototype.upgradeCard=function(t){if(null!=t){var e=s.default.ItemTable.findById(t);if(null!=e&&e.type==d.ItemTypeEnum.Card){var i,n=this.getCardInfo(t);if(null!=n){i=n.level+1;var o=this.getCardLevelVO(t,i);if(null!=o){var r=[];if(null!=o.cost&&o.cost.length>0)for(var a=0;a<o.cost.length;a++){var u=o.cost[a];r.push({itemId:u[0],amount:u[1]})}null!=o.needCardNum&&o.needCardNum>0&&r.push({itemId:t,amount:o.needCardNum}),0!=c.default.bagMgr.removeItemList(r,d.BagSourceEnum.UpgradeCard)?(n.level=i,c.default.audioMgr.playSoundByResId(109),c.default.event.emit(l.default.CARD_UPGRADE,n.cardId),this.saveCardList()):console.error("[CardMgr] upgradeCard cost not enough! cardId:%s",t)}else console.error("[CardMgr] not find CardLevelVO! cardId:%s level:%s",t,i)}else n={cardId:t,level:1,isNew:!0,isCanUpgrade:!1},this.addCard(n)}else console.error("[CardMgr] upgradeCard invalid cardId! cardId:%s",t)}else console.error("[CardMgr] upgradeCard invalid cardId! cardId:%s",t)},e.prototype.isSlotFull=function(){for(var t in m.CardSlotEnum){var e=Number(m.CardSlotEnum[t]);if(e&&this.isSlotOpen(e)&&!this._slotList[e])return!1}return!0},e.prototype.isSlotOpen=function(t){var e=m.SlotSystemOpenId[t];return c.default.systemOpenMgr.isOpen(e)},e.prototype.getSlotSystemOpenVO=function(t){var e=m.SlotSystemOpenId[t];return s.default.SystemOpenTable.findFirst(function(t){if(t.id==e)return!0})},e.prototype.getCardSlotId=function(t){for(var e in m.CardSlotEnum){var i=Number(m.CardSlotEnum[e]);if(i&&this._slotList[i]==t)return i}return null},e.prototype.isCardOnSlot=function(t){for(var e in m.CardSlotEnum){var i=Number(m.CardSlotEnum[e]);if(i&&this._slotList[i]==t)return!0}return!1},e.prototype.insertSlotCard=function(t){if(this.isSlotFull())return console.error("[CardMgr] insertSlotCard card slot is full"),!1;if(null==t)return console.error("[CardMgr] insertSlotCard invalid newCardId! newCardId:%s",t),!1;if(this.isCardOnSlot(t))return console.error("[CardMgr] card had on slot! cardId =",t),!1;var e;if(null==this.getCardInfo(t))return console.error("[CardMgr] insertSlotCard no cardInfo! newCardId:%s",t),!1;for(var i in m.CardSlotEnum)if((e=Number(m.CardSlotEnum[i]))&&!this._slotList[e]){this._slotList[e]=t;break}c.default.audioMgr.playSoundByResId(105),this.saveSlotList(),c.default.event.emit(l.default.CARD_ADD_SLOT_CARD,{slotId:e,cardId:t}),c.default.event.emit(l.default.CARD_SHINEONCE,t)},e.prototype.removeSlotCard=function(t){return null==t?(console.error("[CardMgr] removeSlotCard invalid slot! slot:%s",t),!1):null==this._slotList[t]?(console.error("[CardMgr] removeSlotCard this._slotList[slot] == null, slot:%s",t),!1):(this._slotList[t]=null,this.saveSlotList(),c.default.event.emit(l.default.CARD_REMOVE_SLOT_CARD,t),!0)},e.prototype.replaceSlotCard=function(t,e){void 0===e&&(e=0),null!=t?null==e||0!=e&&null==this.getCardInfo(e)?console.error("[CardMgr] replaceSlotCard invalid newCardId! newCardId:%s",e):-1==this._slotList.indexOf(e)?(this._slotList[t]=e,this.saveSlotList()):console.error("[CardMgr] replaceSlotCard Repeated operation! newCardId:%s",e):console.error("[CardMgr] replaceSlotCard invalid slot! slot:%s",t)},e.prototype.getSlotItemList=function(){for(var t=this.getSlotListClone(),e=[],i=function(i){var o=t[i];if(null==o)return"continue";var r=n.getCardInfo(o).level,a=s.default.CardLevelTable.findFirst(function(t){if(t.id==o&&t.level==r)return!0});if(null==a?void 0:a.skillItemList)for(var l=a.skillItemList,c=0;c<l.length;c++)e.push(l[c])},n=this,o=0;o<t.length;o++)i(o);return e},e.prototype.getSlotSkill=function(){var t=[];for(var e in this._slotList)if("0"!=e&&this._slotList[e]){var i=this._slotList[e],n=this.getCardInfo(i),o=this.getCardLevelVO(n.cardId,n.level);if(null==o.skillList)continue;for(var r=0;r<o.skillList.length;r++){var a=o.skillList[r];t.push(a)}}for(var s=0;s<t.length;s++){a=t[s];for(var l=s+1;l<t.length;)a==t[l]?(y.default.info("CardMgr \u5361\u724c\u6280\u80fd\u91cd\u590d:",a),g.default.remove(t,l)):l++}return t},e.prototype.getAttribute=function(){for(var t=new u.default,e=0;e<this._slotList.length;e++){var i=this._slotList[e];if(i&&i>0){var n=this.getCardAttribute(i);null!=n&&t.addOtherAttribute(n)}}return t},e.prototype.isCardMaxLevel=function(t){return null==this.getCardNextLevelVO(t)},e.prototype.isHasNewCard=function(){for(var t=0;t<this._cardList.length;t++)if(this._cardList[t].isNew)return!0;return!1},e.prototype.setNewCardOld=function(t){for(var e=0;e<this._cardList.length;e++){var i=this._cardList[e];if(i.cardId==t){i.isNew=!1,c.default.event.emit(l.default.CARD_NEW_CHANGE,t),this.saveCardList();break}}},e.prototype.removeUpgradeTag=function(t){for(var e=0;e<this._cardList.length;e++){var i=this._cardList[e];if(i.cardId==t){i.isCanUpgrade=!1,c.default.event.emit(l.default.CARD_CLEAR_UPGRADE_TAG,t),this.saveCardList();break}}},e.prototype.touchCard=function(t){this.setNewCardOld(t),f.default.getInstance().ignorCardId(t)},e}(p.default);r.default=v,cc._RF.pop()},{}],CardMiniView:[function(t,e,i){"use strict";cc._RF.push(e,"e4842+z37hHarZBBSTIYhLL","CardMiniView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseMiniView"),u=o("AttributeConst"),p=o("GuideMgr"),d=o("ActionUtils"),h=o("AdaptUtils"),f=o("NodeUtils"),g=o("Tbl"),y=o("CCEvent"),m=o("UI"),v=o("ComSlotPnl"),_=cc._decorator,C=_.ccclass,b=_.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.autoZIndex=10,e.selectedCard=null,e}return a(e,t),e.prototype.onStart=function(){t.prototype.onStart.call(this),this.initAttrite(),this.addEventListener(),this.initContent()},e.prototype.onLaterStart=function(){l.default.guideMgr.isFinishGuide(p.GuideLineEnum.GuideClickCard)||(this.setTouchable(!1),l.default.guideMgr.getCurrentGuide(),this.guideClickCardLazy())},e.prototype.guideClickCardLazy=function(){var t=this;this.getC("scrollview").getComponent(cc.ScrollView).scrollToBottom(),d.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.seekC(t.comCardBagNew,"container").children[0];t.selectedCard=e;var i=f.default.getWorldPos(e),n=e.getContentSize();n.height*=1.1,n.width*=1.1,n.height=n.width;var o=g.default.GuideWordTable.findById(p.GuideLineEnum.GuideClickCard),r=o.name,a=o.word;l.default.viewMgr.showUI(m.UI.GUIDE_VIEW,p.GuideLineEnum.GuideClickCard,n,i,r,a,!1,100)})},e.prototype.guideEquipCardLazy=function(){var t=this;this.getC("scrollview").getComponent(cc.ScrollView).scrollTo(cc.v2(0,.3)),d.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.selectedCard,i=t.seekC(e,"btnUse"),n=f.default.getWorldPos(i),o=i.getContentSize();o.height*=1.1,o.width*=1.1,o.height=o.width;var r=g.default.GuideWordTable.findById(p.GuideLineEnum.GuideCardEquip),a=r.name,s=r.word;l.default.viewMgr.showUI(m.UI.GUIDE_VIEW,p.GuideLineEnum.GuideCardEquip,o,n,a,s,!1,100)})},e.prototype.onAdaptUI=function(){t.prototype.onAdaptUI.call(this);var e=this.getC("nodeAttr");h.default.adaptNodeToTopInsideSafeArea(e,h.default.MainSceneTopSpace);var i=this.getC("scrollview");h.default.adaptScrollviewInsideSafeArea(i,e,null,50,h.default.MainSceneBottonSpace)},e.prototype.refresh=function(){t.prototype.refresh.call(this),this.comSlotPnl.getComponent(v.default).refresh()},e.prototype.addEventListener=function(){this.eventOn(y.default.CARD_REMOVE_SLOT_CARD,this.handlerRemoveSlotCard,this),this.eventOn(y.default.CARD_ADD_SLOT_CARD,this.handlerAddSlotCard,this),this.eventOn(y.default.CARD_UPGRADE,this.hanlderCardUpgrade,this),this.eventOn(y.default.CARD_CLICK_CARD,this.handlerClickCard,this),this.eventOn(y.default.CLOSE_VIEW,this.handlerCloseView,this)},e.prototype.handlerCloseView=function(){},e.prototype.initContent=function(){this.getC("scrollview").on(cc.Node.EventType.TOUCH_END,function(){l.default.event.emit(y.default.CARD_CLICK_CARD,0)});var t=this.getC("content");this.content=t,this.comSlotPnl=cc.instantiate(this.ComSlotPnlPrefab),this.comSlotPnl.parent=t,this.comCardBagNew=cc.instantiate(this.ComCardBagNewPrefab),this.comCardBagNew.parent=t},e.prototype.initAttrite=function(){var t=l.default.cardMgr.getAllCardAttribute(),e=t.getAttr(u.AttrTypeEnum.hpmax),i=t.getAttr(u.AttrTypeEnum.attack),n=t.getAttr(u.AttrTypeEnum.dodge),o=t.getAttr(u.AttrTypeEnum.crit),r=this.getC("nodeAttr"),a=this.seekC(r,"labBlood"),s=this.seekC(r,"labMiss"),c=this.seekC(r,"labAttack"),p=this.seekC(r,"labCriti");a.getComponent(cc.Label).string="+"+e,s.getComponent(cc.Label).string="+"+n/100+"%",c.getComponent(cc.Label).string="+"+i,p.getComponent(cc.Label).string="+"+o/100+"%"},e.prototype.handlerRemoveSlotCard=function(){this.initAttrite()},e.prototype.handlerAddSlotCard=function(){this.initAttrite(),l.default.guideMgr.isFinishGuide(p.GuideLineEnum.GuideCardClear)||cc.game.emit(y.default.GUIDE_CARD_EQUIP)},e.prototype.hanlderCardUpgrade=function(){this.initAttrite()},e.prototype.handlerClickCard=function(t){l.default.cardMgr.isCardOnSlot(t)?this.comSlotPnl.zIndex=this.autoZIndex++:(this.comCardBagNew.zIndex=this.autoZIndex++,l.default.guideMgr.isFinishGuide(p.GuideLineEnum.GuideCardClear)||cc.game.emit(y.default.GUIDE_CARD_CLICK))},e.prototype.update=function(){for(var t=0,e=0;e<this.content.childrenCount;e++)t+=this.content.children[e].height;this.content.height=t+h.default.CardViewExtraHeight},s([b(cc.Prefab)],e.prototype,"ComSlotPnlPrefab",void 0),s([b(cc.Prefab)],e.prototype,"ComCardBagNewPrefab",void 0),s([C],e)}(c.default);r.default=S,cc._RF.pop()},{}],ChannelMgr:[function(t,e,i){"use strict";cc._RF.push(e,"8790cVeSlBGkaDcBpyN5TWu","ChannelMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("DataHelper"),c=o("CommonConst"),u=o("LoggerUtils"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){var e=t.call(this)||this;return e._isInit=!1,e._switch=!1,e._channelData=null,e._vivoShowInterstitial=!1,e._vivoNativeAdParams=null,e.sysInfo=null,e._huaweiAddDesktopShowTimes=0,e._huaweiNativeSwitch=!1,e._huaweiNativeInterval=3e4,e._huaweiBannerInterval=3e4,e._isAddDesktop=!0,e.initialize(),cc.sys.platform==c.PlatformTypeEnum.OPPO_GAME&&cc.assetManager.loadRemote("https://game-jsbmw-1304634540.cos.ap-guangzhou.myqcloud.com/oppo/switch.json",function(t,i){e._switch=i.json[0],u.default.info("oppo switch: ",e._switch)}),cc.sys.platform==c.PlatformTypeEnum.VIVO_GAME&&(cc.assetManager.loadRemote("https://game-jsbmw-1304634540.cos.ap-guangzhou.myqcloud.com/vivo/switch.json",function(t,i){e._switch=i.json[0],u.default.info("vivo switch: ",e._switch)}),cc.assetManager.loadRemote("https://game-jsbmw-1304634540.cos.ap-guangzhou.myqcloud.com/vivo/interstitial.json",function(t,i){e._vivoShowInterstitial=i.json[0],u.default.info("vivo interstitial switch: ",e._vivoShowInterstitial)})),cc.sys.platform==c.PlatformTypeEnum.HUAWEI_GAME&&(cc.assetManager.loadRemote("https://game-jsbmw-1304634540.cos.ap-guangzhou.myqcloud.com/huaweiQuick/switch.json",function(t,i){e._huaweiNativeSwitch=i.json[0],u.default.info("huawei nativeAd switch: ",e._huaweiNativeSwitch)}),cc.assetManager.loadRemote("https://game-jsbmw-1304634540.cos.ap-guangzhou.myqcloud.com/huaweiQuick/nativeInterval.json",function(t,i){e._huaweiNativeInterval=i.json[0],u.default.info("huawei nativeAd interval: ",e._huaweiNativeInterval)}),cc.assetManager.loadRemote("https://game-jsbmw-1304634540.cos.ap-guangzhou.myqcloud.com/huaweiQuick/nativeInterval.json",function(t,i){e._huaweiBannerInterval=i.json[0],u.default.info("huawei banner interval: ",e._huaweiBannerInterval)})),e}return a(e,t),e.prototype.initialize=function(){var e=this;t.prototype.init.call(this,c.DataNameEnum.ChannelMgr),this.initData(),cc.sys.platform==c.PlatformTypeEnum.HUAWEI_GAME&&qg.hasShortcutInstalled({success:function(t){e._isAddDesktop=t}})},e.prototype.initData=function(){this._channelData=this.getValue("CHANNEL_DATA",{vivoBannerShowTimes:!1}),null==this._channelData.isAgreeProtocol&&(this._channelData.isAgreeProtocol=!1),this.setInfo()},e.prototype.getHuaweiNativeInterval=function(){return this._huaweiNativeInterval},e.prototype.getHuaweiBannerInterval=function(){return this._huaweiBannerInterval},e.prototype.getHuaweiNativeSwtich=function(){return this._huaweiNativeSwitch},e.prototype.isAddDestktop=function(){return this._isAddDesktop},e.prototype.setIsAddDesktop=function(t){this._isAddDesktop=t},e.prototype.isAgreeProtocol=function(){return this._channelData.isAgreeProtocol},e.prototype.setAgreeProtocol=function(t){this._channelData.isAgreeProtocol=t,this.setInfo()},e.prototype.getInfo=function(){return this._channelData},e.prototype.setInfo=function(){this.setValue("CHANNEL_DATA",this.getInfo())},e.prototype.getSwtich=function(){return this._switch},e.prototype.getVivoInterstitialSwitch=function(){return this._vivoShowInterstitial},e.prototype.isHuaweiShowDesktop=function(){return this._huaweiAddDesktopShowTimes<=3},e.prototype.addHuaweiShowTimes=function(){this._huaweiAddDesktopShowTimes++},e.prototype.initChannel=function(){this._isInit||(cc.sys.platform==c.PlatformTypeEnum.OPPO_GAME&&qg.reportMonitor("game_scene",0),this._isInit=!0)},e.prototype.setVIVOnativeParams=function(t){this._vivoNativeAdParams=t},e.prototype.resetVIVONativeParams=function(){this._vivoNativeAdParams=null},e.prototype.getVIVONativeParams=function(){return this._vivoNativeAdParams},s([d],e)}(l.default));r.default=h,cc._RF.pop()},{}],ChapterLevelTable:[function(t,e,i){"use strict";cc._RF.push(e,"3cefcIZbURJJ4OOuqpxR3Uq","ChapterLevelTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ChapterLevelVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("chapter_level_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ChapterLevelVO:[function(t,e,i){"use strict";cc._RF.push(e,"3a10b9cEhlFQ5f5ccTLELky","ChapterLevelVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.level=t[1],this.wave=t[2],this.triggerArea=t[3],this.tryItemId=t[4],this.isTryItemNeedAd=t[5],this.bornPoint=t[6],this.buffIdList=t[7],this.hpBonusRatio=t[8],this.attackBonusRadio=t[9],this.dropId=t[10],this.firstEnterChapterDropId=t[11],this.goldBouns=t[12],this.cameraId=t[13],this.skillDrop=t[14],this.skillDropFirst=t[15],this.ChangeDrop=t[16],this.ChangeDropFirst=t[17],this.randomEvent=t[18],this.videoAllSelect=t[19],this.videoChange=t[20],this.videoUpgrade=t[21],this.rewardSkillVIew=t[22],this.warningType=t[23],this.warningFadeInTime=t[24],this.warningStayTime=t[25],this.warningFadeOutTime=t[26],this.warningShowTimes=t[27]},cc._RF.pop()},{}],ChapterMiniView:[function(t,e,i){"use strict";cc._RF.push(e,"831afd0x9hCv6D59pskMj3y","ChapterMiniView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseMiniView"),u=o("CommonConst"),p=o("GuideMgr"),d=o("AdaptUtils"),h=o("LoggerUtils"),f=o("NodeUtils"),g=o("RedPointUtils"),y=o("StringUtils"),m=o("TipsUtils"),v=o("CCEvent"),_=o("ENUMS"),C=o("UI"),b=o("RES"),S=cc._decorator,O=S.ccclass,E=S.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgChapterList=[],e.chapterPrefabList=[],e.curChapter=null,e.timeCount=0,e.hongbaoOriginScale=0,e.isCheckTime=!0,e.firstInit=!0,e}return a(e,t),e.prototype.onLoad=function(){this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(v.default.HONGBAO_GET,this.handlerHongbaoGet,this),this.eventOn(v.default.CLOSE_VIEW,this.handlerCloseView,this),this.eventOnRedPoint({eventName:v.CCEventRedPoint.SigninChange,handler:this.handlerSigninChange,target:this})},e.prototype.handlerCloseView=function(t){t==C.UI.HALL_ADDDESKTOP.config.url&&this.initHuaweiUI(),t==C.UI.SIGNIN_VIEW.config.url&&(this.firstInit=!1)},e.prototype.handlerSigninChange=function(t){var e=this.getC("btnSignin"),i=!t,n=this.seekC(e,"redPoint1");g.default.ShowRedPoint(n,i,{x:0,y:0})},e.prototype.handlerHongbaoGet=function(){this.isCheckTime=!0},e.prototype.onStart=function(){t.prototype.onStart.call(this),this.initNode(),this.initUI(),this.initBtn(),l.default.getPlatformType()==u.PlatformTypeEnum.WECHAT_GAME||(cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?(this.isCheckTime=!1,this.initOPPOUI()):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?(this.isCheckTime=!1,this.initVIVOUI()):cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME?(this.isCheckTime=!1,this.initHuaweiUI()):this.isCheckTime=!1),this.initNormalLayoutContent()},e.prototype.initHuaweiUI=function(){var t=this.getC("btnDesktop");qg.hasShortcutInstalled({success:function(e){0==e&&(t.active=!0,l.default.offClick(t.getComponent(cc.Button)),l.default.onClick(t,function(){l.default.viewMgr.showUI(C.UI.HALL_ADDDESKTOP)}))}})},e.prototype.initVIVOUI=function(){var t=this.getC("btnDesktop");qg.hasShortcutInstalled({success:function(e){0==e&&(t.active=!0,l.default.onClick(t,function(){qg.installShortcut({successs:function(){t.active=!1,h.default.info("\u521b\u5efa\u6210\u529f")}})}))}})},e.prototype.initNormalLayoutContent=function(){this.initSigninBtn()},e.prototype.initSigninBtn=function(){var t=this.getC("btnSignin");l.default.onClick(t,function(){l.default.viewMgr.showUI(C.UI.SIGNIN_VIEW)})},e.prototype.initOPPOUI=function(){var t=this;if(qg.getSystemInfoSync().platformVersionCode>=1076&&l.default.channelMgr.getSwtich()){var e=this.getC("oppoPortal");e.active=!0,l.default.onClick(e,function(){l.default.adMgr.showPortalAd()})}qg.hasShortcutInstalled({success:function(e){if(0==e){var i=t.getC("btnDesktop");i.active=!0,l.default.onClick(i,function(){qg.installShortcut({})})}}})},e.prototype.initWechatUI=function(){var t=this.getC("btnHongbao");t.active=!0,t.zIndex++,this.hongbaoOriginScale=t.scale,l.default.onClick(t,function(){}),this.refreshTime();var e=this.getC("btnShouQ");e.active=!0,e.zIndex++,l.default.onClick(e,function(){l.default.viewMgr.showUI(C.UI.HALL_SHOUQVIEW)})},e.prototype.refreshTime=function(){var t=this.getC("btnHongbao"),e=this.getC("labTime"),i=l.default.hongbaoMgr.getHongbaoInfo();if(i.count>=4)t.stopAllActions(),this.isCheckTime=!1,e.getComponent(cc.Label).string="Claim tomorrow";else{var n=i.nextShow-l.default.getTime();if(n<0)this.isCheckTime=!1,e.getComponent(cc.Label).string="Claimable",cc.tween(t).repeatForever(cc.tween().to(.25,{scale:1.2*this.hongbaoOriginScale}).to(.25,{scale:.8*this.hongbaoOriginScale})).start();else{t.stopAllActions(),this.isCheckTime=!0;var o=Math.floor(n/3600%24),r=Math.floor(n/60%60),a=Math.ceil(n%60);e.getComponent(cc.Label).string=o+":"+r+":"+a}}},e.prototype.onAdaptUI=function(){d.default.adaptNodeToTopInsideSafeArea(this.labTitle,180),d.default.adaptNodeToTopInsideSafeArea(this.labSubTitle,225),this.labTitle.zIndex=100,this.labSubTitle.zIndex=100,f.default.setWorldPos(this.skeChapter,cc.v2(cc.winSize.width/2,.55*cc.winSize.height));var t=this.getC("nodeFight");d.default.adaptNodeToBottomInsideSafeArea(t,250),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.adaptUIByOPPO():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.adaptUIByVIVO():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.adaptUIByHuawei()},e.prototype.adaptUIByHuawei=function(){this.getC("nodeFight").y+=100},e.prototype.adaptUIByVIVO=function(){this.getC("nodeFight").y+=100},e.prototype.adaptUIByOPPO=function(){this.getC("nodeFight").y+=100},e.prototype.initNode=function(){this.sprChapterPic=this.getC("sprChapterPic"),this.btnQuickFight=this.getC("btnQuickFight"),this.btnRight=this.getC("btnRight"),this.btnLeft=this.getC("btnLeft"),this.labTitle=this.getC("labTitle"),this.labSubTitle=this.getC("labSubTitle"),this.skeChapter=this.getC("skeChapter")},e.prototype.initUI=function(){var t=l.default.levelServer.getMaxChapter();this.curChapter=t,this.showChapterUI(t)},e.prototype.initBtn=function(){var t=this;l.default.onClick(this.btnRight,function(){var e=l.default.levelServer.getMaxChapter();t.curChapter==e?h.default.warn("ChapterMiniView initBtn \u4e00\u822c\u6b64\u65f6\u65e0\u6cd5\u70b9\u51fb\u8fd9\u4e2a\u6309\u94ae,\u903b\u8f91\u9519\u8bef"):(t.curChapter++,t.showChapterUI(t.curChapter))}),l.default.onClick(this.btnLeft,function(){1==t.curChapter?h.default.warn("ChapterMiniView initBtn \u4e00\u822c\u6b64\u65f6\u65e0\u6cd5\u70b9\u51fb\u8fd9\u4e2a\u6309\u94ae,\u903b\u8f91\u9519\u8bef"):(t.curChapter--,t.showChapterUI(t.curChapter))}),cc.tween(this.btnQuickFight).repeatForever(cc.tween(this.btnQuickFight).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),l.default.onClick(this.btnQuickFight,function(){var e=b.ResBattleScene.lazyLoadList||[];l.default.resMgr.loadRes(e),l.default.levelServer.enterChapter(t.curChapter),cc.game.emit(v.default.GUIDE_ENTER_FIGHT),cc.game.emit(v.default.GUIDE_FIGHTSCENE_AFTER_SHOP),l.default.guideMgr.isFinishGuide(p.GuideLineEnum.GuideEquipmentFight)||t.emit(v.default.GUIDE_EQUIPMENT_FIGHT),l.default.viewMgr.showUI(C.UI.LOADING_VIEW),l.default.sceneMgr.loadScene(_.SCENE.BATTLE)})},e.prototype.showChapterUI=function(t){this.showChapterImage(t),this.showChapterTitle(t),this.showChapterLevel(t),this.showLeftRightBtn(t)},e.prototype.showChapterImage=function(t){var e,i=this;this.sprChapterPic.active=!1,f.default.destroyAllChildren(this.skeChapter),t>=21?(e=cc.instantiate(this.chapterPrefabList[21]),l.default.onClick(this.skeChapter,function(){m.default.showTips("Coming soon!")})):(e=cc.instantiate(this.chapterPrefabList[t-1]),l.default.onClick(e,function(){l.default.levelServer.enterChapter(i.curChapter),l.default.viewMgr.showUI(C.UI.LOADING_VIEW),l.default.sceneMgr.loadScene(_.SCENE.BATTLE)})),e.parent=this.skeChapter},e.prototype.showChapterTitle=function(t){var e=l.default.levelServer.getChapterVO(t);this.setString(this.labTitle,e.name)},e.prototype.showChapterLevel=function(t){var e,i=l.default.levelServer.getChapterVO(t),n=y.default.SingleDigit2ChineseNumber(t),o=i.levelRange[1];l.default.levelServer.getMaxChapter(),e=l.default.levelServer.getPlayerChapterMaxPassLevel(t),this.setString(this.labSubTitle,"Chapter "+n+" "+e+"/"+o)},e.prototype.showLeftRightBtn=function(t){var e=l.default.levelServer.getMaxChapter();1==t&&t==e?(this.btnLeft.active=!1,this.btnRight.active=!1):t==e?(this.btnLeft.active=!0,this.btnRight.active=!1):1==t?(this.btnLeft.active=!1,this.btnRight.active=!0):(this.btnLeft.active=!0,this.btnRight.active=!0)},e.prototype.update=function(t){this.timeCount+=t,this.timeCount>1&&(this.timeCount=0,this.isCheckTime&&this.refreshTime())},s([E([cc.SpriteFrame])],e.prototype,"imgChapterList",void 0),s([E([cc.Prefab])],e.prototype,"chapterPrefabList",void 0),s([O],e)}(c.default);r.default=I,cc._RF.pop()},{}],ChapterTable:[function(t,e,i){"use strict";cc._RF.push(e,"46144nUbQpOmI6lPV5bO9pr","ChapterTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ChapterVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("chapter_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ChapterVO:[function(t,e,i){"use strict";cc._RF.push(e,"a2eaedvuV9AFr9dZnyPA1Wg","ChapterVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.initGold=t[2],this.levelRange=t[3],this.initGunId=t[4],this.isOpen=t[5],this.selectOneDropId=t[6],this.selectOneDropIdFirst=t[7],this.selectThreeDropId=t[8],this.selectThreeDropIdFirst=t[9],this.storyBg=t[10],this.mapRes=t[11]},cc._RF.pop()},{}],Chapter:[function(t,e,i){"use strict";cc._RF.push(e,"42195yY4bFK07mf29JE7JDX","Chapter");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("CHAPTER"),u=o("ENUMS"),p=o("RES"),d=cc._decorator,h=d.ccclass,f=d.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.backdrop=null,e.btnChapter=null,e.chapter=-1,e.tips=null,e}return a(e,t),e.prototype.initialize=function(t,e){this.chapter=t+1;var i=c.default[t],n=this.chapter<=l.default.data.chapter,o=n?i.titleNormal:i.titleDisable,r=n?i.backdropeNormal:i.backdropDisable,a=l.default.resMgr.getSpriteAtlas(p.ResMainScene.atlas.hall.url);this.title.spriteFrame=a.getSpriteFrame(o),this.backdrop.spriteFrame=a.getSpriteFrame(r),this.node.parent=e,t>0&&(this.tips=c.default[t-1].name),this.chapter==c.default.length&&(this.title.node.active=n),l.default.onClick(this.btnChapter,this.onBtnChapter,this)},e.prototype.onBtnChapter=function(){l.default.levelServer.enterChapter(this.chapter),l.default.sceneMgr.loadScene(u.SCENE.BATTLE)},s([f(cc.Sprite)],e.prototype,"title",void 0),s([f(cc.Sprite)],e.prototype,"backdrop",void 0),s([f(cc.Button)],e.prototype,"btnChapter",void 0),s([h],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],CircleUtils:[function(t,e,i){"use strict";cc._RF.push(e,"17faf0WDsBGEqnNuGK5ofii","CircleUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){},cc._RF.pop()},{}],ClientTable:[function(t,e,i){"use strict";cc._RF.push(e,"00b28WVrhZPsInYFgJLX2AW","ClientTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ClientVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("client_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ClientVO:[function(t,e,i){"use strict";cc._RF.push(e,"b72dfzjuSFCRLP1psdkwVg/","ClientVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.resType=t[1],this.scale=t[2],this.offset=t[3],this.defaultAni=t[4],this.param1=t[5],this.param2=t[6],this.param3=t[7],this.strParam1=t[8],this.strParam2=t[9]},cc._RF.pop()},{}],Clock:[function(t,e,i){"use strict";cc._RF.push(e,"bfcf127RfdMt72x8xSs2HoR","Clock");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,i){void 0===t&&(t=1),this._id=null,this._lastNaturalTime=null,this._time=null,this._lastTickTime=null,this._rate=null,this._maxTime=.5,this._pause=!1,null==t?t=1:t<=0&&(t=.01),t=1,this._id=1,this._lastNaturalTime=this.getNaturalTime(),this._time=0,this._lastTickTime=0,this._rate=t,this._rateChangeCallback=e,this._tickCallback=i,cc.director.getScheduler().schedule(this.tick,this,0,!1)}return t.prototype.finalize=function(){cc.director.getScheduler().unschedule(this.tick,this)},t.prototype.getNaturalTime=function(){return Date.now()},t.prototype.getTime=function(){var t=this.getNaturalTime(),e=t-this._lastNaturalTime;this._lastNaturalTime=t;var i=e*this._rate;return this._time=this._time+i,this._time/1e3},t.prototype.getRate=function(){return this._rate},t.prototype.setRate=function(t){if(this._rate!=t)return this._rate=t,this._rateChangeCallback?this._rateChangeCallback(this._rate):void 0},t.prototype.setPause=function(t){this._pause=t},t.prototype.tick=function(){var t=this.getTime(),e=t-this._lastTickTime;e=e>this._maxTime?this._maxTime:e,this._lastTickTime=t,this._pause||this._tickCallback&&this._tickCallback(e)},t}();n.default=o,cc._RF.pop()},{}],CollisionUtils:[function(t,e,i){"use strict";cc._RF.push(e,"092b02bLvhC56jhyYwsiVtS","CollisionUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("MathUtils"),a=function(){function t(){}return t.PointInsideRingByAngleRange=function(e,i,n,o){var a=[r.default.Angle2Radian(o[0]),r.default.Angle2Radian(o[1])];return t.PointInsideRingByRadianRange(e,i,n,a)},t.PointInsideRingByRadianRange=function(t,e,i,n){var o=t.sub(e);if(o&&0==o.x&&0==o.y)return!0;var a=o.len();if(a>=i[0]&&a<=i[1]){var s=r.default.StdRadian(-o.signAngle(cc.v2(1,0))),l=r.default.StdRadianRange(n);return s>=l[0]&&s<=l[1]}return!1},t.lineSegmentIntersectRect=function(e,i,n){if(e.x<n.xMin&&i.x<n.xMin)return!1;if(e.x>n.xMax&&i.x>n.xMax)return!1;if(e.y<n.yMin&&i.y<n.yMin)return!1;if(e.y>n.yMax&&i.y>n.yMax)return!1;if(t.rectContainPoint(n,e))return!0;if(t.rectContainPoint(n,i))return!0;if(i.x==e.x&&i.x>=n.xMin&&i.x<=n.xMax&&Math.max(e.y,i.y)>n.yMax&&Math.min(e.y,i.y)<n.yMin)return!0;var o=(i.y-e.y)/(i.x-e.x),r=e.y-o*e.x,a=Math.min(e.x,i.x),s=Math.max(e.x,i.x),l=Math.min(e.y,i.y),c=Math.max(e.y,i.y),u=(n.yMin-r)/o;if(u>=n.xMin&&u<=n.xMax&&u>=a&&u<=s)return!0;if((u=(n.yMax-r)/o)>=n.xMin&&u<=n.xMax&&u>=a&&u<=s)return!0;var p=o*n.xMin+r;return 0==o&&n.xMin>=a&&n.xMin<=s||p>=n.yMin&&p<=n.yMax&&p>=l&&p<=c||(p=o*n.xMax+r,0==o&&n.xMax>=a&&n.xMax<=s||p>=n.yMin&&p<=n.yMax&&p>=l&&p<=c)},t.rectContainPoint=function(t,e){return!(e.x<t.xMin||e.x>t.xMax||e.y<t.yMin||e.y>t.yMax)},t.circleContainPoint=function(t,e){return!(e.x<t.xMin||e.x>t.xMax||e.y<t.yMin||e.y>t.yMax||!(t.point.sub(e).len()<t.radius))},t.circleIntersectRect=function(e,i){return!(e.xMax<i.xMin||e.xMin>i.xMax||e.yMin>i.yMax||e.yMax<i.yMin||!(e.xMin>=i.xMin&&e.xMax<=i.xMin&&e.yMin>=i.yMin&&e.yMin<=i.yMin)&&!t.circleContainPoint(e,cc.v2(i.xMin,i.yMin))&&!t.circleContainPoint(e,cc.v2(i.xMin,i.yMax))&&!t.circleContainPoint(e,cc.v2(i.xMax,i.yMin))&&!t.circleContainPoint(e,cc.v2(i.xMax,i.yMax)))},t}();o.default=a,cc._RF.pop()},{}],ColorUtils:[function(t,e,i){"use strict";cc._RF.push(e,"6c7afzGJQVNcIsVGkIlp/Yw","ColorUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.StampMiniColor=cc.color(177,232,235),t.StampBigColor=cc.color(205,114,233),t.StampGodColor=cc.color(250,230,102),t.AttrColorBlood=cc.color(85,242,68),t.AttrColorBloodOutline=cc.color(0,30,1),t.AttrColorAttack=cc.color(255,219,75),t.AttrColorAttackOutline=cc.color(67,20,0),t.AttrColorDodge=cc.color(52,190,235),t.AttrColorDodgeOutline=cc.color(67,20,0),t.AttrColorCrit=cc.color(255,72,81),t.AttrColorCritOutline=cc.color(67,20,0),t.EquipmentQualityColorList=[cc.color(255,255,255),cc.color(61,184,255),cc.color(188,93,254),cc.color(255,219,91),cc.color(255,72,81)],t}();n.default=o,cc._RF.pop()},{}],ComBannerAd:[function(t,e,i){"use strict";cc._RF.push(e,"d46b3++6oRPHaUmgZ0+hVRF","ComBannerAd");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("CommonConst"),u=o("AdaptUtils"),p=o("LoggerUtils"),d=o("Utils"),h=o("BaseView"),f=o("CCEvent"),g=o("UI"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adList=null,e.title=null,e.desc=null,e.iconPath=null,e}return a(e,t),e.prototype.onLoad=function(){this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(f.default.VIVO_CLOSE_BANNER,this.handlerCloseSelf,this),this.eventOn(f.default.VIVO_ADBANNER_OPEN,this.handlerHideSelf,this),this.eventOn(f.default.VIVO_ADBANNER_CLOSE,this.handlerShowSelf,this),this.eventOn(f.default.SHOW_VIEW,this.handlerShowView,this)},e.prototype.handlerShowView=function(t){t==g.UI.FINAL_REPORT.config.url&&this.closeSelf(!1)},e.prototype.handlerCloseSelf=function(){this.closeSelf(!1)},e.prototype.handlerHideSelf=function(){p.default.info("hide banner"),this.getC("nodeAd").active=!1},e.prototype.handlerShowSelf=function(){p.default.info("show banner"),this.getC("nodeAd").active=!0},e.prototype.start=function(){this.initData(),this.initUI(),this.initBtn(),t.prototype.start.call(this)},e.prototype.initBtn=function(){this.initBtnClose(),this.initBtnClick()},e.prototype.initBtnClose=function(){var t=this,e=this.getC("btnClose");l.default.channelMgr.getSwtich()&&d.default.rand()>.7?l.default.onClick(e,function(){l.default.adMgr.clickNativeBannerAd(),l.default.offClick(e.getComponent(cc.Button)),l.default.onClick(e,function(){t.closeSelf()})}):l.default.onClick(e,function(){t.closeSelf()})},e.prototype.initBtnClick=function(){var t=this.getC("btnClick");l.default.onClick(t,function(){l.default.adMgr.clickNativeBannerAd()})},e.prototype.initUI=function(){var t=this.getC("labTitle"),e=this.getC("labDesc"),i=this.getC("imgIcon");this.setString(t,this.title),this.setString(e,this.desc),cc.assetManager.loadRemote(this.iconPath,function(t,e){i.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e),i.setContentSize(100,100)})},e.prototype.initData=function(){this.adList=this.getArgs()[0],this.title=this.adList.title,this.desc=this.adList.desc,this.iconPath=this.adList.icon},e.prototype.onAdaptUI=function(){var t=this.getC("nodeAd");u.default.adaptNodeToBottom(t),this.adaptUIByChannel()},e.prototype.adaptUIByChannel=function(){var t=this.getC("nodeAd"),e=this.getC("btnClose");cc.sys.platform==c.PlatformTypeEnum.VIVO_GAME&&(e.setAnchorPoint(1,1),e.setPosition(t.width,0))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},s([m],e)}(h.default));r.default=v,cc._RF.pop()},{}],ComBattleCamera:[function(t,e,i){"use strict";cc._RF.push(e,"54e83RQrKxH36YRj4l+b3W4","ComBattleCamera");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tbl"),c=o("CCEvent"),u=o("RES"),p=o("App"),d=o("CollisionUtils"),h=o("GlobalUtils"),f=o("LoggerUtils"),g=o("MathUtils"),y=o("NodeUtils"),m=o("BaseComponent"),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._followObj=null,e._uinode=null,e._size=null,e._maxRect=null,e._maxX=null,e._minX=null,e._leftestX=null,e._mostRightX=null,e._isLimitByTarget=!1,e._limitMinX=null,e._limitTargetMonsterWPos=null,e._heroWPos=null,e._heroPrecent=null,e._tweenMoveRadio=1,e.cameraOffsetX=0,e.limitRect=cc.rect(0,0,1e3,1e3),e.limitInnerRect=cc.rect(),e.heroRect=null,e.fetchCameraRegionId=null,e.heroLeftSpace=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initData(),this.addEventListener()},e.prototype.onTick=function(){this.updateHeroRect(),this.updateMostRight(),this.updateLeftest(),this.checkRange(),this.checkFollowObj(),this.updateDraw()},e.prototype.updateDraw=function(){h.default.isDebug()&&this._scene&&(this._scene.drawRect(cc.rect(this.limitRect.x+50,this.limitRect.y,this.limitRect.width-100,this.limitRect.height)),this._scene.drawRect(cc.rect(this.heroRect.x+50,this.heroRect.y,this.heroRect.width-100,this.heroRect.height)))},e.prototype.updateHeroRect=function(){if(this._heroWPos){var t=this._heroWPos.x-this.heroLeftSpace;this.heroRect=cc.rect(t,this._heroWPos.y,cc.winSize.width,cc.winSize.height)}},e.prototype.updateMostRight=function(){if(this._heroWPos){var t=this._heroWPos.x+(cc.winSize.width-this.heroLeftSpace);t>this._mostRightX&&(this._mostRightX=t)}},e.prototype.updateLeftest=function(){if(this._heroWPos){var t=this._mostRightX-3*cc.winSize.width;this._leftestX<t&&(this._leftestX=t)}},e.prototype.fetchCameraRange=function(){if(this.fetchCameraRegionId){var t=this._mapMgr.getCameraRegion(this.fetchCameraRegionId);t&&(this.syncCameraLimitRect(t),this.fetchCameraRegionId=null)}},e.prototype.checkRange=function(){this._heroWPos&&(this._heroWPos.x,this.heroLeftSpace,this._minX<this._leftestX&&(this._minX=this._leftestX))},e.prototype.isFollowObjInsideLimitRect=function(){return d.default.rectContainPoint(this.limitRect,this._heroWPos)},e.prototype.isFollowObjRectInsideLimitRect=function(){return this.heroRect.x>=this.limitRect.x&&this.heroRect.xMax<=this.limitRect.xMax},e.prototype.checkMoveToTargetLimit=function(){if(this._followObj){var t=y.default.getWorldPos(this.node);if(t.x>=this._limitMinX){var e=g.default.smoothClose(t.x,this._limitMinX,1);y.default.setWorldPos(this.node,e)}else this.checkFollowObj()}},e.prototype.checkFollowObj=function(){if(this._followObj){var t=y.default.getWorldPos(this._followObj),e=cc.v2(t.x,cc.winSize.height/2);e.x=e.x+this.cameraOffsetX,e.x>this._maxX?e.x=this._maxX:e.x<this._minX&&(e.x=this._minX);var i=y.default.getWorldPos(this.node),n=g.default.smoothClose(i.x,e.x,this._tweenMoveRadio);e.x=n,y.default.setWorldPos(this.node,e)}},e.prototype.initialize=function(t,e,i){this._followObj=t,this._mapMgr=e,this._uinode=i,this.initCameraRadio(),this.initCameraRect(),this.initRect(),this.fixCameraPos()},e.prototype.setScene=function(t){this._scene=t},e.prototype.initData=function(){var t=l.default.CommonTable.findByKey("CameraHeroPrecent");t?this._heroPrecent=t.number:(f.default.error("[ComBattleCamera] initData \u7b56\u5212\u6ca1\u6709\u914d\u7f6e\u516c\u5171\u914d\u7f6e\u8868\u7684\u5b57\u6bb5:CameraHeroPrecent,\u6b64\u5b57\u6bb5\u8868\u793a\u4e3b\u89d2\u5728\u76f8\u673a\u7684\u4f4d\u7f6e"),this._heroPrecent=.5),(t=l.default.CommonTable.findByKey("CameraMoveRatio"))?this._tweenMoveRadio=t.number:(f.default.error("[ComBattleCamera] initData \u7b56\u5212\u6ca1\u6709\u914d\u7f6e\u516c\u5171\u914d\u7f6e\u8868\u7684\u5b57\u6bb5:CameraMoveRatio,\u6b64\u5b57\u6bb5\u8868\u793a\u76f8\u673a\u5e27\u63a5\u8fd1\u76ee\u6807\u4f4d\u7f6e\u7684\u767e\u5206\u6bd4"),this._tweenMoveRadio=.5),this.cameraOffsetX=cc.winSize.width/2-cc.winSize.width*this._heroPrecent,this.heroLeftSpace=cc.winSize.width*this._heroPrecent,this._minX=360,this._maxX=360+2*cc.winSize.width},e.prototype.addEventListener=function(){this.eventOn(c.default.MAP_UPDATE,this.handlerMapUpdate,this),this.eventOn(c.default.LEVEL_WAVE_CHANGE,this.handlerLevelWaveChange,this),this.eventOn(c.default.HERO_HURT,this.handlerHeroHurt,this),this.eventOn(c.default.MONSTER_BORN,this.handlerCameraMax,this),this.eventOn(c.default.BOSS_BORN,this.handlerBossBorn,this)},e.prototype.handlerBossBorn=function(){var t=y.default.getWorldPos(this.node).x;this._minX=t;var e=y.default.getWorldPos(this.node).x+.5*cc.winSize.width;this._maxX=e},e.prototype.handlerCameraMax=function(t){var e=t+cc.winSize.width;e>this._maxX&&(this._scene.getMapMgr()&&e>this._scene.getMapMgr().getMapBeginX()-cc.winSize.width/2?this._maxX=this._scene.getMapMgr().getMapBeginX()-cc.winSize.width/2:this._maxX=e)},e.prototype.handlerHeroHurt=function(){this.cameraShake(),this.cameraFadeRed()},e.prototype.cameraShake=function(){var t=cc.tween().by(.05,{x:5,y:5},{easing:"quartInOut"}),e=cc.tween().by(.05,{x:-5,y:-5},{easing:"quartInOut"}),i=cc.tween().repeat(3,cc.tween().sequence(t,e));cc.tween(this.node).then(i).start()},e.prototype.cameraFadeRed=function(){var t=p.default.resMgr.getPrefab(u.ResBattleScene.prefab.ComRedHurt.url),e=cc.instantiate(t);e.parent=this._uinode,e.height=cc.winSize.height,e.width=cc.winSize.width,e.opacity=0;var i=cc.tween().to(.125,{opacity:150}),n=cc.tween().to(.125,{opacity:0}),o=cc.tween().sequence(i,n,cc.tween().call(function(){e.destroy}));cc.tween(e).then(o).start()},e.prototype.initCameraRect=function(){var t=this.node.getComponent(cc.Camera);this._size=cc.size(cc.winSize.width/t.zoomRatio,cc.winSize.height/t.zoomRatio)},e.prototype.initCameraRadio=function(){this.node.getComponent(cc.Camera).zoomRatio=.85},e.prototype.initRect=function(){this.initCameraPos()},e.prototype.initCameraPos=function(){this.node.x=this._minX},e.prototype.fixCameraPos=function(){var t=y.default.getWorldPos(this._followObj),e=cc.v2(t.x,cc.winSize.height/2);e.x=e.x+this.cameraOffsetX,y.default.getWorldPos(this.node).x=e.x,y.default.setWorldPos(this.node,e)},e.prototype.getLimitRect=function(){return this.limitRect},e.prototype.getLeftRightLimit=function(){return{left:this._minX-cc.winSize.width/2,right:this._maxX+cc.winSize.width/2}},e.prototype.getCameraRect=function(){return y.default.getWorldBingdingBox(this.node)},e.prototype.syncCameraLimitRect=function(t){this.limitRect=t,this.limitInnerRect=cc.rect(t.x+cc.winSize.width/2,t.y,t.width-cc.winSize.width/2,t.height)},e.prototype.syncHeroPos=function(t){this._heroWPos=t},e.prototype.isNodeAtCamera=function(t){var e=y.default.getWorldPos(t),i=new cc.Rect(e.x,e.y,t.width,t.height),n=y.default.getWorldPos(this.node),o=new cc.Rect(n.x,n.y,this._size.width,this._size.height);return i.intersects(o)},e.prototype.isNodeAtCameraLeft=function(t){return y.default.getWorldPos(t).x+t.width<this.node.x-this._size.width/2},e.prototype.isNodeAtCameraRight=function(t){return y.default.getWorldPos(t).x>this.node.x+this._size.width/2},e.prototype.isNodeAtCameraDown=function(t){return y.default.getWorldPos(t).y<this.node.y+this._size.height/2},e.prototype.handlerMapUpdate=function(){},e.prototype.handlerTargetMosnterAppear=function(t,e){if(t.isTarget())if(e)this._isLimitByTarget=!1;else{this._isLimitByTarget=!0;var i=t.getWorldPos();this._limitMinX=i.x-.7*cc.winSize.width+ +cc.winSize.width/2,this._limitTargetMonsterWPos=i}},e.prototype.handlerLevelWaveChange=function(t){this.fetchCameraRegionId=t.cameraId},s([_],e)}(m.default));r.default=C,cc._RF.pop()},{}],ComBattleScene:[function(t,e,i){"use strict";cc._RF.push(e,"7660aAi3nFC2IRj070wrnBH","ComBattleScene");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjConst"),c=o("NodeUtils"),u=o("ObjConst"),p=o("CollisionUtils"),d=o("LoggerUtils"),h=o("BaseScene"),f=o("ArrayUtils"),g=cc._decorator,y=g.ccclass,m=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._allObjBase=null,e._state=null,e._cacheObjBase=null,e._monsterCount=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._initObjFight(),this._initCacheObjFight()},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.setState=function(t){d.default.warn("ComBattleScene >>>>>>>> 75 state = ",t),this._state=t},e.prototype.getState=function(){return this._state},e.prototype.isState=function(t){return this._state==t},e.prototype.exitState=function(t){t==this._state&&(this._state=null)},e.prototype.breakOffBulletBySkill=function(t){this.foreachObj(function(t){return t.getType()==l.ObjTypeEnum.Bullet},function(e){e.getSkill()==t&&e.breakOff()})},e.prototype.addMonsterCount=function(t){this._monsterCount+=t},e.prototype.getMonsterCount=function(){return this._monsterCount},e.prototype._initCacheObjFight=function(){this._cacheObjBase=[]},e.prototype.pushBackCacheObj=function(t){this._cacheObjBase.push({obj:t,time:5})},e.prototype._updateCacheObj=function(t){for(var e=this._cacheObjBase.length-1;e>=0;e--)this._cacheObjBase[e].time-=t,this._cacheObjBase[e].time<0&&(this._cacheObjBase[e].obj.node.destroy(),f.default.remove(this._cacheObjBase,e))},e.prototype._initObjFight=function(){this._allObjBase=[]},e.prototype.pushBackObj=function(t){this._allObjBase.push(t)},e.prototype._updateObj=function(t){for(var e=this._allObjBase.length-1;e>=0;e--)0==this._allObjBase[e].isLegal()?(this._allObjBase[e].getType()==l.ObjTypeEnum.Monster&&this.addMonsterCount(-1),this._allObjBase[e].node.active=!1,this.pushBackCacheObj(this._allObjBase[e]),this._allObjBase.splice(e,1)):this._allObjBase[e].onTick(t)},e.prototype.foreachEnemy=function(t,e){var i=u.EnemyRaceConst[t];this.foreachObj(function(t){if(t.getType()==l.ObjTypeEnum.Bullet)return!1;for(var e=0,n=i;e<n.length;e++){var o=n[e];if(t.getCamp()==o)return!0}return!1},e)},e.prototype.foreachObj=function(t,e){for(var i=0,n=this._allObjBase;i<n.length;i++){var o=n[i];t?t(o)&&e(o):e(o)}},e.prototype.foreachMonster=function(t){for(var e=0,i=this._allObjBase;e<i.length;e++){var n=i[e];n.getType()!=l.ObjTypeEnum.Monster&&n.getType()!=l.ObjTypeEnum.BOSS||t(n)}},e.prototype.foreachHero=function(t){for(var e=0,i=this._allObjBase;e<i.length;e++){var n=i[e];n.getType()==l.ObjTypeEnum.Hero&&t(n)}},e.prototype.getMonsterNum=function(){for(var t=0,e=0,i=this._allObjBase;e<i.length;e++){var n=i[e];n.getType()!=l.ObjTypeEnum.Monster&&n.getType()!=l.ObjTypeEnum.BOSS||n.isLive()&&t++}return t},e.prototype.getTargetMonsterNum=function(){for(var t=0,e=0,i=this._allObjBase;e<i.length;e++){var n=i[e];n.getType()!=l.ObjTypeEnum.Monster&&n.getType()!=l.ObjTypeEnum.BOSS||n.isTarget()&&t++}return t},e.prototype.getObjListBySector=function(t,e,i,n,o){void 0===o&&(o=!1);var r=[],a=[];this.foreachObj(null,function(n){var o=c.default.getWorldPos(n.node);p.default.PointInsideRingByAngleRange(o,t,e,i)&&a.push(n)});for(var s=0,l=a;s<l.length;s++){var u=l[s];n(u)&&r.push(u)}if(o)for(var d=0;d<r.length;d++)for(var h=1;h<r.length-d;h++)if(t.sub(r[d].getWorldPos()).mag()>t.sub(r[h].getWorldPos()).mag()){var f=r[d];r[d]=r[h],r[h]=f}return r},e.prototype.onTick=function(t){this._updateObj(t),this._updateCacheObj(t)},s([y],e)}(h.default));r.default=m,cc._RF.pop()},{}],ComBlood:[function(t,e,i){"use strict";cc._RF.push(e,"69360UAXzVKpY3jtAmNgLA8","ComBlood");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ActionUtils"),c=o("MathUtils"),u=o("NodeUtils"),p=o("BaseComponent"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bloodSpr=null,e._bloodActionSpr=null,e._bloodNum=null,e._originLong=null,e._objFight=null,e._offset=cc.v2(),e}return a(e,t),e.prototype.onLoad=function(){this._bloodSpr=this.getC("bloodSpr"),this._bloodActionSpr=this.getC("bloodActionSpr"),this._bloodNum=this.getC("bloodNum"),this._originLong=this._bloodSpr.width},e.prototype.init=function(t,e){this._bloodNum&&(this._bloodNum.getComponent(cc.Label).string=e.toString()),this._objFight=t},e.prototype.setOffset=function(t){this._offset=t},e.prototype.hpChange=function(t,e){this._bloodNum&&(this._bloodNum.getComponent(cc.Label).string=c.default.numToBigNum(Math.floor(t)));var i=this._originLong*e;l.default.runningWidthNoFairly(this._bloodSpr,i,.6),l.default.runningWidthNoFairly(this._bloodActionSpr,i,.2)},e.prototype.onTick=function(){this._objFight&&u.default.setWorldPos(this.node,this._objFight.getWorldPos().add(this._offset))},s([h],e)}(p.default));r.default=f,cc._RF.pop()},{}],ComBossBlood:[function(t,e,i){"use strict";cc._RF.push(e,"433acjn8YNI17KNHD2oczoW","ComBossBlood");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ActionUtils"),c=o("BaseComponent"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bossBloodAction=null,e.bossBlood=[],e.bossBloodNum=null,e.originWidth=null,e.bossBloodZIndex=10,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(){for(var t=0;t<5;t++){var e="bossBlood"+(t+1);this.bossBlood[t]=this.getC(e),this.bossBlood[t].zIndex=this.bossBloodZIndex-2,this.bossBlood[t].active=!1}this.bossBloodAction=this.getC("bossBloodAction"),this.bossBloodAction.zIndex=this.bossBloodZIndex-1,this.bossBloodNum=this.getC("bossBloodNum"),this.bossBloodNum.zIndex=this.bossBloodZIndex+10,this.getC("x").zIndex=this.bossBloodZIndex+10,this.originWidth=this.bossBlood[0].width,this.refreshBossHp(1)},e.prototype.refreshBossHp=function(t){if(this.node){this.node.stopAllActions();var e=13*t,i=Math.ceil(e);this.bossBloodNum.getComponent(cc.Label).string=i.toString();var n=(13-i)%5,o=e-Math.floor(e);0==o&&(o=.9999);var r=this.originWidth*o,a=this.bossBlood[n],s=n+1;5==s&&(s=0);var c=this.bossBlood[s],u=n-1;-1==u&&(u=4);var p=this.bossBlood[u];1==i?(a.active=!0,c.active=!1,p.active=!1):(a.active=!0,c.active=!0,p.active=!1),a.zIndex=this.bossBloodZIndex,a.width=r,c.zIndex=this.bossBloodZIndex-2,c.width=this.originWidth,this.node.runAction(cc.sequence(cc.scaleTo(2/60,.95,.98),cc.scaleTo(2/60,1),cc.scaleTo(2/60,.98,.99),cc.scaleTo(2/96,1))),l.default.runningWidthNoFairly(this.bossBloodAction,r,.8)}},s([p],e)}(c.default));r.default=d,cc._RF.pop()},{}],ComCard1:[function(t,e,i){"use strict";cc._RF.push(e,"18300vVgqJMYrQpKv9PhZJJ","ComCard1");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.CardBgTypeEnum=void 0;var l,c=o("App"),u=o("BaseComponent"),p=o("BagConst"),d=o("LoggerUtils"),h=o("TipsUtils"),f=o("CCEvent");(function(t){t[t.Slot=1]="Slot",t[t.Bag=2]="Bag"})(l=r.CardBgTypeEnum||(r.CardBgTypeEnum={}));var g=cc._decorator,y=g.ccclass,m=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CardIcon=null,e.LevelLabBg=[],e.cardId=null,e.clickCallback=null,e.removeCallback=null,e.isClick=!1,e.bgType=null,e}return a(e,t),e.prototype.initialize=function(t,e,i,n){this.cardId=t,this.clickCallback=i,this.bgType=e,this.removeCallback=n},e.prototype.start=function(){t.prototype.start.call(this),this.initUI(),this.initIcon(),this.initBar(),this.initLevel(),this.initName(),this.addEventListener()},e.prototype.initName=function(){var t=c.default.cardMgr.getCardInfo(this.cardId),e=c.default.cardMgr.getCardLevelVO(this.cardId,t.level);this.labName.getComponent(cc.Label).string=e.name},e.prototype.addEventListener=function(){this.eventOn(f.default.BAG_ITEM_CHANGE,this.handlerItemChange,this),this.eventOn(f.default.CARD_VIEW_CLICK_BG,this.handlerClickBg,this),this.eventOn(f.default.CARD_UPGRADE,this.handlerCardUpgrade,this)},e.prototype.initUI=function(){var t=this;this.nodeIconPos=this.getC("nodeIconPos"),this.nodeBar=this.getC("nodeBar"),this.sprProgress=this.getC("sprProgress"),this.sprProgressBg=this.getC("sprProgressBg"),this.sprUp=this.getC("sprUp"),this.labProgress=this.getC("labProgress"),this.labLevel=this.getC("labLevel"),this.btnRoot=this.getC("btnRoot"),this.sprBg1=this.getC("sprBg1"),this.sprBg2=this.getC("sprBg2"),this.btnUpgrade=this.getC("btnUpgrade"),this.labNumber=this.seekC(this.btnUpgrade,"labNumber"),this.labNumberRed=this.seekC(this.btnUpgrade,"labNumberRed"),this.btnRemove=this.getC("btnRemove"),this.btnUse=this.getC("btnUse"),this.btnInfo=this.getC("btnInfo"),this.sprLevel=this.getC("sprLevel"),this.labName=this.getC("labName"),this.imgInfo=this.getC("imgInfoBg"),c.default.onClick(this.btnRoot,function(){t.clickCallback&&t.clickCallback(),t.showClick()}),c.default.onClick(this.btnUpgrade,function(){t.isCardEnoughtGoldToUpgrade()?c.default.cardMgr.upgradeCard(t.cardId):d.default.error("[ComCard] \u91d1\u5e01\u4e0d\u8db3")}),c.default.onClick(this.btnUse,function(){c.default.cardMgr.isSlotFull()?h.default.showTips("Slot is full~"):c.default.cardMgr.insertSlotCard(t.cardId)}),c.default.onClick(this.btnRemove,function(){t.removeCallback&&t.removeCallback()}),c.default.onClick(this.btnInfo,function(){}),this.reset()},e.prototype.initIcon=function(){var t=cc.instantiate(this.CardIcon);t.getComponent("ComCardIcon").initialize(this.cardId),this.nodeIconPos.addChild(t)},e.prototype.initBar=function(){var t=c.default.cardMgr.getCardInfo(this.cardId).level+1,e=c.default.cardMgr.getCardLevelVO(this.cardId,t);if(e){var i=c.default.bagMgr.getItemNum(this.cardId);this.labProgress.getComponent(cc.Label).string=i+"/"+e.needCardNum;var n=i/e.needCardNum;n>1&&(n=1),this.sprProgress.width=this.sprProgressBg.width*n,i>=e.needCardNum?this.sprUp.active=!0:this.sprUp.active=!1}else this.sprUp.active=!1,this.sprProgress.active=!1,this.labProgress.active=!1},e.prototype.initLevel=function(){var t=c.default.cardMgr.getCardInfo(this.cardId);this.labLevel.getComponent(cc.Label).string="Lv."+t.level,c.default.cardMgr.getCardLevelVO(t.cardId,t.level).icon&&(this.sprLevel.getComponent(cc.Sprite).spriteFrame=this.LevelLabBg[t.level-1])},e.prototype.initInfo=function(){var t,e=this.seekC(this.imgInfo,"labNum"),i=this.seekC(this.imgInfo,"layout"),n=c.default.cardMgr.getCardInfo(this.cardId),o=c.default.cardMgr.getCardLevelVO(n.cardId,n.level);if(o.attack){(t=cc.instantiate(e)).active=!0,t.parent=i,t.color=cc.color(255,219,75);var r="Damage +"+o.attack;t.getComponent(cc.Label).string=r}o.hpmax&&((t=cc.instantiate(e)).active=!0,t.parent=i,t.color=cc.color(85,242,68),r="HP +"+o.hpmax,t.getComponent(cc.Label).string=r),o.dodge&&((t=cc.instantiate(e)).active=!0,t.parent=i,t.color=cc.color(52,190,235),r="Dodge +"+o.dodge/100+"%",t.getComponent(cc.Label).string=r),o.crit&&((t=cc.instantiate(e)).active=!0,t.parent=i,t.color=cc.color(255,72,81),r="Crit +"+o.crit/100+"%",t.getComponent(cc.Label).string=r)},e.prototype.reset=function(){this.sprBg1.active=!1,this.sprBg2.active=!1,this.btnUpgrade.active=!1,this.btnRemove.active=!1,this.btnUse.active=!1,this.btnInfo.active=!1,this.showBar(!0),this.isClick=!1},e.prototype.showClick=function(){this.isClick=!0,this.showBg(),this.showFirstBtn(),this.showSecondBtn(!0),this.showBar(!1)},e.prototype.showFirstBtn=function(){if(this.isClick)if(c.default.cardMgr.isCardMaxLevel(this.cardId))this.btnUpgrade.active=!1,this.btnInfo.active=!0;else if(this.isCardEnoughtCardToUpgrade()){this.btnInfo.active=!1,this.btnUpgrade.active=!0,this.isCardEnoughtGoldToUpgrade()?(this.labNumber.active=!0,this.labNumberRed.active=!1,this.labNumber):(this.labNumber.active=!1,this.labNumberRed.active=!0);var t=this.getUpgradeGoldNumber();this.labNumber.getComponent(cc.Label).string=""+t,this.labNumberRed.getComponent(cc.Label).string=""+t}else this.btnUpgrade.active=!1,this.btnInfo.active=!0},e.prototype.showSecondBtn=function(t){this.isClick&&(this.bgType==l.Bag?this.btnUse.active=t:this.btnRemove.active=t)},e.prototype.showBg=function(){this.isClick&&(this.bgType==l.Bag?this.sprBg2.active=!0:this.bgType==l.Slot&&(this.sprBg1.active=!0))},e.prototype.showBar=function(t){this.nodeBar.active=t},e.prototype.getUpgradeReourceList=function(){var t=c.default.cardMgr.getCardInfo(this.cardId);return c.default.cardMgr.getCardLevelVO(this.cardId,t.level+1).cost},e.prototype.getUpgradeGoldNumber=function(){for(var t=this.getUpgradeReourceList(),e=0;e<t.length;e++){var i=t[e];if(i[0]==p.ItemIdEnum.Gold)return i[1]}return d.default.error("ComCard \u7b56\u5212\u6ca1\u6709\u914d\u7f6e\u91d1\u5e01\u4f7f\u7528\u6570\u91cf"),9999999},e.prototype.isCardEnoughtGoldToUpgrade=function(){var t=this.getUpgradeGoldNumber();return c.default.bagMgr.getItemNum(p.ItemIdEnum.Gold)>=t},e.prototype.isCardEnoughtCardToUpgrade=function(){var t=c.default.cardMgr.getCardInfo(this.cardId),e=c.default.cardMgr.getCardLevelVO(this.cardId,t.level+1);return null!=e&&c.default.bagMgr.getItemNum(this.cardId)>=e.needCardNum},e.prototype.handlerItemChange=function(){this.initBar(),this.initLevel()},e.prototype.handlerClickBg=function(){this.reset()},e.prototype.handlerCardUpgrade=function(t){t==this.cardId&&(this.initLevel(),this.initBar(),this.showFirstBtn())},s([m(cc.Prefab)],e.prototype,"CardIcon",void 0),s([m(cc.SpriteFrame)],e.prototype,"LevelLabBg",void 0),s([y],e)}(u.default);r.default=v,cc._RF.pop()},{}],ComCardBagItemNew:[function(t,e,i){"use strict";cc._RF.push(e,"23836XdPwpOiq6rdKixSbXt","ComCardBagItemNew");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ActionUtils"),p=o("ColorUtils"),d=o("ItemUtils"),h=o("RedPointUtils"),f=o("SpriteFrameUtils"),g=o("TipsUtils"),y=o("CCEvent"),m=cc._decorator,v=m.ccclass,_=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refreshCount=0,e}return a(e,t),e.prototype.initialize=function(t){this.cardId=t;var e=l.default.cardMgr.getCardInfo(t);this.cardVO=l.default.cardMgr.getCardLevelVO(e.cardId,e.level)},e.prototype.start=function(){t.prototype.start.call(this),this.addEventListener(),this.initUI()},e.prototype.addEventListener=function(){var t=this;this.eventOn(y.default.CARD_CLICK_CARD,this.handlerClickCard,this),this.eventOn(y.default.CARD_VIEW_CLICK_BG,this.handlerClickBg,this),this.eventOn(y.default.CARD_UPGRADE,this.handlerCardUpgrade,this),this.eventOn(y.default.BAG_ITEM_CHANGE,this.handlerItemChange,this),u.default.sequence(this.node,.2,function(){t.eventOnRedPoint({eventName:y.CCEventRedPoint.CardHasUpgrade,handler:t.handlerCardHasUpgrade,target:t}),t.eventOnRedPoint({eventName:y.CCEventRedPoint.CardHasNewCard,handler:t.handlerCardHasNewCard,target:t})})},e.prototype.initUI=function(){this.imgBg=this.getC("imgBg"),this.imgIcon=this.getC("imgIcon"),this.labName=this.getC("labName"),this.labLevel=this.getC("labLevel"),this.labAttr1=this.getC("labAttr1"),this.labAttr2=this.getC("labAttr2"),this.labAttr3=this.getC("labAttr3"),this.imgIconBg=this.getC("imgIconBg"),this.imgIconBg2=this.getC("imgIconBg2"),this.barBg=this.getC("barBg"),this.barProgress=this.getC("barProgress"),this.labProgress=this.getC("labProgress"),this.btnInfo=this.getC("btnInfo"),this.btnUse=this.getC("btnUse"),this.btnUpgrade=this.getC("btnUpgrade"),this.labPrice=this.getC("labPrice"),this.btnClick=this.getC("btnClick")},e.prototype.refresh=function(){this.refreshCount++},e.prototype.refreshReal=function(){this.initIcon(),this.initBar(),this.initInfoBtn(),this.initUseBtn(),this.initBtnUpgrade(),this.initBtnVisible(),this.initCardLab(),this.initBtnClick()},e.prototype.initBtnClick=function(){var t=this;l.default.onClickWithoutSound(this.btnClick,function(){l.default.audioMgr.playSoundByResId(104),t.showClick(!0),l.default.cardMgr.touchCard(t.cardId)}),this.showClick(!1)},e.prototype.initIcon=function(){f.default.setSpriteFrame(this.imgIcon,d.default.getCardIconSpriteFram(this.cardId))},e.prototype.initBar=function(){if(l.default.cardMgr.isCardMaxLevel(this.cardId))this.barProgress.getComponent(cc.ProgressBar).progress=1,this.setString(this.labProgress,"MAX");else{var t=l.default.cardMgr.getCardNextLevelVO(this.cardId),e=l.default.bagMgr.getItemNum(this.cardId);this.barProgress.getComponent(cc.ProgressBar).progress=e/t.needCardNum,this.setString(this.labProgress,e+"/"+t.needCardNum);var i=this.getC("imgUpgrade");e>t.needCardNum?i.active=!0:i.active=!1}},e.prototype.initInfoBtn=function(){l.default.onClickWithoutSound(this.btnInfo,function(){l.default.audioMgr.playSoundByResId(107)})},e.prototype.initUseBtn=function(){var t=this;l.default.onClickWithoutSound(this.btnUse,function(){l.default.cardMgr.isSlotFull()?g.default.showTips("Slot is full~"):l.default.cardMgr.insertSlotCard(t.cardId)})},e.prototype.initBtnUpgrade=function(){var t=this;l.default.onClickWithoutSound(this.btnUpgrade,function(){l.default.cardMgr.upgradeCard(t.cardId)}),l.default.cardMgr.isCardEnoughtGoldToUpgrade(this.cardId)?this.labPrice.color=cc.color(255,255,255):this.labPrice.color=cc.color(255,0,0),this.setString(this.labPrice,""+l.default.cardMgr.getUpgradeGoldNumber(this.cardId))},e.prototype.initUpgradeSpine=function(){var t=this.getC("cardUpgradeSpine");l.default.cardMgr.isCardEnoughtCardToUpgrade(this.cardId)&&l.default.cardMgr.isCardEnoughtGoldToUpgrade(this.cardId)?(t.active=!0,t.getComponent(sp.Skeleton).addAnimation(0,"play_loop",!0)):t.active=!1},e.prototype.showUpgradeSpine=function(){var t=this,e=this.getC("cardUpgradeSpine");if(l.default.cardMgr.isCardEnoughtCardToUpgrade(this.cardId)&&l.default.cardMgr.isCardEnoughtGoldToUpgrade(this.cardId)){e.active=!0;var i=e.getComponent(sp.Skeleton);i.setAnimation(0,"play_start",!1),i.setCompleteListener(function(e){"play_start"==e.animation.name&&t.initUpgradeSpine()})}else e.active=!1},e.prototype.initBtnVisible=function(){l.default.cardMgr.isCardEnoughtCardToUpgrade(this.cardId)?(this.btnUpgrade.active=!0,this.btnInfo.active=!1):(this.btnUpgrade.active=!1,this.btnInfo.active=!0)},e.prototype.initCardLab=function(){this.setString(this.labName,this.cardVO.name),this.labName.color=cc.color(this.cardVO.color[0],this.cardVO.color[1],this.cardVO.color[2]),this.setString(this.labLevel,"Level "+this.cardVO.level);var t=1;this.cardVO.attack&&(this.setAttrString(t,"Damage +"+this.cardVO.attack),this.setAttrColor(t,p.default.AttrColorAttack),this.setAttrOutline(t,p.default.AttrColorAttackOutline),t++),this.cardVO.hpmax&&(this.setAttrString(t,"HP +"+this.cardVO.hpmax),this.setAttrColor(t,p.default.AttrColorBlood),this.setAttrOutline(t,p.default.AttrColorBloodOutline),t++),this.cardVO.dodge&&(this.setAttrString(t,"Dodge +"+this.cardVO.dodge/100+"%"),this.setAttrColor(t,p.default.AttrColorDodge),this.setAttrOutline(t,p.default.AttrColorDodgeOutline),t++),this.cardVO.crit&&(this.setAttrString(t,"Crit +"+this.cardVO.crit/100+"%"),this.setAttrColor(t,p.default.AttrColorCrit),this.setAttrOutline(t,p.default.AttrColorCritOutline),t++),1==t&&(this.setAttrVisible(1,!1),this.setAttrVisible(2,!1),this.setAttrVisible(3,!1)),2==t&&(this.setAttrVisible(1,!0),this.setAttrVisible(2,!1),this.setAttrVisible(3,!1)),3==t&&(this.setAttrVisible(1,!0),this.setAttrVisible(2,!0),this.setAttrVisible(3,!1)),t>3&&(this.setAttrVisible(1,!0),this.setAttrVisible(2,!0),this.setAttrVisible(3,!0))},e.prototype.setAttrString=function(t,e){1==t?this.setString(this.labAttr1,e):2==t?this.setString(this.labAttr2,e):this.setString(this.labAttr3,e)},e.prototype.setAttrColor=function(t,e){1==t?this.labAttr1.color=e:2==t?this.labAttr2.color=e:this.labAttr3.color=e},e.prototype.setAttrOutline=function(t,e){1==t?this.labAttr1.getComponent(cc.LabelOutline).color=e:2==t?this.labAttr2.getComponent(cc.LabelOutline).color=e:this.labAttr3.getComponent(cc.LabelOutline).color=e},e.prototype.setAttrVisible=function(t,e){1==t?this.labAttr1.active=e:2==t?this.labAttr2.active=e:this.labAttr3.active=e},e.prototype.showClick=function(t){t?(this.imgIconBg.active=!0,this.btnUse.active=!0,l.default.cardMgr.isCardEnoughtCardToUpgrade(this.cardId)?this.btnUpgrade.active=!0:this.btnInfo.active=!0,l.default.event.emit(y.default.CARD_CLICK_CARD,this.cardId),this.node.zIndex=10):(this.imgIconBg.active=!1,this.btnInfo.active=!1,this.btnUpgrade.active=!1,this.btnUse.active=!1,this.node.zIndex=0)},e.prototype.handlerClickCard=function(t){this.cardId!=t&&this.showClick(!1)},e.prototype.handlerClickBg=function(){this.showClick(!1)},e.prototype.handlerCardUpgrade=function(t){this.cardId==t&&(this.initialize(t),this.refresh(),this.showUpgradeSpine())},e.prototype.handlerItemChange=function(){this.initialize(this.cardId),this.refresh()},e.prototype.update=function(){this.checkRefresh()},e.prototype.checkRefresh=function(){this.refreshCount>0&&(this.refreshReal(),this.initUpgradeSpine(),this.refreshCount=0)},e.prototype.handlerCardHasUpgrade=function(t){var e=this.getC("nodeRedPoint2");-1==t.indexOf(this.cardId)?h.default.ShowRedPoint(e,!1,{scale:.5}):h.default.ShowRedPoint(e,!0,{scale:.5})},e.prototype.handlerCardHasNewCard=function(t){var e=this.getC("nodeRedPoint1"),i=!0;-1==t.indexOf(this.cardId)&&(i=!1),h.default.ShowRedPoint(e,i,{scale:.5})},s([v],e)}(c.default));r.default=_,cc._RF.pop()},{}],ComCardBagNew:[function(t,e,i){"use strict";cc._RF.push(e,"c8f17FR/QhNDoIVRRaAWXpt","ComCardBagNew");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("AdaptUtils"),p=o("LoggerUtils"),d=o("CCEvent"),h=cc._decorator,f=h.ccclass,g=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ComCardBagItem=null,e.autoIndex=10,e}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.initCardList(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(d.default.CARD_REMOVE_SLOT_CARD,this.handlerRemoveSlotCard,this),this.eventOn(d.default.CARD_ADD_SLOT_CARD,this.handlerAddSlotCard,this),this.eventOn(d.default.BAG_ITEM_CHANGE,this.handlerItemChange,this)},e.prototype.initCardList=function(){this.container=this.getC("container");var t=l.default.cardMgr.getCardListNotAtSlot();t.sort(function(t,e){var i=l.default.cardMgr.getCardLevelVO(t.cardId,t.level),n=l.default.cardMgr.getCardLevelVO(e.cardId,e.level);return i||p.default.error("ComCardBag >>>>>>>> 47 aVO == null,a.cardId = ",t.cardId),n||p.default.error("ComCardBag >>>>>>>> 47 aVO == null,a.cardId = ",e.cardId),n.rank-i.rank});for(var e=Math.max(t.length,this.container.children.length),i=0;i<e;i++){var n=t[i];if(null==n){for(var o=e-1;o>=i;o--)this.container.children[o].destroy();return}var r=void 0;this.container.children[i]?r=this.container.children[i]:(r=cc.instantiate(this.ComCardBagItem)).parent=this.container;var a=r.getComponent("ComCardBagItemNew");a.initialize(n.cardId),a.refresh()}},e.prototype.update=function(){this.node.width=this.container.width,this.node.height=this.container.height+u.default.CardViewExtraHeight},e.prototype.handlerRemoveSlotCard=function(){this.initCardList()},e.prototype.handlerAddSlotCard=function(){this.initCardList()},e.prototype.handlerItemChange=function(){this.initCardList()},s([g(cc.Prefab)],e.prototype,"ComCardBagItem",void 0),s([f],e)}(c.default);r.default=y,cc._RF.pop()},{}],ComCardBag:[function(t,e,i){"use strict";cc._RF.push(e,"14b01JhnrxIkI+Kk+XDlXHQ","ComCardBag");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("LoggerUtils"),p=o("CCEvent"),d=o("ComCard"),h=cc._decorator,f=h.ccclass,g=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ComCard=null,e.cardList=[],e.clickCallback=null,e.maxZIndex=1,e}return a(e,t),e.prototype.initialize=function(t){this.clickCallback=t},e.prototype.start=function(){t.prototype.start.call(this),this.initUI(),this.addEventListener(),this.initData(),this.initCardGrid()},e.prototype.addEventListener=function(){this.eventOn(p.default.CARD_REMOVE_SLOT_CARD,this.handlerRemoveSlotCard,this),this.eventOn(p.default.CARD_ADD_SLOT_CARD,this.handlerAddSlotCard,this)},e.prototype.initData=function(){this.list=l.default.cardMgr.getCardListNotAtSlot(),this.list.sort(function(t,e){var i=l.default.cardMgr.getCardLevelVO(t.cardId,t.level),n=l.default.cardMgr.getCardLevelVO(e.cardId,e.level);return i||u.default.error("ComCardBag >>>>>>>> 47 aVO == null,a.cardId = ",t.cardId),n||u.default.error("ComCardBag >>>>>>>> 47 aVO == null,a.cardId = ",e.cardId),n.rank-i.rank})},e.prototype.initUI=function(){this.nodeLayout=this.getC("nodeLayout"),this.nodeFollow=this.getC("nodeFollow")},e.prototype.initCardGrid=function(){for(var t=this,e=function(e){var n=cc.instantiate(i.ComCard),o=i.syncOneNodeToLayout(n,e),r=n.getComponent("ComCard");r.initialize(i.list[e].cardId,d.CardBgTypeEnum.Bag,function(){n.zIndex=t.maxZIndex++,t.resetAllCard(),t.clickCallback&&t.clickCallback()}),i.nodeFollow.addChild(n),i.cardList.push({com:r,node:n,followNode:o})},i=this,n=0;n<this.list.length;n++)e(n)},e.prototype.clearCard=function(){this.nodeLayout.removeAllChildren(),this.nodeFollow.removeAllChildren()},e.prototype.syncOneNodeToLayout=function(t,e){if(this.nodeLayout.children[e])return this.nodeLayout.children[e];var i=new cc.Node("");return i.width=t.width,i.height=t.height,this.nodeLayout.addChild(i),i},e.prototype.resetAllCard=function(){for(var t=0;t<this.cardList.length;t++)this.cardList[t].com.reset()},e.prototype.update=function(){this.syncParentSize(),this.nodeFollowNode()},e.prototype.syncParentSize=function(){this.node.width!=this.nodeLayout.width&&(this.node.width=this.nodeLayout.width),this.node.height!=this.nodeLayout.height&&(this.node.height=this.nodeLayout.height+200)},e.prototype.nodeFollowNode=function(){for(var t=0;t<this.cardList.length;t++){var e=this.cardList[t];e.node.x=e.followNode.x,e.node.y=e.followNode.y}},e.prototype.handlerRemoveSlotCard=function(){this.initData(),this.clearCard(),this.initCardGrid()},e.prototype.handlerAddSlotCard=function(){this.initData(),this.clearCard(),this.initCardGrid()},s([g(cc.Prefab)],e.prototype,"ComCard",void 0),s([f],e)}(c.default);r.default=y,cc._RF.pop()},{}],ComCardClick:[function(t,e,i){"use strict";cc._RF.push(e,"8125di86ZdDd47HulSNCTV0","ComCardClick");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},a([c(cc.Label)],e.prototype,"label",void 0),a([c],e.prototype,"text",void 0),a([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ComCardIcon:[function(t,e,i){"use strict";cc._RF.push(e,"0d501rZG3xO+boZCHnatOib","ComCardIcon");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("LoggerUtils"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardId=null,e}return a(e,t),e.prototype.initialize=function(t){this.cardId=t,this.initUI()},e.prototype.start=function(){t.prototype.start.call(this),this.initUI()},e.prototype.initUI=function(){if(this.cardId){var t=l.default.cardMgr.getCardInfo(this.cardId),e=l.default.cardMgr.getCardLevelVO(t.cardId,t.level),i=this.getC("sprIcon"),n=l.default.resMgr.getSpriteFrame("icon2/"+e.icon);n?i.getComponent(cc.Sprite).spriteFrame=n:u.default.error("ComCardIcon >>>>>>>> 34 \u627e\u4e0d\u5230\u56fe\u7247\u8d44\u6e90:this.cardId = %s,config.icon = %s",this.cardId,e.icon)}},s([d],e)}(c.default));r.default=h,cc._RF.pop()},{}],ComCardSlotNew:[function(t,e,i){"use strict";cc._RF.push(e,"a961ehToUFOH6qQa8Mt8cYW","ComCardSlotNew");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ActionUtils"),p=o("ItemUtils"),d=o("LoggerUtils"),h=o("RedPointUtils"),f=o("SpriteFrameUtils"),g=o("TipsUtils"),y=o("CCEvent"),m=cc._decorator,v=m.ccclass,_=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._slotId=null,e}return a(e,t),e.prototype.initialize=function(t){this._slotId=t,this._cardId=l.default.cardMgr.getSlotCardId(t),this.isOpen=l.default.cardMgr.isSlotOpen(this._slotId),this.isClick=!1,null!=this._cardId&&0!=this._cardId?(this._cardInfo=l.default.cardMgr.getCardInfo(this._cardId),null!=this._cardInfo?this._cardVO=l.default.cardMgr.getCardLevelVO(this._cardId,this._cardInfo.level):d.default.error("this._cardId = ",this._cardId)):this._cardId=null},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this.initUI(),this.addEventListener(),this.refreshUI()},e.prototype.refresh=function(){this.initialize(this._slotId),this.refreshUI()},e.prototype.getCardId=function(){return this._cardId},e.prototype.addEventListener=function(){var t=this;this.eventOn(y.default.CARD_ADD_SLOT_CARD,this.handlerAddSlotCard,this),this.eventOn(y.default.CARD_CLICK_CARD,this.handlerClickCard,this),this.eventOn(y.default.CARD_VIEW_CLICK_BG,this.handlerClickBg,this),this.eventOn(y.default.CARD_UPGRADE,this.handlerCardUpgrade,this),this.eventOn(y.default.BAG_ITEM_CHANGE,this.handlerItemChange,this),this.eventOn(y.default.CARD_SHINEONCE,this.handlerCardShineOnce,this),u.default.sequence(this.node,.2,function(){t.eventOnRedPoint({eventName:y.CCEventRedPoint.CardHasUpgrade,handler:t.handlerCardHasUpgrade,target:t}),t.eventOnRedPoint({eventName:y.CCEventRedPoint.CardHasNewCard,handler:t.handlerCardHasNewCard,target:t})})},e.prototype.initUI=function(){this.sprBgGray=this.getC("sprBgGray"),this.imgIconBg=this.getC("imgIconBg"),this.imgIcon=this.getC("imgIcon"),this.btnIcon=this.getC("btnIcon"),this.nodeBtnLock=this.getC("nodeBtnLock"),this.nodeBtnAdd=this.getC("nodeBtnAdd"),this.nodeBar=this.getC("nodeBar"),this.barProgress=this.getC("barProgress"),this.imgUp=this.getC("imgUp"),this.labName=this.getC("labName"),this.btnInfo=this.getC("btnInfo"),this.labInfo=this.getC("labInfo"),this.btnRemove=this.getC("btnRemove"),this.btnUpgrade=this.getC("btnUpgrade"),this.sprGold=this.getC("sprGold"),this.labRemove=this.getC("labRemove"),this.imgLevelBg=this.getC("imgLevelBg"),this.barImgUp=this.getC("barImgUp"),this.labUpgradePrice=this.getC("labUpgradePrice"),this.labUpgrade1=this.getC("labUpgrade1"),this.labLevel=this.getC("labLevel"),this.labBar=this.getC("labBar")},e.prototype.refreshUI=function(){this.initBg(),this.initIcon(),this.initLevel(),this.initName(),this.initBar(),this.initBtnUpgrade(),this.initBtnRemove(),this.initBtnInfo(),this.initBtnVisible(),this.initBtnAdd(),this.initBtnLock(),this.initUpgradeSpine()},e.prototype.initBg=function(){this.sprBgGray.active=!1},e.prototype.initIcon=function(){var t=this;this.isOpen?null==this._cardId?this.imgIcon.active=!1:(this.imgIcon.active=!0,f.default.setSpriteFrame(this.imgIcon,p.default.getCardIconSpriteFram(this._cardId)),l.default.onClick(this.btnIcon,function(){t.isOpen?t.isClick||(t.showSlotClick(!0),l.default.cardMgr.touchCard(t._cardId)):d.default.error("ComCardSlotNew \u903b\u8f91\u9519\u8bef,\u4e0d\u5e94\u8be5\u80fd\u70b9\u51fb")})):this.imgIcon.active=!1},e.prototype.initBtnAdd=function(){this.isOpen?this._cardId?this.nodeBtnAdd.active=!1:(this.nodeBtnAdd.active=!0,l.default.onClick(this.nodeBtnAdd,function(){d.default.info("ComCardSlotNew onClick nodeBtnAdd")})):this.nodeBtnAdd.active=!1},e.prototype.initBtnLock=function(){var t=this;this.isOpen?this.nodeBtnLock.active=!1:(this.nodeBtnLock.active=!0,l.default.onClick(this.nodeBtnLock,function(){var e=l.default.cardMgr.getSlotSystemOpenVO(t._slotId);g.default.showTips(e.unlockTips)}))},e.prototype.initLevel=function(){this.isOpen?null==this._cardId?(this.labLevel.active=!1,this.imgLevelBg.active=!1):(this.labLevel.active=!0,this.imgLevelBg.active=!0,this.setString(this.labLevel,"Level "+this._cardInfo.level)):(this.labLevel.active=!1,this.imgLevelBg.active=!1)},e.prototype.initName=function(){this.isOpen&&this._cardId?(this.labName.active=!0,this.setString(this.labName,this._cardVO.name),this.labName.color=cc.color(this._cardVO.color[0],this._cardVO.color[1],this._cardVO.color[2])):this.labName.active=!1},e.prototype.initBar=function(){if(this.isOpen)if(null==this._cardId)this.nodeBar.active=!1,this.labBar.active=!1;else if(this.nodeBar.active=!0,this.labBar.active=!0,l.default.cardMgr.isCardMaxLevel(this._cardId))this.barProgress.getComponent(cc.ProgressBar).progress=1,this.setString(this.labBar,"MAX"),this.barImgUp.active=!1;else{var t=l.default.cardMgr.getCardNextLevelVO(this._cardId),e=l.default.bagMgr.getItemNum(this._cardId);this.barProgress.getComponent(cc.ProgressBar).progress=e/t.needCardNum,this.setString(this.labBar,e+"/"+t.needCardNum),e>=t.needCardNum?this.barImgUp.active=!0:this.barImgUp.active=!1}else this.nodeBar.active=!1,this.labBar.active=!1},e.prototype.initBtnUpgrade=function(){var t=this;if(this.showBtnUpgrade(!1),this.isOpen){if(null==this._cardId)return;if(l.default.cardMgr.isCardMaxLevel(this._cardId))return;var e=l.default.cardMgr.getCardNextLevelVO(this._cardId);l.default.bagMgr.getItemNum(this._cardId)>=e.needCardNum&&(l.default.cardMgr.isCardEnoughtGoldToUpgrade(this._cardId)?this.labUpgradePrice.color=cc.color(255,255,255):this.labUpgradePrice.color=cc.color(255,0,0),this.setString(this.labUpgradePrice,""+l.default.cardMgr.getUpgradeGoldNumber(this._cardId)))}l.default.onClickWithoutSound(this.btnUpgrade,function(){l.default.cardMgr.upgradeCard(t._cardId)})},e.prototype.initUpgradeSpine=function(){var t=this.getC("cardUpgradeSpine");null!=this._cardId&&l.default.cardMgr.isCardEnoughtCardToUpgrade(this._cardId)&&l.default.cardMgr.isCardEnoughtGoldToUpgrade(this._cardId)?(t.active=!0,t.getComponent(sp.Skeleton).addAnimation(0,"play_loop",!0)):t.active=!1},e.prototype.showUpgradeSpine=function(){var t=this,e=this.getC("cardUpgradeSpine");if(null!=this._cardId){e.active=!0;var i=e.getComponent(sp.Skeleton);i.setAnimation(0,"play_start",!1),i.setCompleteListener(function(e){"play_start"==e.animation.name&&t.initUpgradeSpine()})}else e.active=!1},e.prototype.initBtnRemove=function(){var t=this;l.default.onClickWithoutSound(this.btnRemove,function(){l.default.audioMgr.playSoundByResId(106),l.default.cardMgr.removeSlotCard(t._slotId)}),this.showBtnRemove(!1)},e.prototype.initBtnInfo=function(){l.default.onClick(this.btnInfo,function(){}),this.showBtnInfo(!1)},e.prototype.initBtnVisible=function(){},e.prototype.showBtnInfo=function(t){this.btnInfo.active=t,this.labInfo.active=t},e.prototype.showBtnUpgrade=function(t){this.btnUpgrade.active=t,this.labUpgradePrice.active=t,this.labUpgrade1.active=t},e.prototype.showBtnRemove=function(t){this.btnRemove.active=t,this.labRemove.active=t},e.prototype.showSlotClick=function(t){t?(this.sprBgGray.active=!0,this.showBtnRemove(!0),l.default.cardMgr.isCardMaxLevel(this._cardId)?this.showBtnInfo(!0):l.default.cardMgr.isCardEnoughtCardToUpgrade(this._cardId)?this.showBtnUpgrade(!0):this.showBtnInfo(!0),l.default.event.emit(y.default.CARD_CLICK_CARD,this._cardId)):(this.sprBgGray.active=!1,this.showBtnRemove(!1),this.showBtnUpgrade(!1),this.showBtnInfo(!1))},e.prototype.handlerAddSlotCard=function(){},e.prototype.handlerCardShineOnce=function(t){this._cardId==t&&this.showUpgradeSpine()},e.prototype.handlerClickCard=function(t){this._cardId!=t&&this.showSlotClick(!1)},e.prototype.handlerClickBg=function(){this.showSlotClick(!1)},e.prototype.handlerCardUpgrade=function(t){this._cardId==t&&(this.refresh(),this.showUpgradeSpine())},e.prototype.handlerItemChange=function(){this.refresh()},e.prototype.handlerCardHasUpgrade=function(t){var e=this.getC("nodeRedPoint2");-1==t.indexOf(this._cardId)?h.default.ShowRedPoint(e,!1,{scale:.5}):h.default.ShowRedPoint(e,!0,{scale:.5})},e.prototype.handlerCardHasNewCard=function(t){var e=this.getC("nodeRedPoint1"),i=!0;-1==t.indexOf(this._cardId)&&(i=!1),h.default.ShowRedPoint(e,i,{scale:.5})},s([v],e)}(c.default));r.default=_,cc._RF.pop()},{}],ComCardSlot:[function(t,e,i){"use strict";cc._RF.push(e,"e0961HO+fRI7qssuCKm22gX","ComCardSlot");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ArrayUtils"),p=o("CCEvent"),d=o("ComCard"),h=cc._decorator,f=h.ccclass,g=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.card=null,e.maxZIndex=1,e.cardPosList=[],e.cardList=[],e.clickCallback=null,e}return a(e,t),e.prototype.initialize=function(t){this.clickCallback=t},e.prototype.start=function(){t.prototype.start.call(this),this.addEventListener(),this.initUI(),this.initCard()},e.prototype.addEventListener=function(){this.eventOn(p.default.CARD_REMOVE_SLOT_CARD,this.handlerRemoveSlotCard,this),this.eventOn(p.default.CARD_ADD_SLOT_CARD,this.handlerAddSlotCard,this)},e.prototype.initUI=function(){this.nodeSlot=this.getC("nodeSlot");for(var t=0;t<this.nodeSlot.childrenCount;t++){var e=this.nodeSlot.children[t];this.cardPosList.push({cardPos:e,slotId:t+1})}},e.prototype.initCard=function(){for(var t=l.default.cardMgr.getSlotListClone(),e=1;e<t.length;e++){var i=e,n=t[e];n&&this.initSlotCard(i,n)}},e.prototype.initSlotCard=function(t,e){var i=this,n=this.getPosNode(t);n.removeAllChildren();var o=cc.instantiate(this.card),r=o.getComponent("ComCard1");r.initialize(e,d.CardBgTypeEnum.Slot,function(){n.zIndex=i.maxZIndex++,i.resetAllCard(),i.clickCallback&&i.clickCallback()},function(){l.default.cardMgr.removeSlotCard(t)}),this.cardList.push({slotId:t,node:o,com:r,cardPos:n}),n.addChild(o)},e.prototype.getPosNode=function(t){for(var e=0;e<this.cardPosList.length;e++){var i=this.cardPosList[e];if(i.slotId==t)return i.cardPos}return null},e.prototype.resetAllCard=function(){for(var t=0;t<this.cardList.length;t++)this.cardList[t].com.reset()},e.prototype.handlerRemoveSlotCard=function(t){for(var e=0;e<this.cardList.length;e++){var i=this.cardList[e];if(i.slotId==t)return i.node.destroy(),void u.default.remove(this.cardList,e)}},e.prototype.handlerAddSlotCard=function(t){this.initSlotCard(t.slotId,t.cardId)},s([g(cc.Prefab)],e.prototype,"card",void 0),s([f],e)}(c.default);r.default=y,cc._RF.pop()},{}],ComCard:[function(t,e,i){"use strict";cc._RF.push(e,"e7c20CdEHRHhb/acCAtzvUo","ComCard");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.CardBgTypeEnum=void 0;var l,c=o("App"),u=o("BaseComponent"),p=o("BagConst"),d=o("LoggerUtils"),h=o("RedPointUtils"),f=o("TipsUtils"),g=o("CCEvent");(function(t){t[t.Slot=1]="Slot",t[t.Bag=2]="Bag"})(l=r.CardBgTypeEnum||(r.CardBgTypeEnum={}));var y=cc._decorator,m=y.ccclass,v=y.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CardIcon=null,e.LevelLabBg=[],e.cardId=null,e.clickCallback=null,e.removeCallback=null,e.isClick=!1,e.bgType=null,e}return a(e,t),e.prototype.initialize=function(t,e,i,n){this.cardId=t,this.clickCallback=i,this.bgType=e,this.removeCallback=n},e.prototype.start=function(){t.prototype.start.call(this),this.initUI(),this.initIcon(),this.initBar(),this.initLevel(),this.initInfo(),this.initName(),this.addEventListener()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.initName=function(){var t=c.default.cardMgr.getCardInfo(this.cardId),e=c.default.cardMgr.getCardLevelVO(this.cardId,t.level);this.labName.getComponent(cc.Label).string=e.name},e.prototype.addEventListener=function(){this.eventOn(g.default.BAG_ITEM_CHANGE,this.handlerItemChange,this),this.eventOn(g.default.CARD_VIEW_CLICK_BG,this.handlerClickBg,this),this.eventOn(g.default.CARD_UPGRADE,this.handlerCardUpgrade,this),this.eventOn(g.default.CARD_NEW_CHANGE,this.handlerCardNewChange,this),this.eventOnRedPoint({eventName:g.CCEventRedPoint.CardHasUpgrade,handler:this.handlerCardHasUpgrade,target:this}),this.eventOnRedPoint({eventName:g.CCEventRedPoint.CardHasNewCard,handler:this.handlerCardHasNewCard,target:this})},e.prototype.initUI=function(){var t=this;this.nodeIconPos=this.getC("nodeIconPos"),this.nodeBar=this.getC("nodeBar"),this.sprProgress=this.getC("sprProgress"),this.sprProgressBg=this.getC("sprProgressBg"),this.nodeRedPointNew=this.seekC(this.nodeBar,"nodeRedPointNew"),this.nodeRedPointUpgrade=this.seekC(this.nodeBar,"nodeRedPointUpgrade"),this.sprUp=this.getC("sprUp"),this.labProgress=this.getC("labProgress"),this.labLevel=this.getC("labLevel"),this.btnRoot=this.getC("btnRoot"),this.sprBg1=this.getC("sprBg1"),this.sprBg2=this.getC("sprBg2"),this.btnUpgrade=this.getC("btnUpgrade"),this.labNumber=this.seekC(this.btnUpgrade,"labNumber"),this.labNumberRed=this.seekC(this.btnUpgrade,"labNumberRed"),this.btnRemove=this.getC("btnRemove"),this.btnUse=this.getC("btnUse"),this.btnInfo=this.getC("btnInfo"),this.sprLevel=this.getC("sprLevel"),this.labName=this.getC("labName"),this.imgInfo=this.getC("imgInfoBg"),c.default.onClick(this.btnRoot,function(){t.clickCallback&&t.clickCallback(),c.default.cardMgr.touchCard(t.cardId),t.showClick()}),c.default.onClick(this.btnUpgrade,function(){t.isCardEnoughtGoldToUpgrade()?c.default.cardMgr.upgradeCard(t.cardId):d.default.error("[ComCard] \u91d1\u5e01\u4e0d\u8db3")}),c.default.onClick(this.btnUse,function(){c.default.cardMgr.isSlotFull()?f.default.showTips("Slot is full~"):c.default.cardMgr.insertSlotCard(t.cardId)}),c.default.onClick(this.btnRemove,function(){t.removeCallback&&t.removeCallback()}),c.default.onClick(this.btnInfo,function(){}),this.reset()},e.prototype.initIcon=function(){var t=cc.instantiate(this.CardIcon);t.getComponent("ComCardIcon").initialize(this.cardId),this.nodeIconPos.addChild(t)},e.prototype.initBar=function(){var t=c.default.cardMgr.getCardInfo(this.cardId).level+1,e=c.default.cardMgr.getCardLevelVO(this.cardId,t);if(e){var i=c.default.bagMgr.getItemNum(this.cardId);this.labProgress.getComponent(cc.Label).string=i+"/"+e.needCardNum;var n=i/e.needCardNum;n>1&&(n=1),this.sprProgress.width=this.sprProgressBg.width*n,i>=e.needCardNum?this.sprUp.active=!0:this.sprUp.active=!1}else this.sprUp.active=!1,this.sprProgress.active=!1,this.labProgress.active=!1},e.prototype.initLevel=function(){var t=c.default.cardMgr.getCardInfo(this.cardId);this.labLevel.getComponent(cc.Label).string="Lv."+t.level,c.default.cardMgr.getCardLevelVO(t.cardId,t.level).icon&&(this.sprLevel.getComponent(cc.Sprite).spriteFrame=this.LevelLabBg[t.level-1])},e.prototype.initInfo=function(){var t=this.seekC(this.imgInfo,"labNum"),e=this.seekC(this.imgInfo,"layout");e.destroyAllChildren();var i,n=c.default.cardMgr.getCardInfo(this.cardId),o=c.default.cardMgr.getCardLevelVO(n.cardId,n.level);if(o.attack){(i=cc.instantiate(t)).active=!0,i.parent=e,i.color=cc.color(255,219,75);var r="Damage +"+o.attack;i.getComponent(cc.Label).string=r}o.hpmax&&((i=cc.instantiate(t)).active=!0,i.parent=e,i.color=cc.color(85,242,68),r="HP +"+o.hpmax,i.getComponent(cc.Label).string=r),o.dodge&&((i=cc.instantiate(t)).active=!0,i.parent=e,i.color=cc.color(52,190,235),r="Dodge +"+o.dodge/100+"%",i.getComponent(cc.Label).string=r),o.crit&&((i=cc.instantiate(t)).active=!0,i.parent=e,i.color=cc.color(255,72,81),r="Crit +"+o.crit/100+"%",i.getComponent(cc.Label).string=r)},e.prototype.reset=function(){this.sprBg1.active=!1,this.sprBg2.active=!1,this.btnUpgrade.active=!1,this.btnRemove.active=!1,this.btnUse.active=!1,this.btnInfo.active=!1,this.showBar(!0),this.isClick=!1},e.prototype.showClick=function(){this.isClick=!0,this.showBg(),this.showFirstBtn(),this.showSecondBtn(!0),this.showBar(!1)},e.prototype.showFirstBtn=function(){if(this.isClick)if(c.default.cardMgr.isCardMaxLevel(this.cardId))this.btnUpgrade.active=!1,this.btnInfo.active=!0;else if(this.isCardEnoughtCardToUpgrade()){this.btnInfo.active=!1,this.btnUpgrade.active=!0,this.isCardEnoughtGoldToUpgrade()?(this.labNumber.active=!0,this.labNumberRed.active=!1,this.labNumber):(this.labNumber.active=!1,this.labNumberRed.active=!0);var t=this.getUpgradeGoldNumber();this.labNumber.getComponent(cc.Label).string=""+t,this.labNumberRed.getComponent(cc.Label).string=""+t}else this.btnUpgrade.active=!1,this.btnInfo.active=!0},e.prototype.showSecondBtn=function(t){this.isClick&&(this.bgType==l.Bag?this.btnUse.active=t:this.btnRemove.active=t)},e.prototype.showBg=function(){this.isClick&&(this.bgType==l.Bag?this.sprBg2.active=!0:this.bgType==l.Slot&&(this.sprBg1.active=!0))},e.prototype.showBar=function(t){this.nodeBar.active=t},e.prototype.getUpgradeReourceList=function(){var t=c.default.cardMgr.getCardInfo(this.cardId);return c.default.cardMgr.getCardLevelVO(this.cardId,t.level+1).cost},e.prototype.getUpgradeGoldNumber=function(){for(var t=this.getUpgradeReourceList(),e=0;e<t.length;e++){var i=t[e];if(i[0]==p.ItemIdEnum.Gold)return i[1]}return d.default.error("ComCard \u7b56\u5212\u6ca1\u6709\u914d\u7f6e\u91d1\u5e01\u4f7f\u7528\u6570\u91cf"),9999999},e.prototype.isCardEnoughtGoldToUpgrade=function(){var t=this.getUpgradeGoldNumber();return c.default.bagMgr.getItemNum(p.ItemIdEnum.Gold)>=t},e.prototype.isCardEnoughtCardToUpgrade=function(){return c.default.cardMgr.isCardEnoughtCardToUpgrade(this.cardId)},e.prototype.handlerItemChange=function(){this.initBar(),this.initLevel()},e.prototype.handlerClickBg=function(){this.reset()},e.prototype.handlerCardUpgrade=function(t){t==this.cardId&&(this.initLevel(),this.initBar(),this.showFirstBtn(),this.initInfo())},e.prototype.handlerCardNewChange=function(){this.cardId},e.prototype.handlerCardHasUpgrade=function(t){-1==t.indexOf(this.cardId)?h.default.ShowRedPoint(this.nodeRedPointUpgrade,!1,{scale:.5}):h.default.ShowRedPoint(this.nodeRedPointUpgrade,!0,{scale:.5})},e.prototype.handlerCardHasNewCard=function(t){var e=!0;-1==t.indexOf(this.cardId)&&(e=!1),h.default.ShowRedPoint(this.nodeRedPointNew,e,{scale:.5})},s([v(cc.Prefab)],e.prototype,"CardIcon",void 0),s([v(cc.SpriteFrame)],e.prototype,"LevelLabBg",void 0),s([m],e)}(u.default);r.default=_,cc._RF.pop()},{}],ComChapter:[function(t,e,i){"use strict";cc._RF.push(e,"4e522MMShpKQ4SbBehCrJky","ComChapter");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("CombatConst"),p=o("LoggerUtils"),d=o("CCEvent"),h=o("ENUMS"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chapterVO=null,e.nodeStarList=null,e.labLevel=null,e.sprTongGuan=null,e.labName=null,e.labChapter=null,e.sprMap=null,e.rootNode=null,e.btnNode=null,e.labUnlock=null,e.nodeBlackStarList=null,e.labJinDu=null,e}return a(e,t),e.prototype.initialize=function(t){this.chapterVO=t},e.prototype.start=function(){this.initUI(),this.initBtn(),this.initChapter(),this.initMap()},e.prototype.initUI=function(){this.sprMap=this.getC("sprMap"),this.nodeStarList=this.getC("nodeStarList"),this.labChapter=this.getC("labChapter"),this.labName=this.getC("labName"),this.labChapter=this.getC("labChapter"),this.sprMap=this.getC("sprMap"),this.rootNode=this.getC("root"),this.btnNode=this.getC("btnNode"),this.labUnlock=this.getC("labUnlock"),this.labJinDu=this.getC("labJinDu"),this.nodeBlackStarList=this.getC("nodeBlackStarList"),this.nodeStarList=this.getC("nodeStarList"),this.sprTongGuan=this.getC("sprTongGuan")},e.prototype.initBtn=function(){var t=this;l.default.onClick(this.btnNode,function(){var e=l.default.levelServer.getMaxChapter();t.chapterVO.id>e?p.default.error("ComChapter >>>>>>>> \u5173\u5361\u672a\u5f00\u653e,%s,%s",t.chapterVO.id,e):(t.emit(d.default.CLICK_CHAPTER),l.default.levelServer.enterChapter(t.chapterVO.id),l.default.sceneMgr.loadScene(h.SCENE.BATTLE))})},e.prototype.initChapter=function(){this.labChapter.getComponent(cc.Label).string=String(this.chapterVO.id)},e.prototype.initMap=function(){if(this.chapterVO.isOpen==u.StdBool.False)this.sprMap.getComponent(cc.Sprite).spriteFrame=this.mapSpriteFrameList[0],this.showNextLevelOpen(),this.labName.getComponent(cc.Label).string="?????";else{var t=l.default.levelServer.getMaxChapter();t>=this.chapterVO.id?this.mapSpriteFrameList[this.chapterVO.id]?(this.sprMap.getComponent(cc.Sprite).spriteFrame=this.mapSpriteFrameList[this.chapterVO.id],this.labUnlock.active=!1,t==this.chapterVO.id&&(this.sprTongGuan.active=!1),this.initProgress(),this.initChapterName()):(p.default.error("ComChapter \u7ae0\u8282\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u8d44\u6e90,\u9ed8\u8ba4\u95ee\u53f7"),this.sprMap.getComponent(cc.Sprite).spriteFrame=this.mapSpriteFrameList[0]):(this.sprMap.getComponent(cc.Sprite).spriteFrame=this.mapSpriteFrameList[0],this.labName.getComponent(cc.Label).string="?????",this.showNextLevelOpen())}},e.prototype.initChapterName=function(){this.labName.getComponent(cc.Label).string=this.chapterVO.name},e.prototype.initProgress=function(){var t,e=this.chapterVO.id,i=l.default.levelServer.getChapterPrecent(e);t=i>=1?0:i>=.8?1:i>=.6?2:i>=.4?3:i>=.2?4:5;for(var n=0;n<t;n++)this.nodeStarList.children[n].destroy();this.sprTongGuan.active=1==i},e.prototype.showNextLevelOpen=function(){if(this.nodeBlackStarList.active=!1,this.nodeStarList.active=!1,this.sprTongGuan.active=!1,this.labJinDu.active=!1,this.chapterVO.id>10)this.labUnlock.getComponent(cc.RichText).string="<outline color=black width=2>Coming soon!";else{var t="<outline color=black width=2>Unlock on Chapter "+this.getChineseNumber(this.chapterVO.id-1)+",";switch(this.chapterVO.id){case 2:t+="<color=#ffdb4b>[Air raid support] Chip reward</color>";break;case 3:t+="<color=#ffdb4b>[Bullet]Chip reward</color>";break;case 5:t+="<color=#ffdb4b>[Drone]Chip reward</color>";break;case 7:t+="<color=#ffdb4b>[Holy light protector]Chip reward</color>";break;case 9:t+="<color=#ffdb4b>Top-level Chips reward</color>"}this.labUnlock.getComponent(cc.RichText).string=t}},e.prototype.getChineseNumber=function(t){return["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"][t]},e.prototype.update=function(){},s([y([cc.SpriteFrame])],e.prototype,"mapSpriteFrameList",void 0),s([g],e)}(c.default);r.default=m,cc._RF.pop()},{}],ComCircleRocker:[function(t,e,i){"use strict";cc._RF.push(e,"8b904Z/J8pMOL833Xs7DAi7","ComCircleRocker");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CCEvent"),c=o("App"),u=o("LevelServer"),p=o("ActionUtils"),d=o("NodeUtils"),h=o("BaseComponent"),f=o("ComSpine"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCanJump=!0,e.isJump=!1,e.jumpCheckTime=5e3,e.isFall=!1,e.fallCheckTime=.1,e.limitLength=50,e.sensitiveLength=30,e.clickFingerPrefab=null,e.fingerSpine=null,e.fingerCtrl=null,e}return a(e,t),e.prototype.onLoad=function(){var t=this;this.node.setPosition(cc.v2(-210,-465)),this.originPos=d.default.getWorldPos(this.node),this.rocker=this.getC("Rocker1"),this.rocker.active=!0,this.point=this.getC("Point"),this.node.on(cc.Node.EventType.TOUCH_START,function(e){if(null==t._touchId){t._scene.resetStayCount(),t._touchId=e.getID();var i=e.getLocation();t.lastPos=cc.v2(i.x,i.y),c.default.event.emit(l.default.GUIDE_CLICK_ROCKER_MOVE),u.default.getInstance().lockSaveInfo(!0)}},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(e.getID()==t._touchId){t._scene.resetStayCount();var i=e.getLocation().sub(t.originPos);i.len()>t.limitLength&&(i=i.normalize().mul(t.limitLength)),t.point.setPosition(i),i.x>0?t.facing="right":i.x<0?t.facing="left":t.facing=null,i.y>=t.sensitiveLength-.05?t.isJump=!0:t.isJump=!1,i.y<=.05-t.sensitiveLength?t.isFall=!0:t.isFall=!1,t.lastPos=i}},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.getID()==t._touchId&&(t.facing=null,t.isCanJump=!0,t.isJump=!1,t.isFall=!1,t.jumpCount=0,t.fallCount=0,t._touchId=null,t.point.setPosition(cc.v2(0,0)),u.default.getInstance().lockSaveInfo(!1))},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.getID()==t._touchId&&(t.facing=null,t.isCanJump=!0,t.isJump=!1,t.isFall=!1,t.jumpCount=0,t.fallCount=0,t._touchId=null,t.point.setPosition(cc.v2(0,0)),u.default.getInstance().lockSaveInfo(!1))},this),this.addEventListener()},e.prototype.setScene=function(t){this._scene=t},e.prototype.getScene=function(){return this._scene},e.prototype.addEventListener=function(){this.eventOn(l.default.ROCKER_LENGTH_CHANGE,this.handlerRockerLengthChange,this),this.eventOn(l.default.HERO_DROP,this.hanlderResetJumpChance,this),this.eventOn(l.default.ROCKER_CHECKTIME_CHANGE,this.handlerChangeCheckTime,this)},e.prototype.handlerRockerLengthChange=function(t){this.sensitiveLength=t},e.prototype.hanlderResetJumpChance=function(){this.isCanJump=!0},e.prototype.handlerChangeCheckTime=function(){},e.prototype.guideMove=function(t){if(t){if(this.fingerSpine)return;this.fingerSpine=cc.instantiate(this.clickFingerPrefab),this.fingerSpine.parent=this.node,this.fingerSpine.group="ui",this.fingerCtrl=this.fingerSpine.addComponent(f.default),this.fingerCtrl.setComSke(this.fingerSpine.getComponent(sp.Skeleton)),this.fingerCtrl.play(0,"play",!0),p.default.repeat(this.fingerSpine,cc.moveBy(1,100,0),cc.moveBy(2,-200,0),cc.moveBy(1,100,0))}else this.fingerSpine&&(this.fingerSpine.destroy(),this.fingerSpine=null,this.fingerCtrl=null)},e.prototype.onTick=function(t){0!=this.node.active&&(this.getScene().getObjhero().moveHeroByRocker(this.facing,t),this.isJump?(this.jumpCount+=t,this.jumpCount>this.jumpCheckTime&&this.isCanJump&&(this.emit(l.default.HERO_JUMP),this.isCanJump=!1,this.jumpCount=0)):this.jumpCount=0,this.isFall?(this.fallCount+=t,this.fallCount>this.fallCheckTime&&(this.emit(l.default.HERO_FALL),this.fallCount=0)):this.fallCount=0)},e.prototype.isRockerFall=function(){return this.isFall},s([m(cc.Prefab)],e.prototype,"clickFingerPrefab",void 0),s([y],e)}(h.default);r.default=v,cc._RF.pop()},{}],ComCollision:[function(t,e,i){"use strict";cc._RF.push(e,"eae2dxJXQZIoZFYTZO2N+q9","ComCollision");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){},e.prototype.onCollisionEnter=function(){cc.error("\u5b50\u7c7b\u91cd\u5199")},e.prototype.onCollisionStay=function(){cc.error("\u5b50\u7c7b\u91cd\u5199")},e.prototype.onCollisionExit=function(){cc.error("\u5b50\u7c7b\u91cd\u5199")},a([l],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],ComCompoundBox:[function(t,e,i){"use strict";cc._RF.push(e,"12a70g+CnZM0LwaxhSUEL2r","ComCompoundBox");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("BagConst"),p=o("TipsUtils"),d=o("CCEvent"),h=o("ComEquipmentBox"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._equipmentId=null,e._buyPrice=null,e._goodId=null,e}return a(e,t),e.prototype.onLoad=function(){this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(d.default.BAG_ITEM_CHANGE,this.handlerBagItemChange,this)},e.prototype.handlerBagItemChange=function(t){t.itemId==u.ItemIdEnum.MythFragments&&(this.initNum(),this.initBtnCompound())},e.prototype.initialize=function(t,e,i){this._equipmentId=t,this._buyPrice=e,this._goodId=i,this.initNum(),this.initIconBox(),this.initBtnCompound()},e.prototype.initBtnCompound=function(){var t=this,e=l.default.bagMgr.getItemNum(u.ItemIdEnum.MythFragments),i=this.getC("btnBuy");l.default.offClick(i.getComponent(cc.Button)),e>=this._buyPrice?(i.getComponent(cc.Button).interactable=!0,l.default.onClick(i,function(){l.default.equipmentMgr.isEquipmentFull()?p.default.showTips("Equip is full, unable to purchase!"):l.default.shopMgr.buyGood(t._goodId)})):i.getComponent(cc.Button).interactable=!1},e.prototype.initNum=function(){var t=this.getC("labNum"),e=this.getC("labBuyNum"),i=l.default.bagMgr.getItemNum(u.ItemIdEnum.MythFragments);i>=this._buyPrice?t.color=cc.color(79,227,63):t.color=cc.color(255,72,81),t.getComponent(cc.Label).string=""+i,e.getComponent(cc.Label).string="/"+this._buyPrice},e.prototype.initIconBox=function(){var t=this.getC("ComEquipmentBox").getComponent(h.default),e={equipmentVO:{uid:null,equipmentId:this._equipmentId,strengthen:null,star:0,attrList:null,strengthenFailTimes:0},isShowBg:!0,isActive:!0};t.initialize(e)},e.prototype.start=function(){},s([g],e)}(c.default));r.default=y,cc._RF.pop()},{}],ComConfirmView:[function(t,e,i){"use strict";cc._RF.push(e,"e28e577Nj1NDqnDF3p4KJUI","ComConfirmView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("GuideMgr"),d=o("ActionUtils"),h=o("AdaptUtils"),f=o("CommonCfgUtils"),g=o("NodeUtils"),y=o("BaseView"),m=o("CCEvent"),v=o("UI"),_=cc._decorator,C=_.ccclass,b=(_.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastView=null,e.data=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){t.prototype.start.call(this),this.initUI(),this.initData(),this.initBtn(),this.initLab(),this.initAd(),this.viewScaleBig(.3),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.showBanner(),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playHuaweiAd=function(){"Speed-up"==this.data.title?c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height)):"Refresh"==this.data.title&&c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){"Speed-up"==this.data.title?c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height)):"Refresh"==this.data.title&&c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){"Speed-up"==this.data.title?c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_ShopFast,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height)):"Refresh"==this.data.title&&c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_ShopRefresh,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.checkGuide8=function(){var t=this;c.default.guideMgr.isFinishGuide(p.GuideLineEnum.GuidePlayerEnterShop)&&(c.default.guideMgr.isFinishGuide(p.GuideLineEnum.GuideShopAccelerateConfirm)?c.default.guideMgr.isFinishGuide(p.GuideLineEnum.GuideShopRefreshConfirm)||d.default.sequence(this.node,.5,function(){var e=t.getC("btnSure"),i=g.default.getWorldPos(e),n=e.getContentSize();n.height*=1.2,n.width*=1.2;var o=f.default.get(u.CommonCfgEnum.GUIDE_WOMEN_NAME).string,r=f.default.get(u.CommonCfgEnum.GUIDE_SHOP_REFRESHCONFIRM).string;c.default.viewMgr.showUI(v.UI.GUIDE_VIEW,p.GuideLineEnum.GuideShopRefreshConfirm,n,i,o,r,!1,-350)}):d.default.sequence(this.node,.5,function(){var e=t.getC("btnSure"),i=g.default.getWorldPos(e),n=e.getContentSize();n.height*=1.2,n.width*=1.2;var o=f.default.get(u.CommonCfgEnum.GUIDE_WOMEN_NAME).string,r=f.default.get(u.CommonCfgEnum.GUIDE_SHOP_ACCELERATECONFIRM).string;c.default.viewMgr.showUI(v.UI.GUIDE_VIEW,p.GuideLineEnum.GuideShopAccelerateConfirm,n,i,o,r,!1,-350)}))},e.prototype.initData=function(){this.lastView=this.getArgs()[0],this.data=this.getArgs()[1]},e.prototype.initUI=function(){this.btnSure=this.getC("btnSure"),this.btnCancel=this.getC("btnCancel"),this.labTitle=this.getC("labTitle"),this.labContent=this.getC("labContent"),this.labTips=this.getC("labTips")},e.prototype.initBtn=function(){var t=this;c.default.onClick(this.btnSure,function(){t.data.sureCallback&&t.data.sureCallback(),t.closeSelf(!1)}),c.default.onClick(this.btnCancel,function(){t.data.cancelCallBack&&t.data.cancelCallBack(),t.closeSelf(!1)})},e.prototype.initLab=function(){var t=this.data.title,e=this.data.tips,i=this.data.content;this.labTitle.getComponent(cc.Label).string=t,this.labContent.getComponent(cc.RichText).string=i,this.labTips.getComponent(cc.Label).string=e},e.prototype.initAd=function(){var t=this.data.isNeedAd,e=this.seekC(this.btnSure,"imgAd"),i=this.seekC(this.btnSure,"labSure");t?(e.active=!0,i.active=!0,i.x=35):(e.active=!1,i.active=!0,i.x=0)},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");h.default.adaptSize2Winsize(t)},e.prototype.onDestroy=function(){cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(m.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(m.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&(c.default.event.emit(m.default.HUAWEI_CLOSE_NATIVE),c.default.adMgr.showBanner()),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.hideBanner(),t.prototype.onDestroy.call(this)},s([C],e)}(y.default));r.default=b,cc._RF.pop()},{}],ComDamageNumber:[function(t,e,i){"use strict";cc._RF.push(e,"89a7cu1vp1EEq3FxlWCr0fy","ComDamageNumber");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("Utils"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._label=null,e._damage="0",e._color=null,e._deleteTimes=4,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this._label=this.getC("label"),this._label.getComponent(cc.Label).string=""+this._damage;var t=this.getC("node1").getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,this.finished,this);var e=t.getClips(),i=this.getC("label");this._color&&(i.color=this._color);var n=c.default.rand(0,e.length-1);t.play(e[n].name)},e.prototype.initialize=function(t,e){void 0===e&&(e=null),this._damage=t,e&&(this._color=e)},e.prototype.finished=function(){this.node.destroy()},e.prototype.update=function(t){this._deleteTimes-=t,this._deleteTimes<0&&this.finished()},s([p],e)}(l.default));r.default=d,cc._RF.pop()},{}],ComDamgeWudi:[function(t,e,i){"use strict";cc._RF.push(e,"63a12k9a3tAxaTTqwxi6kGF","ComDamgeWudi");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("Utils"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this.getC("node1").getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,this.finished,this);var e=t.getClips(),i=c.default.rand(0,e.length-1);t.play(e[i].name)},e.prototype.finished=function(){this.node.destroy()},s([p],e)}(l.default));r.default=d,cc._RF.pop()},{}],ComDropIconP:[function(t,e,i){"use strict";cc._RF.push(e,"90124GkgxBHjbWLTxsKEeBE","ComDropIconP");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=cc._decorator,u=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isInit=!1,e.itemId=null,e}return a(e,t),e.prototype.initialize=function(t){this.itemId=t},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this.initUI()},e.prototype.initUI=function(){null!=this.itemId&&(this.sprIcon=this.getC("sprIcon"))},s([u],e)}(l.default));r.default=p,cc._RF.pop()},{}],ComEquipmentBoxSelect:[function(t,e,i){"use strict";cc._RF.push(e,"0afb79EdlZLmZS4dvLkAGcW","ComEquipmentBoxSelect");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("GuideMgr"),p=o("ColorUtils"),d=o("Tbl"),h=o("CCEvent"),f=o("UI"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconBgList=[],e.imgIconBg=null,e.imgIcon=null,e.labLevel=null,e.labName=null,e.rankList=[],e.rankBgList=[],e._uid=null,e.iconPath=null,e.itemId=null,e.itemQuality=null,e.itemLevel=null,e.itemName=null,e.itemRank=null,e.isShowBg=null,e.isActive=!0,e.isShowName=!0,e.isShowStar=!0,e}return a(e,t),e.prototype.onLoad=function(){this.initUI(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(h.default.EQUIPMENT_GET,this.handlerEquipmentGet,this),this.eventOn(h.default.EQUIPMENT_SLOT_CHANGE,this.handlerSlotChange,this),this.eventOn(h.default.EQUIPMENT_SELL_EQUIP_INCOME,this.handlerSellEquipments,this),this.eventOn(h.default.EQUIPMENT_EQUIP_STRENTHEN_SUC,this.handlerStrenthenSucc,this),this.eventOn(h.default.EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS,this.handlerEquipmentAwake,this),this.eventOn(h.default.EQUIPMENT_THROW,this.handlerEquipmentThrow,this)},e.prototype.handlerEquipmentThrow=function(t){t==this._uid&&this.node.destroy()},e.prototype.handlerEquipmentAwake=function(t){t==this._uid&&this.refreshRank()},e.prototype.handlerStrenthenSucc=function(t){t==this._uid&&this.refreshLevel()},e.prototype.handlerSellEquipments=function(t,e){null!=this._uid&&-1!=e.indexOf(this._uid)&&this.node.destroy()},e.prototype.handlerSlotChange=function(t,e){null!=this._uid&&0!=t&&e==this._uid&&this.node.destroy()},e.prototype.handlerEquipmentGet=function(t){null==this._uid&&t.equipmentId==this.itemId&&0==this.isActive&&this.node.destroy()},e.prototype.initialize=function(t){var e=this,i=t.equipmentVO;i.uid&&(this._uid=i.uid),this.itemId=i.equipmentId,this.itemLevel=i.strengthen,this.itemRank=i.star;var n=d.default.EquipmentTable.findById(this.itemId);this.itemQuality=n.quality,this.itemName=n.name;var o=d.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==e.itemId&&t.rank==e.itemRank});this.iconPath=o.icon,this.isShowBg=t.isShowBg,this.isActive=t.isActive,null!=t.isShowName&&(this.isShowName=t.isShowName),null!=t.isShowStar&&(this.isShowStar=t.isShowStar),this.refreshAll()},e.prototype.refreshAll=function(){this.checkIsShowBg(),this.checkIsActive(),this.initBox(),this.initBtn(),this.checkName(),this.checkStar()},e.prototype.initBtn=function(){var t=this;null==this._uid?l.default.onClick(this.node,function(){l.default.viewMgr.showUI(f.UI.EQUIPMENT_DETAILS_VIEW,null,t.itemId)}):l.default.onClick(this.node,function(){l.default.equipmentMgr.touchEquipment(t._uid),l.default.viewMgr.showUI(f.UI.EQUIPMENT_DETAILS_VIEW,t._uid),l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuideClickEquipment)||t.emit(h.default.GUIDE_EQUIPMENT_CLICK)})},e.prototype.checkIsActive=function(){if(null!=this.isActive){var t=this.getC("topMask");this.isActive?t.active=!1:t.active=!0}},e.prototype.checkName=function(){this.labName.active=this.isShowName},e.prototype.checkStar=function(){this.isShowStar||(this.getC("nodeStar").active=!1)},e.prototype.initBox=function(){null==this.labName&&this.initUI(),this.labName.getComponent(cc.Label).string=this.itemName,this.labName.color=p.default.EquipmentQualityColorList[this.itemQuality],this.imgIcon.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame("icon2/"+this.iconPath),this.imgIconBg.getComponent(cc.Sprite).spriteFrame=this.iconBgList[this.itemQuality],this.initLevel(),this.initRank(),this.initRankBg()},e.prototype.initRankBg=function(){var t=this,e=0;d.default.EquipmentStarLevelTable.findAll(function(i){return i.id==t.itemId&&i.rank>e&&(e=i.rank),!1});for(var i=0;i<e;i++)this.rankBgList[i].active=!0},e.prototype.initRank=function(){for(var t=0;t<this.itemRank;t++)this.rankList[t].active=!0},e.prototype.refreshRank=function(){if(null!=this._uid){this.itemRank=l.default.equipmentMgr.getEquipment(this._uid).star;for(var t=0;t<this.itemRank;t++)this.rankList[t].active=!0}},e.prototype.initLevel=function(){null==this.itemLevel?this.labLevel.active=!1:this.labLevel.getComponent(cc.Label).string="+"+this.itemLevel},e.prototype.refreshLevel=function(){null==this.itemLevel?this.labLevel.active=!1:(this.itemLevel=l.default.equipmentMgr.getEquipment(this._uid).strengthen,this.labLevel.getComponent(cc.Label).string="+"+this.itemLevel)},e.prototype.checkIsShowBg=function(){0==this.isShowBg&&(this.node.getComponent(cc.Sprite).enabled=!1)},e.prototype.initData=function(){},e.prototype.start=function(){},e.prototype.initUI=function(){this.imgIconBg=this.getC("imgIconBg"),this.imgIcon=this.getC("imgIcon"),this.labLevel=this.getC("labLevel"),this.labName=this.getC("labName"),this.rankList=[];for(var t=1;t<=5;t++){var e=this.getC("rank"+t),i=this.getC("rank"+t+"Bg");this.rankList[this.rankList.length]=e,this.rankBgList[this.rankBgList.length]=i}},s([m(cc.SpriteFrame)],e.prototype,"iconBgList",void 0),s([y],e)}(c.default);r.default=v,cc._RF.pop()},{}],ComEquipmentBox:[function(t,e,i){"use strict";cc._RF.push(e,"e3c4fO5sINBzLCaxiS5ESV0","ComEquipmentBox");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("GuideMgr"),p=o("ColorUtils"),d=o("Tbl"),h=o("CCEvent"),f=o("UI"),g=o("RedPointUtils"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconBgList=[],e.imgIconBg=null,e.imgIcon=null,e.labLevel=null,e.labName=null,e.rankList=[],e.rankBgList=[],e._uid=null,e.iconPath=null,e.itemId=null,e.itemQuality=null,e.itemLevel=null,e.itemName=null,e.itemRank=null,e.isShowBg=null,e.isActive=!0,e.isShowName=!0,e.isShowStar=!0,e}return a(e,t),e.prototype.onLoad=function(){this.initUI(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(h.default.EQUIPMENT_GET,this.handlerEquipmentGet,this),this.eventOn(h.default.EQUIPMENT_SLOT_CHANGE,this.handlerSlotChange,this),this.eventOn(h.default.EQUIPMENT_SELL_EQUIP_INCOME,this.handlerSellEquipments,this),this.eventOn(h.default.EQUIPMENT_EQUIP_STRENTHEN_SUC,this.handlerStrenthenSucc,this),this.eventOn(h.default.EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS,this.handlerEquipmentAwake,this),this.eventOn(h.default.EQUIPMENT_THROW,this.handlerEquipmentThrow,this),this.eventOnRedPoint({eventName:h.CCEventRedPoint.NewEquipment,handler:this.handlerNewEquipment,target:this}),this.eventOnRedPoint({eventName:h.CCEventRedPoint.StrenthEquipment,handler:this.handlerCheckUpgrade,target:this}),this.eventOnRedPoint({eventName:h.CCEventRedPoint.AwakeEquipment,handler:this.handlerCheckAwake,target:this})},e.prototype.handlerCheckUpgrade=function(){if(this._uid){var t=l.default.equipmentMgr.isEquipmentCanUpgrade(this._uid),e=this.getC("redPoint2");t?g.default.ShowRedPoint(e,!0,{x:0,y:0}):g.default.ShowRedPoint(e,!1,{x:0,y:0})}},e.prototype.handlerCheckAwake=function(){if(this._uid){var t=l.default.equipmentMgr.isEquipmentCanAwake(this._uid),e=this.getC("redPoint3");t?g.default.ShowRedPoint(e,!0,{x:0,y:0}):g.default.ShowRedPoint(e,!1,{x:0,y:0})}},e.prototype.handlerNewEquipment=function(t){if(this._uid){var e=this.getC("redPoint1");-1!=t.indexOf(this._uid)?g.default.ShowRedPoint(e,!0,{x:0,y:0}):g.default.ShowRedPoint(e,!1,{x:0,y:0})}},e.prototype.handlerEquipmentThrow=function(t){t==this._uid&&this.node.destroy()},e.prototype.handlerEquipmentAwake=function(t){t==this._uid&&this.refreshRank()},e.prototype.handlerStrenthenSucc=function(t){t==this._uid&&this.refreshLevel()},e.prototype.handlerSellEquipments=function(t,e){null!=this._uid&&-1!=e.indexOf(this._uid)&&this.node.destroy()},e.prototype.handlerSlotChange=function(t,e){null!=this._uid&&0!=t&&e==this._uid&&this.node.destroy()},e.prototype.handlerEquipmentGet=function(t){null==this._uid&&t.equipmentId==this.itemId&&0==this.isActive&&this.node.destroy()},e.prototype.initialize=function(t){var e=this,i=t.equipmentVO;i.uid&&(this._uid=i.uid),this.itemId=i.equipmentId,this.itemLevel=i.strengthen,this.itemRank=i.star;var n=d.default.EquipmentTable.findById(this.itemId);this.itemQuality=n.quality,this.itemName=n.name;var o=d.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==e.itemId&&t.rank==e.itemRank});this.iconPath=o.icon,this.isShowBg=t.isShowBg,this.isActive=t.isActive,null!=t.isShowName&&(this.isShowName=t.isShowName),null!=t.isShowStar&&(this.isShowStar=t.isShowStar),this.refreshAll()},e.prototype.refreshAll=function(){this.checkIsShowBg(),this.checkIsActive(),this.initBox(),this.initBtn(),this.checkName(),this.checkStar()},e.prototype.initBtn=function(){var t=this;null==this._uid?l.default.onClick(this.node,function(){l.default.viewMgr.showUI(f.UI.EQUIPMENT_DETAILS_VIEW,null,t.itemId)}):l.default.onClick(this.node,function(){l.default.equipmentMgr.touchEquipment(t._uid),l.default.viewMgr.showUI(f.UI.EQUIPMENT_DETAILS_VIEW,t._uid),l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuideClickEquipment)||t.emit(h.default.GUIDE_EQUIPMENT_CLICK)})},e.prototype.checkIsActive=function(){if(null!=this.isActive){var t=this.getC("topMask");this.isActive?t.active=!1:t.active=!0}},e.prototype.checkName=function(){this.labName.active=this.isShowName},e.prototype.checkStar=function(){this.isShowStar||(this.getC("nodeStar").active=!1)},e.prototype.initBox=function(){null==this.labName&&this.initUI(),this.labName.getComponent(cc.Label).string=this.itemName,this.labName.color=p.default.EquipmentQualityColorList[this.itemQuality],this.imgIcon.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame("icon2/"+this.iconPath),this.imgIconBg.getComponent(cc.Sprite).spriteFrame=this.iconBgList[this.itemQuality],this.initLevel(),this.initRank(),this.initRankBg()},e.prototype.initRankBg=function(){var t=this,e=0;d.default.EquipmentStarLevelTable.findAll(function(i){return i.id==t.itemId&&i.rank>e&&(e=i.rank),!1});for(var i=0;i<e;i++)this.rankBgList[i].active=!0},e.prototype.initRank=function(){for(var t=0;t<this.itemRank;t++)this.rankList[t].active=!0},e.prototype.refreshRank=function(){if(null!=this._uid){this.itemRank=l.default.equipmentMgr.getEquipment(this._uid).star;for(var t=0;t<this.itemRank;t++)this.rankList[t].active=!0}},e.prototype.initLevel=function(){null==this.itemLevel?this.labLevel.active=!1:this.labLevel.getComponent(cc.Label).string="+"+this.itemLevel},e.prototype.refreshLevel=function(){null==this.itemLevel?this.labLevel.active=!1:(this.itemLevel=l.default.equipmentMgr.getEquipment(this._uid).strengthen,this.labLevel.getComponent(cc.Label).string="+"+this.itemLevel)},e.prototype.checkIsShowBg=function(){0==this.isShowBg&&(this.node.getComponent(cc.Sprite).enabled=!1)},e.prototype.initData=function(){},e.prototype.start=function(){},e.prototype.initUI=function(){this.imgIconBg=this.getC("imgIconBg"),this.imgIcon=this.getC("imgIcon"),this.labLevel=this.getC("labLevel"),this.labName=this.getC("labName"),this.rankList=[];for(var t=1;t<=5;t++){var e=this.getC("rank"+t),i=this.getC("rank"+t+"Bg");this.rankList[this.rankList.length]=e,this.rankBgList[this.rankBgList.length]=i}},s([v(cc.SpriteFrame)],e.prototype,"iconBgList",void 0),s([m],e)}(c.default);r.default=_,cc._RF.pop()},{}],ComFollowDog:[function(t,e,i){"use strict";cc._RF.push(e,"7d8a0WmhBhB/7kKK9WTbs3z","ComFollowDog");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjBase"),c=o("MathUtils"),u=o("NodeUtils"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFollowMove=!0,e.isFollowRotation=!0,e.offset=cc.v2(),e}return a(e,t),e.prototype.setFollowNode=function(t){this.followNode=t},e.prototype.setFollowMove=function(t){this.isFollowMove=t},e.prototype.setFollowRotation=function(t){this.isFollowRotation=t},e.prototype.setFollowOffset=function(t){this.offset=t},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.checkCanFollow()?this.isFollowRotation&&this.isFollowMove?this.followMoveAndRotation():this.isFollowRotation?this.followRotation():this.isFollowMove&&this.followMove():this.setLegal(!1)},e.prototype.checkCanFollow=function(){return null!=this.followNode&&!!cc.isValid(this.followNode)&&!!this.followNode.active},e.prototype.followMove=function(){this.setWorldPos(u.default.getWorldPos(this.followNode).addSelf(this.offset))},e.prototype.followRotation=function(){var t=u.default.getWorldRotation(this.followNode);u.default.setWorldRotation(this.node,t)},e.prototype.followMoveAndRotation=function(){var t=this.followNode.angle,e=c.default.Angle2Radian(t),i=c.default.pointRoundPoint(this.offset,cc.v2(),e),n=u.default.getWorldPos(this.followNode).add(i);this.setWorldPos(n)},s([d],e)}(l.default));r.default=h,cc._RF.pop()},{}],ComGetDiamond:[function(t,e,i){"use strict";cc._RF.push(e,"3325fJqQwNL5IbzU/o7chFq","ComGetDiamond");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("BagConst"),p=o("CommonConst"),d=o("ShopConst"),h=o("AdaptUtils"),f=o("BaseView"),g=o("Tbl"),y=o("CCEvent"),m=o("UI"),v=cc._decorator.ccclass,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.labRefresh=null,e}return a(e,t),e.prototype.onLoad=function(){this.initUI(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(y.default.SHOP_SHOW_REWARD,this.handlerShowReward,this)},e.prototype.handlerShowReward=function(t){c.default.viewMgr.showUI(m.UI.COMMONREWARD_VIEW,t)},e.prototype.initUI=function(){this.btnClose=this.getC("btnClose")},e.prototype.start=function(){t.prototype.start.call(this),this.initBtn(),this.initLabNum(),cc.sys.platform==p.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.showBanner(),cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_640_backup,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initLabNum=function(){for(var t=this.getC("labNum"),e=g.default.ShopTable.findById(d.ShopGoodEnum.LittleDiamond).goods,i=0;i<e.length;i++){var n=e[i];n[0]==u.ItemIdEnum.Diamond&&(t.getComponent(cc.Label).string="X"+n[1])}},e.prototype.initBtn=function(){this.initBtnGet(),this.initBtnClose()},e.prototype.initBtnGet=function(){var t=this,e=this.getC("btnGet");cc.tween(e).repeatForever(cc.tween(e).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),c.default.onClick(e,function(){t.setTouchable(!1);var e=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),e?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),c.default.shopMgr.buyGood(d.ShopGoodEnum.LittleDiamond),t.closeSelf()}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),cc.audioEngine.resumeMusic(),t.setTouchable(!0)}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic(),t.setTouchable(!0)),t.setTouchable(!0)})},e.prototype.initBtnClose=function(){var t=this;c.default.onClick(this.btnClose,function(){t.closeSelf()})},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");h.default.adaptSize2Winsize(t)},e.prototype.onDestroy=function(){cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(y.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(y.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(y.default.HUAWEI_CLOSE_NATIVE),cc.sys.platform==p.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.hideBanner(),t.prototype.onDestroy.call(this)},s([v],e)}(f.default);r.default=_,cc._RF.pop()},{}],ComGetGold:[function(t,e,i){"use strict";cc._RF.push(e,"dead1ftMWtAaavnu0/VOeWD","ComGetGold");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("ShopConst"),d=o("AdaptUtils"),h=o("BaseView"),f=o("Tbl"),g=o("CCEvent"),y=o("UI"),m=o("MathUtils"),v=o("TimeMgr"),_=o("LoggerUtils"),C=o("TipsUtils"),b=cc._decorator.ccclass,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.labRefresh=null,e.timeCount=0,e.multiple=1,e}return a(e,t),e.prototype.onLoad=function(){this.initUI(),this.addEventListener(),this.multiple=c.default.shopMgr.getShopGiftMultiple(p.ShopGoodEnum.HugeGold)},e.prototype.addEventListener=function(){this.eventOn(g.default.SHOP_SHOW_REWARD,this.handlerShowReward,this)},e.prototype.handlerShowReward=function(t){c.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,t)},e.prototype.initUI=function(){this.btnClose=this.getC("btnClose"),this.labRefresh=this.getC("labRefresh")},e.prototype.start=function(){t.prototype.start.call(this),this.initGoldBox(),this.initBtn(),this.initRefreshTime(),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&this.playWechatAd(),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playWechatAd=function(){c.default.adMgr.showBanner()},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_640_backup,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initRefreshTime=function(){var t=this.getC("labRefresh"),e=c.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.LittleGold).cooldownAt-c.default.getTime();e=e<0?0:e;var i=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.ceil(e%60);t.getComponent(cc.Label).string="Refresh "+i+"\uff1a"+n+"\uff1a"+o},e.prototype.initGoldBox=function(){this.initGoldBox1(),this.initGoldBox2(),this.initGoldBox3()},e.prototype.refreshGoldBox=function(){this.initGoldBox()},e.prototype.initGoldBox1=function(){var t=this.getC("imgGold1"),e=this.seekC(t,"labNum"),i=this.seekC(t,"btnGet"),n=f.default.ShopTable.findById(p.ShopGoodEnum.LittleGold).goods;e.getComponent(cc.Label).string="X"+m.default.numToBigNum(this.multiple*n[0][1]),0!=c.default.shopMgr.isCanBuy(p.ShopGoodEnum.LittleGold)?(c.default.onClick(i,function(){c.default.shopMgr.buyGood(p.ShopGoodEnum.LittleGold)}),this.updateFreeTimeCount()):i.getComponent(cc.Button).interactable=!1},e.prototype.initGoldBox2=function(){var t=this.getC("imgGold2"),e=this.seekC(t,"labNum"),i=this.seekC(t,"btnGet"),n=f.default.ShopTable.findById(p.ShopGoodEnum.MidGold),o=n.goods;e.getComponent(cc.Label).string="X"+m.default.numToBigNum(this.multiple*o[0][1]);var r=n.cost;this.seekC(i,"lab1").getComponent(cc.Label).string=""+r[0][1],c.default.onClick(i,function(){null!=n?null!=n.cost?c.default.bagMgr.isItemEnough(n.cost[0][0],n.cost[0][1])?c.default.shopMgr.buyGood(p.ShopGoodEnum.MidGold):(C.default.showTips("Insufficient diamond!"),c.default.viewMgr.showUI(y.UI.GET_DIAMOND)):_.default.error("[ComGetGold] shopVO.cost == null"):_.default.error("[ComGetGold] shopVO == null")}),this.updateMidTimeCount()},e.prototype.initGoldBox3=function(){var t=this,e=this.getC("imgGold3"),i=this.seekC(e,"labNum"),n=this.seekC(e,"btnGet"),o=f.default.ShopTable.findById(p.ShopGoodEnum.HugeGold),r=o.goods;cc.tween(n).repeatForever(cc.tween(n).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),i.getComponent(cc.Label).string="X"+m.default.numToBigNum(this.multiple*r[0][1]),o.cost,cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&0==c.default.adMgr.isHuaweiRewardReady()&&(n.active=!1),c.default.onClick(n,function(){t.setTouchable(!1);var e=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),e?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),c.default.shopMgr.buyGood(p.ShopGoodEnum.HugeGold),t.setTouchable(!0),t.refreshGoldBox()}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),cc.audioEngine.resumeMusic(),t.setTouchable(!0)}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic(),t.setTouchable(!0)),t.setTouchable(!0)})},e.prototype.initBtn=function(){this.initBtnClose()},e.prototype.initBtnClose=function(){var t=this;c.default.onClick(this.btnClose,function(){t.closeSelf()})},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");d.default.adaptSize2Winsize(t)},e.prototype.updateFreeTimeCount=function(){var t=c.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.LittleGold),e=this.getC("imgGold1"),i=this.seekC(e,"btnGet");if(t){var n=t.cooldownAt-c.default.getTime();if(n>0){var o=v.default.trans2Hms(n),r=this.seekC(i,"lab1");return this.setString(r,o.hour+":"+o.min+":"+o.sec),void(i.getComponent(cc.Button).interactable=!1)}}i.getComponent(cc.Button).interactable=!0;var a=this.seekC(i,"lab1");this.setString(a,"Free")},e.prototype.updateMidTimeCount=function(){var t=c.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.MidGold),e=this.getC("imgGold2"),i=this.seekC(e,"btnGet");if(t){var n=t.cooldownAt-c.default.getTime();if(n>0){var o=v.default.trans2Hms(n),r=this.seekC(i,"lab1");return this.setString(r,o.hour+":"+o.min+":"+o.sec),i.getComponent(cc.Button).interactable=!1,void((o=this.seekC(i,"img1")).active=!1)}}i.getComponent(cc.Button).interactable=!0;var a=this.seekC(i,"lab1");this.setString(a,"  x50"),(a=this.seekC(i,"img1")).active=!0},e.prototype.update=function(t){this.updateFreeTimeCount(),this.updateMidTimeCount(),this.timeCount>.5&&(this.initRefreshTime(),this.timeCount=0),this.timeCount+=t},e.prototype.onDestroy=function(){cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(g.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(g.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(g.default.HUAWEI_CLOSE_NATIVE),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.hideBanner(),t.prototype.onDestroy.call(this)},s([b],e)}(h.default);r.default=S,cc._RF.pop()},{}],ComGravite:[function(t,e,i){"use strict";cc._RF.push(e,"748d52Mm3BDDKiGITNzCiYy","ComGravite");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.GravityEvent=void 0;var l,c=o("CommonCfgUtils"),u=o("NodeUtils");(function(t){t[t.DropOnStep=0]="DropOnStep",t[t.DropOnGround=1]="DropOnGround",t[t.Dropping=2]="Dropping"})(l=r.GravityEvent||(r.GravityEvent={}));var p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gravity=null,e.worldBodyBox=cc.rect(),e.vector=cc.v2(0,0),e.targetWPos=cc.v2(),e.isStop=!1,e.isStopDrop=!1,e.floorHeight=null,e}return a(e,t),e.prototype.initialize=function(t,e,i,n){this.scene=t,this.vector=e,this.gravity=c.default.get("Gravity").number,this.bodyBox=i,this.floorHeight=t.getFloorHeight(),this.eventCallback=n},e.prototype.setGravity=function(t){this.gravity=t},e.prototype.getSpeed=function(){return this.vector},e.prototype.setSpeed=function(t){this.vector=t},e.prototype.setSpeedY=function(t){this.vector.y=t},e.prototype.setSpeedX=function(t){this.vector.x=t},e.prototype.stop=function(t){this.isStop=t},e.prototype.stopDrop=function(t){this.isStopDrop=t},e.prototype.updateWorldRect=function(){var t=u.default.getWorldPos(this.node);this.worldBodyBox.x=t.x+this.bodyBox.x,this.worldBodyBox.y=t.y+this.bodyBox.y,this.worldBodyBox.width=this.bodyBox.width,this.worldBodyBox.height=this.bodyBox.height},e.prototype.updateData=function(t){this.isStopDrop||(this.vector.y+=this.gravity*t,this.dropDistance=this.vector.y*t+.5*this.gravity*t*t);var e=u.default.getWorldPos(this.node);this.targetWPos=e,this.targetWPos.x+=this.vector.x*t},e.prototype.drop=function(){if(!this.isStopDrop){if(this.vector.y<=0){for(var t=0,e=this.scene.getSteps();t<e.length;t++){var i=e[t];if(this.scene.isDropOnStep(this.worldBodyBox,this.dropDistance,i))return this.targetWPos.y=u.default.getWorldPos(i).y+i.height*(1-i.anchorY),void this.eventCallback({eventType:l.DropOnStep,targetWPos:this.targetWPos})}for(var n=0,o=this.scene.getFloors();n<o.length;n++){var r=o[n];if(this.scene.isDropOnFloor(this.worldBodyBox,this.dropDistance,r))return this.targetWPos.y=u.default.getWorldPos(r).y+r.height*(1-r.anchorY),void this.eventCallback({eventType:l.DropOnGround,targetWPos:this.targetWPos})}}this.targetWPos.y+=this.dropDistance,this.targetWPos.y=this.targetWPos.y>this.floorHeight?this.targetWPos.y:this.floorHeight}this.eventCallback({eventType:l.Dropping,targetWPos:this.targetWPos})},e.prototype.onTick=function(t){this.isStop||(this.updateData(t),this.updateWorldRect(),this.drop(t))},s([d],e)}(cc.Component));r.default=h,cc._RF.pop()},{}],ComGuideSwallowNode:[function(t,e,i){"use strict";cc._RF.push(e,"e740d5qL1BE2q+bhnfdwAdK","ComGuideSwallowNode");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("NodeUtils"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._scene=null,e.isHide=null,e.mask=null,e.imgMask=null,e}return a(e,t),e.prototype.initialize=function(t,e,i,n){void 0===i&&(i=!1),this.size=t,this.wPos=e,this.isHide=i,this._scene=n},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initUI()},e.prototype.initUI=function(){this.mask=this.getC("mask"),this.imgMask=this.getC("imgMask"),this.imgMask.width=2*cc.winSize.width,this.imgMask.height=2*cc.winSize.height},e.prototype.start=function(){var e=this;if(t.prototype.start.call(this),this.isHide)this.mask.active=!1;else{this._scene.setTouchable(!1);var i=c.default.getWorldPos(this.mask),n=this.wPos.sub(i);cc.tween(this.mask).by(1,{height:this.size.height-this.mask.height,width:this.size.width-this.mask.width,x:n.x,y:n.y},{easing:"sineOut"}).call(function(){e._scene.setTouchable(!0)}).start()}},e.prototype.update=function(){},s([p],e)}(l.default));r.default=d,cc._RF.pop()},{}],ComIconInSign:[function(t,e,i){"use strict";cc._RF.push(e,"176f2gcQl9CMJDpp41Re2qA","ComIconInSign");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ItemUtils"),p=o("MathUtils"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._itemId=null,e._itemNum=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.initialize=function(t,e){this._itemId=t,this._itemNum=e},e.prototype.start=function(){var t=this.getC("imgIcon"),e=this.getC("labNum");t.getComponent(cc.Sprite).spriteFrame=u.default.getItemIconSpriteFrame(this._itemId),e.getComponent(cc.Label).string=""+p.default.numToBigNum(this._itemNum);var i=t.width>t.height?t.width:t.height;i>40&&(t.scale=40/i),this.node.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame(u.default.getItemReportBgPath(this._itemId))},s([h],e)}(c.default));r.default=f,cc._RF.pop()},{}],ComIconWithName:[function(t,e,i){"use strict";cc._RF.push(e,"fee73miHypHR4uSWtgyNH2E","ComIconWithName");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ItemUtils"),p=o("MathUtils"),d=o("Tbl"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this.initUI()},e.prototype.initUI=function(){this.icon=this.getC("Icon"),this.labNum=this.getC("labNum"),this.labDesc=this.getC("labDesc"),this.iconBg=this.getC("iconBg")},e.prototype.start=function(){},e.prototype.initialize=function(t,e){t&&e?(this.itemId=Number(t),this.amount=Number(e),this.itemName=d.default.ItemTable.findById(this.itemId).name,this.initIcon()):(console.error("Icon\u521d\u59cb\u5316\u5931\u8d25\uff0citemId: %s, amount: %s",t,e),this.node.destroy())},e.prototype.initIcon=function(){this.iconBg.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame(u.default.getItemReportBgPath(this.itemId)),this.icon.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame(u.default.getItemReportIconPath(this.itemId)),this.labNum.getComponent(cc.Label).string=""+p.default.numToBigNum(Math.floor(this.amount),3),this.labDesc.getComponent(cc.Label).string=""+this.itemName,this.node.width=this.icon.width,this.node.height=1.5*this.icon.height,this.icon.width>=106&&(this.icon.scale=.6),this.labDesc.y=this.iconBg.y-this.iconBg.height/2-this.labDesc.height/2,this.node.setContentSize(this.iconBg.getContentSize())},e.prototype.onDestroy=function(){},s([f],e)}(c.default));r.default=g,cc._RF.pop()},{}],ComIcon:[function(t,e,i){"use strict";cc._RF.push(e,"64cd8u7RixCb4PZ/n9XutYN","ComIcon");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ItemUtils"),p=o("MathUtils"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this.initUI()},e.prototype.initUI=function(){this.icon=this.getC("Icon"),this.labNum=this.getC("labNum")},e.prototype.start=function(){},e.prototype.initialize=function(t,e){t&&e?(this.itemId=Number(t),this.amount=Number(e),this.initIcon()):console.error("Icon\u521d\u59cb\u5316\u5931\u8d25\uff0citemId: %s, amount: %s",t,e)},e.prototype.initIcon=function(){this.node.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame(u.default.getItemReportBgPath(this.itemId)),this.icon.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame(u.default.getItemReportIconPath(this.itemId)),this.labNum.getComponent(cc.Label).string=p.default.numToBigNum(Math.floor(this.amount)),this.icon.width>=106&&(this.icon.scale=.6)},e.prototype.onDestroy=function(){},s([h],e)}(c.default));r.default=f,cc._RF.pop()},{}],ComInterstitialAd:[function(t,e,i){"use strict";cc._RF.push(e,"04ddd8FzBRAXZxlzUr9chUM","ComInterstitialAd");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("AdaptUtils"),d=o("LoggerUtils"),h=o("Utils"),f=o("BaseView"),g=o("CCEvent"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adList=null,e.title=null,e.imgPath=null,e.rect=null,e._adUnitId=null,e}return a(e,t),e.prototype.onLoad=function(){this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(g.default.VIVO_CLOSE_INTERSTITIAL,this.handlerCloseSelf,this),this.eventOn(cc.game.EVENT_SHOW,this.handlerShowAgain,this)},e.prototype.handlerShowAgain=function(){cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.reportShowNativeInterstitialAd()},e.prototype.handlerCloseSelf=function(){this.closeSelf()},e.prototype.start=function(){this.initData(),this.initUI(),this.initBtn(),t.prototype.start.call(this)},e.prototype.initBtn=function(){this.initBtnClose(),this.initBtnClick(),this.initImgAdClick()},e.prototype.initImgAdClick=function(){var t=this,e=this.getC("imgAd");h.default.isPlatform(u.PlatformTypeEnum.VIVO_GAME)?c.default.onClick(e,function(){c.default.adMgr.clickNativeInterstitialAd()}):c.default.onClick(e,function(){c.default.adMgr.clickNativeInterstitialAd(),t.closeSelf()})},e.prototype.initBtnClose=function(){var t=this,e=this.getC("btnClose");h.default.isPlatform(u.PlatformTypeEnum.VIVO_GAME)&&c.default.channelMgr.getSwtich()&&h.default.rand()>.7?c.default.onClick(e,function(){c.default.adMgr.clickNativeInterstitialAd(),c.default.offClick(e.getComponent(cc.Button)),c.default.onClick(e,function(){t.closeSelf()})}):c.default.onClick(e,function(){t.closeSelf()})},e.prototype.initBtnClick=function(){var t=this,e=this.getC("btnClick");this._adUnitId==l.OPPOAdUnitIdEnum.Native_FinalReport&&c.default.channelMgr.getSwtich()?e.active=!1:h.default.isPlatform(u.PlatformTypeEnum.VIVO_GAME)?c.default.onClick(e,function(){c.default.adMgr.clickNativeInterstitialAd()}):(d.default.warn("init BtnClick"),c.default.onClick(e,function(){d.default.warn("had click"),c.default.adMgr.clickNativeInterstitialAd(),t.closeSelf()}))},e.prototype.initUI=function(){var t=this.getC("labTitle"),e=this.getC("imgAd");this.setString(t,this.title),cc.assetManager.loadRemote(this.imgPath,function(t,i){e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i)})},e.prototype.initData=function(){this.adList=this.getArgs()[0],this.rect=this.getArgs()[1],this._adUnitId=this.getArgs()[2],d.default.info(this._adUnitId),this.title=this.adList.title,this.imgPath=this.adList.imgUrlList[0]},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");p.default.adaptSize2Winsize(t),this.adaptUIByChannel()},e.prototype.adaptUIByChannel=function(){var t=this.getC("imgAd"),e=this.getC("btnClose"),i=this.getC("btnClick");if(cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME){t.height=t.width*(607/1080),e.scale=1,e.setPosition(32,32),e.x=t.width/2-e.width/2,e.y=t.height/2+e.height/2;var n=this.seekC(i,"lab1");this.setString(n,"Load")}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},s([m],e)}(f.default));r.default=v,cc._RF.pop()},{}],ComItemDropMover:[function(t,e,i){"use strict";cc._RF.push(e,"2b9d28H8O9NLKWtLzaoAL1F","ComItemDropMover");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjConst"),c=o("CommonCfgUtils"),u=o("NodeUtils"),p=o("Utils"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gravity=null,e.speed=0,e.onGroundTimes=0,e.isLeft=!0,e.wPos=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.initialize=function(t,e){this.scene=e,this.gravity=c.default.get("Gravity").number,this.rect=this.node.getBoundingBoxToWorld(),this.wPos=t;var i=p.default.rand(1,2);this.isLeft=1==i},e.prototype.getDistance=function(t){return this.speed*t+.5*this.gravity*t*t},e.prototype.changeDropSpeed=function(t){return this.speed+=this.gravity*t,this.speed},e.prototype.moveByGravity=function(t){var e=u.default.getWorldPos(this.node),i=this.getDistance(t),n=e.y+i;if(this.speed<=0){for(var o=0,r=this.scene.getSteps();o<r.length;o++){var a=r[o];if(this.scene.isDropOnStep(this.rect,i,a))return this.speed=0,n=u.default.getWorldPos(a).y+a.height*(1-a.anchorY),void obj.setWorldPos(cc.v2(u.default.getWorldPos(this.node).x,n))}for(var s=0,c=this.scene.getFloors();s<c.length;s++){var p=c[s];if(this.scene.isDropOnFloor(objFightRect,i,p))return this.objFight.resetJumpTime(),this.speed<-100&&this.objFight.dropFloor(),this.objFight.setState(l.ObjStateEnum.OnGround),this.speed=0,n=u.default.getWorldPos(p).y+p.height*(1-p.anchorY),void obj.setWorldPos(cc.v2(u.default.getWorldPos(this.node).x,n))}}obj.setWorldPos(cc.v2(u.default.getWorldPos(this.node).x,n))},e.prototype.onTick=function(t){this.changeDropSpeed(t),this.moveByGravity(t)},s([h],e)}(cc.Component));r.default=f,cc._RF.pop()},{}],ComKeyboard:[function(t,e,i){"use strict";cc._RF.push(e,"25fc4uI66VBi5uSVuJM/E+v","ComKeyboard");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CCEvent"),c=o("App"),u=o("ArrayUtils"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._keydownList=[],e}return a(e,t),e.prototype.start=function(){this.initKeyboard()},e.prototype.initKeyboard=function(){cc.sys.isNative||(cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this))},e.prototype.onKeyDown=function(t){this._keydownList.push(t.keyCode),c.default.event.emit(l.default.KEYBOARD_DOWN,this)},e.prototype.onKeyUp=function(t){u.default.removeVal(this._keydownList,t.keyCode),c.default.event.emit(l.default.KEYBOARD_UP,this)},e.prototype.isKeyOn=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(null==u.default.keyOf(this._keydownList,i))return!1}return!0},s([d],e)}(cc.Component));r.default=h,cc._RF.pop()},{}],ComLayoutGrid:[function(t,e,i){"use strict";cc._RF.push(e,"ac190wO501FUqE8GzAd8esu","ComLayoutGrid");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Col=1,e.leftSpace=0,e.topSpace=0,e.colSpace=0,e.rowSpace=0,e}return a(e,t),e.prototype.onLoad=function(){this.addEventListener()},e.prototype.start=function(){},e.prototype.addEventListener=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.handlerAddChild,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.handlerAddChild,this)},e.prototype.handlerAddChild=function(){this.sort()},e.prototype.sort=function(){for(var t=-this.node.width*this.node.anchorX+this.leftSpace,e=t,i=this.node.height*(1-this.node.anchorY)-this.topSpace,n=0,o=0;o<this.node.children.length;o++){var r=this.node.children[o],a=o%this.Col;r.x=e+r.width*r.anchorX,e=r.x+r.width*(1-r.anchorX)+this.colSpace,r.y=i-r.height*(1-r.anchorY),a==this.Col-1&&(e=t,i-=r.height+this.rowSpace,n+=r.height)}this.node.height=n},s([p(Number)],e.prototype,"Col",void 0),s([p(Number)],e.prototype,"leftSpace",void 0),s([p(Number)],e.prototype,"topSpace",void 0),s([p(Number)],e.prototype,"colSpace",void 0),s([p(Number)],e.prototype,"rowSpace",void 0),s([u],e)}(l.default);r.default=d,cc._RF.pop()},{}],ComLayoutV:[function(t,e,i){"use strict";cc._RF.push(e,"e0356I8cGZB+4gcdU+N+Wbq","ComLayoutV");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spaceY=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addEventListener()},e.prototype.handlerAddChild=function(){this.sort()},e.prototype.addEventListener=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.handlerAddChild,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.handlerAddChild,this)},e.prototype.sort=function(){for(var t=-this.node.width*this.node.anchorX,e=t,i=this.node.height*(1-this.node.anchorY),n=0;n<this.node.children.length;n++){var o=this.node.children[n],r=n%1;o.x=e+o.width*o.anchorX,e=o.x+o.width*(1-o.anchorX),o.y=i-o.height*(1-o.anchorY),0==r&&(e=t,i-=o.height+this.spaceY)}},s([p(Number)],e.prototype,"spaceY",void 0),s([u],e)}(l.default);r.default=d,cc._RF.pop()},{}],ComMapList:[function(t,e,i){"use strict";cc._RF.push(e,"9fcad3Ag+NJerlJYR+wlo9l","ComMapList");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getMapList=function(){return this.mapList},e.prototype.getMidBg=function(){return this.midBg},e.prototype.getFarBg=function(){return this.farBg},e.prototype.getCloseBg=function(){return this.closeBg},a([c(cc.Prefab)],e.prototype,"mapList",void 0),a([c(cc.Prefab)],e.prototype,"midBg",void 0),a([c(cc.Prefab)],e.prototype,"farBg",void 0),a([c(cc.Prefab)],e.prototype,"closeBg",void 0),a([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ComMap:[function(t,e,i){"use strict";cc._RF.push(e,"f3194SeSVdEf6siwv9W0aYz","ComMap");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CCEvent"),c=o("ENUMS"),u=o("RES"),p=o("App"),d=o("AtlasUtils"),h=o("LoggerUtils"),f=o("NodeUtils"),g=o("RectUtils"),y=o("Utils"),m=o("BaseComponent"),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeSteps=[],e.nodeFloors=[],e.heroBornWPos=null,e.endPos=null,e._isLegal=!0,e.brushMonsterSpot=[],e.regionArray=[],e.isShowFloor=!1,e.cameraRegionList=[],e}return a(e,t),e.prototype.initialize=function(t){this.mapMgr=t},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initStep(),this.initTagHeroBornWPos(),this.addEventListener()},e.prototype.start=function(){t.prototype.start.call(this),this.initBackground(),this.initTagEnding(),this.initBrushMonsterSpot(),this.initRegion(),this.initCameraRegion()},e.prototype.onTick=function(){},e.prototype.update=function(){this.checkLegal()},e.prototype.checkActive=function(){var t=this.mapMgr.getScene().getCameraLeft(),e=f.default.getWorldPos(this.node),i=this.node.getContentSize();e.x+i.width*(1-this.node.anchorX)<t?this.nodeBackGround.active&&(this.nodeBackGround.active=!1):this.nodeBackGround.active||(this.nodeBackGround.active=!0)},e.prototype.checkLegal=function(){var t=this.mapMgr.getScene().getCameraLeft(),e=f.default.getWorldPos(this.node),i=this.node.getContentSize();e.x+i.width*(1-this.node.anchorX)<t-5*cc.winSize.width&&this.setLegal(!1)},e.prototype.isLegal=function(){return this._isLegal},e.prototype.setLegal=function(t){this._isLegal=t},e.prototype.initBackground=function(){this.nodeBackGround=this.getC("nodeBackGround")},e.prototype.addEventListener=function(){this.eventOn(l.default.KEYBOARD_SHOW_DEBUG,this.handlerShowFloor,this)},e.prototype.initStep=function(){var t=this,e=this.getC("stepBg");null!=e?f.default.foreachNode(e,function(e){if(e.group==c.GROUP.FLOOR){t.nodeFloors.push(e);var i=f.default.getWorldPos(e),n=e.height;h.default.warn("\u5730\u677f\u4e16\u754c\u5750\u6807\u9ad8\u5ea6: ",i.y+n/2,t.node.name)}else if(e.group==c.GROUP.STEP){t.nodeSteps.push(e);var o=e.getComponent(cc.Sprite);o&&o.destroy()}}):h.default.error("frontNode == null")},e.prototype.initCameraRegion=function(){var t=this.getC("cameraRegion");if(t)for(var e=0;e<t.children.length;e++){var i=t.children[e],n=Number(i.name);this.cameraRegionList.push({id:n,rect:f.default.getWorldBingdingBox(i)})}else h.default.info("ComMap \u5730\u56fe\u6ca1\u6709\u914d\u7f6e\u6444\u50cf\u673a\u533a\u57df")},e.prototype.initTagHeroBornWPos=function(){this.getC("heroBorn")&&(this.heroBornWPos=cc.v2(1070,639))},e.prototype.initTagEnding=function(){var t=this.getC("endFlag");t?this.endPos=f.default.getWorldPos(t):h.default.error("ComMap >>>>>>>> 58 \u5730\u56fe\u6ca1\u6709\u914d\u7f6e\u7ed3\u675f\u8282\u70b9")},e.prototype.initBrushMonsterSpot=function(){var t=this.getC("brushMonsterSpot");if(t)for(var e=t.children,i=0;i<e.length;i++){var n=e[i];this.brushMonsterSpot.push({spotId:Number(n.name),wPos:f.default.getWorldPos(n),Pos:cc.v2(n.position)}),n.destroy()}else h.default.warn("ComMap \u6ca1\u6709\u914d\u7f6e\u5237\u602a\u70b9")},e.prototype.initRegion=function(){var t=this.getC("nodeRegion");if(t)for(var e=t.children,i=0;i<e.length;i++){var n=e[i];f.default.getWorldPos(n),this.regionArray.push({regionId:Number(n.name),rect:f.default.getWorldBingdingBox(n)})}else h.default.warn("ComMap \u6ca1\u6709\u914d\u7f6e\u533a\u57df")},e.prototype.getCameraRegion=function(t){for(var e=0;e<this.cameraRegionList.length;e++){var i=this.cameraRegionList[e];if(i.id==t)return i.rect}return null},e.prototype.getAreaIdList=function(t){for(var e=[],i=0;i<this.regionArray.length;i++){var n=this.regionArray[i];g.default.rectContainsPoint(n.rect,t)&&e.push(n.regionId)}return e},e.prototype.getSteps=function(){return this.nodeSteps},e.prototype.getFloors=function(){return this.nodeFloors},e.prototype.getRect=function(){return cc.rect(this.node.x,this.node.y,this.node.width,this.node.height)},e.prototype.getHeroBornWPos=function(){return this.heroBornWPos},e.prototype.getEndPos=function(){return this.endPos},e.prototype.getMonsterNodes=function(){return this.seekC(this.node,"nodeMonsters").children},e.prototype.getBrushMonsterSpotWPos=function(t){for(var e=0;e<this.brushMonsterSpot.length;e++){var i=this.brushMonsterSpot[e];if(i.spotId==t)return i.wPos}},e.prototype.getBrushMonsterSportPos=function(t){for(var e=0;e<this.brushMonsterSpot.length;e++){var i=this.brushMonsterSpot[e];if(i.spotId==t)return i.Pos}},e.prototype.handlerShowFloor=function(){var t=this.getC("stepBg");if(this.isShowFloor)this.isShowFloor=!1,f.default.foreachNode(t,function(t){var e=t.getComponent(cc.Sprite);e&&e.destroy()});else{this.isShowFloor=!0;var e=cc.color(y.default.rand(0,255),y.default.rand(0,255),y.default.rand(0,255));f.default.foreachNode(t,function(t){if(t.group==c.GROUP.FLOOR||t.group==c.GROUP.STEP){var i=t.addComponent(cc.Sprite);if(t.color=e,i){var n=t.width,o=t.height,r=p.default.resMgr.getSpriteAtlas(u.ResMainScene.atlas.common1.url);if(r){var a=d.default.getSpriteFrame(r,"common1/testKuang");a?(i.spriteFrame=a,i.type=cc.Sprite.Type.SLICED,t.width=n,t.height=o):h.default.error("ComMap >>>>>>>> 71 spriteFrame == null")}else h.default.error("ComMap >>>>>>>> 72 common1Atlas = null")}}})}},s([_],e)}(m.default));r.default=C,cc._RF.pop()},{}],ComMonsterCondition:[function(t,e,i){"use strict";cc._RF.push(e,"2fc80y+aK1P+ZCm9YNjQZiX","ComMonsterCondition");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MonsterGroupId=0,e.preMonsterGroup=[],e.delayTime=0,e}return r(e,t),e.prototype.getMonsterGroupId=function(){return this.MonsterGroupId},e.prototype.getPreMonsterGroup=function(){return this.preMonsterGroup},e.prototype.getDelayTime=function(){return this.delayTime},e.prototype.getRegion=function(){return this.region},a([c({type:cc.Integer,tooltip:"\u602a\u7269\u7ec4id"})],e.prototype,"MonsterGroupId",void 0),a([c({type:[cc.Node],tooltip:"\u524d\u7f6e\u602a\u7269,\u5f53\u524d\u9762\u7684\u90a3\u4e9b\u602a\u7269\u6b7b\u4ea1,\u6211\u8fd9\u4e2a\u602a\u7269\u624d\u80fd\u751f\u6210"})],e.prototype,"preMonsterGroup",void 0),a([c({type:cc.Integer,tooltip:"\u5ef6\u65f6\u751f\u6210"})],e.prototype,"delayTime",void 0),a([c({type:cc.Node,tooltip:"\u533a\u57df\u4f9d\u8d56,\u628a\u533a\u57df\u8282\u70b9\u62d6\u5230\u8fd9\u91cc\u5c31\u53ef\u4ee5\u4e86\n\u5982\u679c\u6ca1\u6709\u533a\u57df\u4f9d\u8d56,\u4e0d\u62d6\u5c31\u884c"})],e.prototype,"region",void 0),a([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ComMonsterMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3e4d3RRvL5HzoTcf/gqXtu0","ComMonsterMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tbl"),c=o("App"),u=o("LoggerUtils"),p=o("BaseComponent"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._createMonsterContainer=[],e._scene=null,e}return a(e,t),e.prototype.onLoad=function(){this.initScene()},e.prototype.initScene=function(){this._scene=this.node.getComponent("BattleScene")},e.prototype.clearMonsterContainer=function(){this._createMonsterContainer=[]},e.prototype.initLevelMonster=function(){for(var t=0,e=this.seekC(this.node,"nodeMonsters").children;t<e.length;t++){var i=e[t],n=i.name,o=Number(n);0==o?u.default.warn("BattleScene >>>>>>>> 103 \u7b56\u5212\u914d\u7f6e\u7684\u602a\u7269\u7ec4ID\u65e0\u6cd5\u8f6c\u6362\u6210\u6570\u5b57:%s",n):this.createMonsterGroup(o,cc.v2(i.x,i.y))}},e.prototype.createMonsterGroup=function(t,e){var i=l.default.MonsterGroupTable.findById(t);if(null!=i)for(var n=0;n<i.monsterPool.length;n++){var o=i.monsterPool[n][0],r=i.monsterPool[n][1],a=i.bornDelayTime[n];null==a&&(a=0,u.default.warn("BattleScene  \u7b56\u5212\u7f3a\u5c11\u914d\u7f6e\u602a\u7269\u51fa\u751f\u65f6\u95f4,\u7ae0\u8282:%d",c.default.levelServer.getCurChapter())),this._createMonsterContainer.push({monsterId:o,bornType:i.bornType,pos:e.add(cc.v2(r,0)),bornTime:this._scene.getTime()+a/1e3,isValid:!0})}else u.default.warn("BattleScene \u521b\u5efa\u602a\u7269\u7ec4 \u7684\u602a\u7269\u5931\u8d25:groupId = %d,\u53ef\u80fd\u662f\u627e\u4e0d\u5230\u914d\u7f6e\u8868",t)},s([h],e)}(p.default));r.default=f,cc._RF.pop()},{}],ComMonsterTipsPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"faab8Wax8ZMOqwB4+6FC+em","ComMonsterTipsPrefab");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjConst"),c=o("NodeUtils"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprLeft=null,e.sprRight=null,e}return a(e,t),e.prototype.initialize=function(t,e){this.monster=t,this.scene=e,this.node.opacity=0,this.node.scale=.6},e.prototype.update=function(){if(cc.isValid(this.monster))if(this.monster.isState(l.ObjStateEnum.Die))this.node.destroy();else{this.node.opacity=255;var t=this.monster.getWorldPos(),e=this.scene.getCameraLeft();if(t.x<e)c.default.setWorldPos(this.node,cc.v2(e+55,t.y+100)),this.sprLeft.active=!0,this.sprRight.active=!1;else{var i=this.scene.getCameraRight();t.x>i?(c.default.setWorldPos(this.node,cc.v2(i-55,t.y+100)),this.sprLeft.active=!1,this.sprRight.active=!0):this.node.opacity=0}}else this.node.destroy()},s([d(cc.Node)],e.prototype,"sprLeft",void 0),s([d(cc.Node)],e.prototype,"sprRight",void 0),s([p],e)}(cc.Component);r.default=h,cc._RF.pop()},{}],ComMover:[function(t,e,i){"use strict";cc._RF.push(e,"a8fb8oHe+xN/oFVm23aFKhX","ComMover");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CCEvent"),c=o("App"),u=o("ObjConst"),p=o("CommonCfgUtils"),d=o("NodeUtils"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gravity=null,e.speed=0,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.initialize=function(t,e){this.objFight=t,this.scene=e,this.gravity=p.default.get("Gravity").number,this.groundBeatback=p.default.get("GroundBeatback").number},e.prototype.getSpeed=function(){return this.speed},e.prototype.setSpeed=function(t){this.speed=t},e.prototype.getDistance=function(t){return this.speed*t+.5*this.gravity*t*t},e.prototype.changeDropSpeed=function(t){return this.speed+=this.gravity*t,this.speed},e.prototype.moveByGravity=function(t){var e=this.getObjFightCom(),i=e.getBodyBox();if(i){var n=d.default.getWorldPos(this.node),o=this.getDistance(t),r=n.y+o;if(o<-10&&e.getCamp()==u.CampTypeEnum.Hero&&c.default.event.emit(l.default.HERO_DROP),o<=0){if(!this.objFight.isState(u.ObjStateEnum.Drop))for(var a=0,s=this.scene.getSteps();a<s.length;a++){var p=s[a];if(this.scene.isDropOnStep(i,o,p))return this.objFight.resetJumpTime(),this.objFight.dropFloor(),this.objFight.isDrop=!1,this.objFight.setState(u.ObjStateEnum.OnStep),this.objFight.isState(u.ObjStateEnum.Die)?this.speed=-.5*this.speed:this.speed=0,r=d.default.getWorldPos(p).y+p.height*(1-p.anchorY),void e.setWorldPos(cc.v2(d.default.getWorldPos(this.node).x,r))}for(var h=0,f=this.scene.getFloors();h<f.length;h++){var g=f[h];if(this.scene.isDropOnFloor(i,o,g))return this.objFight.resetJumpTime(),this.objFight.dropFloor(),this.objFight.isDrop=!1,this.objFight.setState(u.ObjStateEnum.OnGround),this.objFight.isState(u.ObjStateEnum.Die)?this.speed=-.5*this.speed:this.speed=0,r=d.default.getWorldPos(g).y+g.height*(1-g.anchorY),void e.setWorldPos(cc.v2(d.default.getWorldPos(this.node).x,r))}o<-1.5&&(this.objFight.drop(),this.objFight.exitState(u.ObjStateEnum.OnGround),this.objFight.exitState(u.ObjStateEnum.OnStep))}e.setWorldPos(cc.v2(d.default.getWorldPos(this.node).x,r))}},e.prototype.getObjFightCom=function(){return this.objFight},e.prototype.onTick=function(t){this.changeDropSpeed(t),this.moveByGravity(t)},s([f],e)}(cc.Component));r.default=g,cc._RF.pop()},{}],ComNativeAd:[function(t,e,i){"use strict";cc._RF.push(e,"b2d88X28MFJbI+Y2xmoA6Ru","ComNativeAd");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("LoggerUtils"),d=o("NodeUtils"),h=o("Utils"),f=o("BaseView"),g=o("CCEvent"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adList=null,e.title=null,e.imgPath=null,e.rect=null,e._adUnitId=null,e}return a(e,t),e.prototype.onLoad=function(){c.default.event.emit(g.default.VIVO_ADBANNER_OPEN),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(g.default.OPPO_CLOSE_ADVIEW,this.handlerCloseSelf,this),this.eventOn(g.default.VIVO_CLOSE_ADVIEW,this.handlerCloseSelf,this),this.eventOn(g.default.HUAWEI_CLOSE_NATIVE,this.handlerCloseSelf,this),this.eventOn(cc.game.EVENT_SHOW,this.handlerShowAgain,this)},e.prototype.handlerShowAgain=function(){cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.reportShowNativeAd()},e.prototype.handlerCloseSelf=function(){this.closeSelf()},e.prototype.start=function(){this.initData(),this.initUI(),this.initBtn(),t.prototype.start.call(this)},e.prototype.initBtn=function(){this.initBtnClose(),this.initBtnClick(),this.initImgAdClick()},e.prototype.initImgAdClick=function(){var t=this,e=this.getC("imgAd");cc.sys.platform!=u.PlatformTypeEnum.VIVO_GAME?c.default.onClick(e,function(){c.default.adMgr.clickNativeAd(),t.closeSelf()}):c.default.onClick(e,function(){c.default.adMgr.clickNativeAd()})},e.prototype.initBtnClose=function(){var t=this,e=this.getC("btnClose");c.default.channelMgr.getSwtich()&&h.default.rand()>.7?c.default.onClick(e,function(){c.default.adMgr.clickNativeBannerAd(),c.default.offClick(e.getComponent(cc.Button)),c.default.onClick(e,function(){t.closeSelf()})}):c.default.onClick(e,function(){t.closeSelf()})},e.prototype.initBtnClick=function(){var t=this,e=this.getC("btnClick");this._adUnitId==l.OPPOAdUnitIdEnum.Native_FinalReport&&c.default.channelMgr.getSwtich()?e.active=!1:cc.sys.platform!=u.PlatformTypeEnum.VIVO_GAME?c.default.onClick(e,function(){c.default.adMgr.clickNativeAd(),t.closeSelf()}):c.default.onClick(e,function(){c.default.adMgr.clickNativeAd()})},e.prototype.initUI=function(){var t=this.getC("labTitle"),e=this.getC("imgAd");cc.assetManager.loadRemote(this.imgPath,function(t,i){e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i)}),cc.sys.platform!=u.PlatformTypeEnum.VIVO_GAME&&this.setString(t,this.title)},e.prototype.initData=function(){this.adList=this.getArgs()[0],this.rect=this.getArgs()[1],this._adUnitId=this.getArgs()[2],this.title=this.adList.title||"",p.default.warn("nativeAd title: ",this.title),this.imgPath=this.adList.imgUrlList[0]},e.prototype.onAdaptUI=function(){var t=this.getC("nodeAd");d.default.setWorldPos(t,this.rect.x,this.rect.y),t.width=this.rect.width,t.height=this.rect.height,this.adaptUIByChannel()},e.prototype.adaptUIByChannel=function(){var t=this.getC("nodeAd"),e=this.getC("btnClick"),i=this.getC("labTitle"),n=this.getC("imgAd"),o=this.getC("btnClose"),r=this.getC("nodeLabel");if(cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME){e.setPosition(cc.winSize.width/2,0);var a=this.seekC(e,"lab1");this.setString(a,"download"),i.active=!1,n.x=t.width/2,n.y=-t.height/2,n.width=t.width,n.height=t.height}else if(cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME){n.y=.5*-t.height;var s=t.height/607;n.height=t.height,n.width=1080*s,p.default.warn("imgAd, width: %s, height: %s",n.width,n.height),n.x=.5*n.width,o.scale=1,o.setPosition(32,32),o.setAnchorPoint(1,1),o.setPosition(t.width,0),r.setPosition(t.width-r.width/2,-t.height+r.height/2),e.x=(t.width-n.width)/2+n.width,i.x=e.x}},e.prototype.onDestroy=function(){c.default.event.emit(g.default.VIVO_ADBANNER_CLOSE),t.prototype.onDestroy.call(this)},s([m],e)}(f.default));r.default=v,cc._RF.pop()},{}],ComOfflineReward:[function(t,e,i){"use strict";cc._RF.push(e,"74700saRF9IW4+kztZdSPUv","ComOfflineReward");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("BagConst"),p=o("CommonConst"),d=o("AdaptUtils"),h=o("TipsUtils"),f=o("BaseView"),g=o("CCEvent"),y=o("UI"),m=cc._decorator,v=m.ccclass,_=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){t.prototype.start.call(this),this.initUI(),this.initData(),this.initBtn(),this.viewScaleBig(.3),cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME?c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_Offline,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height)):cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME?c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height)):cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initReward=function(){for(var t=0;t<this.data.length;t++){var e=this.data[t][0],i=this.data[t][1];if(e==u.ItemIdEnum.Diamond){var n=this.getC("labContent");this.setString(n,""+i)}else h.default.showTips("It's just diamonds")}},e.prototype.initData=function(){this.data=this.getArgs()[0]},e.prototype.initUI=function(){},e.prototype.initBtn=function(){this.initBtnClose(),this.initBtnGet(),this.initBtnTrible()},e.prototype.initBtnClose=function(){var t=this,e=this.getC("btnClose");c.default.onClick(e,function(){t.setTouchable(!1),t.closeSelf()})},e.prototype.initBtnGet=function(){var t=this,e=this.getC("btnGet");c.default.onClick(e,function(){t.setTouchable(!1),c.default.bagMgr.addItemList(t.data,u.BagSourceEnum.OfflineReward),c.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,t.data),t.closeSelf()})},e.prototype.initBtnTrible=function(){var t=this,e=this.getC("btnTrible");c.default.onClick(e,function(){t.setTouchable(!1);var e={adType:p.AdTypeEnum.OfflineRewardTrible,callback:function(e,i){i&&t.setTouchable(!0),e&&(t.setTouchable(!0),t.closeSelf())},errorCallback:function(){t.setTouchable(!0)},timeout:3};cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME&&(e.adUnitId=l.OPPOAdUnitIdEnum.Ad_Offline),c.default.adMgr.show(e)})},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");d.default.adaptSize2Winsize(t)},e.prototype.onDestroy=function(){cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(g.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(g.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(g.default.HUAWEI_CLOSE_NATIVE),t.prototype.onDestroy.call(this)},s([v],e)}(f.default));r.default=_,cc._RF.pop()},{}],ComPauseSkillPnl:[function(t,e,i){"use strict";cc._RF.push(e,"56003GwIGlHZqZvwxWNijXb","ComPauseSkillPnl");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ComSkillIconP=null,e.itemIdList=null,e}return a(e,t),e.prototype.initialize=function(t){this.itemIdList=t},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this.initSkillSelect()},e.prototype.initSkillSelect=function(){for(var t=0;t<3;t++)if(this.itemIdList[t]){var e=cc.instantiate(this.ComSkillIconP);e.scale=.8,this.node.addChild(e);var i=e.getComponent("ComSkillIcon");i.setTouchEnable(!1),i.initialize(this.itemIdList[t],function(){})}},s([p(cc.Prefab)],e.prototype,"ComSkillIconP",void 0),s([u],e)}(l.default);r.default=d,cc._RF.pop()},{}],ComPauseView:[function(t,e,i){"use strict";cc._RF.push(e,"fd8643yDq9BQbQw9yBCNjb1","ComPauseView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("AdaptUtils"),d=o("ArrayUtils"),h=o("ItemUtils"),f=o("BaseView"),g=o("CCEvent"),y=o("ENUMS"),m=o("UI"),v=cc._decorator,_=v.ccclass,C=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.comPauseSkillPnl=null,e._scene=null,e.gmTouchCount=null,e}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.viewFadeIn(.5),this.initScroll(),this.initBtn(),this.initData(),this.addEventListener(),this.initGMControl(),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playWechatAd=function(){c.default.adMgr.showBanner()},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeInterstitialAd()},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeInterstitialAd(),c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_SkillReward,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initGMControl=function(){var t=this;this.gmTouchCount=0;var e=this.getC("btnGM1"),i=this.getC("btnGM2");c.default.onClickWithoutSound(e,function(){t.gmTouchCount>=0&&(t.gmTouchCount>=0&&t.gmTouchCount<1?t.gmTouchCount++:t.gmTouchCount>=3&&t.gmTouchCount<5?t.gmTouchCount++:5==t.gmTouchCount?c.default.viewMgr.showUI(m.UI.TEST_VIEW):t.gmTouchCount=-1)}),c.default.onClickWithoutSound(i,function(){t.gmTouchCount>=0&&(t.gmTouchCount>=1&&t.gmTouchCount<3?t.gmTouchCount++:t.gmTouchCount=-1)})},e.prototype.addEventListener=function(){this.eventOn(g.default.AD_FINISH,this.handlerADFinish,this)},e.prototype.handlerADFinish=function(){this.closeSelf()},e.prototype.onAdaptUI=function(){var t=this.getC("nodeBg");p.default.adaptSize2Winsize(t);var e=this.getC("topView");p.default.adaptNodeToTop(e,200)},e.prototype.initData=function(){this._scene=this.getArgs()[0]},e.prototype.initTitle=function(){var t=this.getC("levelInfo"),e=this.seekC(t,"labLevelNum"),i=c.default.levelServer.getCurLevel();e.getComponent(cc.Label).string=String(i)},e.prototype.initBtn=function(){var t=this,e=this.getC("btnContinue"),i=this.getC("btnBack");c.default.levelServer.getCurChapter(),c.default.levelServer.getCurLevel(),c.default.onClick(e,function(){t.viewFadeOutExit(.5),t._scene.pauseScene(!1)}),c.default.onClick(i,function(){var e={title:"Home",content:"Sure to return Home?\n(You've received rewards)",tips:"",sureCallback:function(){var e=MiniGameAds.isInterstitialReady();cc.audioEngine.pauseMusic(),e?MiniGameAds.showInterstitial().then(function(){console.info("====> show interstitial success"),cc.audioEngine.resumeMusic(),t._scene.setState(y.LevelStatusEnum.Exiting),c.default.audioMgr.playSoundByResId(114),c.default.viewMgr.showUIWithoutSound(m.UI.FINAL_REPORT,t._scene),t.closeSelf()}).catch(function(e){console.error("====> show interstitial error: "+e.message),cc.audioEngine.resumeMusic(),t._scene.setState(y.LevelStatusEnum.Exiting),c.default.audioMgr.playSoundByResId(114),c.default.viewMgr.showUIWithoutSound(m.UI.FINAL_REPORT,t._scene),t.closeSelf()}):(console.info("====> interstitial not ready"),cc.audioEngine.resumeMusic(),t._scene.setState(y.LevelStatusEnum.Exiting),c.default.audioMgr.playSoundByResId(114),c.default.viewMgr.showUIWithoutSound(m.UI.FINAL_REPORT,t._scene),t.closeSelf())},cancelCallBack:null,isNeedAd:!1};c.default.viewMgr.showUI(m.UI.CONFIRM_VIEW,t,e)})},e.prototype.initScroll=function(){var t=this.getC("content"),e=c.default.roleServer.getStudySkillIdList();e.sort(function(t,e){var i=h.default.getItemVO(t).price||0;return(h.default.getItemVO(e).price||0)-i});for(var i=d.default.splitArray(e,3),n=0;n<i.length;n++){var o=cc.instantiate(this.comPauseSkillPnl);t.addChild(o),o.getComponent("ComPauseSkillPnl").initialize(i[n])}},e.prototype.onDestroy=function(){c.default.adMgr.hideBanner(),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?(c.default.event.emit(g.default.OPPO_CLOSE_ADVIEW),c.default.adMgr.showBanner(l.OPPOAdUnitIdEnum.Banner_Battle)):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME&&c.default.event.emit(g.default.VIVO_CLOSE_ADVIEW),t.prototype.onDestroy.call(this)},s([C(cc.Prefab)],e.prototype,"comPauseSkillPnl",void 0),s([_],e)}(f.default);r.default=b,cc._RF.pop()},{}],ComPrivacySettingView:[function(t,e,i){"use strict";cc._RF.push(e,"eb2e5e2U6RAQaTMLcCNao8r","ComPrivacySettingView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),o("App");var l=o("AdaptUtils"),c=o("BaseView"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastView=null,e.data=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){t.prototype.start.call(this),this.initUI(),this.initData(),this.initBtn(),this.viewScaleBig(.3)},e.prototype.initData=function(){this.lastView=this.getArgs()[0],this.data=this.getArgs()[1]},e.prototype.initUI=function(){this.btnClose=this.getC("btnClose"),this.btnPrivacy=this.getC("btnPrivacy"),this.btnUserAgreement=this.getC("btnUserAgreement"),this.btnPersonInfo=this.getC("btnPersonInfo"),this.btnOtherSDK=this.getC("btnOtherSDK"),this.btnPermissions=this.getC("btnPermissions"),this.btnPersonInfoList=this.getC("btnPersonInfoList"),this.reBornBg=this.getC("reBornBg"),this.personInfoBg=this.getC("PersonInfoBg"),this.btnPersonClose=this.getC("btnPersonClose")},e.prototype.initBtn=function(){},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");l.default.adaptSize2Winsize(t)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},s([p],e)}(c.default));r.default=d,cc._RF.pop()},{}],ComRedPoint:[function(t,e,i){"use strict";cc._RF.push(e,"429b38zGDtHL6s+kgWkW3Gw","ComRedPoint");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AnchorPoint=cc.v2(1,1),e.OffsetPos=cc.v2(0,0),e.scale=1,e.spriteFrame=null,e.redPoint=null,e.defaultName="redPoint",e}return a(e,t),e.prototype.onLoad=function(){this.initData(),this.initRedPoint()},e.prototype.initData=function(){this.spriteFrame=l.default.resMgr.getSpriteFrame("texture/common/redPoint")},e.prototype.initRedPoint=function(){this.redPoint=new cc.Node(this.defaultName),this.redPoint.addComponent(cc.Sprite).spriteFrame=this.spriteFrame,this.redPoint.parent=this.node,this.redPoint.scale=this.scale,this.redPoint.active=!1,this.refreshPosition()},e.prototype.refreshPosition=function(){this.redPoint.x=(this.AnchorPoint.x-this.node.anchorX)*this.node.width+this.OffsetPos.x,this.redPoint.y=(this.AnchorPoint.y-this.node.anchorY)*this.node.height+this.OffsetPos.y},e.prototype.setRedPointActive=function(){},e.prototype.setOffset=function(t){null!=t&&(this.OffsetPos=t,this.refreshPosition())},e.prototype.setNodeAttr=function(){},s([d(cc.Vec2)],e.prototype,"AnchorPoint",void 0),s([d(cc.Vec2)],e.prototype,"OffsetPos",void 0),s([d(Number)],e.prototype,"scale",void 0),s([p],e)}(c.default);r.default=h,cc._RF.pop()},{}],ComRewardSkillPnl:[function(t,e,i){"use strict";cc._RF.push(e,"bb16dxY4xxF+7LkR/iJslOw","ComRewardSkillPnl");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("BagConst"),p=o("ColorUtils"),d=o("ItemUtils"),h=o("SpriteFrameUtils"),f=o("Tbl"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgLevelList=[],e.skillBgLevelList=[],e}return a(e,t),e.prototype.initialize=function(t,e){this._itemId=t,l.default.onClickWithoutSound(this.node,function(){e(t)}),this.refresh()},e.prototype.start=function(){t.prototype.start.call(this),this.refresh()},e.prototype.playSpineGod=function(){this.getC("spineGod").active=!0},e.prototype.refresh=function(){if(this.labName=this.getC("labName"),this.richDesc=this.getC("richDesc"),this.labSkillType=this.getC("labSkillType"),this.imgSkill=this.getC("imgSkill"),this.imgSkillBg=this.getC("imgSkillBg"),this.imgBg=this.getC("imgBg"),null!=this.labName){var t=f.default.ItemTable.findById(this._itemId);t&&(this.setLabName(this.labName,t),this.setSkillTypeName(this.labSkillType,t),this.setBgColor(this.imgBg,t),this.setSkillBgColor(this.imgSkillBg,t),this.setSkillIcon(this.imgSkill,t),this.setDesc(this.richDesc,t))}},e.prototype.setLabName=function(t,e){e.stampType==u.ItemStampType.God?t.color=p.default.StampGodColor:e.stampType==u.ItemStampType.Big?t.color=p.default.StampBigColor:e.stampType==u.ItemStampType.Mini?t.color=p.default.StampMiniColor:t.color=cc.color(255,255,255),this.labName.getComponent(cc.Label).string=e.name},e.prototype.setSkillTypeName=function(t,e){e.stampType==u.ItemStampType.God?this.labSkillType.getComponent(cc.Label).string="Active":e.stampType==u.ItemStampType.Big?this.labSkillType.getComponent(cc.Label).string="Recommend":e.stampType==u.ItemStampType.Mini?this.labSkillType.getComponent(cc.Label).string="General":this.labSkillType.getComponent(cc.Label).string="Unknown"},e.prototype.setBgColor=function(t,e){e.stampType==u.ItemStampType.God||e.stampType==u.ItemStampType.Big||e.stampType==u.ItemStampType.Mini?h.default.setSpriteFrame(t,this.bgLevelList[e.stampType]):h.default.setSpriteFrame(t,this.bgLevelList[0])},e.prototype.setSkillBgColor=function(t,e){e.stampType==u.ItemStampType.God||e.stampType==u.ItemStampType.Big||e.stampType==u.ItemStampType.Mini?h.default.setSpriteFrame(t,this.skillBgLevelList[e.stampType]):h.default.setSpriteFrame(t,this.skillBgLevelList[0])},e.prototype.setSkillIcon=function(t,e){var i=d.default.getItemIconSpriteFrame(e.id);h.default.setSpriteFrame(t,i)},e.prototype.setDesc=function(t,e){t.getComponent(cc.RichText).string=e.html5Desc},s([m([cc.SpriteFrame])],e.prototype,"bgLevelList",void 0),s([m([cc.SpriteFrame])],e.prototype,"skillBgLevelList",void 0),s([y],e)}(c.default);r.default=v,cc._RF.pop()},{}],ComRocker:[function(t,e,i){"use strict";cc._RF.push(e,"52692aMMLxLgon4yfaUqSKK","ComRocker");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CCEvent"),c=o("App"),u=o("LevelServer"),p=o("BaseComponent"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Max_len=60,e.dir=cc.v2(0,0),e.leftRight="",e.upDown="",e.RockerAll=null,e.Rocker=null,e.RockerBg=null,e.RockerBgMoveRate=0,e.btnJump=null,e._originY=null,e._scene=null,e}return a(e,t),e.prototype.onLoad=function(){var t=this;this.RockerAll=this.getC("nodeAllRock"),this.Rocker=this.getC("nodeRocker"),this.RockerBg=this.getC("nodeRockerBg"),this._originY=this.node.y,this.RockerBgMoveRate=.3,this.Rocker.on(cc.Node.EventType.TOUCH_START,function(e){var i=e.getLocation(),n=t.node.convertToNodeSpaceAR(i).x;n>t.Max_len?n=t.Max_len:n<-t.Max_len&&(n=-t.Max_len),t.Rocker.x=n,t.RockerBg.x=n*t.RockerBgMoveRate,c.default.event.emit(l.default.GUIDE_CLICK_ROCKER_MOVE),u.default.getInstance().lockSaveInfo(!0)},this),this.Rocker.on(cc.Node.EventType.TOUCH_MOVE,function(e){var i=e.getLocation(),n=t.node.convertToNodeSpaceAR(i).x;t.leftRight=n>0?"right":"left",n>t.Max_len?n=t.Max_len:n<-t.Max_len&&(n=-t.Max_len),t.Rocker.x=n,t.RockerBg.x=n*t.RockerBgMoveRate},this),this.Rocker.on(cc.Node.EventType.TOUCH_END,function(){t.Rocker.x=0,t.RockerBg.x=0,t.leftRight="",t.upDown="",u.default.getInstance().lockSaveInfo(!1)},this),this.Rocker.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.Rocker.x=0,t.RockerBg.x=0,t.leftRight="",t.upDown="",u.default.getInstance().lockSaveInfo(!1)},this)},e.prototype.setScene=function(t){this._scene=t},e.prototype.hideRocker=function(){this.RockerAll.stopAllActions(),this.RockerAll.runAction(cc.fadeOut(1))},e.prototype.showRocker=function(){this.RockerAll.runAction(cc.fadeIn(1))},s([h],e)}(p.default));r.default=f,cc._RF.pop()},{}],ComShadow:[function(t,e,i){"use strict";cc._RF.push(e,"9be39RBkRpNV6m/8oMUmDda","ComShadow");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("ComSkin"),u=o("NodeUtils"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this._skin=this.node.addComponent(c.default),this._skin.initWithResId(1010);var t=this._skin.getSkin();this._originWidth=t.width,t.anchorY=.5},e.prototype.start=function(){},e.prototype.initialize=function(t,e){this._followObj=t;var i=t.getBodyBox().width;this._skin.getSkin().width=i,this._scene=e},e.prototype.onTick=function(){var t=u.default.getWorldPos(this._followObj.node),e=this.getScene().getPosYByFloorAndStep(t);t.y=e,this.setWpos(t)},e.prototype.getScene=function(){return this._scene},e.prototype.setWpos=function(t){u.default.setWorldPos(this.node,t)},e.prototype.getWpos=function(){return u.default.getWorldPos(this.node)},e.prototype.getSkin=function(){return this._skin.getSkin()},e.prototype.update=function(){},e.prototype.onDestroy=function(){this._skin.getSkin().destroy()},s([d],e)}(l.default));r.default=h,cc._RF.pop()},{}],ComShopView:[function(t,e,i){"use strict";cc._RF.push(e,"77b48CzKMZIhZoztH/Ac9Fo","ComShopView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("CommonConst"),u=o("ErrorEnum"),p=o("ShopConst"),d=o("AdaptUtils"),h=o("TipsUtils"),f=o("BaseView"),g=o("CCEvent"),y=o("UI"),m=cc._decorator,v=m.ccclass,_=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this.initData(),this.initBtn(),this.initUI(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(g.default.SHOP_SHOW_REWARD,this.handlerShowReward,this)},e.prototype.handlerShowReward=function(t){0!=t.length?l.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,t):h.default.showTips("Nothing in the chest, why!")},e.prototype.initUI=function(){},e.prototype.update=function(){this.refreshGoldTime(),this.refreshCardTime(),this.refreshKingTime()},e.prototype.refreshWoodPrice=function(){var t=this.seekC(this.imgWoodReward,"btnGet"),e=this.seekC(t,"labNum"),i=this.seekC(this.imgWoodReward,"btnRealGet"),n=l.default.shopMgr.getBuyPrice(p.ShopGoodEnum.WoodReward);e.getComponent(cc.Label).string=String(n),l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.WoodReward).isRealGet?(i.active=!0,t.active=!1):(t.active=!0,i.active=!1)},e.prototype.refreshSilverPrice=function(){var t=this.seekC(this.imgSilverReward,"btnGet"),e=this.seekC(t,"labNum"),i=this.seekC(this.imgSilverReward,"btnRealGet"),n=l.default.shopMgr.getBuyPrice(p.ShopGoodEnum.SilverReward);e.getComponent(cc.Label).string=String(n),l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.SilverReward).isRealGet?(i.active=!0,t.active=!1):(t.active=!0,i.active=!1)},e.prototype.refreshGoldTime=function(){var t=this.seekC(this.imgGold,"btnGet"),e=this.seekC(this.imgGold,"btnWait"),i=l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.GoldCoin).cooldownAt-l.default.getTime();if(i<=0)t.active=!0,e.active=!1;else{t.active=!1,e.active=!0;var n=this.seekC(e,"labTime"),o=Math.floor(i/3600),r=Math.floor(i%3600/60),a=Math.ceil(i%60);n.getComponent(cc.Label).string=o+":"+r+":"+a}},e.prototype.refreshCardTime=function(){var t=this.seekC(this.imgCard,"btnGet"),e=this.seekC(this.imgCard,"btnWait"),i=l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.RandomCard).cooldownAt-l.default.getTime();if(i<=0)t.active=!0,e.active=!1;else{t.active=!1,e.active=!0;var n=this.seekC(e,"labTime"),o=Math.floor(i/3600),r=Math.floor(i%3600/60),a=Math.ceil(i%60);n.getComponent(cc.Label).string=o+":"+r+":"+a}},e.prototype.refreshKingTime=function(){var t=l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.KingReward),e=this.seekC(this.imgKingReward,"btnGet"),i=this.seekC(this.imgKingReward,"btnWait"),n=t.cooldownAt-l.default.getTime();if(n<0){if(1==e.active)return;e.active=!0,i.active=!1}else{e.active=!1,i.active=!0;var o=Math.floor(n/3600),r=Math.floor(n%3600/60),a=Math.ceil(n%60);this.labKing.getComponent(cc.Label).string=o+":"+r+":"+a}},e.prototype.initData=function(){this.imgBg=this.getC("imgBg"),this.cardBg1=this.getC("CardBg1"),this.cardBg2=this.getC("CardBg2"),this.cardBg3=this.getC("CardBg3"),this.imgGold=this.getC("imgGold"),this.imgCard=this.getC("imgCard"),this.imgWoodReward=this.getC("imgWoodReward"),this.imgSilverReward=this.getC("imgSilverReward"),this.imgKingReward=this.getC("imgKingReward"),this.labKing=this.seekC(this.imgKingReward,"labTime"),this.btnFast=this.getC("btnFast"),this.btnRefresh=this.getC("btnRefresh")},e.prototype.initBtn=function(){this.initBackBtn(),this.initGoldBtn(),this.initCardBtn(),this.initWoodBtn(),this.initSilverBtn(),this.initKingBtn(),this.initFastBtn(),this.initRefreshBtn()},e.prototype.initFastBtn=function(){var t=this;cc.sys.platform==c.PlatformTypeEnum.HUAWEI_GAME&&0==l.default.adMgr.isHuaweiRewardReady()&&(this.btnFast.active=!1),l.default.onClick(this.btnFast,function(){var e={title:"Speed-up",content:"Watch Ads\n Shorten 2H to get Precious Chest.",tips:"",sureCallback:function(){l.default.adMgr.show({adType:c.AdTypeEnum.ShopFast,callback:function(e){e&&(l.default.shopMgr.reduceGoodCD(p.ShopGoodEnum.GoldCoin,7200),l.default.shopMgr.reduceGoodCD(p.ShopGoodEnum.RandomCard,7200),t.refreshGoldTime(),t.refreshCardTime())},errorCallback:null,timeout:3})},cancelCallBack:null,isNeedAd:!0};l.default.viewMgr.showUI(y.UI.CONFIRM_VIEW,t,e)})},e.prototype.initRefreshBtn=function(){var t=this;cc.sys.platform==c.PlatformTypeEnum.HUAWEI_GAME&&0==l.default.adMgr.isHuaweiRewardReady()&&(this.btnRefresh.active=!1),l.default.onClick(this.btnRefresh,function(){var e={title:"Refresh",content:"Watch Ads\n Free to claim Precious Chest",tips:"",sureCallback:function(){l.default.adMgr.show({adType:c.AdTypeEnum.ShopRefresh,callback:function(e){e&&(l.default.shopMgr.setGoodRealGet(p.ShopGoodEnum.WoodReward,!0),l.default.shopMgr.setGoodRealGet(p.ShopGoodEnum.SilverReward,!0),t.refreshWoodPrice(),t.refreshSilverPrice())},errorCallback:null,timeout:3})},cancelCallBack:null,isNeedAd:!0};cc.sys.platform==c.PlatformTypeEnum.WECHAT_GAME&&l.default.adMgr.showBanner(),l.default.viewMgr.showUI(y.UI.CONFIRM_VIEW,t,e)})},e.prototype.initBackBtn=function(){var t=this;this.btnBack=this.getC("btnBack"),l.default.onClick(this.btnBack,function(){t.closeSelf(),cc.sys.platform==c.PlatformTypeEnum.WECHAT_GAME&&l.default.adMgr.hideBanner()})},e.prototype.initGoldBtn=function(){var t=this,e=this.seekC(this.imgGold,"btnGet"),i=this.seekC(this.imgGold,"btnWait"),n=l.default.getTime(),o=l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.GoldCoin).cooldownAt-n;if(l.default.onClick(e,function(){l.default.shopMgr.realBuyGood(p.ShopGoodEnum.GoldCoin),t.refreshGoldTime()}),l.default.onClick(i,function(){h.default.showTips("CD,please be patient!")}),o<=0)e.active=!0,i.active=!1;else{e.active=!1,i.active=!0;var r=this.seekC(i,"labTime"),a=Math.floor(o/3600),s=Math.floor(o%3600/60),c=Math.ceil(o%60);r.getComponent(cc.Label).string=a+":"+s+":"+c}},e.prototype.initCardBtn=function(){var t=this,e=this.seekC(this.imgCard,"btnGet"),i=this.seekC(this.imgCard,"btnWait"),n=l.default.getTime(),o=l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.RandomCard).cooldownAt-n;if(l.default.onClick(e,function(){l.default.shopMgr.realBuyGood(p.ShopGoodEnum.RandomCard),t.refreshCardTime()}),l.default.onClick(i,function(){h.default.showTips("CD,please be patient!")}),o<=0)e.active=!0,i.active=!1;else{e.active=!1,i.active=!0;var r=this.seekC(i,"labTime"),a=Math.floor(o/3600),s=Math.floor(o%3600/60),c=Math.ceil(o%60);r.getComponent(cc.Label).string=a+":"+s+":"+c}},e.prototype.initWoodBtn=function(){var t=this,e=this.seekC(this.imgWoodReward,"btnGet"),i=this.seekC(e,"labNum"),n=this.seekC(this.imgWoodReward,"btnRealGet");l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.WoodReward).isRealGet?(n.active=!0,e.active=!1):(e.active=!0,n.active=!1),l.default.onClick(e,function(){l.default.shopMgr.buyGood(p.ShopGoodEnum.WoodReward)==u.ErrorEnum.ShopItemNotEnought&&h.default.showTips("Insufficient coin"),t.refreshWoodPrice()}),l.default.onClick(n,function(){l.default.shopMgr.realBuyGood(p.ShopGoodEnum.WoodReward),l.default.shopMgr.setGoodRealGet(p.ShopGoodEnum.WoodReward,!1),t.refreshWoodPrice()});var o=l.default.shopMgr.getBuyPrice(p.ShopGoodEnum.WoodReward);i.getComponent(cc.Label).string=String(o)},e.prototype.initSilverBtn=function(){var t=this,e=this.seekC(this.imgSilverReward,"btnGet"),i=this.seekC(e,"labNum"),n=this.seekC(this.imgSilverReward,"btnRealGet");l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.SilverReward).isRealGet?(n.active=!0,e.active=!1):(e.active=!0,n.active=!1),l.default.onClick(e,function(){l.default.shopMgr.buyGood(p.ShopGoodEnum.SilverReward)==u.ErrorEnum.ShopItemNotEnought&&h.default.showTips("Insufficient diamond"),t.refreshSilverPrice()}),l.default.onClick(n,function(){l.default.shopMgr.realBuyGood(p.ShopGoodEnum.SilverReward),l.default.shopMgr.setGoodRealGet(p.ShopGoodEnum.SilverReward,!1),t.refreshSilverPrice()});var o=l.default.shopMgr.getBuyPrice(p.ShopGoodEnum.SilverReward);i.getComponent(cc.Label).string=String(o)},e.prototype.initKingBtn=function(){var t=this,e=this.seekC(this.imgKingReward,"btnGet"),i=this.seekC(this.imgKingReward,"btnWait"),n=l.default.getTime(),o=l.default.shopMgr.getPurchasedInfo(p.ShopGoodEnum.KingReward).cooldownAt-n;if(cc.sys.platform==c.PlatformTypeEnum.HUAWEI_GAME&&0==l.default.adMgr.isHuaweiRewardReady()&&(e.active=!1),l.default.onClick(e,function(){l.default.adMgr.show({adType:c.AdTypeEnum.KingBox,callback:function(e){e&&(l.default.shopMgr.buyGood(p.ShopGoodEnum.KingReward),t.refreshKingTime())},errorCallback:null,timeout:3}),t.refreshKingTime()}),l.default.onClick(i,function(){h.default.showTips("CD,please be patient!")}),o<=0)e.active=!0,i.active=!1;else{e.active=!1,i.active=!0;var r=Math.floor(o/3600),a=Math.floor(o%3600/60),s=Math.ceil(o%60);this.labKing.getComponent(cc.Label).string=r+":"+a+":"+s}},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.onAdaptUI=function(){d.default.adaptSize2Winsize(this.imgBg),d.default.adaptSize2Winsize(this.cardBg1),d.default.adaptNodeToTop(this.cardBg2),d.default.adaptNodeToBottom(this.cardBg3),d.default.adaptNodeToTop(this.btnBack,50)},e.prototype.onDestroy=function(){},s([v],e)}(f.default));r.default=_,cc._RF.pop()},{}],ComShouQMain:[function(t,e,i){"use strict";cc._RF.push(e,"f4860mEDeBOw4IWgCeUnPAP","ComShouQMain");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BagConst"),u=o("AdaptUtils"),p=o("BaseView"),d=o("UI"),h=cc._decorator.ccclass,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCollect=null,e.isAddMy=null,e}return a(e,t),e.prototype.onLoad=function(){this.initData(),this.initBtn()},e.prototype.initBtn=function(){var t=this,e=this.getC("btnCollect");this.isCollect?e.getComponent(cc.Button).interactable=!1:l.default.onClick(e,function(){l.default.sdkMgr.saveDesktop(function(){l.default.bagMgr.addItemList([[2,328]],c.BagSourceEnum.AddCollect),l.default.viewMgr.showUI(d.UI.COMMONREWARD_VIEW,[[2,328]]),l.default.roleServer.addCollect(),t.changeBtnCollect()})});var i=this.getC("btnMy");l.default.onClick(i,function(){l.default.viewMgr.showUI(d.UI.HALL_SHOUQMY)});var n=this.getC("btnClose");l.default.onClick(n,function(){t.closeSelf()})},e.prototype.initData=function(){this.isCollect=l.default.roleServer.isCollect(),this.isAddMy=l.default.roleServer.isAddMy()},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.changeBtnCollect=function(){this.getC("btnCollect").getComponent(cc.Button).interactable=!1},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");u.default.adaptSize2Winsize(t)},s([h],e)}(p.default);r.default=f,cc._RF.pop()},{}],ComShouQMy:[function(t,e,i){"use strict";cc._RF.push(e,"58fc1uGJjNO24ZKXpLBDqm+","ComShouQMy");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BagConst"),u=o("AdaptUtils"),p=o("BaseView"),d=o("UI"),h=cc._decorator.ccclass,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneId=null,e}return a(e,t),e.prototype.onLoad=function(){this.initData()},e.prototype.initData=function(){this.sceneId=l.default.sdkMgr.getSceneId()},e.prototype.start=function(){this.initBtn(),t.prototype.start.call(this)},e.prototype.initBtn=function(){var t=this,e=this.getC("btnGet");2003==this.sceneId?l.default.onClick(e,function(){l.default.bagMgr.addItemList([[2,328]],c.BagSourceEnum.AddCollect),l.default.viewMgr.showUI(d.UI.COMMONREWARD_VIEW,[[2,328]]),l.default.roleServer.addMy(),t.closeSelf()}):e.getComponent(cc.Button).interactable=!1;var i=this.getC("btnClose");l.default.onClick(i,function(){t.closeSelf()})},e.prototype.changeBtnCollect=function(){this.getC("btnGet").getComponent(cc.Button).interactable=!1},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");u.default.adaptSize2Winsize(t)},s([h],e)}(p.default);r.default=f,cc._RF.pop()},{}],ComSigninView:[function(t,e,i){"use strict";cc._RF.push(e,"81593cpPX9FmrnbpbUAl0dO","ComSigninView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,c=o("AdVideoOPPO"),u=o("App"),p=o("BagConst"),d=o("CommonConst"),h=o("ActionUtils"),f=o("AdaptUtils"),g=o("LoggerUtils"),y=o("NodeUtils"),m=o("BaseView"),v=o("Tbl"),_=o("UI"),C=o("ComIconInSign"),b=cc._decorator.ccclass;(function(t){t[t.DayOne=1]="DayOne",t[t.DayTwo=2]="DayTwo",t[t.DayThree=3]="DayThree",t[t.DayFour=4]="DayFour",t[t.DayFive=5]="DayFive",t[t.DaySix=6]="DaySix",t[t.DaySeven=7]="DaySeven",t[t.HugeReward=8]="HugeReward"})(l||(l={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxList=[],e.hugeReward=null,e.layoutDesc=null,e}return a(e,t),e.prototype.onLoad=function(){this.initData(),this.initUI(),this.addEventListener()},e.prototype.addEventListener=function(){},e.prototype.initData=function(){},e.prototype.initUI=function(){this.hugeReward=this.getC("hugeReward"),this.layoutDesc=this.getC("layoutDesc"),this.initHugeReward(),this.initBoxList(),this.initSprBg()},e.prototype.initSprBg=function(){var t=this,e=this.getC("sprBg");u.default.onClick(e,function(){1==t.layoutDesc.active&&(t.layoutDesc.active=!1)})},e.prototype.initHugeReward=function(){var t=this,e=this.getC("nodeKey"),i=this.seekC(e,"labNum"),n=u.default.roleServer.getSigninKeyNum();this.setString(i,n+"/7"),u.default.offClick(this.hugeReward.getComponent(cc.Button)),n>=7?(this.hugeReward.getComponent(sp.Skeleton).setAnimation(0,"play_click",!0),u.default.onClick(this.hugeReward,function(){var e=t.hugeReward.getComponent(sp.Skeleton);e.setAnimation(0,"play_open",!1),e.setCompleteListener(function(e){if("play_open"==e.animation.name){var i=v.default.SigninRewardTable.findById(l.HugeReward).rewards;u.default.bagMgr.addItemList(i,p.BagSourceEnum.SigninReward),u.default.roleServer.getHugeReward(),t.initHugeReward(),u.default.viewMgr.showUI(_.UI.COMMONREWARD_VIEW,i)}})})):this.hugeReward.getComponent(sp.Skeleton).setAnimation(0,"play_idle",!0)},e.prototype.initBoxList=function(){for(var t=this,e=u.default.roleServer.getSigninCount(),i=function(i){var o=n.getC("box"+i);u.default.offClick(o.getComponent(cc.Button));var r=n.seekC(o,"imgHadGet"),a=n.seekC(o,"imgUnget"),s=n.seekC(o,"imgGet");r.active=!1,a.active=!1,s.active=!1,n.boxList.push(o),u.default.roleServer.isSignin()?i<=e?r.active=!0:(a.active=!0,u.default.onClick(o,function(){t.showBoxItemByIndex(i)})):i<=e?r.active=!0:i==e+1?(s.active=!0,u.default.onClick(o,function(){t.showBoxItemByIndex(i)})):(a.active=!0,u.default.onClick(o,function(){t.showBoxItemByIndex(i)}))},n=this,o=1;o<=7;o++)i(o)},e.prototype.refreshSingleBoxByGet=function(){var t=u.default.roleServer.getSigninCount(),e=this.boxList[t-1],i=this.seekC(e,"imgGet"),n=this.seekC(e,"imgHadGet");i.active=!1,n.active=!0,u.default.offClick(e.getComponent(cc.Button))},e.prototype.showBoxItemByIndex=function(t){var e=this;this.layoutDesc.active=!0,this.layoutDesc.scaleX=Math.abs(this.layoutDesc.scaleX),this.layoutDesc.scale=.5,this.layoutDesc.stopAllActions(),h.default.sequence(this.node,1/30,function(){if(y.default.getWorldPos(e.layoutDesc).x+e.layoutDesc.width>cc.winSize.width){cc.tween(e.layoutDesc).to(.4,{scaleX:-1.5,scaleY:1.5},{easing:"backOut"}).start();for(var t=0;t<e.layoutDesc.childrenCount;t++)e.layoutDesc.children[t].scaleX=-1*Math.abs(e.layoutDesc.children[t].scaleX)}else{cc.tween(e.layoutDesc).to(.4,{scale:1.5,scaleY:1.5},{easing:"backOut"}).start();for(var i=0;i<e.layoutDesc.childrenCount;i++)e.layoutDesc.children[i].scaleX=Math.abs(e.layoutDesc.children[i].scaleX)}});var i=this.boxList[t-1];this.layoutDesc.parent=i,y.default.destroyAllChildren(this.layoutDesc);for(var n=v.default.SigninRewardTable.findById(t).rewards,o=this.seekC(this.layoutDesc,"ComIconInSign"),r=0;r<n.length;r++){var a=cc.instantiate(o);a.parent=this.layoutDesc,a.active=!0,a.getComponent(C.default).initialize(n[r][0],n[r][1])}},e.prototype.start=function(){this.initBtn(),t.prototype.start.call(this),cc.sys.platform==d.PlatformTypeEnum.OPPO_GAME?u.default.adMgr.showBanner(c.OPPOAdUnitIdEnum.Banner_Signin):cc.sys.platform==d.PlatformTypeEnum.VIVO_GAME?u.default.adMgr.createNativeBannerAd():cc.sys.platform==d.PlatformTypeEnum.HUAWEI_GAME&&u.default.adMgr.showBanner()},e.prototype.initBtn=function(){this.initBtnClose(),this.initBtnTrible(),this.initBtnGet()},e.prototype.initBtnClose=function(){var t=this,e=this.getC("btnClose");u.default.onClick(e,function(){t.closeSelf()})},e.prototype.initBtnTrible=function(){var t=this,e=this.getC("btnTrible");if(u.default.roleServer.isSignin()){e.getComponent(cc.Button).interactable=!1;var i=this.seekC(e,"img1"),n=this.seekC(e,"lab1");i.active=!1,this.setString(n,"Claimed"),n.x=0}else cc.sys.platform==d.PlatformTypeEnum.HUAWEI_GAME&&0==u.default.adMgr.isHuaweiRewardReady()&&(e.active=!1),u.default.onClick(e,function(){t.setTouchable(!1);var i=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),i?MiniGameAds.showRewardedVideo().then(function(){if(console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),t.setTouchable(!0),e)if(u.default.roleServer.addSighinCount()){for(var i=u.default.roleServer.getSigninCount(),n=v.default.SigninRewardTable.findById(i).rewards,o=[],r=0;r<n.length;r++)n[r][0]&&o.push([n[r][0],3*n[r][1]]);for(r=0;r<3;r++)u.default.bagMgr.addItemList(n,p.BagSourceEnum.SigninReward);u.default.viewMgr.showUI(_.UI.COMMONREWARD_VIEW,o),t.closeSelf()}else g.default.error("\u4e0d\u80fd\u7b7e\u5230\uff0c\u4f46\u662f\u7b7e\u5230\u6309\u94ae\u4eae\u4e86\uff0c\u6709\u95ee\u9898")}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),cc.audioEngine.resumeMusic(),t.setTouchable(!0)}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic(),t.setTouchable(!0)),t.setTouchable(!0)})},e.prototype.initBtnGet=function(){var t=this,e=this.getC("btnGet");u.default.roleServer.isSignin()?e.active=!1:u.default.onClick(e,function(){if(u.default.roleServer.addSighinCount()){var e=u.default.roleServer.getSigninCount(),i=v.default.SigninRewardTable.findById(e).rewards;u.default.bagMgr.addItemList(i,p.BagSourceEnum.SigninReward),u.default.viewMgr.showUI(_.UI.COMMONREWARD_VIEW,i),t.closeSelf()}else g.default.error("\u4e0d\u80fd\u7b7e\u5230\uff0c\u4f46\u662f\u7b7e\u5230\u6309\u94ae\u4eae\u4e86\uff0c\u6709\u95ee\u9898")})},e.prototype.refreshAfterReward=function(){this.initHugeReward(),this.refreshSingleBoxByGet(),this.initBtnTrible(),this.initBtnGet()},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");f.default.adaptSize2Winsize(t);var e=this.getC("topView");f.default.adaptNodeToTopInsideSafeArea(e)},e.prototype.onDestroy=function(){cc.sys.platform==d.PlatformTypeEnum.OPPO_GAME&&u.default.adMgr.showBanner(c.OPPOAdUnitIdEnum.Banner_Battle),t.prototype.onDestroy.call(this)},s([b],e)}(m.default);r.default=S,cc._RF.pop()},{}],ComSkillBtn:[function(t,e,i){"use strict";cc._RF.push(e,"928f5hjTllPy6wZSpkeoUj9","ComSkillBtn");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=cc._decorator,u=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickShowImg=null,e._objHero=null,e._skillIndex=0,e._bindingSkill=null,e.imgCd=null,e.comImgCd=null,e.imgClickEffect=null,e.labCd=null,e.activeCount=0,e}return a(e,t),e.prototype.initialize=function(t,e,i){this._skillIndex=t,this._objHero=e,this._bindingSkill=i},e.prototype.onLoad=function(){this.imgCd=this.getC("imgCd"),this.imgClickEffect=this.getC("imgClickEffect"),this.comImgCd=this.imgCd.getComponent(cc.Sprite),this.labCd=this.getC("labCd"),this.labCd.active=!1},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.showClickEffect=function(){1!=this.labCd.active&&(this.imgClickEffect.active=!0,this.imgClickEffect.scale=1.2,cc.tween(this.imgClickEffect).to(.2,{scale:.2}).start())},e.prototype.onTick=function(t){var e=Math.ceil(this._bindingSkill.getSkillRestCd());if(0!=e){this.activeCount=0,this.labCd.active=!0;var i=this._bindingSkill.getSkillRestPercent();this.labCd.getComponent(cc.Label).string=String(e),this.comImgCd.fillRange=i}else this.comImgCd.fillRange=0,this.labCd.active=!1,this.activeCount+=t,this.activeCount>=5&&(this.btnBreath(),this.activeCount=0)},e.prototype.btnBreath=function(){cc.tween(this.node).to(.25,{scale:1.44}).to(.25,{scale:1.2}).to(.25,{scale:1.44}).to(.25,{scale:1.2}).start()},s([u],e)}(l.default));r.default=p,cc._RF.pop()},{}],ComSkillIcon:[function(t,e,i){"use strict";cc._RF.push(e,"1106eY2mxtHlawZ8hz6ScKa","ComSkillIcon");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("BagConst"),p=o("ColorUtils"),d=o("SpriteFrameUtils"),h=o("Tbl"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconBgList=[],e._itemId=0,e}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.refresh()},e.prototype.initialize=function(t,e){this._itemId=t,l.default.onClick(this.node,function(){e(t)}),this.refresh()},e.prototype.setTouchEnable=function(t){this.node.getComponent(cc.Button).enabled=!!t},e.prototype.refresh=function(){var t=this.getC("sprIcon"),e=this.getC("labName"),i=this.getC("sprBg");if(null!=t&&null!=e){var n=h.default.ItemTable.findById(this._itemId);n&&(e.getComponent(cc.Label).string=n.name,t.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame("icon2/"+n.icon),n.stampType==u.ItemStampType.Mini?(d.default.setSpriteFrame(i,this.iconBgList[0]),e.color=p.default.StampMiniColor):n.stampType==u.ItemStampType.Big?(d.default.setSpriteFrame(i,this.iconBgList[1]),e.color=p.default.StampBigColor):n.stampType==u.ItemStampType.God&&(d.default.setSpriteFrame(i,this.iconBgList[2]),e.color=p.default.StampGodColor))}},s([y([cc.SpriteFrame])],e.prototype,"iconBgList",void 0),s([g],e)}(c.default);r.default=m,cc._RF.pop()},{}],ComSkillSelect:[function(t,e,i){"use strict";cc._RF.push(e,"921bfevLsJB2L7myjrWwZme","ComSkillSelect");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("CombatConst"),p=o("ItemUtils"),d=o("SpineUtils"),h=o("Tbl"),f=o("ENUMS"),g=cc._decorator,y=g.ccclass,m=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._itemId=0,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.refresh()},e.prototype.initialize=function(t,e){this._itemId=t,l.default.onClick(this.node,function(){e(t)}),this.refresh()},e.prototype.showLight=function(t){t&&d.default.playSpineOnce(82,this.node)},e.prototype.setTouchEnable=function(t){this.node.getComponent(cc.Button).enabled=!!t},e.prototype.refresh=function(){var t=this.getC("sprIcon"),e=this.getC("labName"),i=this.getC("sprBg11"),n=this.getC("sprBg12"),o=this.getC("sprBg21"),r=this.getC("sprBg22"),a=this.getC("sprGod");if(a.active=!1,null!=t&&null!=e){var s=h.default.ItemTable.findById(this._itemId);if(s){e.getComponent(cc.Label).string=s.name,t.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame("icon2/"+s.icon),s.level==f.ItemLevelEnum.Middle||s.level==f.ItemLevelEnum.Big||s.level==f.ItemLevelEnum.Final?(i.active=!1,n.active=!1,o.active=!0,r.active=!1):(i.active=!0,n.active=!1,o.active=!1,r.active=!1);var c=p.default.getItemVO(this._itemId);a.active=c.isShowGod==u.StdBool.True}}},s([y],e)}(c.default));r.default=m,cc._RF.pop()},{}],ComSkin:[function(t,e,i){"use strict";cc._RF.push(e,"e511ekIJpVEMpdgs1tV7jVI","ComSkin");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tbl"),c=o("SkillConst"),u=o("LoggerUtils"),p=o("SpineUtils"),d=o("ComSpine"),h=o("RES"),f=o("ResMgr"),g=o("App"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._skin=null,e._comSpine=null,e._curAnimationName=null,e._originTimeScale=1,e._objbase=null,e.compleCallBack=null,e._curSkinName=null,e}var i;return a(e,t),i=e,e.prototype.onLoad=function(){this._isFlipX=!1},e.prototype.init=function(t){this._objbase=t},e.prototype.initWithResId=function(t){if(t){var e=l.default.ClientTable.findById(t);if(e){var n=g.default.nodePoolMgr.getNodeByPool(t,this.node);n?(n.parent=this.node,this._skin=n,this._comSpine=this._skin.getComponent(d.default)):(this._skin=i.createSkin(e,this.node),this._comSpine=this._skin.getComponent(d.default))}else u.default.error("ComSkin resVO == null,resId == ",t)}else u.default.error("ComSkin resId == null")},e.createSkin=function(t,e){if(t.resType==c.ResourceTypeEnum.PlistSpine){var i=t.param1,n=t.param2,o=t.param3,r=h.ClientRes[i],a=h.ClientRes[n],s=h.ClientRes[o],l=s.url.lastIndexOf("/")+1,y={skeUrl:r.url,atlasUrl:a.url,imageUrl:s.url,textureName:s.url.substr(l)+".png",isEnableBatch:!0,isRetainImage:!0,isRetainText:!0};return p.default.createSpine(t.id,y,function(i){var n=i.getComponent("ComSpine");n.setPremultipliedAlpha(!1),e.addChild(i,null,"skin"),t.scale&&(i.scale=t.scale),t.offset&&(i.x=t.offset[0],i.y=t.offset[1]),n.play(0,t.defaultAni,!0)})}if(t.resType==c.ResourceTypeEnum.DirSpine)return p.default.createDirSpine(t.id,function(i){var n=i.getComponent(d.default);n.setPremultipliedAlpha(!1),e.addChild(i,null,"skin"),t.scale&&(i.scale=t.scale),t.offset&&(i.x=t.offset[0],i.y=t.offset[1]),n.play(0,t.defaultAni,!0)});if(t.resType==c.ResourceTypeEnum.PngRes){var m=new cc.Node("");e.addChild(m,null,"skin");var v=m.addComponent(cc.Sprite),_=t.param1,C=h.ClientRes[_];return m.setAnchorPoint(.5,0),t.scale&&(m.scale=t.scale),t.offset&&(m.x=t.offset[0],m.y=t.offset[1]),f.default.getInstance().load(C.url,C.type,!1,function(t,e){v.spriteFrame=e}),m}if(t.resType==c.ResourceTypeEnum.Prefab){var b=g.default.resMgr.getPrefab(h.ClientRes[t.id].url),S=(m=cc.instantiate(b)).addComponent("ComSpine");return S.setComSke(m.getComponent(sp.Skeleton)),e.addChild(m,null,"skin"),t.scale&&(m.scale=t.scale),t.offset&&(m.x=t.offset[0],m.y=t.offset[1]),S.play(0,"play",!0),m}return u.default.error("ComSkin \u521b\u5efa\u76ae\u80a4\u7684\u8d44\u6e90\u7c7b\u578b\u9519\u8bef:%d",t.id),null},e.prototype.initByTest=function(){var t=new cc.Node("");this.node.addChild(t,null,"skin");var e=t.addComponent(cc.Sprite);t.setAnchorPoint(.5,0),f.default.getInstance().load("atlas/bg/cao",cc.SpriteFrame,!1,function(t,i){e.spriteFrame=i})},e.prototype.setStartListener=function(t){this._comSpine.setStartListener(t)},e.prototype.setCompleteListener=function(t){this._comSpine.setCompleteListener(t)},e.prototype.setEndListener=function(t){this._comSpine.setEndListener(t)},e.prototype.setEventListener=function(t){this._comSpine.setEventListener(t)},e.prototype.setInterruptListener=function(t){this._comSpine.setInterruptListener(t)},e.prototype.setObjSkin=function(t){this._skin=t},e.prototype.setComSpine=function(t){this._comSpine=t},e.prototype.setSkin=function(t){this._curSkinName!=t&&(this._curSkinName=t,this._comSpine.setSkin(t))},e.prototype.playAnimation=function(t,e,i,n,o){void 0===e&&(e=!1),void 0===i&&(i=1),this._comSpine?(this._curAnimationName=t,this._comSpine.setCompleteListener(function(t){o&&o(t)}),this._comSpine.setEventListener(function(t){n&&n(t)}),this._comSpine.setTimeScale(i),this._comSpine.play(0,t,e)):u.default.warn("ComSkin >>>>>>>> 40 this._comSpine = null")},e.prototype.playAnimationByTime=function(t,e,i,n,o){if(void 0===e&&(e=!1),void 0===i&&(i=null),null!=i){var r=this.getAnimationDuration(t)/i;this.playAnimation(t,e,r,n,o)}else this.playAnimation(t,e,null,n,o)},e.prototype.setTimeScale=function(t){this._comSpine.setTimeScale(t)},e.prototype.getAnimationDuration=function(t){return this._comSpine.getAnimationDuration(t)},e.prototype.getCurAnimationName=function(){return this._curAnimationName},e.prototype.filpX=function(t){this._isFlipX!=t&&(this._isFlipX=t,this._skin.scaleX*=-1)},e.prototype.getFlipX=function(){return this._isFlipX},e.prototype.isFlipX=function(){return this._isFlipX},e.prototype.changeSlot=function(t,e,i){var n=this._skin.getComponent(sp.Skeleton),o=n.findSlot(t),r=n.skeletonData.getRuntimeData(),a=r.findSlotIndex(t),s=r.findSkin(i).getAttachment(a,e);o.setAttachment(s)},e.prototype.getBone=function(t){return this._skin.getComponent(sp.Skeleton).findBone(t)},e.prototype.getSkin=function(){return this._skin},e.prototype.pauseAni=function(t){t?(this._originTimeScale=this._comSpine.getTimeScale(),this._comSpine.setTimeScale(0)):this._comSpine.setTimeScale(this._originTimeScale)},i=s([m],e)}(cc.Component));r.default=v,cc._RF.pop()},{}],ComSlotPnl:[function(t,e,i){"use strict";cc._RF.push(e,"b4699XmDGhCj6G2trcS1lp8","ComSlotPnl");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("LoggerUtils"),u=o("CCEvent"),p=o("ComCardSlotNew"),d=cc._decorator,h=d.ccclass,f=d.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slots=[],e.autoIndex=10,e}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.addEventListener(),this.initSlot()},e.prototype.addEventListener=function(){this.eventOn(u.default.CARD_CLICK_CARD,this.handlerClickCard,this),this.eventOn(u.default.CARD_REMOVE_SLOT_CARD,this.handlerRemoveSlotCard,this),this.eventOn(u.default.CARD_ADD_SLOT_CARD,this.handlerAddSlotCard,this)},e.prototype.refresh=function(){for(var t=0;t<this.slots.length;t++)this.slots[t].getComponentInChildren(p.default).refresh()},e.prototype.initSlot=function(){for(var t=1;t<=8;t++){var e=this.getC("slot"+t);this.slots.push(e);var i=cc.instantiate(this.ComCardSlotNewP);i.parent=e;var n=i.getComponent(p.default);null==n?c.default.error("ComSlotPnl start com == null"):n.initialize(t)}},e.prototype.handlerRemoveSlotCard=function(){this.refresh()},e.prototype.handlerAddSlotCard=function(){this.refresh()},e.prototype.handlerClickCard=function(t){this.letCardSlotMaxZIndex(t)},e.prototype.letCardSlotMaxZIndex=function(t){for(var e=0;e<this.slots.length;e++){var i=this.slots[e];if(i.getComponentInChildren(p.default).getCardId()==t)return void(i.zIndex=this.autoIndex++)}},s([f(cc.Prefab)],e.prototype,"ComCardSlotNewP",void 0),s([h],e)}(l.default);r.default=g,cc._RF.pop()},{}],ComSpine:[function(t,e,i){"use strict";cc._RF.push(e,"3473ctUdPVLG4vkTRt26lWf","ComSpine");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("LoggerUtils"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniNames=[],e}return a(e,t),e.prototype.init=function(t,e){this.comSke=this.node.addComponent(sp.Skeleton),this.comSke.enableBatch=!0;var i=t.skeUrl,n=t.imageUrl,o=t.atlasUrl,r=l.default.resMgr.getTexture2D(n),a=l.default.resMgr.get(i,sp.SkeletonData),s=l.default.resMgr.getTextAsset(o);null==r&&c.default.error("ComSpine texture2D = null ,image =",n),null==a&&c.default.error("ComSpine skeletonJson = null,ske =  ",i),null==s&&c.default.error("ComSpine file = null ,atlas = ",o);var u=new sp.SkeletonData;u.skeletonJson=a,u.atlasText=s.text,u.textures=[r],u.textureNames=[t.textureName],this.comSke.skeletonData=u,this.initAniNames(),e()},e.prototype.initWithNode=function(t){this.comSke=this.node.getComponent(sp.Skeleton),this.initAniNames(),t&&t(this.node,this)},e.prototype.initAniNames=function(){for(var t=this.comSke.skeletonData.getRuntimeData().animations,e=0;e<t.length;e++){var i=t[e];this.aniNames[e]=i.name}},e.prototype.initWithDir=function(t,e){cc.resources.load(t,function(t,i){if(t)c.default.error("error = ",t);else{var n=cc.instantiate(i);e(n)}})},e.prototype.setComSke=function(t){this.comSke=t,this.initAniNames()},e.prototype.getComSke=function(){return this.comSke},e.prototype.setSkin=function(t){this.comSke.setSkin(t)},e.prototype.getSke=function(){return this.comSke},e.prototype.getAnimationDuration=function(t){for(var e=this.comSke.skeletonData.getRuntimeData().animations,i=0;i<e.length;i++){var n=e[i];if(n.name==t)return n.duration}return 0},e.prototype.play=function(t,e,i){if(-1!=this.aniNames.indexOf(e))return this.comSke.setAnimation(t,e,i)},e.prototype.addAnimation=function(t,e,i){if(-1!=this.aniNames.indexOf(e))return this.comSke.addAnimation(t,e,i);console.error("Dont get this ani, name = %s",e),c.default.warn("ComSpine >>>>>>>> 122 this.aniNames = ",this.aniNames)},e.prototype.getTimeScale=function(){return this.comSke.timeScale},e.prototype.setTimeScale=function(t){this.comSke.timeScale=t},e.prototype.setStartListener=function(t){this.comSke.setStartListener(t)},e.prototype.setCompleteListener=function(t){this.comSke.setCompleteListener(t)},e.prototype.setEndListener=function(t){this.comSke.setEndListener(t)},e.prototype.setEventListener=function(t){this.comSke.setEventListener(t)},e.prototype.setInterruptListener=function(t){this.comSke.setInterruptListener(t)},e.prototype.setPremultipliedAlpha=function(t){this.comSke.premultipliedAlpha=t},e.prototype.isCurAnimationName=function(t){return this.comSke.animation===t},s([p],e)}(cc.Component));r.default=d,cc._RF.pop()},{}],ComTaskIcon:[function(t,e,i){"use strict";cc._RF.push(e,"f7f78ygnsJBb7tszgmVUGuZ","ComTaskIcon");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ItemUtils"),p=o("MathUtils"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this.initUI()},e.prototype.initUI=function(){this.icon=this.getC("Icon"),this.labNum=this.getC("labNum")},e.prototype.start=function(){},e.prototype.initialize=function(t,e){t&&e?(this.itemId=Number(t),this.amount=Number(e),this.initIcon()):console.error("Icon\u521d\u59cb\u5316\u5931\u8d25\uff0citemId: %s, amount: %s",t,e)},e.prototype.initIcon=function(){this.icon.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame(u.default.getItemReportIconPath(this.itemId)),this.labNum.getComponent(cc.Label).string=""+p.default.numToBigNum(this.amount),this.node.getComponent(cc.Sprite).spriteFrame=l.default.resMgr.getSpriteFrame(u.default.getItemReportBgPath(this.itemId))},e.prototype.onDestroy=function(){},s([h],e)}(c.default));r.default=f,cc._RF.pop()},{}],ComTipsWord:[function(t,e,i){"use strict";cc._RF.push(e,"a3abdobffFCtrdKfqSQyTnP","ComTipsWord");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("ActionUtils"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._str=null,e}return a(e,t),e.prototype.initialize=function(t){this._str=t},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.sprBg=this.getC("sprBg"),this.labWord=this.getC("labWord"),this.labWord.getComponent(cc.RichText).string=this._str,this.node.runAction(cc.sequence(cc.delayTime(1/60),cc.callFunc(function(){e.sprBg.height=e.labWord.height+40,e.sprBg.width=e.labWord.width+40})));var i=cc.spawn(cc.moveBy(.5,cc.v2(0,50)),cc.fadeOut(.5));c.default.sequence(this.node,cc.moveBy(1,cc.v2(0,100)),i,function(){e.node.destroy()})},s([p],e)}(l.default));r.default=d,cc._RF.pop()},{}],ComTouchMove:[function(t,e,i){"use strict";cc._RF.push(e,"2a4d1ID8uhOFqq6793PK2v2","ComTouchMove");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CCEvent"),c=o("LevelServer"),u=o("NodeUtils"),p=o("BaseComponent"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._scene=null,e}return a(e,t),e.prototype.onLoad=function(){var t=this;u.default.setWorldPos(this.node,0,0),this.node.setContentSize(cc.size(2e3,4e3)),this.node.on(cc.Node.EventType.TOUCH_START,function(e){var i=e.getLocation();t.firstPos=i,t.lastPosY=t.firstPos.y,c.default.getInstance().lockSaveInfo(!0)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var i=e.getLocation(),n=i.sub(t.firstPos);n.x>0?t.leftRight="right":n.x<0&&(t.leftRight="left"),i.y-t.lastPosY>10?(t.emit(l.default.HERO_JUMP),t.lastPosY=i.y):i.y-t.lastPosY<-10?(t.emit(l.default.HERO_FALL),t.lastPosY=i.y):t.lastPosY=i.y},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){t.leftRight="",c.default.getInstance().lockSaveInfo(!1)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.leftRight="",c.default.getInstance().lockSaveInfo(!1)},this)},e.prototype.setScene=function(t){this._scene=t},s([h],e)}(p.default));r.default=f,cc._RF.pop()},{}],ComUIBattle:[function(t,e,i){"use strict";cc._RF.push(e,"ace89YaVo9KhZmBoH5yzFCs","ComUIBattle");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("AudioMgr"),u=o("GuideMgr"),p=o("ActionUtils"),d=o("AdaptUtils"),h=o("GlobalUtils"),f=o("MathUtils"),g=o("NodeUtils"),y=o("SpineUtils"),m=o("SpriteFrameUtils"),v=o("BaseView"),_=o("Tbl"),C=o("CCEvent"),b=o("UI"),S=o("ComSkillBtn"),O=cc._decorator,E=O.ccclass,I=O.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cashNum=null,e.diamondNum=null,e.btnPause=null,e.levelString=null,e._scene=null,e.comSkillBtnList=[],e.remainMonsterVal=null,e}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.initData(),this.initTestUI(),this.initBtnJump(),this.addEventListener(),this.initBtnPause(),this.updateGold(),this.updateDiamond(),this.updateLevelInfo(),this.onMonsterChange(),this.initOpacity()},e.prototype.initOpacity=function(){},e.prototype.addEventListener=function(){this.eventOn(C.default.LEVEL_FINISH,this.handlerLevelFinish,this),this.eventOn(C.default.SHOW_VIEW,this.handlerShowView,this),this.eventOn(C.default.CLOSE_VIEW,this.handlerCloseView,this),this.eventOn(C.default.HERO_DEAD,this.handlerHeroDead,this),this.eventOn(C.default.HERO_REBORN,this.handlerHeroReborn,this)},e.prototype.handlerHeroDead=function(){this.setTouchable(!1)},e.prototype.handlerHeroReborn=function(){this.setTouchable(!0)},e.prototype.addInitiativeSkillIcon=function(t){var e="BtnInitiative"+l.default.roleServer.getInitiativeSkillList(),i=this.getC(e);i.active=!0,this.seekC(i,"img1").getComponent(cc.Sprite).spriteFrame=m.default.getSkillIconSpriteFrame(t.getSkillId()),y.default.playSpineOnce(147,i).getComponent(sp.Skeleton).setCompleteListener(function(){i.active=!0})},e.prototype.addInitiativeSkill=function(t,e){var i=this;this.addInitiativeSkillIcon(e);var n="BtnInitiative"+t,o=this.getC(n),r=o.addComponent(S.default);r.initialize(t-1,this._scene.getObjhero(),e),this.comSkillBtnList.push(r),1==t?l.default.onClick(o,function(){r.showClickEffect(),i._scene.getObjhero().useInitiativeSkill(e),i.emit(C.default.GUIDE_CLICK_INITIATIVESKILL)}):l.default.onClick(o,function(){r.showClickEffect(),i._scene.getObjhero().useInitiativeSkill(e)})},e.prototype.initBtnInitiative=function(){var t=this,e=this.getC("BtnInitiative");l.default.onClick(e,function(){t._scene.getObjhero().useInitiativeSkill(0)});var i=this.getC("BtnInitiative1");l.default.onClick(i,function(){t._scene.getObjhero().useInitiativeSkill(1)});var n=this.getC("BtnInitiative2");l.default.onClick(n,function(){t._scene.getObjhero().useInitiativeSkill(2)})},e.prototype.initBtnJump=function(){var t=this,e=this.getC("BtnJump");e.opacity=100,e.on(cc.Node.EventType.TOUCH_START,function(){t._scene.heroJumpByRocker(),l.default.event.emit(C.default.GUIDE_CLICK_JUMP)},this),e.on(cc.Node.EventType.TOUCH_END,function(){},this),e.on(cc.Node.EventType.TOUCH_CANCEL,function(){},this)},e.prototype.handlerShowView=function(t){t==b.UI.GUIDE_VIEW.config.url&&l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuideClickSelectOneSkill)&&this.setTouchable(!0)},e.prototype.handlerCloseView=function(t){t==b.UI.REWARD_SKILL_ONE.config.url||t==b.UI.REWARD_SKILL.config.url?this.checkGuide3():t==b.UI.GUIDE_VIEW.config.url&&(l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuidePlayerMoveHero)&&this.checkGuide4(),l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuidePlayerTouchJumpBtn)&&(this.setTouchable(!0),this.checkGuide5()),l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuidePlayerInitiativeSkill)&&this.setTouchable(!0))},e.prototype.onAdaptUI=function(){var t=this.getC("nodeTop");d.default.adaptNodeToTopInsideSafeArea(t)},e.prototype.initBtnPause=function(){var t=this;l.default.onClick(this.btnPause,function(){t._scene.pauseScene(!0),l.default.audioMgr.playSoundByResId(110),l.default.viewMgr.showUIWithoutSound(b.UI.PAUSE_VIEW,t._scene)})},e.prototype.initData=function(){},e.prototype.initTestUI=function(){this.cashNum=this.getC("cashNum"),this.diamondNum=this.getC("diamondNum"),this.levelString=this.getC("levelString"),this.btnPause=this.getC("btnPause");var t=this.getC("btnTestDemage1"),e=this.getC("btnTestDemage2"),i=this.getC("btnTestDemage3"),n=this.getC("btnTestDemage4"),o=this.getC("testAudioBtnNode");if(h.default.isDebug()){for(var r=function(t){var e=a.getC("btnTestAudio"+t);l.default.onClick(e,function(){1==t?l.default.audioMgr.test_occupySoundResId(7050,7051):2==t?l.default.audioMgr.test_occupySoundResId(7050,7052):3==t?l.default.audioMgr.test_occupySoundResId(7050,7053):4==t?l.default.audioMgr.test_occupySoundResId(7050,7054):5==t?l.default.audioMgr.test_occupySoundResId(7050,7055):6==t?c.default.getInstance().playMusicByResId(7056):7==t?c.default.getInstance().playMusicByResId(7057):8==t?c.default.getInstance().playMusicByResId(7058):9==t?l.default.audioMgr.test_occupySoundResId(7050,7059):10==t?l.default.audioMgr.test_occupySoundResId(7050,7060):11==t?l.default.audioMgr.test_occupySoundResId(7050,7061):12==t&&l.default.audioMgr.test_occupySoundResId(7050,7062)})},a=this,s=1;s<=8;s++)r(s);l.default.onClick(t,function(){l.default.setMulTestDemage(100)}),l.default.onClick(e,function(){l.default.setMulTestDemage(.01)}),l.default.onClick(i,function(){l.default.setMulTestDemage(5)}),l.default.onClick(n,function(){l.default.setMulTestDemage(.2)})}else o.destroy(),t.destroy(),e.destroy(),i.destroy(),n.destroy()},e.prototype.updateGold=function(){var t=l.default.bagMgr.getGoldNum();this.cashNum.getComponent(cc.Label).string=f.default.numToBigNum(t)},e.prototype.updateDiamond=function(){var t=l.default.bagMgr.getDiamondNum();this.diamondNum.getComponent(cc.Label).string=f.default.numToBigNum(t)},e.prototype.updateLevelInfo=function(){var t="Level "+l.default.levelServer.getCurLevel()+"/"+l.default.levelServer.getMaxLevel();this.levelString.getComponent(cc.Label).string=t},e.prototype.setScene=function(t){this._scene=t},e.prototype.onMonsterChange=function(){this.remainMonsterVal.getComponent(cc.Label).string=String(this._scene.getLevelLastMonsterNum())},e.prototype.handlerLevelFinish=function(){this.onMonsterChange()},e.prototype.onTick=function(t){this.updateSkillBtn(t)},e.prototype.updateSkillBtn=function(t){for(var e=0;e<this.comSkillBtnList.length;e++)this.comSkillBtnList[e].onTick(t)},e.prototype.checkGuide3=function(){if(!l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuidePlayerMoveHero)&&l.default.roleServer.isNewHand()){var t=this.getC("nodeAllRock");p.default.sequence(this.node,.5,function(){var e=g.default.getWorldPos(t),i=_.default.GuideWordTable.findById(u.GuideLineEnum.GuidePlayerMoveHero),n=i.name,o=i.word;l.default.viewMgr.showUI(b.UI.GUIDE_VIEW,u.GuideLineEnum.GuidePlayerMoveHero,cc.size(220,220),e,n,o,!0,100)})}},e.prototype.checkGuide4=function(){if(!l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuidePlayerTouchJumpBtn)&&l.default.roleServer.isNewHand()){var t=this.getC("BtnJump");p.default.sequence(this.node,.5,function(){var e=g.default.getWorldPos(t),i=_.default.GuideWordTable.findById(u.GuideLineEnum.GuidePlayerTouchJumpBtn),n=i.name,o=i.word;l.default.viewMgr.showUI(b.UI.GUIDE_VIEW,u.GuideLineEnum.GuidePlayerTouchJumpBtn,cc.size(132,132),e,n,o,!1,100)})}},e.prototype.checkGuide5=function(){if(!l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuidePlayerInitiativeSkill)&&l.default.roleServer.isNewHand()){var t=this.getC("BtnInitiative1");p.default.sequence(this.node,.5,function(){var e=g.default.getWorldPos(t),i=_.default.GuideWordTable.findById(u.GuideLineEnum.GuidePlayerInitiativeSkill),n=i.name,o=i.word;l.default.viewMgr.showUI(b.UI.GUIDE_VIEW,u.GuideLineEnum.GuidePlayerInitiativeSkill,t.getContentSize(),e,n,o,!1,100)})}},e.prototype.showTimePause=function(){this.getC("labTimePause").active=!0},e.prototype.hideTimePause=function(){this.getC("labTimePause").active=!1},s([I(cc.Node)],e.prototype,"remainMonsterVal",void 0),s([E],e)}(v.default);r.default=w,cc._RF.pop()},{}],ComWarHonorBox:[function(t,e,i){"use strict";cc._RF.push(e,"5e84aEz9sZIVab6D1LWG/Qz","ComWarHonorBox");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ActionUtils"),p=o("LoggerUtils"),d=o("RedPointUtils"),h=o("TipsUtils"),f=o("WarHonorMgr"),g=o("Tbl"),y=o("CCEvent"),m=o("UI"),v=cc._decorator,_=v.ccclass,C=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgTypeList=[],e.bgEnableTypeList=[],e.boxTypeList=[],e.boxId=1,e.id=1,e.bgLevel=1,e.isShowVideo=!1,e}return a(e,t),e.prototype.initialize=function(t,e,i,n){e-1<0?p.default.error("ComWarHonorBox boxID\u4e0d\u5408\u6cd5:[1,%s],\u73b0\u5728\u662f:%s",this.boxTypeList.length,this.boxId):(e>this.boxTypeList.length&&p.default.error("ComWarHonorBox boxID\u4e0d\u5408\u6cd5:[1,%s],\u73b0\u5728\u662f:%s",this.boxTypeList.length,this.boxId),this.id=t,this.boxId=e,this.bgLevel=i,this.callback=n,this.VO=g.default.WarHonorTable.findById(this.id))},e.prototype.addEventListener=function(){var t=this;this.eventOn(y.default.WAR_HONOR_RECEIVE_AWARD,this.handlerWarHonorReceive,this),u.default.sequence(this.node,.1,function(){t.eventOnRedPoint({eventName:y.CCEventRedPoint.HonorFreeBox,handler:t.handlerHonorFreeBox,target:t})})},e.prototype.handlerHonorFreeBox=function(t){this.VO.type!=f.BoxType.Video&&(-1==t.indexOf(this.id)?d.default.ShowRedPoint(this.node,!1,{x:50,y:50}):d.default.ShowRedPoint(this.node,!0,{x:50,y:50}))},e.prototype.setBrightEnabled=function(t){this.sprBg.getComponent(cc.Sprite).spriteFrame=t?this.bgEnableTypeList[this.bgLevel-1]:this.bgTypeList[this.bgLevel-1]},e.prototype.setGrayEnabled=function(t){var e;t?((e=this.sprBox.getComponent(cc.Button)).enableAutoGrayEffect=!0,e.interactable=!1,this.setBrightEnabled(!1)):((e=this.sprBox.getComponent(cc.Button)).enableAutoGrayEffect=!0,e.interactable=!0,this.setBrightEnabled(!0))},e.prototype.setHasReceive=function(t){t?(this.setGrayEnabled(!0),this.btnHasReceive.active=!0,this.labReceive.active=!0):(this.setGrayEnabled(!1),this.btnHasReceive.active=!1)},e.prototype.showPlayVideo=function(t){this.isShowVideo=t,this.isShowVideo?this.imgVideo.active=!0:this.imgVideo.active=!1},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addEventListener()},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.btnHasReceive.active=!1,this.sprBox.getComponent(cc.Sprite).spriteFrame=this.boxTypeList[this.boxId-1],this.labLevel.getComponent(cc.Label).string=String(this.boxId),this.labReceive.active=!1,l.default.onClick(this.sprBox,function(){e.callback&&e.callback(e.boxId)}),l.default.onClick(this.btnHasReceive,function(){h.default.showTips("You've received rewards!")}),l.default.warHonorMgr.isAwardReceive(this.id)&&(this.labReceive.active=!0)},e.prototype.handlerWarHonorReceive=function(t){t.id==this.id&&(this.setHasReceive(!0),l.default.viewMgr.showUI(m.UI.COMMONREWARD_VIEW,t.award))},s([C(cc.Node)],e.prototype,"sprBg",void 0),s([C(cc.Node)],e.prototype,"sprBox",void 0),s([C(cc.Node)],e.prototype,"labLevel",void 0),s([C(cc.Node)],e.prototype,"imgVideo",void 0),s([C(cc.Node)],e.prototype,"labReceive",void 0),s([C(cc.Node)],e.prototype,"btnHasReceive",void 0),s([C([cc.SpriteFrame])],e.prototype,"bgTypeList",void 0),s([C([cc.SpriteFrame])],e.prototype,"bgEnableTypeList",void 0),s([C([cc.SpriteFrame])],e.prototype,"boxTypeList",void 0),s([_],e)}(c.default);r.default=b,cc._RF.pop()},{}],ComWarHonorItem:[function(t,e,i){"use strict";cc._RF.push(e,"44b039X+B9EH7RTGfufv2wm","ComWarHonorItem");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("BaseComponent"),p=o("CommonConst"),d=o("ActionUtils"),h=o("SpriteFrameUtils"),f=o("TipsUtils"),g=o("Tbl"),y=o("CCEvent"),m=cc._decorator,v=m.ccclass,_=m.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxSpriteFrameList=[],e.boxBgSpriteFrameList=[],e.unLockSpinePrefab=null,e}return a(e,t),e.prototype.initialize=function(t,e,i){this.warHonorId1=t,this.warHonorId2=e,this.level=i},e.prototype.start=function(){t.prototype.start.call(this),this.initBox(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(y.default.WAR_HONOR_PROGRESS_CHANGE,this.handlerProgressChange,this),this.eventOn(y.default.WAR_HONOR_RECEIVE_AWARD,this.handlerWarHonorReceive,this)},e.prototype.initBox=function(){this.initLeftBox(),this.initRightBox(),this.initMidLevel()},e.prototype.showLockAndPlayUnlockAnimation=function(){var t=this;this.imgBg3.active=!0,this.imgBg4.active=!1,this.imgBg5.active=!1,this.imgBg6.active=!0,this.labLevel.active=!1,d.default.sequence(this.node,1,function(){var e=cc.instantiate(t.unLockSpinePrefab);e.parent=t.imgBg6,e.getComponent(sp.Skeleton).setCompleteListener(function(){c.default.warHonorMgr.setUnlockAnimationFinish(t.warHonorId2),t.imgBg3.active=!1,t.imgBg4.active=!1,t.imgBg5.active=!0,t.imgBg6.active=!1,t.labLevel.active=!0})})},e.prototype.initMidLevel=function(){var t=g.default.WarHonorTable.findById(this.warHonorId2);this.imgBg3=this.getC("imgBg3"),this.imgBg4=this.getC("imgBg4"),this.imgBg5=this.getC("imgBg5"),this.imgBg6=this.getC("imgBg6"),this.labLevel=this.getC("labLevel"),this.setString(this.labLevel,String(t.level)),c.default.warHonorMgr.isWarHonorCanReceive(this.warHonorId2)?c.default.warHonorMgr.isUnlockAnimationHasShow(this.warHonorId2)?this.showLockAndPlayUnlockAnimation():(this.imgBg3.active=!1,this.imgBg4.active=!1,this.imgBg5.active=!0,this.imgBg6.active=!1,this.labLevel.active=!0):c.default.warHonorMgr.isAwardReceive(this.warHonorId2)?(this.imgBg3.active=!0,this.imgBg4.active=!0,this.imgBg5.active=!1,this.imgBg6.active=!1,this.labLevel.active=!0):(this.imgBg3.active=!0,this.imgBg4.active=!1,this.imgBg5.active=!1,this.imgBg6.active=!0,this.labLevel.active=!1)},e.prototype.initLeftBox=function(){var t=this,e=g.default.WarHonorTable.findById(this.warHonorId1),i=this.getC("btn1"),n=this.getC("labLock1"),o=this.getC("labReceive1"),r=this.getC("imgBox1"),a=this.getC("labHasReceive1");c.default.warHonorMgr.isWarHonorCanReceive(this.warHonorId1)?(o.active=!0,n.active=!1,a.active=!1,this.setBoxLevel(r,e.boxLevel)):c.default.warHonorMgr.isAwardReceive(this.warHonorId1)?(this.setBoxLevel(r,0),a.active=!0,o.active=!1,n.active=!1):(this.setBoxLevel(r,e.boxLevel),a.active=!1,o.active=!1,n.active=!0),cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&0==c.default.adMgr.isHuaweiRewardReady()&&(i.active=!1),c.default.onClick(i,function(){t.onClickReceiveBox(t.warHonorId1)})},e.prototype.initRightBox=function(){var t=this,e=g.default.WarHonorTable.findById(this.warHonorId2),i=this.getC("btn2"),n=this.getC("labLock2"),o=this.getC("labName2"),r=this.getC("labReceive2"),a=this.getC("imgBg2"),s=this.getC("imgBox2"),l=this.getC("imgSelect2"),u=this.getC("labHasReceive2");c.default.warHonorMgr.isWarHonorCanReceive(this.warHonorId2)?(r.active=!0,n.active=!1,u.active=!1,this.setBoxLevel(s,e.boxLevel),this.setBoxBgLevel(a,e.boxLevel),l.active=!0):(l.active=!1,c.default.warHonorMgr.isAwardReceive(this.warHonorId2)?(this.setBoxLevel(s,0),this.setBoxBgLevel(a,0),r.active=!1,n.active=!1,u.active=!0):(this.setBoxLevel(s,e.boxLevel),this.setBoxBgLevel(a,e.boxLevel),r.active=!1,n.active=!0,u.active=!1)),this.setString(o,"Level "+e.level+" chest"),c.default.onClick(i,function(){t.onClickReceiveBox(t.warHonorId2)})},e.prototype.setBoxLevel=function(t,e){e>this.boxSpriteFrameList.length-1?h.default.setSpriteFrame(t,this.boxSpriteFrameList[0]):h.default.setSpriteFrame(t,this.boxSpriteFrameList[e])},e.prototype.setBoxBgLevel=function(t,e){e>this.boxSpriteFrameList.length-1?h.default.setSpriteFrame(t,this.boxBgSpriteFrameList[0]):h.default.setSpriteFrame(t,this.boxBgSpriteFrameList[e])},e.prototype.onClickReceiveBox=function(t){if(c.default.warHonorMgr.isEnoughtProgressToOpen(t))if(c.default.warHonorMgr.isAwardReceive(t))f.default.showTips("You've claimed chest~");else if(c.default.warHonorMgr.isVideoType(t)){var e={adType:p.AdTypeEnum.ZhanLingExtraReward,callback:function(e){e&&c.default.warHonorMgr.receiveAward(t)},errorCallback:function(){},timeout:3};cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME&&(e.adUnitId=l.OPPOAdUnitIdEnum.Ad_Warhonor),c.default.adMgr.show(e)}else c.default.warHonorMgr.receiveAward(t);else f.default.showTips("In progress,unable to claim~")},e.prototype.handlerProgressChange=function(){this.initBox()},e.prototype.handlerWarHonorReceive=function(){this.initBox()},s([_([cc.SpriteFrame])],e.prototype,"boxSpriteFrameList",void 0),s([_([cc.SpriteFrame])],e.prototype,"boxBgSpriteFrameList",void 0),s([_(cc.Prefab)],e.prototype,"unLockSpinePrefab",void 0),s([v],e)}(u.default);r.default=C,cc._RF.pop()},{}],ComWarHonorListPnl:[function(t,e,i){"use strict";cc._RF.push(e,"be3d5lbSi1OrZjEVr2zcF06","ComWarHonorListPnl");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("LoggerUtils"),p=o("WarHonorMgr"),d=o("Tbl"),h=o("CCEvent"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.comList=[],e}return a(e,t),e.prototype.initialize=function(t,e,i,n){this.warHonorId1=t,this.warHonorId2=e,this.level=i,this.callback=n},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this.initBox(),this.initLevel(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(h.default.WAR_HONOR_PROGRESS_CHANGE,this.handlerProgressChange,this)},e.prototype.initLevel=function(){this.labLevel.getComponent(cc.Label).string=String(this.level)},e.prototype.initBox=function(){for(var t=this,e=function(e){var n=i.getVO(e);if(null==n)return u.default.error("ComWarHonorListPnl VO == null,this.warHonorId%s = ",e,i.getBoxId(e)),"continue";var o=cc.instantiate(i.comWarHonorBox);o.parent=i.getParent(e);var r=o.getComponent("ComWarHonorBox");r.initialize(n.id,n.boxID,n.boxLevel,function(){t.callback&&t.callback(t.getBoxId(e))}),i.initBoxBg(r,e),i.initVideoTag(r,e),i.initBoxSpr(r,e),i.comList.push(r)},i=this,n=1;n<=2;n++)e(n)},e.prototype.initBoxSpr=function(t,e){var i=this.getBoxId(e);l.default.warHonorMgr.isEnoughtProgressToOpen(i)&&l.default.warHonorMgr.isAwardReceive(i)&&t.setGrayEnabled(!0)},e.prototype.initVideoTag=function(t,e){this.isVideoType(e)?t.showPlayVideo(!0):t.showPlayVideo(!1)},e.prototype.initBoxBg=function(t,e){l.default.warHonorMgr.isWarHonorCanReceive(this.getBoxId(e))?t.setBrightEnabled(!0):t.setBrightEnabled(!1)},e.prototype.getBoxId=function(t){return 1==t?this.warHonorId1:this.warHonorId2},e.prototype.getVO=function(t){return 1==t?d.default.WarHonorTable.findById(this.warHonorId1):d.default.WarHonorTable.findById(this.warHonorId2)},e.prototype.getParent=function(t){return 1==t?this.sprBg1:this.sprBg2},e.prototype.isVideoType=function(t){var e=d.default.WarHonorTable.findById(this.getBoxId(t));return e.type==p.BoxType.Video||e.type!=p.BoxType.Common&&void 0},e.prototype.handlerProgressChange=function(){for(var t=0;t<this.comList.length;t++){var e=this.comList[t];this.initBoxBg(e,t+1),this.initVideoTag(e,t+1)}},s([y(cc.Node)],e.prototype,"sprBg1",void 0),s([y(cc.Node)],e.prototype,"sprBg2",void 0),s([y(cc.Node)],e.prototype,"labLevel",void 0),s([y(cc.Node)],e.prototype,"btnLeft",void 0),s([y(cc.Node)],e.prototype,"btnRight",void 0),s([y(cc.Prefab)],e.prototype,"comWarHonorBox",void 0),s([g],e)}(c.default);r.default=m,cc._RF.pop()},{}],ComWarningIcon:[function(t,e,i){"use strict";cc._RF.push(e,"33a1cDgHDlEOIgvI79kJOZl","ComWarningIcon");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stWarningData=null,e.finishCallback=null,e}return r(e,t),e.prototype.initialize=function(t,e){this.stWarningData=t,this.finishCallback=e},e.prototype.start=function(){this.node.y+=.06*cc.winSize.height,this.node.opacity=0;var t=cc.tween().to(this.stWarningData.warningFadeInTime,{opacity:255}),e=cc.tween().delay(this.stWarningData.warningStayTime),i=cc.tween().to(this.stWarningData.warningFadeOutTime,{opacity:0}),n=cc.tween().sequence(t,e,i),o=cc.tween().repeat(this.stWarningData.warningShowTimes,n),r=cc.tween().call(this.finishCallback),a=cc.tween().sequence(o,r);cc.tween(this.node).then(a).start()},a([l],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],CombatConst:[function(t,e,i){"use strict";cc._RF.push(e,"2ba1fIUuERO2a5eSo5HYIny","CombatConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.TriggleEventType=n.DamageType=n.RangeType=n.BattleGroup=n.StdBool=void 0,function(t){t[t.False=0]="False",t[t.True=1]="True"}(n.StdBool||(n.StdBool={})),function(t){t[t.Default=0]="Default",t[t.Hero=1]="Hero",t[t.Monster=2]="Monster",t[t.Costar=3]="Costar",t[t.Genie=4]="Genie",t[t.Natural=99]="Natural"}(n.BattleGroup||(n.BattleGroup={})),function(t){t[t.Inf=0]="Inf",t[t.Circle=1]="Circle",t[t.Rect=2]="Rect",t[t.Point=3]="Point"}(n.RangeType||(n.RangeType={})),function(t){t[t.PhysicalDamage=1]="PhysicalDamage",t[t.MagicDamage=2]="MagicDamage",t[t.RealDamage=3]="RealDamage"}(n.DamageType||(n.DamageType={})),function(t){t[t.MonsterToTheEnd=1]="MonsterToTheEnd",t[t.BulletHitEnemy=2]="BulletHitEnemy",t[t.AfterUseSkill=3]="AfterUseSkill",t[t.Die=4]="Die",t[t.LimitMiss=5]="LimitMiss",t[t.BulletHitMySelf=6]="BulletHitMySelf",t[t.HpChange=7]="HpChange"}(n.TriggleEventType||(n.TriggleEventType={})),cc._RF.pop()},{}],CombatUtils:[function(t,e,i){"use strict";cc._RF.push(e,"a357d3fMTNGX46qkTQLsh/L","CombatUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Utils"),a=n("MathUtils"),s=n("PointUtils"),l=n("CombatConst"),c=n("ObjConst"),u=n("LoggerUtils"),p=function(){function t(){}return t.getBodyRectByConfigRange=function(t,e){if(e[0]==l.RangeType.Rect){var i=e[3],n=e[4],o=t.x+e[1]-i/2,r=t.y+e[2];return cc.rect(o,r,i,n)}return u.default.error("CombatUtils >>>>>>>> 32 \u9519\u8bef\u8303\u56f4\u7c7b\u578b:range,\u9ed8\u8ba4\u8fd4\u56fa\u5b9a\u77e9\u5f62"),cc.rect(t.x,t.y,100,100)},t.getCollosionRangeByConfigRange=function(t,e){if(e[0]==l.RangeType.Rect){var i=e[3],n=e[4],o=t.x+e[1]-i/2,r=t.y+e[2]-n/2;return cc.rect(o,r,i,n)}return e[0]==l.RangeType.Circle?(u.default.warn("CombatUtils >>>>>>>> 36 TODO \u6682\u672a\u652f\u6301\u5706\u5f62\u5f62\u72b6"),cc.rect(t.x,t.y,200,200)):(u.default.error("CombatUtils >>>>>>>> 32 \u9519\u8bef\u8303\u56f4\u7c7b\u578b:range,\u9ed8\u8ba4\u8fd4\u56fa\u5b9a\u77e9\u5f62"),cc.rect(t.x,t.y,200,200))},t.isEnemyRace=function(t,e){var i=c.EnemyRaceConst[t];return l.BattleGroup[e]==i},t.calculateFinalId=function(t){return t.forEach(function(t,e){r.default.isHitRate(t/1e4)&&null.push(e)}),null},t.autoLocalZOrder=function(t,e){e=e||0;var i=cc.view.getCanvasSize().height-(t.getPosition().y+e);t.zIndex=i},t.translateRange2StdRange=function(t,e,i){var n=t.getPosition(),o=e[1],r=e[2],c=cc.v2(o,r);if(i){var u=s.default.angle2Radian(i);c=a.default.pointRotationPointRotaion(cc.v2(o,r),cc.v2(0,0),u)}if(e[0]==l.RangeType.Inf){var p=99999,d=void 0;return cc.Vec2.add(d,n,c),[l.RangeType.Circle,d,p]}if(e[0]==l.RangeType.Circle)return p=e[3],d=void 0,cc.Vec2.add(d,n,c),[l.RangeType.Circle,d,p];if(e[0]==l.RangeType.Rect){var h=e[3],f=e[4],g=cc.v2(n.x-h/2+c.x,n.y-f/2+c.y);return[l.RangeType.Rect,g,h,f]}},t.getHeroAttrId=function(t,e){return 1e3*t+e},t.translateRange2StdRangeWithPos=function(t,e,i){var n=t,o=e[1],r=e[2],c=cc.v2(o,r);if(i){var u=s.default.angle2Radian(i);c=a.default.pointRotationPointRotaion(cc.v2(o,r),cc.v2(0,0),u)}if(e[0]==l.RangeType.Inf){var p=99999,d=void 0;return cc.Vec2.add(d,n,c),[l.RangeType.Circle,d,p]}if(e[0]==l.RangeType.Circle)return p=e[3],d=void 0,cc.Vec2.add(d,n,c),[l.RangeType.Circle,d,p];if(e[0]==l.RangeType.Rect){var h=e[3],f=e[4],g=cc.v2(n.x-h/2+c.x,n.y-f/2+c.y);return[l.RangeType.Rect,g,h,f]}},t.calDamage=function(t,e,i){var n=t.attack,o=t.crit,a=t.critDamage||1e4,s=t.times,c=t.extraDamage,u=e.defense,p=e.reduceDamagePrecent,d=(e.magicDefense,i||l.DamageType.PhysicalDamage);n*=1-p/1e4;var h=0;d==l.DamageType.PhysicalDamage?(h=(h=n-u)*s+c,(h=Math.ceil(h))<=0&&console.error("\u4f24\u5bb3\u8ba1\u7b97\u51fa\u4e86\u95ee\u9898,\u4f24\u5bb3\u5c0f\u4e8e\u7b49\u4e8e0")):d==l.DamageType.MagicDamage?console.error("\u8fd9\u662f\u9b54\u6cd5\u4f24\u5bb3,\u8fd8\u6ca1\u505a"):d==l.DamageType.RealDamage&&console.error("\u8fd9\u662f\u771f\u5b9e\u4f24\u5bb3,\u8fd8\u6ca1\u505a");var f=r.default.rand()<o;return f&&(h+=h*(a/1e4)),[f,h]},t.DrawNodeColor={BodyRange:cc.color(0,0,0),CollisionRange:cc.color(150,0,0),VirtualRange:cc.color(0,0,255)},t}();o.default=p,cc._RF.pop()},{}],CommonCfgUtils:[function(t,e,i){"use strict";cc._RF.push(e,"be12fOSLF1LoKizMR9XSQXD","CommonCfgUtils");var n=t,o=i,r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("Tbl"),s=cc._decorator.ccclass,l=function(){function t(){}return t.get=function(t){var e=a.default.CommonTable.findByKey(t);if(e)return e;console.warn("\u540d\u5b57\u6709\u8bef\uff0c\u627e\u4e0d\u5230")},r([s],t)}();o.default=l,cc._RF.pop()},{}],CommonConst:[function(t,e,i){"use strict";cc._RF.push(e,"5090cZCMoxH+ZBiy9J1Q7fZ","CommonConst");var n,o,r,a,s,l,c=i;Object.defineProperty(c,"__esModule",{value:!0}),c.PlatformTypeEnum=c.EquipmentQualityColorConst=c.EquipmentQualityColorEnum=c.CommonCfgEnum=c.LevelLimitConst=c.RewardBoxAniName=c.RewardBoxTypeEnum=c.RewardViewTypeEnum=c.AdName=c.AdTypeEnum=c.DataNameEnum=void 0,function(t){t.BagMgr="BagMgr",t.CycleMgr="CycleMgr",t.CountingMgr="CountingMgr",t.LevelServer="LevelServer",t.RoleServer="RoleServer",t.CardMgr="CardMgr",t.TaskMgr="TaskMgr",t.VipMgr="VipMgr",t.WarHonorMgr="WarHonorMgr",t.AdMgr="AdMgr",t.ShopMgr="ShopMgr",t.SystemOpenMgr="SystemOpenMgr",t.EquipmentMgr="EquipmentMgr",t.HongbaoMgr="HongbaoMgr",t.ChannelMgr="ChannelMgr"}(c.DataNameEnum||(c.DataNameEnum={})),function(t){t.AllSkill="AllSkill",t.ChangeSkill="ChangeSkill",t.Reborn="Reborn",t.ZhanLingExtraReward="ZhanLingExtraReward",t.GoldBox="GoldBox",t.CardBox="CardBox",t.WoodBox="WoodBox",t.SilverBox="SilverBox",t.KingBox="KingBox",t.ShopFast="ShopFast",t.ShopRefresh="ShopRefresh",t.RandomEvent="RandomEvent",t.Settlement="Settlement",t.UpgradeSkill="UpgradeSkill",t.UpgradeEquipment="UpgradeEquipment",t.GetDiamond="GetDiamond",t.GetHugeGold="GetHugeGold",t.OfflineRewardTrible="OfflineRewardTrible",t.SigninTrible="SigninTrible",t.GetRandomEquipment="GetRandomEquipment",t.GetHideInHall="GetHideInHall"}(a=c.AdTypeEnum||(c.AdTypeEnum={})),c.AdName=((n={})[a.AllSkill]="Take All",n[a.ChangeSkill]="Change",n[a.Reborn]="Reborn",n[a.ZhanLingExtraReward]="Battle pass Ads reward",n[a.GoldBox]="Coin Chest",n[a.CardBox]="Chip Chest",n[a.WoodBox]="Wood Chest",n[a.SilverBox]="Silver Chest",n[a.KingBox]="Supreme Chest",n[a.ShopFast]="Shop speed-up",n[a.ShopRefresh]="Shop refresh",n[a.RandomEvent]="Random Event",n[a.Settlement]="Settlement: bonus",n[a.UpgradeSkill]="Skill: upgrade",n[a.GetDiamond]="Watch Ads to get diamonds",n[a.GetHugeGold]="Watch Ads to get coins",n[a.OfflineRewardTrible]="Offline triple reward",n[a.SigninTrible]="Login triple reward",n[a.GetRandomEquipment]="Obtain random equip",n[a.UpgradeEquipment]="Upgrade equip",n[a.GetHideInHall]="Get hide in hall",n),function(t){t[t.Normal=0]="Normal",t[t.TwoPickOne=1]="TwoPickOne"}(c.RewardViewTypeEnum||(c.RewardViewTypeEnum={})),function(t){t[t.Muzhibaoxiang=0]="Muzhibaoxiang",t[t.Yinzhibaoxiang=1]="Yinzhibaoxiang",t[t.Zhizunbaoxiang=2]="Zhizunbaoxiang"}(s=c.RewardBoxTypeEnum||(c.RewardBoxTypeEnum={})),c.RewardBoxAniName=((o={})[s.Muzhibaoxiang]="play_muzhibaoxiang",o[s.Yinzhibaoxiang]="play_yinzhibaoxiang",o[s.Zhizunbaoxiang]="play_zhizunbaoxiang",o),c.LevelLimitConst={Chapter:1,LevelLimit:7},function(t){t.GUIDE_WOMEN_NAME="GUIDE_WOMEN_NAME",t.GUIDE_CLICK_ONE_SKILL="GUIDE_CLICK_ONE_SKILL",t.GUIDE_MOVE_HERO="GUIDE_MOVE_HERO",t.GUIDE_HERO_JUMP2="GUIDE_HERO_JUMP2",t.GUIDE_ENTER_FIGHT="GUIDE_ENTER_FIGHT",t.GUIDE_INITIATIVE="GUIDE_INITIATIVE",t.GUIDE_ENTER_SHOP="GUIDE_ENTER_SHOP",t.GUIDE_SHOP_ACCELERATE="GUIDE_SHOP_ACCELERATE",t.GUIDE_SHOP_ACCELERATECONFIRM="GUIDE_SHOP_ACCELERATECONFIRM",t.GUIDE_SHOP_RAREREWARD="GUIDE_SHOP_RAREREWARD",t.GUIDE_SHOP_KINGREWARD="GUIDE_SHOP_KINGREWARD",t.GUIDE_SHOP_REFRESH="GUIDE_SHOP_REFRESH",t.GUIDE_SHOP_COMMONREWARD="GUIDE_SHOP_COMMONREWARD",t.GUIDE_SHOP_SENIORREWARD="GUIDE_SHOP_SENIORREWARD",t.GUIDE_ENTER_CHAPTER_AFTERSHOP="GUIDE_ENTER_CHAPTER_AFTERSHOP",t.GUIDE_ENTER_FIGHT_AFTERSHOP="GUIDE_ENTER_FIGHT_AFTERSHOP",t.GUIDE_SHOP_REFRESHCONFIRM="GUIDE_SHOP_REFRESHCONFIRM",t.GUIDE_ENTER_CARD="GUIDE_ENTER_CARD",t.GUIDE_CARD_CLICK="GUIDE_CARD_CLICK",t.GUIDE_CARD_EQUID="GUIDE_CARD_EQUID",t.GUIDE_CARD_CHAPTER="GUIDE_CARD_CHAPTER",t.GUIDE_CARD_FIGHT="GUIDE_CARD_FIGHT"}(c.CommonCfgEnum||(c.CommonCfgEnum={})),function(t){t[t.White=0]="White",t[t.Blue=1]="Blue",t[t.Purple=2]="Purple",t[t.Yellow=3]="Yellow",t[t.Red=4]="Red"}(l=c.EquipmentQualityColorEnum||(c.EquipmentQualityColorEnum={})),c.EquipmentQualityColorConst=((r={})[l.White]={color:cc.color(255,255,255),name:"General"},r[l.Blue]={color:cc.color(61,184,255),name:"Superior"},r[l.Purple]={color:cc.color(188,93,254),name:"Rare"},r[l.Yellow]={color:cc.color(255,219,91),name:"Epic"},r[l.Red]={color:cc.color(255,72,81),name:"Myth"},r),function(t){t[t.WECHAT_GAME=104]="WECHAT_GAME",t[t.QQ_PLAY=105]="QQ_PLAY",t[t.VIVO_GAME=108]="VIVO_GAME",t[t.OPPO_GAME=109]="OPPO_GAME",t[t.HUAWEI_GAME=110]="HUAWEI_GAME"}(c.PlatformTypeEnum||(c.PlatformTypeEnum={})),cc._RF.pop()},{}],CommonHongbaoTable:[function(t,e,i){"use strict";cc._RF.push(e,"7b282lZV6xKYYG1EmbexNhr","CommonHongbaoTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("CommonHongbaoVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("common_hongbao_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.date,n)}},t.prototype.findByDate=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],CommonHongbaoVO:[function(t,e,i){"use strict";cc._RF.push(e,"0c6a0qG341GqKedqxaen6YJ","CommonHongbaoVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.date=t[0],this.video1Reward=t[1],this.video1Show=t[2],this.video2Reward=t[3],this.video2Show=t[4],this.video3Reward=t[5],this.video3Show=t[6],this.video4Reward=t[7],this.video4Show=t[8]},cc._RF.pop()},{}],CommonRewardPnl:[function(t,e,i){"use strict";cc._RF.push(e,"2d5e4dYRN1G1I/DZbLQcSRI","CommonRewardPnl");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("ItemUtils"),u=o("ComIconWithName"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.initialize=function(t,e){this.node.width=140*t.length,t.length>1&&t.sort(function(t,e){var i=c.default.getItemVO(Number(t[0])).price||0;return(c.default.getItemVO(Number(e[0])).price||0)-i});for(var i=0;i<t.length&&t[i];i++){var n=.75*e,o=t[i][0],r=t[i][1],a=cc.instantiate(this.ComIcon);a.parent=this.node,a.getComponent(u.default).initialize(o,r),a.scale=.2,a.opacity=0,cc.tween(a).delay(.25*i+n).to(.5,{scale:1,opacity:255},{easing:"backInOut"}).start()}},s([h(cc.Prefab)],e.prototype,"ComIcon",void 0),s([d],e)}(l.default);r.default=f,cc._RF.pop()},{}],CommonRewardView:[function(t,e,i){"use strict";cc._RF.push(e,"e9ee2yzR49IeKuEMn8p3/ft","CommonRewardView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("AdaptUtils"),d=o("ArrayUtils"),h=o("NodeUtils"),f=o("BaseView"),g=o("CCEvent"),y=o("CommonRewardPnl"),m=cc._decorator,v=m.ccclass,_=m.property,C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this.initUI()},e.prototype.start=function(){t.prototype.start.call(this),this.setTouchable(!1),this.initData(),this.initSpine(),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.showBanner(),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_CommonReward,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initSureBtn=function(){var t=this,e=this.getC("btnSure");c.default.onClick(e,function(){cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&(c.default.adMgr.hideBanner(),c.default.adMgr.showInterstitialAd(1)),t.closeSelf(!1)})},e.prototype.initSpine=function(){var t=this,e=cc.instantiate(this.CommonRewardOpenSpine);e.parent=this.node;var i=this.getC("scrollview"),n=e.getComponent(sp.Skeleton);h.default.setWorldPos(e,h.default.getWorldPos(i)),n.setCompleteListener(function(){c.default.audioMgr.playSoundByResId(103);var n=cc.instantiate(t.CommonRewardSpine);n.parent=t.node,h.default.setWorldPos(n,h.default.getWorldPos(i)),i.zIndex=n.zIndex+1,t.initItems(),n.getComponent(sp.Skeleton).setAnimation(0,"play",!0),e.destroy()})},e.prototype.initItems=function(){var t=this,e=this.itemList.length,i=d.default.splitArray(this.itemList,3),n=this.getC("scrollview");n.height=240*i.length,this.layout.height=240*i.length;for(var o=0;o<i.length;o++){e++;var r=cc.instantiate(this.CommonRewardPnl);r.parent=this.layout,r.getComponent(y.default).initialize(i[o],o)}n.height>=480&&(n.height=480),n.getComponent(cc.ScrollView).scrollToTop(),this.node.runAction(cc.sequence(cc.delayTime(.25*e),cc.callFunc(function(){t.initSureBtn(),t.setTouchable(!0)})))},e.prototype.initData=function(){this.itemList=this.getArgs()[0],this.rewardBoxType=this.getArgs()[1]||u.RewardBoxTypeEnum.Muzhibaoxiang},e.prototype.initUI=function(){this.layout=this.getC("layout"),this.imgTitle=this.getC("imgTitle"),this.imgBg=this.getC("imgBg")},e.prototype.onAdaptUI=function(){p.default.adaptSize2Winsize(this.imgBg),this.getC("scrollview").y-=50},e.prototype.onDestroy=function(){cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(g.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(g.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(g.default.HUAWEI_CLOSE_NATIVE),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.hideBanner(),t.prototype.onDestroy.call(this)},s([_(cc.Prefab)],e.prototype,"ComIcon",void 0),s([_(cc.Prefab)],e.prototype,"CommonRewardPnl",void 0),s([_(cc.Prefab)],e.prototype,"CommonRewardSpine",void 0),s([_(cc.Prefab)],e.prototype,"CommonRewardOpenSpine",void 0),s([v],e)}(f.default);r.default=C,cc._RF.pop()},{}],CommonTable:[function(t,e,i){"use strict";cc._RF.push(e,"76477qgWgNIOKj/ln8t4ji+","CommonTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("CommonVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("common_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.key,n)}},t.prototype.findByKey=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],CommonVO:[function(t,e,i){"use strict";cc._RF.push(e,"7ef72axfgFM2qKofO3a9UuV","CommonVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.key=t[0],this.number=t[1],this.string=t[2],this.arrays=t[3],this.multiArrays=t[4]},cc._RF.pop()},{}],CoolDownMgr:[function(t,e,i){"use strict";cc._RF.push(e,"8504eAVJ0tLkL2ILZsKJCkV","CoolDownMgr");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.CoolDown=void 0;var o=function(){function t(t){this._mgr=null,this._key=null,this._coolDownTime=null,this._callBackList=[],this._coolEndAt=0,this._mgr=t}return t.prototype.init=function(t,e){this._key=t,this._coolDownTime=e,this._mgr.addCoolDown(this)},t.prototype.getKey=function(){return this._key},t.prototype.register=function(t,e){var i={time:t,func:e,nextAt:Number.MAX_SAFE_INTEGER};this._callBackList.push(i)},t.prototype.onTick=function(){for(var t=this._mgr.getTime(),e=0;e<this._callBackList.length;e++){var i=this._callBackList[e];i.nextAt<=t&&(i.nextAt=Number.MAX_SAFE_INTEGER,i.func())}},t.prototype.isCooling=function(){return!(this._mgr.getTime()<=this._coolEndAt)},t.prototype.do=function(){if(0==this.isCooling())return!1;var t=this._mgr.getTime();this._coolEndAt=t+this._coolDownTime;for(var e=0;e<this._callBackList.length;e++){var i=this._callBackList[e];i.nextAt=t+i.time}return!0},t}();n.CoolDown=o;var r=function(){function t(t){this._clock=null,this._coolDownMap=new Map,this._clock=t}return t.prototype.alloc=function(){return new o(this)},t.prototype.addCoolDown=function(t){this._coolDownMap.set(t.getKey(),t)},t.prototype.getCoolDown=function(t){return 0==this._coolDownMap.has(t)?null:this._coolDownMap.get(t)},t.prototype.getTime=function(){return this._clock.getTime()},t.prototype.onTick=function(t){this._coolDownMap.forEach(function(e){e.onTick(t)})},t.prototype.do=function(t){var e=this.getCoolDown(t);return null!=e&&e.do()},t}();n.default=r,cc._RF.pop()},{}],CostarTable:[function(t,e,i){"use strict";cc._RF.push(e,"be9aawz0vBKm6j4evD4W3vS","CostarTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("CostarVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("costar_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],CostarVO:[function(t,e,i){"use strict";cc._RF.push(e,"1d2f2VUyL1G2YE2o9DZSf2R","CostarVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.desc=t[1],this.canBreakThrough=t[2],this.canDestroyed=t[3],this.hp=t[4],this.hpmax=t[5],this.isOccupyRoute=t[6],this.buffIds=t[7],this.removeCondition=t[8],this.resId=t[9]},cc._RF.pop()},{}],CountingBuyTable:[function(t,e,i){"use strict";cc._RF.push(e,"7e8f7z661hFGKIk4+y1h0Lq","CountingBuyTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("CountingBuyVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("counting_buy_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],CountingBuyVO:[function(t,e,i){"use strict";cc._RF.push(e,"b6fbbDtKb9A4KvHYkzrdMpi","CountingBuyVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.countType=t[0],this.buyTime=t[1],this.price=t[2],this.count=t[3]},cc._RF.pop()},{}],CountingMgr:[function(t,e,i){"use strict";cc._RF.push(e,"8c1e63qT6JCuYykROzC4lEA","CountingMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("App"),c=o("DataHelper"),u=o("CommonConst"),p=function(t){function e(){var e=t.call(this)||this;return e._countingList=null,e.initialize(),e}return a(e,t),e.prototype.initialize=function(){var t=this;this.init(u.DataNameEnum.CountingMgr),this._countingList=this.getValue("COUNTING_DATA",[]),s.default.CountingTable.forEach(function(e){null==t._countingList.find(function(t){return t.type==e.type})&&t._countingList.push({type:e.type,count:0})}),this.setCountingList(),this.initializeCycle()},e.prototype.initializeCycle=function(){var t=this,e=this;s.default.CountingTable.forEach(function(i){for(var n=0,o=i.resetCycle?i.resetCycle:[];n<o.length;n++){var r=o[n];l.default.cycleMgr.registerCycle(r,t,function(){e._reset(i.type)})}})},e.prototype.finalize=function(){this.setCountingList()},e.prototype.getCountingList=function(){return this._countingList},e.prototype.setCountingList=function(){this.setValue("COUNTING_DATA",this.getCountingList())},e.prototype.getCountingNum=function(t){var e=this.getCountingList().find(function(e){return e.type==t});return null==e?(cc.error("\u5f02\u5e38\u7684\u6b21\u6570ID type:%s",t),0):e.count},e.prototype.getPriceInfo=function(t){var e=this.getCountingList().find(function(e){return e.type==t});if(null==e)return cc.error("\u5f02\u5e38\u7684\u6b21\u6570ID type:%s",t),null;var i=s.default.CountingBuyTable.findFirst(function(t){return t.countType==e.type&&t.buyTime==e.count});return null==i?null:i.price},e.prototype.getRemaining=function(t){var e=s.default.CountingTable.findByType(t);if(null==e)return cc.error("\u5f02\u5e38\u7684\u6b21\u6570ID type:%s",t),0;if(null==e.ceil||-1==e.ceil)return-1;var i=e.ceil-this.getCountingNum(t);return Math.max(i,0)},e.prototype.getAllTimes=function(t){var e=s.default.CountingTable.findByType(t);return null==e?(cc.error("\u5f02\u5e38\u7684\u6b21\u6570ID type:%s",t),0):null==e.ceil||-1==e.ceil?-1:Math.max(e.ceil,0)},e.prototype.increase=function(t,e){var i=this.getCountingList().find(function(e){return e.type==t});return null==i?(cc.error("\u5f02\u5e38\u7684\u6b21\u6570ID"),!1):!(this.getRemaining(t)<e)&&(i.count+=e,void this.setCountingList())},e.prototype.decrease=function(t,e){var i=this.getCountingList().find(function(e){return e.type==t});if(null==i)return cc.error("\u5f02\u5e38\u7684\u6b21\u6570ID"),!1;i.count-=e,i.count=Math.max(i.count,0),this.setCountingList()},e.prototype._reset=function(t){var e=this.getCountingList().find(function(e){return e.type==t});null!=e&&(e.count=0,this.setCountingList())},e}(c.default);r.default=p,cc._RF.pop()},{}],CountingTable:[function(t,e,i){"use strict";cc._RF.push(e,"b367c/09ZJMOaCnkYgPwoM6","CountingTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("CountingVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("counting_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.type,n)}},t.prototype.findByType=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],CountingVO:[function(t,e,i){"use strict";cc._RF.push(e,"07283iv0xNIDqY6qQ1hFFr9","CountingVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.type=t[0],this.name=t[1],this.ceil=t[2],this.resetCycle=t[3]},cc._RF.pop()},{}],CycleConst:[function(t,e,i){"use strict";cc._RF.push(e,"5a5e2onOLRP36UjXKDuxLs/","CycleConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.CycleTypeEnum=void 0,function(t){t[t.EveryMinute=1]="EveryMinute",t[t.resetEveryDay=51]="resetEveryDay",t[t.resetDailyTask=100]="resetDailyTask",t[t.resetWeekTask=101]="resetWeekTask",t[t.resetDailyItem=110]="resetDailyItem",t[t.resetWeekItem=111]="resetWeekItem"}(n.CycleTypeEnum||(n.CycleTypeEnum={})),cc._RF.pop()},{}],CycleMgr:[function(t,e,i){"use strict";cc._RF.push(e,"1ebd7VeR0lLQLgasSoSkNke","CycleMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("App"),c=o("DataHelper"),u=o("CommonConst"),p=function(t){function e(){var e=t.call(this)||this;return e._const86400x1000=864e5,e._const86400x7x1000=6048e5,e._cycleList=null,e._eventList=null,e.initialize(),e}return a(e,t),e.prototype.initialize=function(){this.init(u.DataNameEnum.CycleMgr),this.initCycleData(),this.initTimer()},e.prototype.finalize=function(){l.default.timeMgr.unRegisterTimer(this.onTick,this)},e.prototype.initTimer=function(){l.default.timeMgr.registerTimer(this.onTick,this,1)},e.prototype.initCycleData=function(){this._cycleList=this.getValue("CYCLY_DATA",[]),this._eventList=[]},e.prototype.getCycleList=function(){return this._cycleList},e.prototype.getCycleInfo=function(t){for(var e=this._cycleList||[],i=0;i<e.length;i++){var n=e[i];if(n.type==t)return n}return null},e.prototype.setCycleList=function(){this.setValue("CYCLY_DATA",this.getCycleList())},e.prototype.onTick=function(t,e){var i=this,n=this.getCycleList(),o=!1;s.default.CycleTable.forEach(function(t){var r=n.find(function(e){return e.type===t.type});r?(!r.nextAt||r.nextAt<e)&&(o=!0,r.nextAt=i.getNextCycle(r.nextAt,t),i.newCycle(r.type)):(n.push({type:t.type,nextAt:0}),o=!0)}),o&&this.setCycleList()},e.prototype.getNextCycleTime=function(t){var e=this.getCycleInfo(t);return null==e?0:e.nextAt},e.prototype.getNextCycle=function(t,e){var i=(new Date).getTime();if(t=Math.floor(t||i),e.interval&&e.interval>0)return i+1e3*e.interval;t=Math.max(t,i);for(var n=new Date(t),o=n.getFullYear(),r=null!=e.month?e.month-1:n.getMonth(),a=null!=e.day?e.day:n.getDate(),s=null!=e.hour?e.hour:n.getHours(),l=null!=e.min?e.min:n.getMinutes(),c=null!=e.sec?e.sec:n.getSeconds(),u=new Date(o,r,a,s,l,c).getTime();u<i;)null!=e.month?o+=1:null!=e.day?r+=1:null!=e.hour?a+=1:null!=e.min?s+=1:null!=e.sec&&(l+=1),u=new Date(o,r,a,s,l,c).getTime();if(null==e.month&&null==e.day&&null!=e.wday){var p=this._const86400x1000,d=this._const86400x7x1000,h=new Date(u);for(u=u-((0==h.getDay()?7:h.getDay())-1)*p+(e.wday-1)*p,u-=d;u<i;)u+=d}return Math.floor(u)},e.prototype.registerCycle=function(t,e,i){var n=this._eventList.find(function(e){return e.type==t});null==n&&(n={type:t,listeners:[]},this._eventList.push(n)),n.listeners.push({func:i,target:e})},e.prototype.newCycle=function(t){var e=this._eventList.find(function(e){return e.type==t});if(null!=e)for(var i=0;i<e.listeners.length;i++){var n=e.listeners[i];n.func.call(n.target,t)}},e}(c.default);r.default=p,cc._RF.pop()},{}],CycleTable:[function(t,e,i){"use strict";cc._RF.push(e,"3fc3aHbZC5LCLvPENtVzyhb","CycleTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("CycleVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("cycle_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.type,n)}},t.prototype.findByType=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],CycleVO:[function(t,e,i){"use strict";cc._RF.push(e,"d56fa4YSJVCEI09tQK11hlx","CycleVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.type=t[0],this.name=t[1],this.needSave=t[2],this.interval=t[3],this.month=t[4],this.day=t[5],this.wday=t[6],this.hour=t[7],this.min=t[8],this.sec=t[9]},cc._RF.pop()},{}],DailyTaskView:[function(t,e,i){"use strict";cc._RF.push(e,"9cc14bSjKlJZLXIxZLCm8zk","DailyTaskView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.TaskWeekActivityType=void 0;var l,c=o("App"),u=o("BagConst"),p=o("TaskConst"),d=o("ActionUtils"),h=o("AdaptUtils"),f=o("ArrayUtils"),g=o("RedPointUtils"),y=o("TipsUtils"),m=o("BaseView"),v=o("Tbl"),_=o("CCEvent"),C=o("ENUMS"),b=o("UI"),S=o("ComIcon");(function(t){t[t.One=1]="One",t[t.Two=2]="Two"})(l=r.TaskWeekActivityType||(r.TaskWeekActivityType={}));var O=cc._decorator,E=O.ccclass,I=O.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.scrollView=null,e.dailyActivity=null,e.weeklyActivity=null,e.rewardBox=null,e.weeklyBox1=null,e.weeklyBox1Num=null,e.weeklyBox2=null,e.weeklyBox2Num=null,e.dailyActivityNum=null,e.weeklyActivityNum=null,e.activityBar=null,e.activityPoints=null,e.scrollViewLayout=null,e.taskInfoPrefab=null,e.comIcon=null,e.activityPointList=[],e.activityBarOriginWidth=0,e}return a(e,t),e.prototype.onLoad=function(){this.initBtn(),this.initActivityNum(),this.initDailyReward(),this.initWeeklyReward(),this.initScrollView(),this.addEventListener(),this.initActivityBar()},e.prototype.onAdaptUI=function(){var t=this.getC("topRootNode");h.default.adaptNodeToTopInsideSafeArea(t,0);var e=this.getC("nodeTop1");h.default.adaptNodeToTopInsideSafeArea(e,0);var i=this.getC("DayActivity");h.default.adaptNodeToTop(i);var n=this.getC("Topbg");h.default.adaptNodeToTop(n);var o=h.default.getScreenBangsSize();n.height+=o.height;var r=this.getC("nodeTop2");h.default.adaptNodeToTopNode(r,e),this.getC("ButtomBg").y=-cc.winSize.height/2;var a=this.getC("scrollview"),s=this.getC("view");a.height=cc.winSize.height-n.height-100,s.height=cc.winSize.height-n.height-100},e.prototype.initActivityBar=function(){this.activityBarOriginWidth=this.activityBar.width,this.refreshActivityBar()},e.prototype.refreshActivityBar=function(){var t=c.default.taskMgr.getDailyActivity().activity,e=v.default.TaskDailyActivityTable.findAll(function(){return!0}),i=t/e[e.length-1].activity;i>1&&(i=1),this.activityBar.width=this.activityBarOriginWidth*i;for(var n=0;n<this.activityPoints.childrenCount;n++){var o=this.activityPoints.children[n];o.active=!1,this.activityPointList[n]=o}for(var r=0;i>=.2;)this.activityPointList[r].active=!0,r++,i-=.2},e.prototype.initActivityNum=function(){var t=c.default.taskMgr.getDailyActivity();this.dailyActivityNum.getComponent(cc.Label).string=String(t.activity);var e=c.default.taskMgr.getWeeklyActivity();this.weeklyActivityNum.getComponent(cc.Label).string=String(e.activity)},e.prototype.initWeeklyReward=function(){this.refreshWeeklyReward()},e.prototype.showAwardTips=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n[0]==u.ItemIdEnum.Gold){var o="Coin + "+n[1];e.push(o)}n[0]==u.ItemIdEnum.Diamond&&(o="Diamond + "+n[1],e.push(o)),n[0]==u.ItemIdEnum.TaskActivity&&(o="Active + "+n[1],e.push(o)),n[0]==u.ItemIdEnum.VipExp&&(o="VIP Exp + "+n[1],e.push(o)),n[0]==u.ItemIdEnum.WarHonorExp&&(o="Battle pass Exp + "+n[1],e.push(o))}var r=function(t){if(0==t)return y.default.showTips(e[0]),"continue";var i=.75*t;a.node.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(function(){y.default.showTips(e[t])})))},a=this;for(i=0;i<e.length;i++)r(i)},e.prototype.refreshWeeklyReward=function(){var t=this,e=c.default.taskMgr.getWeeklyActivity(),i=v.default.TaskWeekActivityTable.findAll(function(){return!0});this.weeklyBox1Num.getComponent(cc.Label).string=String(i[0].activity),this.weeklyBox2Num.getComponent(cc.Label).string=String(i[1].activity),e.activity>=i[0].activity?-1!=e.receivedList.indexOf(1)?(c.default.offClick(this.weeklyBox1.getComponent(cc.Button)),c.default.onClick(this.weeklyBox1,function(){y.default.showTips("Already claimed")})):(c.default.offClick(this.weeklyBox1.getComponent(cc.Button)),c.default.onClick(this.weeklyBox1,function(){var e=v.default.TaskWeekActivityTable.findById(1).award;c.default.taskMgr.receiveWeekActivityAward(1),c.default.viewMgr.showUI(b.UI.COMMONREWARD_VIEW,e),t.refreshWeeklyReward()})):(c.default.offClick(this.weeklyBox1.getComponent(cc.Button)),c.default.onClick(this.weeklyBox1,function(){y.default.showTips("Not active enough to claim")})),e.activity>=i[1].activity?-1!=e.receivedList.indexOf(2)?(c.default.offClick(this.weeklyBox2.getComponent(cc.Button)),c.default.onClick(this.weeklyBox2,function(){y.default.showTips("Already claimed")})):(c.default.offClick(this.weeklyBox2.getComponent(cc.Button)),c.default.onClick(this.weeklyBox2,function(){var e=v.default.TaskWeekActivityTable.findById(2).award;c.default.taskMgr.receiveWeekActivityAward(2),c.default.viewMgr.showUI(b.UI.COMMONREWARD_VIEW,e),t.refreshWeeklyReward()})):(c.default.offClick(this.weeklyBox2.getComponent(cc.Button)),c.default.onClick(this.weeklyBox2,function(){y.default.showTips("Not active enough to claim")}))},e.prototype.initBtn=function(){var t=this;c.default.onClick(this.btnBack,function(){t.closeSelf()})},e.prototype.initScrollView=function(){var t=this,e=(this.scrollView.getComponent(cc.ScrollView),c.default.taskMgr.getShowTaskList());this.scrollViewLayout.destroyAllChildren();for(var i=function(i){var o=e[i],r=o.VO,a=r.desc,s=cc.instantiate(n.taskInfoPrefab);n.scrollViewLayout.addChild(s),n.seekC(s,"labTarget").getComponent(cc.Label).string=a;var l=n.seekC(s,"labTargetNum"),u=o.task.progress,d=r.num;l.getComponent(cc.Label).string=u+"/"+d;for(var h=r.award,f=n.seekC(s,"layout"),g=0;g<h.length;g++){var m=h[g],_=m[0],O=m[1],E=cc.instantiate(n.comIcon);E.parent=f,E.getComponent(S.default).initialize(_,O);var I=n.seekC(E,"Icon");E.setContentSize(96,96),I.setContentSize(96,96)}var w=n.seekC(s,"btnGo"),A=n.seekC(s,"btnGet"),R=n.seekC(s,"btnHadGet");w.active=!1,A.active=!1,R.active=!1,o.task.status==p.TaskStatusEnum.CanNot?(w.active=!0,c.default.onClick(w,function(){var t=c.default.levelServer.getMaxChapter();c.default.levelServer.enterChapter(t),c.default.viewMgr.showUI(b.UI.LOADING_VIEW),c.default.sceneMgr.loadScene(C.SCENE.BATTLE)})):o.task.status==p.TaskStatusEnum.CanGet?(A.active=!0,c.default.onClick(A,function(){c.default.taskMgr.receiveAward(o.task.id);var e=v.default.TaskTable.findById(o.task.id).award;c.default.viewMgr.showUI(b.UI.COMMONREWARD_VIEW,e),t.initScrollView(),t.refreshActivityBar(),t.refreshDailyReward(),t.refreshWeeklyReward(),t.initActivityNum()})):o.task.status==p.TaskStatusEnum.HadGet&&(R.active=!0,c.default.onClick(R,function(){y.default.showTips("Already claimed")}))},n=this,o=0;o<e.length;o++)i(o)},e.prototype.initDailyReward=function(){this.refreshDailyReward()},e.prototype.refreshDailyReward=function(){for(var t=this,e=c.default.taskMgr.getDailyActivity(),i=v.default.TaskDailyActivityTable.findAll(function(){return!0}),n=function(n){var r=o.rewardBox.children[n],a=o.seekC(r,"BoxActive"),s=o.seekC(r,"BoxGet"),l=o.seekC(r,"imgGet");o.seekC(r,"labNum").getComponent(cc.Label).string=i[n].activity,e.activity>=i[n].activity?-1!=e.receivedList.indexOf(n+1)?(c.default.offClick(r.getComponent(cc.Button)),c.default.onClick(r,function(){y.default.showTips("Already claimed")}),s.active=!0,a.active=!1,l.active=!0):(c.default.offClick(r.getComponent(cc.Button)),c.default.onClick(r,function(){c.default.taskMgr.receiveDailyActivityAward(n+1);var e=v.default.TaskDailyActivityTable.findById(n+1).award;c.default.viewMgr.showUI(b.UI.COMMONREWARD_VIEW,e),t.refreshDailyReward()}),s.active=!1,a.active=!0,l.active=!1):(c.default.offClick(r.getComponent(cc.Button)),c.default.onClick(r,function(){y.default.showTips("Not active enough to claim")}),s.active=!0,a.active=!1,l.active=!1)},o=this,r=0;r<this.rewardBox.childrenCount;r++)n(r)},e.prototype.addEventListener=function(){var t=this;c.default.event.on(_.default.DailyActivity_CREASE,this.refreshDailyReward,this),d.default.sequence(this.node,.1,function(){t.eventOnRedPoint({eventName:_.CCEventRedPoint.TaskWeeklyBox,handler:t.handlerTaskWeeklyBox,target:t}),t.eventOnRedPoint({eventName:_.CCEventRedPoint.TaskDailyBox,handler:t.handlerTaskDailyBox,target:t})})},e.prototype.handlerTaskDailyBox=function(t){for(var e=v.default.TaskDailyActivityTable.findAll(function(){return!0}),i=0;i<this.rewardBox.childrenCount;i++){var n=this.rewardBox.children[i],o=e[i];f.default.isInside(t,o.id)?g.default.ShowRedPoint(n,!0,{x:50,y:50}):g.default.ShowRedPoint(n,!1,{x:50,y:50})}},e.prototype.handlerTaskWeeklyBox=function(t){-1!=t.indexOf(l.One)?g.default.ShowRedPoint(this.weeklyBox1,!0,{x:25,y:25,scale:.5}):g.default.ShowRedPoint(this.weeklyBox1,!1,{x:25,y:25,scale:.5}),-1!=t.indexOf(l.Two)?g.default.ShowRedPoint(this.weeklyBox2,!0,{x:25,y:25,scale:.5}):g.default.ShowRedPoint(this.weeklyBox2,!1,{x:25,y:25,scale:.5})},s([I(cc.Node)],e.prototype,"btnBack",void 0),s([I(cc.Node)],e.prototype,"scrollView",void 0),s([I(cc.Node)],e.prototype,"dailyActivity",void 0),s([I(cc.Node)],e.prototype,"weeklyActivity",void 0),s([I(cc.Node)],e.prototype,"rewardBox",void 0),s([I(cc.Node)],e.prototype,"weeklyBox1",void 0),s([I(cc.Node)],e.prototype,"weeklyBox1Num",void 0),s([I(cc.Node)],e.prototype,"weeklyBox2",void 0),s([I(cc.Node)],e.prototype,"weeklyBox2Num",void 0),s([I(cc.Node)],e.prototype,"dailyActivityNum",void 0),s([I(cc.Node)],e.prototype,"weeklyActivityNum",void 0),s([I(cc.Node)],e.prototype,"activityBar",void 0),s([I(cc.Node)],e.prototype,"activityPoints",void 0),s([I(cc.Node)],e.prototype,"scrollViewLayout",void 0),s([I(cc.Prefab)],e.prototype,"taskInfoPrefab",void 0),s([I(cc.Prefab)],e.prototype,"comIcon",void 0),s([E],e)}(m.default);r.default=w,cc._RF.pop()},{}],DamageNumberMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3567apUjTBPMKDukNGmNLzn","DamageNumberMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("EffectConst"),p=o("ArrayUtils"),d=o("LoggerUtils"),h=o("NodeUtils"),f=o("Utils"),g=o("Tbl"),y=o("RES"),m=cc._decorator,v=m.ccclass,_=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.damageNumberList=[],e.wudiList=[],e.dodgeList=[],e.frozenDefenseList=[],e.randomRange=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.damageNumberLayer=this.getC("damageNumberLayer")},e.prototype.onTick=function(t){this.onTickCheckDamageNumber(t)||this.onTickCheckWudi(t)||this.onTickCheckDodge(t)||this.onTickCheckFrozenDefense(t)},e.prototype.initialize=function(t){this.scene=t;var e=g.default.CommonTable.findByKey("DamageNumberRandomRange");e&&(this.randomRange=e.arrays)},e.prototype.showDamageNumber=function(t,e,i,n,o,r){void 0===o&&(o=u.DamageTypeEnum.Real),this.damageNumberList.push({wPos:t,damage:e,isCritical:i,hitType:n,damageType:o,damageShowConfig:r})},e.prototype.showWudi=function(t){this.wudiList.push(t)},e.prototype.showDodge=function(t){this.dodgeList.push(t)},e.prototype.showFrozenDefense=function(t){this.frozenDefenseList.push(t)},e.prototype.onTickCheckDamageNumber=function(){if(0==this.damageNumberList.length)return!1;for(var t=0;t<this.damageNumberList.length;t++)return this.productDamageNumber(this.damageNumberList[t]),p.default.remove(this.damageNumberList,0),!0;return this.damageNumberList=[],!0},e.prototype.onTickCheckWudi=function(){if(0==this.wudiList.length)return!1;for(var t=0;t<this.wudiList.length;t++)return this.productWudi(this.wudiList[t]),p.default.remove(this.wudiList,0),!0;return this.wudiList=[],!0},e.prototype.onTickCheckFrozenDefense=function(){if(0==this.frozenDefenseList.length)return!1;for(var t=0;t<this.frozenDefenseList.length;t++)return this.productFrozenDefense(this.frozenDefenseList[t]),p.default.remove(this.frozenDefenseList,0),!0;return this.frozenDefenseList=[],!0},e.prototype.onTickCheckDodge=function(){if(0==this.dodgeList.length)return!1;for(var t=0;t<this.dodgeList.length;t++)return this.productDodge(this.dodgeList[t]),p.default.remove(this.dodgeList,0),!0;return this.dodgeList=[],!0},e.prototype.productDamageNumber=function(t){var e,i=null;t.isCritical?(e=l.default.resMgr.getPrefab(y.ResBattleScene.prefab.DamageNumberBaoJi.url),i="Crit "+t.damage):(e=l.default.resMgr.getPrefab(y.ResBattleScene.prefab.DamageNumberPuGong.url),i=t.damage);var n=cc.instantiate(e),o=n.getComponent("ComDamageNumber");if(t.isCritical?o.initialize(i):t.damageShowConfig?t.damageShowConfig.color?o.initialize(i,t.damageShowConfig.color):(d.default.warn("\u4f24\u5bb3\u5c55\u793a\u4f53\u6ca1\u6709\u989c\u8272"),o.initialize(i)):(d.default.warn("\u6ca1\u6709\u4f24\u5bb3\u5c55\u793a\u4f53"),o.initialize(i)),this.damageNumberLayer.addChild(n),this.randomRange){t.wPos.addSelf(cc.v2(this.randomRange[1],this.randomRange[2]));var r=f.default.rand(-this.randomRange[3]/2,this.randomRange[2]/2),a=f.default.rand(-this.randomRange[4]/2,this.randomRange[4]/2);t.wPos.addSelf(cc.v2(r,a))}h.default.setWorldPos(n,t.wPos)},e.prototype.productFrozenDefense=function(t){var e=l.default.resMgr.getPrefab(y.ResBattleScene.prefab.FrozenDefense.url),i=cc.instantiate(e);if(this.damageNumberLayer.addChild(i),this.randomRange){t.addSelf(cc.v2(this.randomRange[1],this.randomRange[2]));var n=f.default.rand(-this.randomRange[3]/2,this.randomRange[2]/2),o=f.default.rand(-this.randomRange[4]/2,this.randomRange[4]/2);t.addSelf(cc.v2(n,o))}h.default.setWorldPos(i,t)},e.prototype.productWudi=function(t){var e=l.default.resMgr.getPrefab(y.ResBattleScene.prefab.DamageWudi.url),i=cc.instantiate(e);if(this.damageNumberLayer.addChild(i),this.randomRange){t.addSelf(cc.v2(this.randomRange[1],this.randomRange[2]));var n=f.default.rand(-this.randomRange[3]/2,this.randomRange[2]/2),o=f.default.rand(-this.randomRange[4]/2,this.randomRange[4]/2);t.addSelf(cc.v2(n,o))}h.default.setWorldPos(i,t)},e.prototype.productDodge=function(t){var e=l.default.resMgr.getPrefab(y.ResBattleScene.prefab.DamageDodge.url),i=cc.instantiate(e);if(this.damageNumberLayer.addChild(i),this.randomRange){t.addSelf(cc.v2(this.randomRange[1],this.randomRange[2]));var n=f.default.rand(-this.randomRange[3]/2,this.randomRange[2]/2),o=f.default.rand(-this.randomRange[4]/2,this.randomRange[4]/2);t.addSelf(cc.v2(n,o))}h.default.setWorldPos(i,t)},s([v],e)}(c.default));r.default=_,cc._RF.pop()},{}],DataHelper:[function(t,e,i){"use strict";cc._RF.push(e,"f0968caz4RAu721aU6gv4xm","DataHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Singleton"),l=o("TypeUtils"),c=o("UserUtils"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_rootKeyStr=null,e.m_Data=null,e}return a(e,t),e.prototype.init=function(t){return this.m_rootKeyStr=t,this._initData(),this},e.prototype._initData=function(){var t=c.default.getVal(this.m_rootKeyStr);this.m_Data=t?JSON.parse(t):{original:{},secret:{}}},e.prototype._saveData=function(){var t=JSON.stringify(this.m_Data);c.default.setVal(this.m_rootKeyStr,t)},e.prototype.getValue=function(t,e){return this.m_Data||cc.error("this.m_Data === null , key = ",t,",this.m_rootKeyStr = ",this.m_rootKeyStr),l.default.isRealNull(this.m_Data.secret[t])?l.default.isRealNull(e)?(cc.warn("DataHelper.getValue key = ",t,",defaultVal = ",e),null):(this.setValue(t,e),this._saveData(),e):this.m_Data.secret[t]},e.prototype.setValue=function(t,e){this.m_Data.original[t]=e,this.m_Data.secret[t]=this.encryption(e),this._saveData()},e.prototype._getValue=function(t){return this.decryption(this.m_Data.secret[t])},e.prototype.encryption=function(t){return t},e.prototype.decryption=function(t){return t},e}(s.default);r.default=u,cc._RF.pop()},{}],DataMgr:[function(t,e,i){"use strict";cc._RF.push(e,"62a85aVXRhE4KinLK9Siyyh","DataMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chapter=1,e}return a(e,t),e}(o("Singleton").default);r.default=s,cc._RF.pop()},{}],DigitTable:[function(t,e,i){"use strict";cc._RF.push(e,"841347nj2BO0b3t3CKFcoUF","DigitTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("DigitVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("digit_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],DigitVO:[function(t,e,i){"use strict";cc._RF.push(e,"e5d26WQIiVOJZAtWxzqwjfM","DigitVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1]},cc._RF.pop()},{}],DropTable:[function(t,e,i){"use strict";cc._RF.push(e,"f0aafZIpqVCr4OHHjFleJ9r","DropTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("DropVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("drop_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.dropId,n)}},t.prototype.findByDropid=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],DropVO:[function(t,e,i){"use strict";cc._RF.push(e,"3aab2+4rXVHgrGsefVl7bTQ","DropVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.dropId=t[0],this.level=t[1],this.name=t[2],this.staticGroup=t[3],this.relatedGroup=t[4],this.independentGroup=t[5],this.maxDrop=t[6]},cc._RF.pop()},{}],ENUMS:[function(t,e,i){"use strict";cc._RF.push(e,"da2c7p/jE1P6bNX6/g1yIBn","ENUMS");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.BulletAimTypeEnum=n.WarningTypeEnum=n.ItemLevelEnum=n.HeroSkinEnum=n.ColorPriorityEnum=n.LevelStatusEnum=n.GROUP=n.STORAGE=n.ZINDEX=n.SCENE=void 0,function(t){t.MAIN="MainScene",t.BATTLE="BattleScene",t.TEST_BATTLE="TestBattleScene"}(n.SCENE||(n.SCENE={})),function(t){t[t.LOADING=1e3]="LOADING",t[t.TAOST=999]="TAOST",t[t.ALERT=998]="ALERT",t[t.CONFIRM=997]="CONFIRM",t[t.MAIN=10]="MAIN",t[t.SKILL=9]="SKILL",t[t.CHAPTER=9]="CHAPTER"}(n.ZINDEX||(n.ZINDEX={})),function(t){t.ARM="ARM",t.CUP="CUP",t.HAT="HAT",t.COIN="COIN",t.NAME="NAME",t.GUIDE="GUIDE",t.CLOTHE="CLOTHE",t.DIAMOND="DIAMOND",t.VIBRATE="VIBRATE",t.ARMS_RECORD="ARMS_RECORD",t.HATS_RECORD="HATS_RECORD",t.MUSIC_VOLUME="MUSIC_VOLUME",t.SOUND_VOLUME="SOUND_VOLUME",t.REWARD_RECORD="REWARD_RECORD",t.BATTLE_RECORD="BATTLE_RECORD",t.SIGNIN_RECORD="SIGNIN_RECORD",t.CLOTHES_RECORD="CLOTHES_RECORD",t.COMPOSE_RECORD="COMPOSE_RECORD"}(n.STORAGE||(n.STORAGE={})),function(t){t.DEFAULT="default",t.STEP="step",t.FLOOR="floor",t.MONSTER="monster",t.UI="ui",t.HERO="hero",t.BULLET="bullet"}(n.GROUP||(n.GROUP={})),function(t){t[t.Preparing=0]="Preparing",t[t.Fighting=1]="Fighting",t[t.Pause=2]="Pause",t[t.RewardSelect=3]="RewardSelect",t[t.FinalReport=4]="FinalReport",t[t.Exiting=5]="Exiting"}(n.LevelStatusEnum||(n.LevelStatusEnum={})),function(t){t[t.DEFAULT=1]="DEFAULT",t[t.LOW=2]="LOW",t[t.MID=3]="MID",t[t.HIGH=4]="HIGH",t[t.BURNING=5]="BURNING",t[t.BEDAMAGE=6]="BEDAMAGE"}(n.ColorPriorityEnum||(n.ColorPriorityEnum={})),function(t){t.Hero1Gun1="gun_01",t.Hero1Gun2="gun_02",t.Hero1Gun3="gun_03",t.Hero2Gun1="gun_01",t.Hero2Gun2="gun_02",t.Hero2Gun3="gun_03"}(n.HeroSkinEnum||(n.HeroSkinEnum={})),function(t){t[t.Small=0]="Small",t[t.Middle=1]="Middle",t[t.Big=2]="Big",t[t.SuperBig=3]="SuperBig",t[t.Final=4]="Final"}(n.ItemLevelEnum||(n.ItemLevelEnum={})),function(t){t[t.BossComing=1]="BossComing",t[t.ALotOfMonster=2]="ALotOfMonster"}(n.WarningTypeEnum||(n.WarningTypeEnum={})),function(t){t[t.NoTarget=0]="NoTarget",t[t.Target=1]="Target",t[t.TargetX=2]="TargetX"}(n.BulletAimTypeEnum||(n.BulletAimTypeEnum={})),cc._RF.pop()},{}],EffectConst:[function(t,e,i){"use strict";cc._RF.push(e,"d8d6csTh5lLXoFDrrOGSs9N","EffectConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.DamageTypeEnum=n.EffectTypeEnum=void 0,function(t){t[t.Default=-1]="Default"}(n.EffectTypeEnum||(n.EffectTypeEnum={})),function(t){t[t.Real=1]="Real",t[t.Common=5]="Common"}(n.DamageTypeEnum||(n.DamageTypeEnum={})),cc._RF.pop()},{}],EffectFactory:[function(t,e,i){"use strict";cc._RF.push(e,"3149eGsk21NeL+32ETgWZc6","EffectFactory");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tbl"),a=n("Effect_1"),s=n("Effect_2"),l=n("Effect_3"),c=n("Effect_4"),u=n("Effect_100"),p=n("Effect_101"),d=n("Effect_102"),h=n("Effect_103"),f=n("Effect_104"),g=n("Effect_105"),y=n("Effect_106"),m=n("Effect_107"),v=n("Effect_108"),_=n("Effect_200"),C=n("Effect_201"),b=n("Effect_300"),S=n("Effect_301"),O=n("Effect_350"),E=n("Effect_351"),I=n("Effect_363"),w=n("Effect_109"),A=n("Effect_110"),R=n("Effect_111"),T=function(){function t(){}return t.create=function(t,e,i,n){var o=r.default.EffectTable.findByEffectid(t);if(null!=o){var T=o.effectType;switch(T){case 1:var P=new a.default(o,e,i,n);return P.init(),P;case 2:var L=new s.default(o,e,i,n);return L.init(),L;case 3:var M=new l.default(o,e,i,n);return M.init(),M;case 4:var k=new c.default(o,e,i,n);return k.init(),k;case 100:var B=new u.default(o,e,i,n);return B.init(),B;case 101:var V=new p.default(o,e,i,n);return V.init(),V;case 102:var N=new d.default(o,e,i,n);return N.init(),N;case 103:var D=new h.default(o,e,i,n);return D.init(),D;case 104:var F=new f.default(o,e,i,n);return F.init(),F;case 105:var U=new g.default(o,e,i,n);return U.init(),U;case 106:var j=new y.default(o,e,i,n);return j.init(),j;case 107:var G=new m.default(o,e,i,n);return G.init(),G;case 108:var x=new v.default(o,e,i,n);return x.init(),x;case 109:var H=new w.default(o,e,i,n);return H.init(),H;case 110:var W=new A.default(o,e,i,n);return W.init(),W;case 111:var q=new R.default(o,e,i,n);return q.init(),q;case 200:var z=new _.default(o,e,i,n);return z.init(),z;case 201:var K=new C.default(o,e,i,n);return K.init(),K;case 300:var J=new b.default(o,e,i,n);return J.init(),J;case 301:var Q=new S.default(o,e,i,n);return Q.init(),Q;case 350:var Y=new O.default(o,e,i,n);return Y.init(),Y;case 351:var X=new E.default(o,e,i,n);return X.init(),X;case 363:var Z=new I.default(o,e,i,n);return Z.init(),Z;default:console.error("EffectFactory \u914d\u7f6e\u4e86\u672a\u5b9e\u73b0\u7684\u6548\u679c\u7c7b\u578b\uff01effectType:%s",T)}return null}console.error("\u521b\u5efa\u6548\u679c\u5931\u8d25\uff1askillId:%s",t)},t}();o.default=T,cc._RF.pop()},{}],EffectTable:[function(t,e,i){"use strict";cc._RF.push(e,"58945maPSZBKalflstumBEF","EffectTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("EffectVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("effect_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.effectId,n)}},t.prototype.findByEffectid=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],EffectVO:[function(t,e,i){"use strict";cc._RF.push(e,"20c428HmkBHAot5/03cAl2K","EffectVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.effectId=t[0],this.effectType=t[1],this.param1=t[2],this.param2=t[3],this.param3=t[4],this.param4=t[5],this.param5=t[6],this.arrayParam=t[7],this.stringParam=t[8],this.param6=t[9]},cc._RF.pop()},{}],Effect_100:[function(t,e,i){"use strict";cc._RF.push(e,"9a398ac/IdNuarUqiW9orf+","Effect_100");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Utils"),l=o("AttributeConst"),c=o("ObjConst"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEffect=!1,e}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){if(t.prototype.begin.call(this),!this._targeter.isState(c.ObjStateEnum.Die)){var e=this._targeter.getAttr(l.AttrTypeEnum.frozenDefense);s.default.rand(1,1e4)<=e&&(this.isEffect=!0,this._targeter.setState(c.ObjStateEnum.Frozen))}},e.prototype.end=function(){t.prototype.end.call(this),this.isEffect&&this._targeter.exitState(c.ObjStateEnum.Frozen)},e}(o("Effect").default);r.default=u,cc._RF.pop()},{}],Effect_101:[function(t,e,i){"use strict";cc._RF.push(e,"657efT60AZNAr9SAXEs/9gE","Effect_101");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._targeter.setState(s.ObjStateEnum.Poisoning)},e.prototype.end=function(){t.prototype.end.call(this),this._targeter.exitState(s.ObjStateEnum.Poisoning)},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_102:[function(t,e,i){"use strict";cc._RF.push(e,"9a329ftyMdHqKmUV/a8Dqs2","Effect_102");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._targeter.setState(s.ObjStateEnum.Burning)},e.prototype.end=function(){t.prototype.end.call(this),this._targeter.exitState(s.ObjStateEnum.Burning)},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_103:[function(t,e,i){"use strict";cc._RF.push(e,"c87adzEVhRCupM/jnVWP+hp","Effect_103");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._targeter.setState(s.ObjStateEnum.Noenemy)},e.prototype.end=function(){t.prototype.end.call(this),this._targeter.exitState(s.ObjStateEnum.Noenemy)},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_104:[function(t,e,i){"use strict";cc._RF.push(e,"5b904Xn905BTYJfXFcZtLva","Effect_104");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("AttributeConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this);var e=this._EffectVO.param1||1;this._targeter.getAttr(s.AttrTypeEnum.scale),this._targeter.addAttr(s.AttrTypeEnum.scale,0,e)},e.prototype.end=function(){t.prototype.end.call(this);var e=this._EffectVO.param1||1;this._targeter.getAttr(s.AttrTypeEnum.scale),this._targeter.addAttr(s.AttrTypeEnum.scale,0,1/e)},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_105:[function(t,e,i){"use strict";cc._RF.push(e,"05c3b9WR6RC/7ikqUJN3INy","Effect_105");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._EffectVO.param1,this._EffectVO.param2,this._EffectVO.param3,this._EffectVO.param4},e.prototype.end=function(){t.prototype.end.call(this)},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_106:[function(t,e,i){"use strict";cc._RF.push(e,"4ac4f1oGHdMU4oKYj6AHSB/","Effect_106");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._EffectVO.param1,this._EffectVO.param2,this._EffectVO.param3,this._EffectVO.param4||s.SkinColorEnum.Slowly},e.prototype.end=function(){t.prototype.end.call(this),this._EffectVO.param1,this._EffectVO.param2,this._EffectVO.param3,this._EffectVO.param4||s.SkinColorEnum.Slowly},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_107:[function(t,e,i){"use strict";cc._RF.push(e,"9b8c4SIIIVGSLoR/N2LoIzq","Effect_107");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._targeter.setState(s.ObjStateEnum.OneHitOneKill)},e.prototype.end=function(){t.prototype.end.call(this)},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_108:[function(t,e,i){"use strict";cc._RF.push(e,"10e0d46/XlGwZYZzRurLS+f","Effect_108");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._targeter.setState(s.ObjStateEnum.TimeStop)},e.prototype.end=function(){t.prototype.end.call(this),this._targeter.exitState(s.ObjStateEnum.TimeStop)},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_109:[function(t,e,i){"use strict";cc._RF.push(e,"127463wriRGPasBUniXg59d","Effect_109");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){console.log("[Effect109] init"),t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._targeter.setSkin(this._EffectVO.stringParam)},e.prototype.end=function(){t.prototype.end.call(this),this._targeter.setSkin("gun_02")},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_110:[function(t,e,i){"use strict";cc._RF.push(e,"5db122PYV9L7Y9CjDZvZqQV","Effect_110");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){console.log("[Effect110] init"),t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this);var e=this._EffectVO.param1;this._targeter.addBulletFeature(e,[100])},e.prototype.end=function(){t.prototype.end.call(this);var e=this._EffectVO.param1;this._targeter.delBulletFeature(e)},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_111:[function(t,e,i){"use strict";cc._RF.push(e,"729a200aMJKaIEtifFx0Utn","Effect_111");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Utils"),l=o("AttributeConst"),c=o("ObjConst"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEffect=!1,e}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){if(t.prototype.begin.call(this),!this._targeter.isState(c.ObjStateEnum.Die)){var e=this._targeter.getAttr(l.AttrTypeEnum.frozenDefense);e&&s.default.rand(1,1e4)<=e?this._targeter.showFrozenDefense():(this.isEffect=!0,this._targeter.setState(c.ObjStateEnum.Frozen))}},e.prototype.end=function(){t.prototype.end.call(this),this.isEffect&&this._targeter.exitState(c.ObjStateEnum.Frozen)},e}(o("Effect").default);r.default=u,cc._RF.pop()},{}],Effect_1:[function(t,e,i){"use strict";cc._RF.push(e,"a02622RZx1GQpCQ/Vk1ON4T","Effect_1");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Utils"),l=o("AttributeConst"),c=o("CombatConst"),u=o("ObjConst"),p=o("CombatUtils"),d=o("EffectConst"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.actOnce=function(){t.prototype.actOnce.call(this);var e=this._EffectVO.param1||1,i=this._EffectVO.param2||0,n=(this._EffectVO.param3,this._attacker.getAttr(l.AttrTypeEnum.attack)),o=this._attacker.getAttr(l.AttrTypeEnum.crit),r=this._attacker.getAttr(l.AttrTypeEnum.critDamage);o/=1e4;var a=this._targeter.getAttr(l.AttrTypeEnum.defense),h=this._targeter.getAttr(l.AttrTypeEnum.reduceDamagePrecent),f={attack:n*=1-h/1e4,crit:o,critDamage:r,times:e,extraDamage:i},g={defense:a,magicDefense:0,reduceDamagePrecent:h,critDamage:r,dodge:this._targeter.getAttr(l.AttrTypeEnum.dodge)};if(s.default.rand(1,1e4)<=g.dodge)this._targeter.showDodgeLab();else{this._targeter.getType()==u.ObjTypeEnum.BOSS&&f.extraDamage>99999&&(f.extraDamage=0);var y=p.default.calDamage(f,g),m=y[0],v=y[1],_=this._buff.getDamageRatio()||1;if(_<0&&(_=1,console.error("damageRatio err! damageRatio:%s",_)),v*=_,v=Math.ceil(v),!this.checkOneHitOneKillDamage(this._attacker,this._targeter,v)){var C=cc.color();C.r=this._EffectVO.arrayParam[0],C.g=this._EffectVO.arrayParam[1],C.b=this._EffectVO.arrayParam[2],null==C.r&&(C.r=255),null==C.g&&(C.g=255),null==C.b&&(C.b=255);var b={color:C,scale:1};this._targeter.beDamage(this._attacker,v,m,null,d.DamageTypeEnum.Common,b,this._EffectVO.param6==c.StdBool.True)}}},e.prototype.checkOneHitOneKillDamage=function(t,e,i){var n=this._attacker.getAttr(l.AttrTypeEnum.oneHitOneKill)/1e4;if(s.default.rand()<=n){if(t.showSkillNameAbove("One-Hit Kill",1),e.getType()==u.ObjTypeEnum.Monster)return e.beDamage(t,9999999,!0),!0;if(e.getType()==u.ObjTypeEnum.BOSS)return i*=2,e.beDamage(t,i),!0}return!1},e}(o("Effect").default);r.default=h,cc._RF.pop()},{}],Effect_200:[function(t,e,i){"use strict";cc._RF.push(e,"02a05lteotMMZvzeKKCYkwz","Effect_200");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._targeter.getType()==s.ObjTypeEnum.Hero?(this._EffectVO.param1,1==this._EffectVO.param2||console.warn("Effect200 \u53c2\u6570\u5f02\u5e38")):console.warn("Effect200 \u5f02\u5e38\u7684\u65bd\u6cd5\u76ee\u6807")},e.prototype.end=function(){t.prototype.end.call(this),this._targeter.getType()==s.ObjTypeEnum.Hero?(this._EffectVO.param1,1==this._EffectVO.param2||console.warn("Effect200 \u53c2\u6570\u5f02\u5e38")):console.warn("Effect200 \u5f02\u5e38\u7684\u65bd\u6cd5\u76ee\u6807")},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_201:[function(t,e,i){"use strict";cc._RF.push(e,"bec59Zv43tMLrmiRYyeU+ia","Effect_201");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this);var e=this._EffectVO.param1,i=this._EffectVO.arrayParam;this._targeter.addBulletFeature(e,i)},e.prototype.end=function(){t.prototype.end.call(this)},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_2:[function(t,e,i){"use strict";cc._RF.push(e,"0bd823vaNVM3riUp/bHIAEf","Effect_2");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("AttributeConst"),l=o("ObjConst"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._attrType=null,e._attrRatio=null,e._attrValue=null,e}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this),this._attrType=this._EffectVO.param1,this._attrRatio=this._EffectVO.param2||0,this._attrValue=this._EffectVO.param3||0;var e=this._targeter.getAttr(this._attrType);this._attrType==s.AttrTypeEnum.reduceDamagePrecent&&this._targeter.setState(l.ObjStateEnum.ReduceDamage),this._targeter.addAttr(this._attrType,this._attrValue,this._attrRatio),console.log(">>> Effect2:onEnter() %s +V:%s +R:%s %s->%s",this._attrType,this._attrValue,this._attrRatio,e,this._targeter.getAttr(this._attrType))},e.prototype.end=function(){t.prototype.end.call(this);var e=this._targeter.getAttr(this._attrType);this._attrType==s.AttrTypeEnum.reduceDamagePrecent&&this._targeter.exitState(l.ObjStateEnum.ReduceDamage),this._targeter.addAttr(this._attrType,-this._attrValue,-this._attrRatio),console.log(">>> Effect2:onExit() %s -V:%s -R:%s %s->%s",this._attrType,this._attrValue,this._attrRatio,e,this._targeter.getAttr(this._attrType))},e}(o("Effect").default);r.default=c,cc._RF.pop()},{}],Effect_300:[function(t,e,i){"use strict";cc._RF.push(e,"6da01iEMptH77gdxIHnz+SH","Effect_300");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.actOnce=function(){t.prototype.actOnce.call(this);var e=this._EffectVO.param1;this._targeter.addSkill(e)},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_301:[function(t,e,i){"use strict";cc._RF.push(e,"f86f9O/zrdGo6UX4HMetVh6","Effect_301");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this);for(var e=this._EffectVO.param1,i=this._targeter.getSkillList(),n=0;n<i.length;n++){var o=i[n];o.getSkillType()==e&&o.upgrade()}},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_350:[function(t,e,i){"use strict";cc._RF.push(e,"2bce5cQz5FB/4ladSt28f/U","Effect_350");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("MathUtils"),l=o("PointUtils"),c=o("AttributeConst"),u=o("ObjConst"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.actOnce=function(){if(t.prototype.actOnce.call(this),!this._targeter.isState(u.ObjStateEnum.TimeStop)&&!this._targeter.isState(u.ObjStateEnum.Frozen)){var e=this._targeter.getAttr(c.AttrTypeEnum.hitDefense);if(!(e>=1e4)){this._EffectVO.param1;var i=this._EffectVO.param2;i-=i*e/1e4;var n,o=this._EffectVO.param3,r=this._buff.getBuffParams();n=r[1]?r[1]:0;var a=s.default.StdRadian(s.default.Angle2Radian(n)),p=cc.v2();this._targeter.getType()!=u.ObjTypeEnum.Monster&&this._targeter.getType()!=u.ObjTypeEnum.BOSS||(this._targeter.getConfigVO().isGravity&&this._targeter.getConfigVO().isGravity==u.IsGravityEnum.NotEffect?p=l.default.craeteVectorByRadian(a).mul(i):(a>1*Math.PI/2&&a<3*Math.PI/2&&(i=-i),p=cc.v2(i,0))),this._targeter.beatBack(p,o)}}},e}(o("Effect").default);r.default=p,cc._RF.pop()},{}],Effect_351:[function(t,e,i){"use strict";cc._RF.push(e,"be5b3e2UN5FQoAKkVPQx480","Effect_351");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.actOnce=function(){t.prototype.actOnce.call(this),this._EffectVO.param1,this._EffectVO.param2,this._EffectVO.param3},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_363:[function(t,e,i){"use strict";cc._RF.push(e,"0010dyoKahCyKaoecD9pWM7","Effect_363");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("LoggerUtils"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.actOnce=function(){t.prototype.actOnce.call(this);var e=this._EffectVO.param1;s.default.warn("Effect_363 >>>>>>>> 14 \u53ec\u5524\u672f"),this._attacker.getScene().createSummons(e,this._attacker)},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect_3:[function(t,e,i){"use strict";cc._RF.push(e,"319cdrC5dVLfIIKeuQAdYvm","Effect_3");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._attrType=null,e._attrRatio=null,e._attrValue=null,e}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.begin=function(){t.prototype.begin.call(this);var e=this._EffectVO.param1,i=this._EffectVO.param2||0,n=this._EffectVO.param3||0,o=this._targeter.getAttr(e),r=o*i+n;this._targeter.addAttr(e,r),console.log(">>> Effect3:onEnter() %s +V:%s +R:%s %s->%s",e,n,i,o,this._targeter.getAttr(e))},e.prototype.end=function(){t.prototype.end.call(this);var e=this._EffectVO.param1,i=this._EffectVO.param2||0,n=this._EffectVO.param3||0,o=this._targeter.getAttr(e),r=o*i+n;this._targeter.addAttr(e,-r),console.log(">>> Effect3:onExit() %s -V:%s -R:%s %s->%s",e,n,i,o,this._targeter.getAttr(e))},e}(o("Effect").default);r.default=s,cc._RF.pop()},{}],Effect_4:[function(t,e,i){"use strict";cc._RF.push(e,"e50e47g4VRMdK7mTwzIrAGq","Effect_4");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("AttributeConst"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.actOnce=function(){t.prototype.actOnce.call(this);var e=0;this._EffectVO.param2?1==this._EffectVO.param2?e=this._targeter.getAttr(s.AttrTypeEnum.hpmax)*(this._EffectVO.param3||0)+(this._EffectVO.param4||0):2==this._EffectVO.param2&&(e=this._targeter.getAttr(s.AttrTypeEnum.hp)*(this._EffectVO.param3||0)+(this._EffectVO.param4||0)):e=this._EffectVO.param4||0,0!=e&&(1==this._EffectVO.param1?this._targeter.addHp(e):2==this._EffectVO.param1?this._targeter.beDamage(this._attacker,e,!1):console.warn("Effect4 param1 \u5f02\u5e38\u7684\u53c2\u6570"))},e}(o("Effect").default);r.default=l,cc._RF.pop()},{}],Effect:[function(t,e,i){"use strict";cc._RF.push(e,"1c29fRq+tRKjrenqDPelFF4","Effect");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,i,n){this._EffectVO=null,this._targeter=null,this._attacker=null,this._buff=null,this._EffectVO=t,this._targeter=e,this._attacker=i,this._buff=n}return t.prototype.init=function(){},t.prototype.begin=function(){},t.prototype.actOnce=function(){},t.prototype.end=function(){},t}();n.default=o,cc._RF.pop()},{}],EquipmentBreakDownView:[function(t,e,i){"use strict";cc._RF.push(e,"86ff7ElmQBK86cabjw6L5oC","EquipmentBreakDownView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("ArrayUtils"),u=o("ItemUtils"),p=o("NodeUtils"),d=o("BaseView"),h=o("Tbl"),f=o("ComEquipmentBoxSelect"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.equipQualityBgList=[],e.selectSprList=[],e.selectList=[],e}return a(e,t),e.prototype.start=function(){this.initGold(),this.initBg(),this.initBreakDownBtn(),this.initScrollView()},e.prototype.initGold=function(){for(var t=this.getC("labFetch"),e="",i=[],n=function(t){var e=o.selectList[t],n=l.default.equipmentMgr.getEquipment(e),r=h.default.EquipmentTable.findById(n.equipmentId),a=h.default.EquipmentStarLevelTable.findFirst(function(t){if(t.id==n.equipmentId&&t.rank==n.star)return!0});null!=a&&(i=i.concat(a.sellPrice));var s=h.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==r.type&&t.level==n.strengthen});null!=s&&(i=i.concat(s.sellPrice))},o=this,r=0;r<this.selectList.length;r++)n(r);i=c.default.clone(i);var a=[];for(r=0;r<i.length;r++){for(var s=i[r],p=!1,d=0;d<a.length;d++){var f=a[d];if(f[0]==s[0]){p=!0,f[1]+=s[1];break}}p||a.push([s[0],s[1]])}for(r=0;r<a.length;r++)s=a[r],e=e+(u.default.getItemVO(s[0]).name+"X")+s[1]+" ";this.setString(t,e)},e.prototype.initBg=function(){var t=this,e=this.getC("btnClose");l.default.onClick(e,function(){t.closeSelf()})},e.prototype.initBreakDownBtn=function(){var t=this,e=this.getC("btnSure");l.default.onClick(e,function(){l.default.equipmentMgr.sellItemList(t.selectList),t.closeSelf()})},e.prototype.initScrollView=function(){var t=this,e=this.getC("content");p.default.destroyAllChildren(e);for(var i=l.default.equipmentMgr.getEquipmentList(function(t){if(!l.default.equipmentMgr.isWear(t.uid))return!0}),n=function(n){var r=cc.instantiate(o.ComEquipmentBreakDownItem);r.parent=e,Math.floor(n/2);var a=i[n],s=o.seekC(r,"btnSelect"),c=o.seekC(s,"sprSelect");l.default.onClick(s,function(){t.selectEquipment(a.uid,c)}),c.active=!1,o.selectSprList.push([a.uid,c]),r.getComponent(f.default).initialize({equipmentVO:a,isShowBg:!0})},o=this,r=0;r<i.length;r++)n(r)},e.prototype.selectEquipment=function(t,e){c.default.isInside(this.selectList,t)?this.selectEquipmentCancel(t,e):this.selectEquipmentSure(t,e)},e.prototype.selectEquipmentCancel=function(t,e){c.default.removeVal(this.selectList,t),e.active=!1,this.initGold()},e.prototype.selectEquipmentSure=function(t,e){this.selectList.push(t),e.active=!0,this.initGold()},s([m(cc.Prefab)],e.prototype,"ComEquipmentBreakDownItem",void 0),s([m([cc.SpriteFrame])],e.prototype,"equipQualityBgList",void 0),s([y],e)}(d.default);r.default=v,cc._RF.pop()},{}],EquipmentDetailsAwakenView:[function(t,e,i){"use strict";cc._RF.push(e,"757b4/GndpDfqNSrmEXYzI3","EquipmentDetailsAwakenView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ArrayUtils"),p=o("ColorUtils"),d=o("NodeUtils"),h=o("TipsUtils"),f=o("Tbl"),g=o("CCEvent"),y=o("UI"),m=o("ComEquipmentBoxSelect"),v=cc._decorator,_=v.ccclass,C=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRefresh=!1,e.selectList=[],e.selectSprList=[],e.equipmentNum=0,e}return a(e,t),e.prototype.initialize=function(t,e){var i=this;this.uid=t,this.isRefresh=!0,this.equipmentDataType=l.default.equipmentMgr.getEquipment(t),this.equipStarConfig=f.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==i.equipmentDataType.equipmentId&&t.rank==i.equipmentDataType.star}),this.isMaxStar=l.default.equipmentMgr.isMaxStar(this.equipmentDataType.equipmentId,this.equipmentDataType.star),this.isMaxStar||(this.equipNextStarConfig=f.default.EquipmentStarLevelTable.findFirst(function(t){if(t.rank==i.equipmentDataType.star+1&&t.id==i.equipmentDataType.equipmentId)return!0})),this.equipmentDetailsView=e},e.prototype.start=function(){this.refresh(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(g.default.EQUIPMENT_EQUIP_IMPROVETIER_FALSE,this.handlerEquipmentEquipImprovetierFalse,this),this.eventOn(g.default.EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS,this.handlerEquipmentEquipImprovetierSuc,this)},e.prototype.refresh=function(){this.initTips(),this.initEquip(),this.initAutoSelect(),this.initBtnUnSelect(),this.initBtnAwaken(),this.initNoEquipTips(),this.initFullStar()},e.prototype.initFullStar=function(){var t=this.getC("labFullStar");this.isMaxStar?t.active=!0:t.active=!1},e.prototype.initNoEquipTips=function(){var t=this.getC("nodeNoEquipTips"),e=(this.seekC(t,"labNoEquipTips1"),this.seekC(t,"labNoEquipTips2")),i=this.seekC(t,"labNoEquipTips3"),n=this.seekC(t,"labNoEquipTips4");if(this.isMaxStar)t.active=!1;else if(this.equipmentNum>0)t.active=!1;else{t.active=!0;var o=f.default.EquipmentTable.findById(this.equipmentDataType.equipmentId);this.setString(e,"Missing"),this.setString(i,"\u3010"+o.name+"\u3011"),this.setString(n,this.equipNextStarConfig.swallowNum+"pieces"),i.color=p.default.EquipmentQualityColorList[o.quality]}},e.prototype.initEquip=function(){var t=this;this.getC("view").scale=.7;var e=this.getC("content");if(d.default.destroyAllChildren(e),this.selectSprList=[],this.isMaxStar)e.active=!1;else{var i=l.default.equipmentMgr.getEquipmentList(function(e){return e.uid!=t.uid&&!l.default.equipmentMgr.isWear(e.uid)&&t.equipmentDataType.equipmentId==e.equipmentId});this.equipmentNum=i.length,i.sort(function(t,e){return t.star-e.star});for(var n=this.getC("nodeAbove"),o=(this.seekC(n,"nodeLab"),this.seekC(n,"nodeIcon"),this.seekC(n,"nodeBtn"),e.getComponent(cc.Layout).spacingX,e.getComponent(cc.Layout).spacingY,e.getComponent(cc.Layout).paddingLeft,Math.ceil(i.length/2),function(n){var o=cc.instantiate(r.ComEquipmentBreakDownItem);o.parent=e,Math.floor(n/2);var a=i[n],s=r.seekC(o,"btnSelect"),c=r.seekC(s,"sprSelect");return l.default.onClick(s,function(){t.selectEquipment(a.uid,c)}),c.active=!1,r.selectSprList.push([a.uid,c]),o.getComponent(m.default).initialize({equipmentVO:a,isShowBg:!0}),"continue"}),r=this,a=0;a<i.length;a++)o(a)}},e.prototype.initBtnAwaken=function(){var t=this;this.btnAwaken=this.getC("btnAwaken"),this.btnAwaken.active=!1,l.default.onClick(this.btnAwaken,function(){l.default.equipmentMgr.improveTier(t.uid,t.selectList)})},e.prototype.initBtnUnSelect=function(){this.btnUnSelect=this.getC("btnUnSelect");var t=this.seekC(this.btnUnSelect,"labProgress");this.isMaxStar||this.setString(t,"0/"+this.equipNextStarConfig.swallowNum)},e.prototype.initAutoSelect=function(){var t=this,e=this.getC("btnAutoSelect");if(this.isMaxStar)e.active=!1;else if(0!=this.equipmentNum){var i=this.seekC(e,"sprSelect");i.active=!1,l.default.onClick(e,function(){i.active?i.active=!1:(i.active=!0,t.doAutoSelect())})}else e.active=!1},e.prototype.doAutoSelect=function(){for(var t=0;t<this.selectSprList.length;t++){var e=this.selectSprList[t];this.selectEquipmentCancel(e[0],e[1])}var i=this.equipNextStarConfig.swallowNum;for(t=0;t<this.selectSprList.length;t++)if(e=this.selectSprList[t],this.selectEquipmentSure(e[0],e[1]),--i<=0)return},e.prototype.initTips=function(){var t=this.getC("labTips");if(this.isMaxStar)t.active=!1;else{var e=f.default.CommonTable.findByKey("EQUIP_AWAKEN_TPS1");e?this.setString(t,e.string):this.setString(t,"Public Configuration Table")}},e.prototype.selectEquipment=function(t,e){u.default.isInside(this.selectList,t)?this.selectEquipmentCancel(t,e):this.selectEquipmentSure(t,e)},e.prototype.selectEquipmentCancel=function(t,e){u.default.removeVal(this.selectList,t),e.active=!1},e.prototype.selectEquipmentSure=function(t,e){this.selectList.length>=this.equipNextStarConfig.swallowNum?h.default.showTips("Sufficient materials "):(this.selectList.push(t),e.active=!0)},e.prototype.update=function(){this.isMaxStar?(this.btnAwaken.active=!1,this.btnUnSelect.active=!1):this.selectList.length>=this.equipNextStarConfig.swallowNum?(this.btnAwaken.active=!0,this.btnUnSelect.active=!1):(this.btnAwaken.active=!1,this.btnUnSelect.active=!0)},e.prototype.handlerEquipmentEquipImprovetierFalse=function(){this.selectList=[],h.default.showTips("Failed to awaken"),this.initialize(this.uid,this.equipmentDetailsView),this.refresh()},e.prototype.handlerEquipmentEquipImprovetierSuc=function(){this.selectList=[];var t=[[this.equipmentDataType.equipmentId,1]];l.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,t),this.initialize(this.uid,this.equipmentDetailsView),this.refresh()},s([C(cc.Prefab)],e.prototype,"ComEquipmentBreakDownItem",void 0),s([_],e)}(c.default);r.default=b,cc._RF.pop()},{}],EquipmentDetailsDetailView:[function(t,e,i){"use strict";cc._RF.push(e,"a8e3cxCDg9K5bFzkmbmMNN0","EquipmentDetailsDetailView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("AttributeConst"),p=o("CommonConst"),d=o("GuideMgr"),h=o("ActionUtils"),f=o("ItemUtils"),g=o("LoggerUtils"),y=o("NodeUtils"),m=o("Tbl"),v=o("CCEvent"),_=o("UI"),C=o("ComEquipmentBox"),b=o("Recorder"),S=cc._decorator,O=S.ccclass,E=(S.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.initialize=function(t,e){this.uid=t,this.equipmentDetailsView=e,this.equipmentDataType=l.default.equipmentMgr.getEquipment(t),this.equipmentVO=m.default.EquipmentTable.findById(this.equipmentDataType.equipmentId)},e.prototype.start=function(){this.addEventListener(),this.refresh(),this.checkGuideEquipEquipment()},e.prototype.checkGuideEquipEquipment=function(){if(!l.default.guideMgr.isFinishGuide(d.GuideLineEnum.GuideEquipEquipment)){var t=this.getC("btnWear"),e=y.default.getWorldPos(t),i=t.getContentSize();i.height=i.width;var n=m.default.GuideWordTable.findById(d.GuideLineEnum.GuideEquipEquipment),o=n.name,r=n.word;l.default.viewMgr.showUI(_.UI.GUIDE_VIEW,d.GuideLineEnum.GuideEquipEquipment,i,e,o,r,!1,100)}},e.prototype.addEventListener=function(){this.eventOn(v.default.EQUIPMENT_SLOT_CHANGE,this.handlerEquipPosRefresh,this),this.eventOn(v.default.BAG_ITEM_CHANGE,this.handlerItemChange,this),this.eventOn(v.default.EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS,this.handlerEquipmentEquipImprovetierSuc,this),this.eventOn(v.default.EQUIPMENT_EQUIP_STRENTHEN_SUC,this.handlerEquipmentEquipImprovetierSuc,this)},e.prototype.refresh=function(){this.initItemIcon(),this.initBaseAttr(),this.initSkillAttr(),this.initLabQuality(),this.initBtnWear(),this.initBtnUnWear()},e.prototype.initLabQuality=function(){var t=this,e=this.getC("labQuality"),i=m.default.EquipmentTable.findFirst(function(e){return e.id==t.equipmentDataType.equipmentId}).quality;e.getComponent(cc.Label).string=p.EquipmentQualityColorConst[i].name,e.color=p.EquipmentQualityColorConst[i].color},e.prototype.initItemIcon=function(){this.getC("ComEquipmentBox").getComponent(C.default).initialize({equipmentVO:this.equipmentDataType,isShowBg:!0})},e.prototype.initBaseAttr=function(){var t=this;g.default.warn("EquipmentDetailsDetailView TODO,\u672a\u77e5\u9053\u5f3a\u5316\u5230\u6700\u9ad8\u7ea7\u7684\u6837\u5f0f");var e=this.getC("attrLayout");y.default.destroyAllChildren(e);var i=this.seekC(e,"imgAttr");i.active=!1;var n,o=l.default.equipmentMgr.getAttribute(this.uid,this.equipmentDataType.star,this.equipmentDataType.strengthen),r=this.equipmentDataType.strengthen+1;m.default.EquipmentStrengthenTable.findFirst(function(e){return e.level==r&&e.type==t.equipmentVO.type})&&(n=l.default.equipmentMgr.getAttribute(this.uid,this.equipmentDataType.star,this.equipmentDataType.strengthen+1));for(var a=o.getAttrShow(),s=function(t){var r=a[t];if(0==r.value)return"continue";var s=cc.instantiate(i);s.active=!0,s.parent=e;var l=c.seekC(s,"labAttr"),p=c.seekC(s,"labNum");c.setString(l,r.ChineseName+":"),u.AttrConst[r.attrType]&&(l.color=u.AttrConst[r.attrType].color,p.color=u.AttrConst[r.attrType].color,u.AttrConst[r.attrType].isShowPrecent?c.setString(p,Math.ceil(r.value/100)+"%"):c.setString(p,""+Math.ceil(r.value))),h.default.sequence(c.node,1/30,function(){y.default.alignmentL2R(0,l,p)});var d=c.seekC(s,"labUpgrade");if(n){var f=n.getAttr(r.attrStrType)-o.getAttr(r.attrStrType);u.AttrConst[r.attrType]?u.AttrConst[r.attrType].isShowPrecent?c.setString(d,"Upgrade: +"+Math.ceil(f/100)+"%"):c.setString(d,"Upgrade: +"+Math.ceil(f)):g.default.error("EquipmentDetailsDetailView AttrConst["+r.attrStrType+"] == null ")}else c.setString(d,"Full level")},c=this,p=0;p<a.length;p++)s(p)},e.prototype.initSkillAttr=function(){var t=this,e=m.default.EquipmentStarLevelTable.findFirst(function(e){return e.id==t.equipmentDataType.equipmentId&&e.rank==t.equipmentDataType.star});if(e)if(e.skillId){for(var i=this.getC("skillDesc"),n=this.seekC(i,"labDesc"),o="",r=0;r<e.skillId.length;r++)r>0&&(o+="\n"),o+=f.default.getItemVO(e.skillId[r]).html5Desc;n.getComponent(cc.RichText).string=o}else i=this.getC("skillDesc"),(n=this.seekC(i,"labDesc")).getComponent(cc.RichText).string="<outline width=2 color=black>None</outline>";else g.default.error("EquipmentDetailsDetailView \u627e\u4e0d\u5230\u914d\u7f6e\u8868:this.equipmentDataType.equipmentId = ",this.equipmentDataType.equipmentId)},e.prototype.initBreakDownBtn=function(){var t=this,e=this.getC("btnBreakDown");l.default.onClick(e,function(){t.emit(v.default.EQUIPMENT_CLICK_UPGRADE)})},e.prototype.initBtnWear=function(){var t=this;b.default.getInstance().dotEquipmentWear(),this.btnWear=this.getC("btnWear"),l.default.onClick(this.btnWear,function(){l.default.equipmentMgr.wear(t.uid),t.equipmentDetailsView.setTouchable(!1),t.equipmentDetailsView.closeSelf(),l.default.guideMgr.isFinishGuide(d.GuideLineEnum.GuideEquipEquipment)||t.emit(v.default.GUIDE_EQUIPMENT_EQUIP),l.default.adMgr.showInterstitialAd(1)}),l.default.equipmentMgr.isWear(this.uid)?this.btnWear.active=!1:this.btnWear.active=!0},e.prototype.initBtnUnWear=function(){var t=this;this.btnUnwear=this.getC("btnUnwear"),l.default.onClick(this.btnUnwear,function(){var e=l.default.equipmentMgr.getEquipmentWearPos(t.uid);-1==e?g.default.error("EquipmentDetailsDetailView \u6ca1\u6709\u627e\u5230\u8fd9\u4ef6\u88c5\u5907\u5728\u7a7f ",t.uid):(l.default.equipmentMgr.disboard(e),t.equipmentDetailsView.setTouchable(!1),t.equipmentDetailsView.closeSelf()),l.default.adMgr.showInterstitialAd(1)}),l.default.equipmentMgr.isWear(this.uid)?this.btnUnwear.active=!0:this.btnUnwear.active=!1},e.prototype.initGold=function(){var t=this.getC("labGold");this.setString(t,""+l.default.bagMgr.getGoldNum())},e.prototype.handlerEquipPosRefresh=function(){l.default.equipmentMgr.isWear(this.uid)?(this.btnWear.active=!1,this.btnUnwear.active=!0):(this.btnWear.active=!0,this.btnUnwear.active=!1)},e.prototype.handlerItemChange=function(){},e.prototype.handlerEquipmentEquipImprovetierSuc=function(){this.refresh()},s([O],e)}(c.default));r.default=E,cc._RF.pop()},{}],EquipmentDetailsUnGetView:[function(t,e,i){"use strict";cc._RF.push(e,"b4efeekl7VBCa7wAsoX5uQ0","EquipmentDetailsUnGetView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("AttributeConst"),p=o("CommonConst"),d=o("ActionUtils"),h=o("ItemUtils"),f=o("LoggerUtils"),g=o("NodeUtils"),y=o("Tbl"),m=o("ComEquipmentBox"),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._equipmentRank=null,e}return a(e,t),e.prototype.initialize=function(t){this.equipmentId=t,this.initData()},e.prototype.initData=function(){var t=this;this._equipmentRank=l.default.equipmentMgr.getMaxRankByEquipmentId(this.equipmentId),this.equipmentVO=y.default.EquipmentTable.findFirst(function(e){return e.id==t.equipmentId})},e.prototype.start=function(){this.initItemBox(),this.initAttrLayout(),this.initLabQuality(),this.initSkillAttr()},e.prototype.initSkillAttr=function(){var t=this,e=y.default.EquipmentStarLevelTable.findFirst(function(e){return e.id==t.equipmentId&&e.rank==t._equipmentRank});if(e)if(e.skillId){for(var i=this.getC("skillDesc"),n=this.seekC(i,"labDesc"),o="",r=0;r<e.skillId.length;r++)r>0&&(o+="\n"),o+=h.default.getItemVO(e.skillId[r]).html5Desc;n.getComponent(cc.RichText).string=o,this.setString(n,o)}else i=this.getC("skillDesc"),(n=this.seekC(i,"labDesc")).getComponent(cc.RichText).string="<outline width=2 color=black>None</outline>";else f.default.error("EquipmentDetailsDetailView \u627e\u4e0d\u5230\u914d\u7f6e\u8868:this.equipmentId = ",this.equipmentId)},e.prototype.initLabQuality=function(){var t=this,e=this.getC("labQuality"),i=y.default.EquipmentTable.findFirst(function(e){return e.id==t.equipmentId}).quality;e.getComponent(cc.Label).string=p.EquipmentQualityColorConst[i].name,e.color=p.EquipmentQualityColorConst[i].color},e.prototype.initAttrLayout=function(){for(var t=this.getC("attrLayout"),e=this.seekC(t,"imgAttr"),i=l.default.equipmentMgr.getMaxAttributeByEquipmentId(this.equipmentId),n=function(n){var r=i[n][0],a=i[n][1],s=u.AttrConst[r].ChineseName,l=u.AttrConst[r].color,c=cc.instantiate(e);c.parent=t,c.active=!0;var p=o.seekC(c,"labAttr"),h=o.seekC(c,"labNum");o.setString(p,s+":"),u.AttrConst[r].isShowPrecent?o.setString(h,Math.ceil(a/100)+"%"):o.setString(h,""+Math.ceil(a)),l&&(p.color=l,h.color=l),d.default.sequence(o.node,1/30,function(){g.default.alignmentL2R(0,p,h)})},o=this,r=0;r<i.length;r++)n(r)},e.prototype.initItemBox=function(){var t=this.getC("ComEquipmentBox");t.active=!0;var e=t.getComponent(m.default),i={equipmentVO:{uid:null,equipmentId:this.equipmentId,strengthen:l.default.equipmentMgr.getMaxLevelByEquipmentId(this.equipmentId),star:this._equipmentRank,attrList:null,strengthenFailTimes:0},isShowBg:!0,isActive:!0};e.initialize(i)},s([_],e)}(c.default));r.default=C,cc._RF.pop()},{}],EquipmentDetailsUpgradeView:[function(t,e,i){"use strict";cc._RF.push(e,"be02aRhZwFOcbxoW27HJ+b0","EquipmentDetailsUpgradeView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("AttributeConst"),u=o("CommonConst"),p=o("ActionUtils"),d=o("ColorUtils"),h=o("ItemUtils"),f=o("LoggerUtils"),g=o("NodeUtils"),y=o("TipsUtils"),m=o("BaseView"),v=o("Tbl"),_=o("CCEvent"),C=o("ComEquipmentBox"),b=o("MathUtils"),S=cc._decorator,O=S.ccclass,E=(S.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRefresh=!1,e.attrNodeList=[],e}return a(e,t),e.prototype.initialize=function(t){this.uid=t,this.equipmentDataType=l.default.equipmentMgr.getEquipment(t),this.equipmentVO=v.default.EquipmentTable.findById(this.equipmentDataType.equipmentId)},e.prototype.start=function(){t.prototype.start.call(this),this.refresh(),this.addEventListener()},e.prototype.refresh=function(){this.initData(),this.initIcon(),this.initLimit(),this.initName(),this.initLevel(),this.initAttr(),this.initBtnHUpgrade(),this.initBtnUpgrade(),this.initLabTips(),this.initCostLab(),this.initFullLevelLab()},e.prototype.addEventListener=function(){this.eventOn(_.default.EQUIPMENT_EQUIP_STRENTHEN_FALSE,this.handlerStrenthenFalse,this),this.eventOn(_.default.EQUIPMENT_EQUIP_STRENTHEN_SUC,this.handlerStrenthenSuc,this),this.eventOn(_.default.EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS,this.handlerEquipmentEquipImprovetierSuc,this)},e.prototype.initData=function(){this.limitLevel=l.default.equipmentMgr.getMaxStrengthenLevel(this.equipmentDataType.equipmentId,this.equipmentDataType.star),this.content=this.getC("content"),this.isMaxStar=l.default.equipmentMgr.isMaxStar(this.equipmentDataType.equipmentId,this.equipmentDataType.star)},e.prototype.initFullLevelLab=function(){var t=this.getC("labFullLevel");this.limitLevel==this.equipmentDataType.strengthen?(t.active=!0,this.isMaxStar?this.setString(t,"Full level"):this.setString(t,"Awaken required")):t.active=!1},e.prototype.initBtnHUpgrade=function(){var t=this,e=this.getC("btnHightUpgrade");cc.tween(e).repeatForever(cc.tween(e).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),this.limitLevel==this.equipmentDataType.strengthen?e.active=!1:e.active=!0,cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&0==l.default.adMgr.isHuaweiRewardReady()&&(e.active=!1),l.default.onClick(e,function(){var e=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),e?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),l.default.equipmentMgr.strengthen(t.uid,!0)}).catch(function(t){console.error("====> show RewardedVideo error: "+t.message),cc.audioEngine.resumeMusic()}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic())})},e.prototype.initBtnUpgrade=function(){var t=this,e=this.getC("btnUpgrade");this.limitLevel==this.equipmentDataType.strengthen?e.active=!1:e.active=!0,l.default.onClick(e,function(){l.default.equipmentMgr.strengthen(t.uid,!1)})},e.prototype.initCostLab=function(){for(var t=this,e=this.getC("nodeCost"),i=this.seekC(e,"labGold"),n=v.default.EquipmentStrengthenTable.findFirst(function(e){if(e.type==t.equipmentVO.type&&e.level==t.equipmentDataType.strengthen)return!0}),o="",r=0;r<n.cost.length;r++){var a=n.cost[r],s=a[0],l=a[1];o=""+o+h.default.getItemVO(s).name+" x"+b.default.numToBigNum(l)+" "}this.setString(i,o),this.limitLevel==this.equipmentDataType.strengthen?i.active=!1:i.active=!0},e.prototype.initLabTips=function(){var t=this.getC("labTips"),e=v.default.CommonTable.findByKey("EQUIP_UPGRADE_TIPS");e?this.setString(t,e.string):this.setString(t,"Public Configuration Table Prompt:EQUIP_UPGRADE_TIPS "),this.limitLevel==this.equipmentDataType.strengthen?t.active=!1:t.active=!0},e.prototype.initIcon=function(){this.getC("ComEquipmentBox").getComponent(C.default).initialize({equipmentVO:this.equipmentDataType,isShowBg:!1,isShowName:!1,isShowStar:!1})},e.prototype.initLimit=function(){var t=this.getC("labLimit");this.setString(t,"Max "+this.limitLevel)},e.prototype.initName=function(){var t=this.getC("content"),e=this.seekC(t,"labName");this.setString(e,this.equipmentVO.name),e.color=d.default.EquipmentQualityColorList[this.equipmentVO.quality]},e.prototype.clearAttrNode=function(){for(var t=0;t<this.attrNodeList.length;t++){var e=this.attrNodeList[t];cc.isValid(e)&&e.destroy()}this.attrNodeList=[]},e.prototype.initLevel=function(){var t=this.seekC(this.content,"node1"),e=this.seekC(t,"labLevel"),i=this.seekC(t,"labNextLevel"),n=this.seekC(t,"labNeedStar");n.active=!1,this.setString(e,"Level "+this.equipmentDataType.strengthen),this.limitLevel==this.equipmentDataType.strengthen?l.default.equipmentMgr.isMaxStar(this.equipmentDataType.equipmentId,this.equipmentDataType.star)?this.setString(i,"Full level"):(this.setString(i,"Level "+this.equipmentDataType.strengthen+1),n.active=!0,p.default.sequence(this.node,1/30,function(){g.default.alignmentL2R(0,i,n)})):this.setString(i,"Level "+this.equipmentDataType.strengthen+1)},e.prototype.initAttr=function(){this.clearAttrNode();var t=this.seekC(this.content,"nodeAttr");t.active=!1;for(var e=l.default.equipmentMgr.getAttribute(this.uid,this.equipmentDataType.star,this.equipmentDataType.strengthen),i=e.getAttrShow(),n=0;n<i.length;n++){var o=i[n],r=cc.instantiate(t);this.attrNodeList.push(r),r.active=!0,r.parent=t.parent;var a=this.seekC(r,"labAttrName"),s=this.seekC(r,"labAttrBase"),u=this.seekC(r,"sprArrow");this.setString(a,o.ChineseName+":"),c.AttrConst[o.attrType]&&(a.color=c.AttrConst[o.attrType].color,s.color=c.AttrConst[o.attrType].color,u.color=c.AttrConst[o.attrType].color,c.AttrConst[o.attrType].isShowPrecent?this.setString(s,Math.ceil(o.value/100)+"%"):this.setString(s,""+Math.ceil(o.value)));var p=this.seekC(r,"labAttrAdder");if(this.limitLevel==this.equipmentDataType.strengthen)p.active=!1;else{var d=l.default.equipmentMgr.getAttribute(this.uid,this.equipmentDataType.star,this.equipmentDataType.strengthen+1);if(d){var h=d.getAttr(o.attrStrType)-e.getAttr(o.attrStrType);if(0==h){r.destroy();continue}c.AttrConst[o.attrType]?c.AttrConst[o.attrType].isShowPrecent?this.setString(p,"+"+Math.ceil(h/100)+"%"):this.setString(p,"+"+Math.ceil(h)):f.default.error("EquipmentDetailsDetailView AttrConst["+o.attrStrType+"] == null ")}else this.setString(p,"Full level")}}},e.prototype.handlerStrenthenFalse=function(){y.default.showTips("Failed to strengthen")},e.prototype.handlerStrenthenSuc=function(){this.refresh()},e.prototype.handlerEquipmentEquipImprovetierSuc=function(){this.refresh()},s([O],e)}(m.default));r.default=E,cc._RF.pop()},{}],EquipmentDetailsView:[function(t,e,i){"use strict";cc._RF.push(e,"5ca0dGxJG9GC75SQY6J7OUk","EquipmentDetailsView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("CommonConst"),u=o("ShopConst"),p=o("TipsUtils"),d=o("BaseView"),h=o("Tbl"),f=o("CCEvent"),g=o("EquipmentDetailsUnGetView"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.checkboxList=[],e}return a(e,t),e.prototype.onLoad=function(){this.addEventListener(),this.node.scale=1.26},e.prototype.addEventListener=function(){this.eventOn(f.default.EQUIPMENT_CLICK_UPGRADE,this.handlerClickUpgrade,this)},e.prototype.handlerClickUpgrade=function(){this.selectIndex(1),this.selectTabBegin(1)},e.prototype.start=function(){this.addMask(),this.initData(),this.initUI(),this.initAdGet(),this.initCloseBtn(),this.initCheckBoxs(),null!=this.uid?this.initFirstView():this.initUngetView()},e.prototype.initAdGet=function(){var t=this,e=this.getC("btnAdGet");cc.sys.platform==c.PlatformTypeEnum.HUAWEI_GAME&&0==l.default.adMgr.isHuaweiRewardReady()&&(e.active=!1),cc.tween(e).repeatForever(cc.tween(e).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),l.default.onClick(e,function(){e.getComponent(cc.Button).interactable=!1,l.default.adMgr.show({adType:c.AdTypeEnum.GetRandomEquipment,callback:function(i){e.getComponent(cc.Button).interactable=!0,i&&(l.default.shopMgr.buyGood(u.ShopGoodEnum.RandomEquipment),t.refreshAdGet())},errorCallback:function(){e.getComponent(cc.Button).interactable=!0},timeout:3})}),this.refreshAdGet()},e.prototype.refreshAdGet=function(){var t=this.getC("btnAdGet"),e=this.seekC(t,"labNum"),i=h.default.ShopTable.findById(u.ShopGoodEnum.RandomEquipment).buyCounting,n=l.default.countingMgr.getAllTimes(i),o=l.default.countingMgr.getRemaining(i);o<=0&&(t.stopAllActions(),t.scale=1,l.default.offClick(t.getComponent(cc.Button)),l.default.onClick(t,function(){p.default.showTips("No more times today, claim tomorrow!")})),this.setString(e,o+"/"+n)},e.prototype.initData=function(){var t=this.getArgs();this.uid=t[0],this.equipmentId=t[1],this.curIndex=0,this.tabConfig=[{index:0,name:"btnDetail",viewPrefab:this.detailPrefab,view:null,viewComName:"EquipmentDetailsDetailView"},{index:1,name:"btnUpgrade",viewPrefab:this.upgradePrefab,view:null,viewComName:"EquipmentDetailsUpgradeView"},{index:2,name:"btnWake",viewPrefab:this.awakenPrefab,view:null,viewComName:"EquipmentDetailsAwakenView"}]},e.prototype.initUI=function(){this.chooseBox=this.getC("chooseBox")},e.prototype.initCloseBtn=function(){var t=this,e=this.getC("btnClose");l.default.onClick(e,function(){t.closeSelf()})},e.prototype.initCheckBoxs=function(){for(var t=this,e=function(e){var n=i.tabConfig[e],o=i.seekC(i.chooseBox,n.name),r=i.seekC(o,"imgActive"),a=i.seekC(o,"imgUnActive");i.checkboxList.push({btn:o,imgActive:r,imgUnActive:a}),l.default.onClick(o,function(){t.selectIndex(e)}),l.default.onTouch(o,function(){t.selectTabBegin(e)})},i=this,n=0;n<this.tabConfig.length;n++)e(n)},e.prototype.selectTabBegin=function(t){for(var e=0;e<this.checkboxList.length;e++)this.checkboxList[e].btn.zIndex=t==e?1:0},e.prototype.initUngetView=function(){this.onlyShowDetailBtn();var t=cc.instantiate(this.unGetPrefab);t.parent=this.node,t.getComponent(g.default).initialize(this.equipmentId)},e.prototype.onlyShowDetailBtn=function(){this.getC("btnUpgrade").active=!1,this.getC("btnWake").active=!1;var t=this.getC("btnDetail");t.getComponent(cc.Button).interactable=!1,this.seekC(t,"imgActive").active=!0,this.seekC(t,"imgUnActive").active=!1},e.prototype.initFirstView=function(){this.selectIndex(this.curIndex)},e.prototype.selectIndex=function(t){this.selectTab(t),this.selectView(t)},e.prototype.selectTab=function(t){for(var e=0;e<this.checkboxList.length;e++){var i=this.checkboxList[e];e==t?(i.imgActive.active=!0,i.imgUnActive.active=!1):(i.imgActive.active=!1,i.imgUnActive.active=!0)}},e.prototype.selectView=function(t){this.hideOtherView(t),this.showOtherView(t)},e.prototype.hideOtherView=function(t){for(var e=0;e<this.tabConfig.length;e++){var i=this.tabConfig[e];e!=t&&i.view&&(i.view.active=!1)}},e.prototype.showOtherView=function(t){for(var e=0;e<this.tabConfig.length;e++){var i=this.tabConfig[e];e==t&&(i.view?i.view.active=!0:(i.view=cc.instantiate(i.viewPrefab),i.view.parent=this.node,i.view.getComponent(i.viewComName).initialize(this.uid,this)))}},e.prototype.closeCallback=function(){this.closeSelf()},s([v(cc.Prefab)],e.prototype,"detailPrefab",void 0),s([v(cc.Prefab)],e.prototype,"upgradePrefab",void 0),s([v(cc.Prefab)],e.prototype,"awakenPrefab",void 0),s([v(cc.Prefab)],e.prototype,"unGetPrefab",void 0),s([m],e)}(d.default);r.default=_,cc._RF.pop()},{}],EquipmentMgr:[function(t,e,i){"use strict";cc._RF.push(e,"a3215gI4HpKMoR7+AcpK+pj","EquipmentMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("App"),l=o("Tbl"),c=o("Utils"),u=o("DataHelper"),p=o("BagConst"),d=o("CommonConst"),h=o("AttributeConst"),f=o("Attribute"),g=o("CCEvent"),y=o("CommonCfgUtils"),m=o("TipsUtils"),v=function(t){function e(){var e=t.call(this)||this;return e._equipmentList=null,e._equipmentPosList=null,e.maxEquipmentNum=null,e.init(d.DataNameEnum.EquipmentMgr),e.initEquipmentData(),e.maxEquipmentNum=y.default.get("MAX_EQUIPMENT_NUM").number,e}return a(e,t),e.prototype.initEquipmentData=function(){this._equipmentList=this.getValue("equipmentList")||[],this._equipmentPosList=this.getValue("equipmentPosList")||[]},e.prototype.saveEquipmentList=function(){this.setValue("equipmentList",this._equipmentList)},e.prototype.saveEquipmentPosList=function(){this.setValue("equipmentPosList",this._equipmentPosList)},e.prototype.isEquipmentFull=function(){return this._equipmentList.length>=this.maxEquipmentNum&&(console.warn("\u88c5\u5907\u6570\u91cf\u5927\u4e8e\u6700\u5927\u88c5\u5907\u6570\u91cf\uff0c\u65e0\u6cd5\u83b7\u53d6\u3002\n \u5f53\u524d\u88c5\u5907\u6570\u91cf: %s",this._equipmentList.length),!0)},e.prototype.getMaxEquipment=function(){return this.maxEquipmentNum},e.prototype.addEquipment=function(t){if(this.isEquipmentFull()){var e=this.getEquipmentNum();m.default.showTips("You've "+e+"/"+this.maxEquipmentNum+" pieces of equip, unable to get new ones.")}else{var i=l.default.EquipmentTable.findById(t);if(null!=i){var n=[];for(var o in i)if(h.AttrTypeEnum[o]){var r=i[o];if(null!=r&&r.length>=2){var a=c.default.rand(r[0],r[1]);n.push([h.AttrTypeEnum[o],a])}}for(var s=0,u=0;u<this._equipmentList.length;u++){var p=this._equipmentList[u];s=Math.max(s,p.uid)}var d={uid:++s,equipmentId:t,strengthen:0,star:0,attrList:n,strengthenFailTimes:0,isNew:!0};this._equipmentList.push(d),this.saveEquipmentList(),cc.game.emit(g.default.EQUIPMENT_GET,d)}else console.error("[EquipmentMgr] addEquipment(equipmentId:%s) (equipment_config not find id) invalid id!",t)}},e.prototype.isAnyEquipmentCanUpgrade=function(){for(var t=this.getEquipmentList(),e=0;e<t.length;e++){var i=t[e];if(this.isEquipmentCanUpgrade(i.uid))return!0}return!1},e.prototype.isEquipmentCanUpgrade=function(t){var e=this.getEquipment(t),i=e.strengthen,n=i+1,o=e.star,r=l.default.EquipmentTable.findById(e.equipmentId).type;if(!l.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==r&&t.level==n&&t.starLimit<=o}))return!1;for(var a=l.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==r&&t.level==i}).cost,c=0;c<a.length;c++){var u=a[c];if(0==s.default.bagMgr.isItemEnough(u[0],u[1]))return!1}return!0},e.prototype.isAnyEquipmentCanAwake=function(){for(var t=this.getEquipmentList(),e=0;e<t.length;e++){var i=t[e];if(this.isEquipmentCanAwake(i.uid))return!0}return!1},e.prototype.isEquipmentCanAwake=function(t){var e=this.getEquipment(t),i=e.star+1,n=l.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==e.equipmentId&&t.rank==i});if(!n)return!1;for(var o=n.swallowNum,r=0,a=this.getEquipmentIdList(),s=0;s<a.length;s++)a[s]==e.equipmentId&&r++;return!(r<=o)},e.prototype.touchEquipment=function(t){for(var e=0;e<this._equipmentList.length;e++)this._equipmentList[e].uid==t&&(this._equipmentList[e].isNew=!1);this.saveEquipmentList(),s.default.event.emit(g.default.EQUIPMENT_TOUCH)},e.prototype.getEquipment=function(t){for(var e=0;e<this._equipmentList.length;e++){var i=this._equipmentList[e];if(i.uid==t)return i}return null},e.prototype.getEquipmentList=function(t){var e=this.sortIdByEquipmentDataType(this._equipmentList);if(!t)return e;for(var i=[],n=0;n<e.length;n++){var o=e[n];t(o)&&i.push(o)}return i},e.prototype.sortIdByEquipmentDataType=function(t){for(var e=JSON.parse(JSON.stringify(t)),i=0;i<e.length-1;i++)for(var n=1;n<e.length-i;n++){var o=e[n-1].equipmentId,r=l.default.EquipmentTable.findById(o).quality,a=e[n].equipmentId;if(r<l.default.EquipmentTable.findById(a).quality){var s=e[n];e[n]=e[n-1],e[n-1]=s}}for(var c=e.length-1;c>=0;c--){var u=e[c];this.isWear(u)&&(s=e.splice(c,1),e.splice(0,0,s))}return e},e.prototype.sortIdByIdList=function(t){for(var e=JSON.parse(JSON.stringify(t)),i=0;i<e.length-1;i++)for(var n=1;n<e.length-i;n++){var o=e[n-1],r=l.default.EquipmentTable.findById(o).quality,a=e[n];if(r<l.default.EquipmentTable.findById(a).quality){var s=e[n];e[n]=e[n-1],e[n-1]=s}}return e},e.prototype.getEquipmentIdList=function(){for(var t=JSON.parse(JSON.stringify(this._equipmentList)),e=[],i=0;i<t.length;i++){var n=t[i].equipmentId;e[e.length]=n}return e},e.prototype.getAllEquipmentUnGet=function(t){for(var e=l.default.EquipmentTable.findAll(function(){return!0}),i=[],n=0;n<e.length;n++)i[i.length]=e[n].id;for(n=0;n<this._equipmentList.length;n++){var o=this._equipmentList[n].equipmentId,r=i.indexOf(o);-1!=r&&i.splice(r,1)}var a=this.sortIdByIdList(i);if(!t)return a;var s=[];for(n=0;n<a.length;n++){var c=a[n];t(c)&&s.push(c)}return s},e.prototype.sell=function(t){var e=this.getEquipment(t);if(null!=e){var i=l.default.EquipmentTable.findById(e.equipmentId);if(null!=i){if(-1==this._equipmentPosList.indexOf(t)){var n=[],o=l.default.EquipmentStarLevelTable.findFirst(function(t){if(t.id==e.equipmentId&&t.rank==e.star)return!0});null!=o&&(n=n.concat(o.sellPrice));var r=l.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==i.type&&t.level==e.strengthen});null!=r&&(n=n.concat(r.sellPrice));for(var a=0;a<this._equipmentList.length;a++)if(this._equipmentList[a].uid==t){this._equipmentList.splice(a,1);break}return this.saveEquipmentList(),s.default.bagMgr.formatItemList(n)}console.error("[EquipmentMgr] sell(equipmentId:%s) is wore!",e.equipmentId)}else console.error("[EquipmentMgr] sell(equipmentId:%s) invalid id!",e.equipmentId)}else console.error("[EquipmentMgr] sell(equipmentUID:%s) not find equip!",t)},e.prototype.sellItem=function(t){var e=this.getEquipment(t).equipmentId,i=this.sell(t);s.default.bagMgr.addItemList(i,p.BagSourceEnum.EquipmentSell),s.default.event.emit(g.default.EQUIPMENT_SELL_EQUIP_INCOME,i,[t],[e])},e.prototype.sellItemList=function(t){for(var e=[],i=[],n=0;n<t.length;n++){var o=t[n],r=this.getEquipment(o).equipmentId;-1==i.indexOf(r)&&(i[i.length]=r);for(var a=this.sell(o),l=0;l<a.length;l++)e.push({itemId:a[l].itemId,amount:a[l].amount})}s.default.bagMgr.addItemList(e,p.BagSourceEnum.EquipmentSell),s.default.event.emit(g.default.EQUIPMENT_SELL_EQUIP_INCOME,e,t,i)},e.prototype.isWear=function(t){return-1!=this._equipmentPosList.indexOf(t)},e.prototype.isSlotWeared=function(t){return!!this._equipmentPosList[t]},e.prototype.getEquipmentNum=function(){return this._equipmentList.length},e.prototype.getHadEquipPos=function(){for(var t=this._equipmentPosList,e=[],i=1;i<t.length;i++)t[i]&&e.push(i);return e},e.prototype.isCanEquip=function(){for(var t=1;t<=4;t++)if(this.isPosCanEquip(t))return!0;return!1},e.prototype.isPosCanEquip=function(t){return!this._equipmentPosList[t]&&this.getEquipmentList(function(e){return l.default.EquipmentTable.findById(e.equipmentId).pos==t}).length>0},e.prototype.wear=function(t){var e=this.getEquipment(t);if(null!=e){var i=l.default.EquipmentTable.findById(e.equipmentId);if(null!=i){var n=this._equipmentPosList[i.pos]||0;this._equipmentPosList[i.pos]=t,this.saveEquipmentPosList(),cc.game.emit(g.default.EQUIPMENT_SLOT_CHANGE,i.pos,t,n)}else console.error("[EquipmentMgr] wear(equipmentId:%s) invalid id!",e.equipmentId)}else console.error("[EquipmentMgr] wear(equipmentUID:%s) not find equip!",t)},e.prototype.disboard=function(t){var e=this._equipmentPosList[t];this._equipmentPosList[t]=0,this.saveEquipmentPosList(),cc.game.emit(g.default.EQUIPMENT_SLOT_CHANGE,0,e)},e.prototype.getEquipmentWearPos=function(t){return this._equipmentPosList.indexOf(t)},e.prototype.getEquipmentInPos=function(t){return this._equipmentPosList[t]},e.prototype.strengthen=function(t,e){void 0===e&&(e=!1);var i=this.getEquipment(t);if(null!=i){var n=l.default.EquipmentTable.findById(i.equipmentId);if(null!=n){var o=l.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==n.type&&t.level==i.strengthen});if(null!=o){var r=null;if(e){for(var a=o.superStrengthen,u=0,d=0;d<a.length;d++)u+=(f=a[d])[1];var h=c.default.rand(u);for(d=0;d<a.length;d++){var f;if((h-=(f=a[d])[1])<=0){r=i.strengthen+f[0];break}}}else r=i.strengthen+1;for(;r>i.strengthen;){var y=l.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==n.type&&t.level==r});if(null!=y&&y.starLimit<=i.star)break;r--}if(r!=i.strengthen){if(0==e){if(0==s.default.bagMgr.removeItemList(s.default.bagMgr.formatItemList(o.cost),p.BagSourceEnum.EquipmentStrengthenCost))return void console.error("[EquipmentMgr] strengthen(equipmentUID:%s) \u6750\u6599\u4e0d\u8db3!",t);var v=o.rate;if(v+=i.strengthenFailTimes*(o.failGain||0),i.strengthenFailTimes>=o.maxFailTimes&&(v=1e4),c.default.rand(1e4)>v)return console.info("[EquipmentMgr] strengthen(equipmentUID:%s) \u5f3a\u5316\u5931\u8d25!",t),i.strengthenFailTimes++,this.saveEquipmentList(),void s.default.event.emit(g.default.EQUIPMENT_EQUIP_STRENTHEN_FALSE,t)}i.strengthenFailTimes=0,i.strengthen=r,this.saveEquipmentList(),m.default.info("Reinforce success!!!"),s.default.event.emit(g.default.EQUIPMENT_EQUIP_STRENTHEN_SUC,t)}else console.error("[EquipmentMgr] strengthen(equipmentUID:%s) \u661f\u7ea7\u4e0d\u8db3!",t)}else console.error("[EquipmentMgr] strengthen(equipmentUID:%s) not find VO!",t)}else console.error("[EquipmentMgr] strengthen(equipmentId:%s) invalid id!",i.equipmentId)}else console.error("[EquipmentMgr] strengthen(equipmentUID:%s) not find equip!",t)},e.prototype.improveTier=function(t,e){if(-1==e.indexOf(t)){var i=this.getEquipment(t);if(null!=i){for(var n={},o=0;o<e.length;o++){var r=e[o];if(null!=n[r])return void console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUIDList: %s) invalid uid!",t,e);n[r]=!0;var a=this.getEquipment(r);if(null==a)return void console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUIDList: %s) not find otherUIDList!",t,e);if(i.equipmentId!=a.equipmentId)return void console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUIDList: %s) invalid equipmentId!",t,e);if(-1!=this._equipmentPosList.indexOf(r))return void console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUIDList: %s) other is useing!",t,e)}var u=l.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==i.equipmentId&&t.rank==i.star+1});if(null!=u)if(u.swallowNum==e.length)if(0!=s.default.bagMgr.removeItemList(s.default.bagMgr.formatItemList(u.cost),p.BagSourceEnum.EquipmentImproveTier)){for(o=this._equipmentList.length-1;o>=0;o--){var d=this._equipmentList[o];-1!=e.indexOf(d.uid)&&(cc.game.emit(g.default.EQUIPMENT_THROW,d.uid),this._equipmentList.splice(o,1))}this.saveEquipmentList(),c.default.rand(1e4)>u.rate?(console.log("[EquipmentMgr] improveTier(equipmentUID:%s) \u5f3a\u5316\u5931\u8d25!",t),s.default.event.emit(g.default.EQUIPMENT_EQUIP_IMPROVETIER_FALSE)):(i.star++,this.saveEquipmentList(),m.default.info("Awakening success!!!"),s.default.event.emit(g.default.EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS,t))}else console.error("[EquipmentMgr] improveTier(equipmentUID:%s) \u6750\u6599\u4e0d\u8db3!",t);else console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUID: %s) not find VO! id:%s nextLevel:%s",t,e,i.equipmentId,i.star+1);else console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUID: %s) not find VO! id:%s nextLevel:%s",t,e,i.equipmentId,i.star+1)}else console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUIDList: %s) not find equipmentUID!",t,e)}else console.error("[EquipmentMgr] improveTier(equipmentUID: %s, otherUIDList: %s) invalid uid!",t,e)},e.prototype.getAttribute=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new f.default,o=this.getEquipment(t);if(null==o)return console.error("[EquipmentMgr] getAttribute(equipmentUID: %s) not find equipmentUID!",t),n;null==e&&(e=o.star),null==i&&(i=o.strengthen);var r=0,a=l.default.EquipmentTable.findById(o.equipmentId);if(null==a)return console.error("[EquipmentMgr] getAttribute. not find VO! equipmentId:%s",o.equipmentId),n;var s=l.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==a.type&&t.level==i});null!=s&&(r=s.ratio);var c=0,u=l.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==o.equipmentId&&t.rank==e});null!=u&&(c=u.ratio);for(var p=o.attrList,d=0;d<p.length;d++){var g=p[d];if(h.AttrTypeEnum[g[0]]){var y=g[1];y=y+y*r+y*c,y=Math.floor(y),n.setAttr(g[0],y)}}return n},e.prototype.getMaxLevelByEquipmentId=function(t){var e=l.default.EquipmentTable.findById(t),i=this.getMaxRankByEquipmentId(t),n=e.type,o=0;return l.default.EquipmentStrengthenTable.findAll(function(t){return t.type==n&&t.starLimit<=i&&t.level>o&&(o=t.level),!1}),o},e.prototype.getMaxRankByEquipmentId=function(t){var e=0;return l.default.EquipmentStarLevelTable.findAll(function(i){return i.id==t&&i.rank>e&&(e=i.rank),!1}),e},e.prototype.getMaxAttributeByEquipmentId=function(t){var e=l.default.EquipmentTable.findById(t),i=this.getMaxRankByEquipmentId(t),n=l.default.EquipmentStarLevelTable.findFirst(function(e){return e.id==t&&e.rank==i}).ratio,o=e.type,r=this.getMaxLevelByEquipmentId(t),a=l.default.EquipmentStrengthenTable.findFirst(function(t){return t.type==o&&t.level==r}).ratio,s=[];for(var c in e)if(h.AttrTypeEnum[c]){if(null==e[c])continue;var u=e[c][1];u=u+u*a+u*n,s.push([h.AttrTypeEnum[c],u])}return s},e.prototype.getAllAttribute=function(){var t=this,e=new f.default;return this._equipmentPosList.forEach(function(i){var n=t.getEquipment(i);null!=n&&e.addOtherAttribute(t.getAttribute(n.uid))}),e},e.prototype.getAllSkills=function(){var t=[];if(null==this._equipmentPosList||0==this._equipmentPosList.length)return null;for(var e=function(e){var n=i._equipmentPosList[e],o=i.getEquipment(n);if(null==o)return"continue";var r=l.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==o.equipmentId&&t.rank==o.star});if(null==r.skillId)return"continue";for(var a=0;a<r.skillId.length;a++)t.push(r.skillId[a])},i=this,n=0;n<this._equipmentPosList.length;n++)e(n);return t},e.prototype.getMaxStrengthenLevel=function(t,e){var i=l.default.EquipmentTable.findById(t),n=0;return l.default.EquipmentStrengthenTable.forEach(function(t){i.type==t.type&&t.level>n&&e>=t.starLimit&&(n=t.level)}),n},e.prototype.isMaxStar=function(t,e){var i=!0;return l.default.EquipmentStarLevelTable.forEach(function(n){n.id==t&&n.rank>e&&(i=!1)}),i},e.prototype.clearAllEquipment=function(){this._equipmentList=[],this._equipmentPosList=[],this.saveEquipmentList(),this.saveEquipmentPosList()},e}(u.default);r.default=v,cc._RF.pop()},{}],EquipmentMiniVIew:[function(t,e,i){"use strict";cc._RF.push(e,"cd3d8BXWcdGuY9q5megqpT3","EquipmentMiniVIew");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),o("AdVideoOPPO");var l,c,u=o("App"),p=o("BaseMiniView"),d=o("AttributeConst"),h=o("ObjConst"),f=o("BagConst"),g=(o("CommonConst"),o("GuideMgr")),y=o("ShopConst"),m=o("ActionUtils"),v=o("AdaptUtils"),_=o("ItemUtils"),C=o("NodeUtils"),b=o("RedPointUtils"),S=o("TipsUtils"),O=o("Tbl"),E=o("CCEvent"),I=o("UI"),w=o("ComCompoundBox"),A=o("ComEquipmentBox"),R=cc._decorator,T=R.ccclass,P=R.property;(function(t){t[t.btnAll=0]="btnAll",t[t.btnWeapon=1]="btnWeapon",t[t.btnArmor=2]="btnArmor",t[t.btnCompound=3]="btnCompound"})(l||(l={})),function(t){t[t.btnWeapon=0]="btnWeapon",t[t.btnHelmet=1]="btnHelmet",t[t.btnClothes=2]="btnClothes",t[t.btnGloves=3]="btnGloves"}(c||(c={}));var L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemBoxPrefab=null,e.compoundBoxPrefab=null,e.IconBgList=[],e.topContent=null,e.equipmentBox=null,e.btnAll=null,e.btnWeapon=null,e.btnEquipment=null,e.btnCompound=null,e.btnBreakdown=null,e.scrollview=null,e.posChooseBox=null,e.curPage=null,e.curCompoundPage=null,e.btnList=[],e.compoundBtnList=[],e.curAni="idle",e.isFinishInit=!1,e.unGetList=[],e.layouts=[],e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addEventListener()},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.initAttrBar=function(){var t=this.getC("attrBar"),e=u.default.equipmentMgr.getAllAttribute(),i=e.getAttr(d.AttrTypeEnum.attack),n=e.getAttr(d.AttrTypeEnum.hpmax),o=e.getAttr(d.AttrTypeEnum.dodge)/100,r=e.getAttr(d.AttrTypeEnum.crit)/100,a=this.seekC(t,"labBlood");this.seekC(a,"labNum").getComponent(cc.Label).string="+"+Math.ceil(n);var s=this.seekC(t,"labAttack");this.seekC(s,"labNum").getComponent(cc.Label).string="+"+Math.ceil(i);var l=this.seekC(t,"labDodge");this.seekC(l,"labNum").getComponent(cc.Label).string="+"+Math.ceil(o)+"%";var c=this.seekC(t,"labCrit");this.seekC(c,"labNum").getComponent(cc.Label).string="+"+Math.ceil(r)+"%"},e.prototype.addEventListener=function(){this.eventOn(E.default.BAG_ITEM_CHANGE,this.handlerBagItemChange,this),this.eventOn(E.default.EQUIPMENT_GET,this.handlerEquipmentGet,this),this.eventOn(E.default.EQUIPMENT_SLOT_CHANGE,this.handlerEquipBoxChange,this),this.eventOn(E.default.EQUIPMENT_SELL_EQUIP_INCOME,this.handlerSellEquipments,this),this.eventOn(E.default.EQUIPMENT_EQUIP_STRENTHEN_SUC,this.handlerStrenthenSuc,this),this.eventOn(E.default.EQUIPMENT_EQUIP_IMPROVETIER_SUCCESS,this.handlerEquipmentChange,this),this.eventOn(E.default.SHOP_SHOW_REWARD,this.handlerShowShopGoods,this),this.eventOnRedPoint({eventName:E.CCEventRedPoint.StrenthEquipment,handler:this.handlerEquipmentCanStrength,target:this}),this.eventOnRedPoint({eventName:E.CCEventRedPoint.AwakeEquipment,handler:this.hanlderEquipmentCanAwake,target:this})},e.prototype.handlerEquipmentCanStrength=function(){var t=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Helmet),e=this.getC("btnHat");if(t){var i=this.seekC(e,"redPoint1");b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanUpgrade(t),{x:0,y:0})}else i=this.seekC(e,"redPoint1"),b.default.ShowRedPoint(i,!1,{x:0,y:0});var n=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Weapon),o=this.getC("btnWeapon");n?(i=this.seekC(o,"redPoint1"),b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanUpgrade(n),{x:0,y:0})):(i=this.seekC(o,"redPoint1"),b.default.ShowRedPoint(i,!1,{x:0,y:0}));var r=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Clothes),a=this.getC("btnClothes");r?(i=this.seekC(a,"redPoint1"),b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanUpgrade(r),{x:0,y:0})):(i=this.seekC(a,"redPoint1"),b.default.ShowRedPoint(i,!1,{x:0,y:0}));var s=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Gloves),l=this.getC("btnGloves");s?(i=this.seekC(l,"redPoint1"),b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanUpgrade(s),{x:0,y:0})):(i=this.seekC(l,"redPoint1"),b.default.ShowRedPoint(i,!1,{x:0,y:0}))},e.prototype.hanlderEquipmentCanAwake=function(){var t=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Helmet),e=this.getC("btnHat");if(t){var i=this.seekC(e,"redPoint2");b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanAwake(t),{x:0,y:0})}else i=this.seekC(e,"redPoint2"),b.default.ShowRedPoint(i,!1,{x:0,y:0});var n=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Weapon),o=this.getC("btnWeapon");n?(i=this.seekC(o,"redPoint2"),b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanAwake(n),{x:0,y:0})):(i=this.seekC(o,"redPoint2"),b.default.ShowRedPoint(i,!1,{x:0,y:0}));var r=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Clothes),a=this.getC("btnClothes");r?(i=this.seekC(a,"redPoint2"),b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanAwake(r),{x:0,y:0})):(i=this.seekC(a,"redPoint2"),b.default.ShowRedPoint(i,!1,{x:0,y:0}));var s=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Gloves),l=this.getC("btnGloves");s?(i=this.seekC(l,"redPoint2"),b.default.ShowRedPoint(i,u.default.equipmentMgr.isEquipmentCanAwake(s),{x:0,y:0})):(i=this.seekC(l,"redPoint2"),b.default.ShowRedPoint(i,!1,{x:0,y:0}))},e.prototype.handlerShowShopGoods=function(t){u.default.viewMgr.showUI(I.UI.COMMONREWARD_VIEW,t)},e.prototype.handlerEquipmentChange=function(t){this.initAttrBar(),this.initLabHad(),u.default.equipmentMgr.isWear(t)&&this.initEquipBox()},e.prototype.handlerSellEquipments=function(t,e,i){for(var n=u.default.equipmentMgr.getAllEquipmentUnGet(),o=0;o<i.length;o++){var r=n.indexOf(i[o]);if(-1!=r)for(var a=O.default.EquipmentTable.findById(i[o]).type,s=0;s<this.layouts.length;s++)if(!(s==l.btnWeapon&&a!=h.EquipmentTypeEnum.Weapon||s==l.btnArmor&&a==h.EquipmentTypeEnum.Weapon||s==l.btnCompound)){var c={equipmentVO:{uid:null,equipmentId:n[r],strengthen:u.default.equipmentMgr.getMaxLevelByEquipmentId(n[r]),star:u.default.equipmentMgr.getMaxRankByEquipmentId(n[r]),attrList:null,strengthenFailTimes:0},isShowBg:!0,isActive:!1};if(this.layouts[s]){var p=this.layouts[s],d=this.seekC(p,"notGetLayout"),f=cc.instantiate(this.itemBoxPrefab);f.parent=d,f.getComponent(A.default).initialize(c)}}}this.initLabHad()},e.prototype.handlerStrenthenSuc=function(t){u.default.audioMgr.playSoundByResId(109),this.initAttrBar(),u.default.equipmentMgr.isWear(t)&&this.initEquipBox()},e.prototype.handlerEquipBoxChange=function(t,e,i){if(this.initEquipBox(),this.initWeaponSkin(),this.initAttrBar(),0==t){var n=u.default.equipmentMgr.getEquipment(e);this.addEquipment2Layout(n)}else 0!=i&&(n=u.default.equipmentMgr.getEquipment(i),this.addEquipment2Layout(n))},e.prototype.handlerEquipmentGet=function(t){this.addEquipment2Layout(t),this.initLabHad()},e.prototype.addEquipment2Layout=function(t){for(var e=u.default.equipmentMgr.getEquipmentList(function(t){return!u.default.equipmentMgr.isWear(t.uid)}),i=0,n=O.default.EquipmentTable.findById(t.equipmentId).type,o=0;o<e.length;o++)if(e[o].uid==t.uid){i=o;break}for(o=0;o<this.layouts.length;o++)if((o!=l.btnWeapon||n==h.EquipmentTypeEnum.Weapon)&&(o!=l.btnArmor||n!=h.EquipmentTypeEnum.Weapon)&&o!=l.btnCompound&&this.layouts[o]){var r=this.layouts[o],a=this.seekC(r,"hadGetLayout"),s=cc.instantiate(this.itemBoxPrefab);s.parent=a;var c={equipmentVO:t,isShowBg:!0,isActive:!0};s.getComponent(A.default).initialize(c);var p=a.children[i];a.children[i]=a.children[a.childrenCount-1],a.children[a.childrenCount-1]=p}},e.prototype.handlerBagItemChange=function(t){t.itemId==f.ItemIdEnum.MythFragments&&(this.refreshFragmentsNum(),this.initLabHad())},e.prototype.onStart=function(){this.initUI(),this.initAttrBar(),this.initBreakdownBtn(),this.initBtn(),this.initScroolView(),this.initLabHad(),this.initFragmentsNum(),this.initEquipBox(),this.initHeroSpine(),this.checkGuideClickEquipmentLazy(),this.addRedPoint()},e.prototype.addRedPoint=function(){},e.prototype.checkGuideClickEquipmentLazy=function(){var t=this;u.default.guideMgr.isFinishGuide(g.GuideLineEnum.GuideClickEquipment)||(this.setTouchable(!1),m.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.seekC(t.layouts[t.curPage],"hadGetLayout").children[0],i=C.default.getWorldPos(e),n=e.getContentSize();n.height=n.width;var o=O.default.GuideWordTable.findById(g.GuideLineEnum.GuideClickEquipment),r=o.name,a=o.word;u.default.viewMgr.showUI(I.UI.GUIDE_VIEW,g.GuideLineEnum.GuideClickEquipment,n,i,r,a,!1,100)}))},e.prototype.initHeroSpine=function(){this.initWeaponSkin(),this.initClickHero()},e.prototype.initClickHero=function(){var t=this,e=this.getC("nodeHero");u.default.onClick(e,function(){"idle"==t.curAni?t.curAni="run":t.curAni="idle",t.getC("spineHero").getComponent(sp.Skeleton).setAnimation(0,t.curAni,!0)})},e.prototype.initWeaponSkin=function(){var t=this.getC("spineHero").getComponent(sp.Skeleton),e=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Weapon);if(e){var i=u.default.equipmentMgr.getEquipment(e).equipmentId,n=O.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==i}).spine;n?t.setSkin(n):t.setSkin("skin_weapon_1")}else t.setSkin("skin_weapon_1")},e.prototype.initEquipBox=function(){this.initEquipHat(),this.initEquipWeapon(),this.initEquipClothes(),this.initEquipGloves()},e.prototype.initEquipHat=function(){var t=this.getC("EquipBox"),e=this.seekC(t,"btnHat");u.default.offClick(e.getComponent(cc.Button));var i=this.seekC(e,"btnEmpty"),n=this.seekC(e,"btnEquip");if(u.default.equipmentMgr.isSlotWeared(h.EquipmentPosEnum.Helmet)){i.active=!1,n.active=!0;var o=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Helmet),r=u.default.equipmentMgr.getEquipment(o).equipmentId,a=O.default.EquipmentTable.findById(r).quality;n.getComponent(cc.Sprite).spriteFrame=this.IconBgList[a],this.seekC(n,"imgEquipment").getComponent(cc.Sprite).spriteFrame=_.default.getEquipmentIconSpriteFrame(r);var s=u.default.equipmentMgr.getEquipment(o).strengthen,l=u.default.equipmentMgr.getEquipment(o).star;this.seekC(n,"labLevel").getComponent(cc.Label).string="+"+s;for(var c=1;c<=5;c++)this.seekC(n,"rank"+c).active=!(c>l);u.default.onClick(e,function(){u.default.viewMgr.showUI(I.UI.EQUIPMENT_DETAILS_VIEW,o)})}else i.active=!0,n.active=!1,u.default.onClick(e,function(){S.default.showTips("Click on equip icon to load")})},e.prototype.initEquipWeapon=function(){var t=this.getC("EquipBox"),e=this.seekC(t,"btnWeapon");u.default.offClick(e.getComponent(cc.Button));var i=this.seekC(e,"btnEmpty"),n=this.seekC(e,"btnEquip");if(u.default.equipmentMgr.isSlotWeared(h.EquipmentPosEnum.Weapon)){i.active=!1,n.active=!0;var o=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Weapon),r=u.default.equipmentMgr.getEquipment(o).equipmentId,a=O.default.EquipmentTable.findById(r).quality;n.getComponent(cc.Sprite).spriteFrame=this.IconBgList[a],this.seekC(n,"imgEquipment").getComponent(cc.Sprite).spriteFrame=_.default.getEquipmentIconSpriteFrame(r);var s=u.default.equipmentMgr.getEquipment(o).strengthen,l=u.default.equipmentMgr.getEquipment(o).star;this.seekC(n,"labLevel").getComponent(cc.Label).string="+"+s;for(var c=1;c<=5;c++)this.seekC(n,"rank"+c).active=!(c>l);u.default.onClick(e,function(){u.default.viewMgr.showUI(I.UI.EQUIPMENT_DETAILS_VIEW,o)})}else i.active=!0,n.active=!1,u.default.onClick(e,function(){S.default.showTips("Click on equip icon to load")})},e.prototype.initEquipClothes=function(){var t=this.getC("EquipBox"),e=this.seekC(t,"btnClothes");u.default.offClick(e.getComponent(cc.Button));var i=this.seekC(e,"btnEmpty"),n=this.seekC(e,"btnEquip");if(u.default.equipmentMgr.isSlotWeared(h.EquipmentPosEnum.Clothes)){i.active=!1,n.active=!0;var o=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Clothes),r=u.default.equipmentMgr.getEquipment(o).equipmentId,a=O.default.EquipmentTable.findById(r).quality;n.getComponent(cc.Sprite).spriteFrame=this.IconBgList[a],this.seekC(n,"imgEquipment").getComponent(cc.Sprite).spriteFrame=_.default.getEquipmentIconSpriteFrame(r);var s=u.default.equipmentMgr.getEquipment(o).strengthen,l=u.default.equipmentMgr.getEquipment(o).star;this.seekC(n,"labLevel").getComponent(cc.Label).string="+"+s;for(var c=1;c<=5;c++)this.seekC(n,"rank"+c).active=!(c>l);u.default.onClick(e,function(){u.default.viewMgr.showUI(I.UI.EQUIPMENT_DETAILS_VIEW,o)})}else i.active=!0,n.active=!1,u.default.onClick(e,function(){S.default.showTips("Click on equip icon to load")})},e.prototype.initEquipGloves=function(){var t=this.getC("EquipBox"),e=this.seekC(t,"btnGloves");u.default.offClick(e.getComponent(cc.Button));var i=this.seekC(e,"btnEmpty"),n=this.seekC(e,"btnEquip");if(u.default.equipmentMgr.isSlotWeared(h.EquipmentPosEnum.Gloves)){i.active=!1,n.active=!0;var o=u.default.equipmentMgr.getEquipmentInPos(h.EquipmentPosEnum.Gloves),r=u.default.equipmentMgr.getEquipment(o).equipmentId,a=O.default.EquipmentTable.findById(r).quality;n.getComponent(cc.Sprite).spriteFrame=this.IconBgList[a],this.seekC(n,"imgEquipment").getComponent(cc.Sprite).spriteFrame=_.default.getEquipmentIconSpriteFrame(r);var s=u.default.equipmentMgr.getEquipment(o).strengthen,l=u.default.equipmentMgr.getEquipment(o).star;this.seekC(n,"labLevel").getComponent(cc.Label).string="+"+s;for(var c=1;c<=5;c++)this.seekC(n,"rank"+c).active=!(c>l);u.default.onClick(e,function(){u.default.viewMgr.showUI(I.UI.EQUIPMENT_DETAILS_VIEW,o)})}else i.active=!0,n.active=!1,u.default.onClick(e,function(){S.default.showTips("Click on equip icon to load")})},e.prototype.initFragmentsNum=function(){this.refreshFragmentsNum()},e.prototype.refreshFragmentsNum=function(){var t=this.seekC(this.btnCompound,"labNum"),e=u.default.bagMgr.getItemNum(f.ItemIdEnum.MythFragments);t.getComponent(cc.Label).string=""+e},e.prototype.initLabHad=function(){var t=this.getC("labHad"),e=this.seekC(t,"labNum"),i=u.default.equipmentMgr.getEquipmentNum();e.getComponent(cc.Label).string=i+"/"+u.default.equipmentMgr.getMaxEquipment()},e.prototype.initBtn=function(){this.curPage=l.btnAll,this.initBtnAll(),this.initBtnWeapon(),this.initBtnArmor(),this.initBtnCompound(),this.refreshBtnBox(),this.initAdGet()},e.prototype.initAdGet=function(){var t=this,e=this.getC("btnAdGet");cc.tween(e).repeatForever(cc.tween(e).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),u.default.onClick(e,function(){e.getComponent(cc.Button).interactable=!1;var i=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),i?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),e.getComponent(cc.Button).interactable=!0,r&&(u.default.shopMgr.buyGood(y.ShopGoodEnum.RandomEquipment),t.refreshAdGet())}).catch(function(t){console.error("====> show RewardedVideo error: "+t.message),cc.audioEngine.resumeMusic(),t.getComponent(cc.Button).interactable=!0}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic(),e.getComponent(cc.Button).interactable=!0),e.getComponent(cc.Button).interactable=!0}),this.refreshAdGet()},e.prototype.refreshAdGet=function(){var t=this.getC("btnAdGet"),e=this.seekC(t,"labNum"),i=O.default.ShopTable.findById(y.ShopGoodEnum.RandomEquipment).buyCounting,n=u.default.countingMgr.getAllTimes(i),o=u.default.countingMgr.getRemaining(i);o<=0&&(t.stopAllActions(),t.scale=1,u.default.offClick(t.getComponent(cc.Button)),u.default.onClick(t,function(){S.default.showTips("No more times today, claim tomorrow!")})),this.setString(e,o+"/"+n)},e.prototype.refreshBtnBox=function(){for(var t=0;t<this.btnList.length;t++){var e=this.btnList[t],i=this.seekC(e,"imgActive"),n=this.seekC(e,"imgUnActive");t==this.curPage?(i.active=!0,n.active=!1):(i.active=!1,n.active=!0)}},e.prototype.initBtnAll=function(){var t=this;u.default.onClick(this.btnAll,function(){t.curPage!=l.btnAll&&(t.curPage=l.btnAll,t.refreshBtnBox(),t.setTouchable(!1),cc.tween(t.scrollview).to(.5,{opacity:0}).call(function(){t.selectShowView()}).to(.5,{opacity:255}).call(function(){t.setTouchable(!0)}).start())})},e.prototype.initBtnWeapon=function(){var t=this;u.default.onClick(this.btnWeapon,function(){t.curPage!=l.btnWeapon&&(t.curPage=l.btnWeapon,t.refreshBtnBox(),t.setTouchable(!1),cc.tween(t.scrollview).to(.5,{opacity:0}).call(function(){t.selectShowView()}).to(.5,{opacity:255}).call(function(){t.setTouchable(!0)}).start())})},e.prototype.initBtnArmor=function(){var t=this;u.default.onClick(this.btnEquipment,function(){t.curPage!=l.btnArmor&&(t.curPage=l.btnArmor,t.refreshBtnBox(),t.setTouchable(!1),cc.tween(t.scrollview).to(.5,{opacity:0}).call(function(){t.selectShowView()}).to(.5,{opacity:255}).call(function(){t.setTouchable(!0)}).start())})},e.prototype.initBtnCompound=function(){var t=this;u.default.onClick(this.btnCompound,function(){t.curPage!=l.btnCompound&&(t.curPage=l.btnCompound,t.refreshBtnBox(),t.setTouchable(!1),cc.tween(t.scrollview).to(.5,{opacity:0}).call(function(){t.selectShowView()}).to(.5,{opacity:255}).call(function(){t.setTouchable(!0)}).start())})},e.prototype.selectShowView=function(){for(var t=0;t<this.layouts.length;t++)this.layouts[t]&&(this.layouts[t].active=!1);this.curPage!=l.btnCompound?(this.scrollview.getComponent(cc.ScrollView).enabled=!0,this.layouts[this.curPage]?(this.layouts[this.curPage].active=!0,this.scrollview.getComponent(cc.ScrollView).content=this.layouts[this.curPage]):this.initScroolView()):(this.scrollview.getComponent(cc.ScrollView).enabled=!1,this.layouts[this.curPage]?this.layouts[this.curPage].active=!0:this.initCompoundView())},e.prototype.initCompoundView=function(){var t=this.getC("compoundContent");this.layouts[this.curPage]=t,t.active=!0,this.initPosChooseBox(),this.initCompoundContent()},e.prototype.initCompoundContent=function(){this.getC("compoundContent"),this.initPosBtn(),this.refreshCompoundContent(h.EquipmentTypeEnum.Weapon)},e.prototype.initPosBtn=function(){this.posChooseBox=this.getC("posChooseBox"),this.initPosWeapon(),this.initPosHelmet(),this.initPosClothes(),this.initPosGloves()},e.prototype.refreshCompoundChooseBtn=function(){for(var t=0;t<this.compoundBtnList.length;t++){var e=this.compoundBtnList[t],i=this.seekC(e,"imgActive"),n=this.seekC(e,"imgUnActive");t==this.curCompoundPage?(i.active=!0,n.active=!1):(i.active=!1,n.active=!0)}},e.prototype.refreshCompoundContent=function(t){this.refreshCompoundChooseBtn();var e=this.getC("shopScrollview");e.height=C.default.getWorldPos(e).y-200;var i,n=this.seekC(e,"layout");switch(n.destroyAllChildren(),t){case h.EquipmentTypeEnum.Weapon:i=O.default.ShopTable.findAll(function(t){return t.shopId==y.ShopTypeEnum.WeaponShop});break;case h.EquipmentTypeEnum.Helmet:i=O.default.ShopTable.findAll(function(t){return t.shopId==y.ShopTypeEnum.HelmetShop});break;case h.EquipmentTypeEnum.Clothes:i=O.default.ShopTable.findAll(function(t){return t.shopId==y.ShopTypeEnum.ClothesShop});break;case h.EquipmentTypeEnum.Gloves:i=O.default.ShopTable.findAll(function(t){return t.shopId==y.ShopTypeEnum.GlovesShop})}for(var o=0;o<i.length;o++){var r=i[o],a=cc.instantiate(this.compoundBoxPrefab);a.parent=n;for(var s=r.goods[0][0],l=0,c=r.cost,u=0;u<c.length;u++)c[u][0]==f.ItemIdEnum.MythFragments&&(l=c[u][1]);a.getComponent(w.default).initialize(s,l,r.id)}},e.prototype.initPosWeapon=function(){var t=this,e=this.seekC(this.posChooseBox,"btnWeapon");u.default.offClick(e.getComponent(cc.Button)),u.default.onClick(e,function(){t.curCompoundPage!=c.btnWeapon&&(t.curCompoundPage=c.btnWeapon,t.refreshCompoundContent(h.EquipmentTypeEnum.Weapon))})},e.prototype.initPosHelmet=function(){var t=this,e=this.seekC(this.posChooseBox,"btnHelmet");u.default.offClick(e.getComponent(cc.Button)),u.default.onClick(e,function(){t.curCompoundPage!=c.btnHelmet&&(t.curCompoundPage=c.btnHelmet,t.refreshCompoundContent(h.EquipmentTypeEnum.Helmet))})},e.prototype.initPosClothes=function(){var t=this,e=this.seekC(this.posChooseBox,"btnClothes");u.default.offClick(e.getComponent(cc.Button)),u.default.onClick(e,function(){t.curCompoundPage!=c.btnClothes&&(t.curCompoundPage=c.btnClothes,t.refreshCompoundContent(h.EquipmentTypeEnum.Clothes))})},e.prototype.initPosGloves=function(){var t=this,e=this.seekC(this.posChooseBox,"btnGloves");u.default.offClick(e.getComponent(cc.Button)),u.default.onClick(e,function(){t.curCompoundPage!=c.btnGloves&&(t.curCompoundPage=c.btnGloves,t.refreshCompoundContent(h.EquipmentTypeEnum.Gloves))})},e.prototype.initPosChooseBox=function(){if(!(this.compoundBtnList.length>0)){var t=this.getC("posChooseBox"),e=this.seekC(t,"btnWeapon"),i=this.seekC(t,"btnHelmet"),n=this.seekC(t,"btnClothes"),o=this.seekC(t,"btnGloves");this.compoundBtnList.push(e),this.compoundBtnList.push(i),this.compoundBtnList.push(n),this.compoundBtnList.push(o),this.curCompoundPage=c.btnWeapon}},e.prototype.initScroolView=function(){if(this.curPage!=l.btnCompound&&!this.layouts[this.curPage]){var t=u.default.equipmentMgr.getEquipmentList(function(t){return!u.default.equipmentMgr.isWear(t.uid)}),e=u.default.equipmentMgr.getAllEquipmentUnGet();if(this.curPage==l.btnWeapon){for(var i=e.length-1;i>=0;i--){var n=e[i];O.default.EquipmentTable.findById(n).type==h.EquipmentTypeEnum.Weapon||e.splice(i,1)}for(i=t.length-1;i>=0;i--)n=t[i].equipmentId,O.default.EquipmentTable.findById(n).type==h.EquipmentTypeEnum.Weapon||t.splice(i,1)}else if(this.curPage==l.btnArmor){for(i=e.length-1;i>=0;i--)n=e[i],O.default.EquipmentTable.findById(n).type!=h.EquipmentTypeEnum.Weapon||e.splice(i,1);for(i=t.length-1;i>=0;i--)n=t[i].equipmentId,O.default.EquipmentTable.findById(n).type!=h.EquipmentTypeEnum.Weapon||t.splice(i,1)}this.initHadGetLayout(t),this.initUnGetLayout(e)}},e.prototype.initHadGetLayout=function(t){this.getC("compoundContent").active=!1;var e=this.getC("showContent");this.layouts[this.curPage]=cc.instantiate(e),this.layouts[this.curPage].parent=this.scrollview,this.layouts[this.curPage].active=!0,this.scrollview.getComponent(cc.ScrollView).content=this.layouts[this.curPage];var i=this.seekC(this.layouts[this.curPage],"hadGetLayout");C.default.destroyAllChildren(i);var n=this.seekC(this.layouts[this.curPage],"nodeLabGet");C.default.destroyAllChildren(n);var o=this.seekC(this.layouts[this.curPage],"nodeIconGet");C.default.destroyAllChildren(o),Math.ceil(t.length/2),this.layouts[this.curPage].getComponent(cc.Layout).spacingY,i.getComponent(cc.Layout).paddingBottom,i.getComponent(cc.Layout).spacingY,i.getComponent(cc.Layout).paddingLeft,i.getComponent(cc.Layout).spacingX;for(var r=0;r<t.length;r++){var a=t[r],s=cc.instantiate(this.itemBoxPrefab);s.parent=i;var l={equipmentVO:a,isShowBg:!0,isActive:!0};s.getComponent(A.default).initialize(l)}},e.prototype.initUnGetLayout=function(t){var e=this.seekC(this.layouts[this.curPage],"notGetLayout");C.default.destroyAllChildren(e);var i=this.seekC(this.layouts[this.curPage],"nodeLabUnGet");C.default.destroyAllChildren(i);var n=this.seekC(this.layouts[this.curPage],"nodeIconUnGet");C.default.destroyAllChildren(n);var o=this.seekC(this.layouts[this.curPage],"nodeMaskUnGet");C.default.destroyAllChildren(o),o.active=!0,this.layouts[this.curPage].getComponent(cc.Layout).spacingY,e.getComponent(cc.Layout).paddingTop,e.getComponent(cc.Layout).spacingY,e.getComponent(cc.Layout).paddingLeft,e.getComponent(cc.Layout).spacingX,Math.ceil(t.length/2);for(var r=0;r<t.length;r++){var a=t[r],s={equipmentVO:{uid:null,equipmentId:a,strengthen:u.default.equipmentMgr.getMaxLevelByEquipmentId(a),star:u.default.equipmentMgr.getMaxRankByEquipmentId(a),attrList:null,strengthenFailTimes:0},isShowBg:!0,isActive:!1},l=cc.instantiate(this.itemBoxPrefab);l.parent=e,l.getComponent(A.default).initialize(s)}},e.prototype.initUI=function(){this.topContent=this.getC("topContent"),this.equipmentBox=this.getC("equipmentBox");var t=this.getC("chooseBox");this.btnAll=this.seekC(t,"btnAll"),this.btnWeapon=this.seekC(t,"btnWeapon"),this.btnEquipment=this.seekC(t,"btnEquipment"),this.btnCompound=this.seekC(t,"btnCompound"),this.scrollview=this.getC("scrollview"),this.btnList.push(this.btnAll),this.btnList.push(this.btnWeapon),this.btnList.push(this.btnEquipment),this.btnList.push(this.btnCompound)},e.prototype.onAdaptUI=function(){v.default.adaptNodeToTopInsideSafeArea(this.topContent,0),this.isFinishInit=!0},e.prototype.onLaterStart=function(){},e.prototype.initBreakdownBtn=function(){this.btnBreakdown=this.getC("btnBreakdown"),u.default.onClick(this.btnBreakdown,function(){u.default.viewMgr.showUI(I.UI.EQUIPMENT_BREAK_DOWN_VIEW)})},e.prototype.addEquipment2HadGetLayout=function(){},s([P(cc.Prefab)],e.prototype,"itemBoxPrefab",void 0),s([P(cc.Prefab)],e.prototype,"compoundBoxPrefab",void 0),s([P(cc.SpriteFrame)],e.prototype,"IconBgList",void 0),s([T],e)}(p.default);r.default=L,cc._RF.pop()},{}],EquipmentPosTable:[function(t,e,i){"use strict";cc._RF.push(e,"2fe30KOYalJIqIuAikdBLQV","EquipmentPosTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("EquipmentPosVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("equipment_pos_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],EquipmentPosVO:[function(t,e,i){"use strict";cc._RF.push(e,"2c123mgQShCc5a294RRaYi0","EquipmentPosVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.type=t[2]},cc._RF.pop()},{}],EquipmentStarLevelTable:[function(t,e,i){"use strict";cc._RF.push(e,"a1865oIFQ1Cnrq9nuMnxsKA","EquipmentStarLevelTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("EquipmentStarLevelVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("equipment_star_level"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],EquipmentStarLevelVO:[function(t,e,i){"use strict";cc._RF.push(e,"7654bL2/BBKJbI91Tw6S4am","EquipmentStarLevelVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.rank=t[1],this.name=t[2],this.desc=t[3],this.icon=t[4],this.spine=t[5],this.swallowNum=t[6],this.cost=t[7],this.rate=t[8],this.sellPrice=t[9],this.skillId=t[10],this.ratio=t[11]},cc._RF.pop()},{}],EquipmentStrengthenTable:[function(t,e,i){"use strict";cc._RF.push(e,"16afe+CBk5ALY19aLY2xtIr","EquipmentStrengthenTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("EquipmentStrengthenVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("equipment_strengthen"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],EquipmentStrengthenVO:[function(t,e,i){"use strict";cc._RF.push(e,"a5053m66wNBn62VBY+0EGQU","EquipmentStrengthenVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.type=t[0],this.level=t[1],this.starLimit=t[2],this.superStrengthen=t[3],this.cost=t[4],this.rate=t[5],this.maxFailTimes=t[6],this.failGain=t[7],this.sellPrice=t[8],this.ratio=t[9]},cc._RF.pop()},{}],EquipmentTable:[function(t,e,i){"use strict";cc._RF.push(e,"9a46fEAdItA/YKB+2NyImyk","EquipmentTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("EquipmentVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("equipment_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],EquipmentVO:[function(t,e,i){"use strict";cc._RF.push(e,"0eabcRqafNFNrt3K8a7Pjaq","EquipmentVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.type=t[2],this.pos=t[3],this.quality=t[4],this.attackSpeed=t[5],this.attackRange=t[6],this.attack=t[7],this.hpmax=t[8],this.dodge=t[9],this.crit=t[10],this.critDamage=t[11]},cc._RF.pop()},{}],ErrorEnum:[function(t,e,i){"use strict";cc._RF.push(e,"e1b2cqDGnFA1avGSOGtaQFn","ErrorEnum");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorEnum=void 0,function(t){t.Succ="Success",t.InvalidParams="Invalid Parameter",t.NotFindConfig="Config. Not available",t.ShopINotAllowToBuy="The item is not available!",t.ShopINotAllowToRepeatBuy="Unable to buy again!",t.ShopCountingNotEnought="Insufficient times to buy!",t.ShopGoodCDing="The item is CD now!",t.ShopItemNotEnought="Insufficient props to buy!"}(n.ErrorEnum||(n.ErrorEnum={})),cc._RF.pop()},{}],EventConst:[function(t,e,i){"use strict";cc._RF.push(e,"67434rf5uxOX6Y+xZ0IISJJ","EventConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.Event_ChallengeLevel=void 0,n.Event_ChallengeLevel="Event_ChallengeLevel",cc._RF.pop()},{}],EventMgr:[function(t,e,i){"use strict";cc._RF.push(e,"6b4e8qJMq1CnrlFqHNR+m1V","EventMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var l=function(t){function e(){var e=t.call(this)||this;return e.initialize(),e}return a(e,t),e.prototype.initialize=function(){},e.prototype.on=function(t,e,i){cc.game.on(t,e,i)},e.prototype.off=function(t,e,i){cc.game.off(t,e,i)},e.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(e=cc.game).emit.apply(e,s([t],i))},e}(o("Singleton").default);r.default=l,cc._RF.pop()},{}],FinalReport:[function(t,e,i){"use strict";cc._RF.push(e,"85721JdNT9PyLcINhVQrw1h","FinalReport");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("AdaptUtils"),d=o("LoggerUtils"),h=o("NodeUtils"),f=o("BaseView"),g=o("ENUMS"),y=o("ComIcon"),m=o("Recorder"),v=cc._decorator,_=v.ccclass,C=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.infoList=[],e.titleSpine=null,e.levelInfo=null,e._scene=null,e.showIndex=0,e}return a(e,t),e.prototype.onLoad=function(){this.initTitle(),this.initDamage(),this.initBtn(),this.initScroll()},e.prototype.start=function(){t.prototype.start.call(this),this.initData(),this.initSpine(),this.pauseBattleScene(),m.default.getInstance().dotCrossView2(),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME?this.playWechatAd():cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?(this.checkIsAddDesktop(),this.playOPPOAd()):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?(this.checkIsDesktopVIVO(),this.playVIVOAd()):cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playWechatAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playHuaweiAd=function(){c.default.adMgr.showBanner(),cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&0==c.default.adMgr.isHuaweiRewardReady()&&(this.getC("btnTrible").active=!1)},e.prototype.checkIsDesktopVIVO=function(){var t=this.getC("btnAddDesktop");qg.hasShortcutInstalled({success:function(e){0==e&&(t.active=!0,c.default.onClick(t,function(){qg.installShortcut({successs:function(){t.active=!1,d.default.info("\u521b\u5efa\u6210\u529f")}})}))}})},e.prototype.checkIsAddDesktop=function(){qg.hasShortcutInstalled({success:function(t){0==t&&qg.installShortcut({})}})},e.prototype.playVIVOAd=function(){c.default.adMgr.createNativeBannerAd()},e.prototype.playOPPOAd=function(){c.default.adMgr.showBanner(l.OPPOAdUnitIdEnum.Banner_Battle)},e.prototype.initSpine=function(){},e.prototype.pauseBattleScene=function(){this._scene.pauseScene(!0)},e.prototype.initData=function(){this._scene=this.getArgs()[0]},e.prototype.onAdaptUI=function(){var t=this.getC("nodeBg");p.default.adaptSize2Winsize(t),h.default.setWorldPos(this.titleSpine,h.default.getWorldPos(this.levelInfo)),this.titleSpine.y-=15,this.titleSpine.x+=15;var e=this.seekC(this.levelInfo,"label1"),i=this.seekC(this.levelInfo,"label2"),n=this.seekC(this.levelInfo,"labLevelNum");e.x=n.x-n.width/2-e.width,i.x=n.x+n.width/2+i.width},e.prototype.initTitle=function(){this.levelInfo=this.getC("levelInfo");var t=this.seekC(this.levelInfo,"labLevelNum"),e=c.default.levelServer.getCurLevel();t.getComponent(cc.Label).string=String(e),this.initTitleSpine()},e.prototype.initTitleSpine=function(){this.titleSpine=cc.instantiate(this.titleSpinePrefab),this.titleSpine.parent=this.levelInfo,this.titleSpine.zIndex--,this.levelInfo.zIndex++;var t=this.titleSpine.getComponent(sp.Skeleton);t.setAnimation(0,"play_ready",!1),t.addAnimation(0,"play_continue",!0),this.levelInfo.scale=.1,cc.tween(this.levelInfo).to(.5,{scale:1.5}).to(.1,{scale:1},{easing:"cubicOut"}).start()},e.prototype.initBtn=function(){var t=this;c.default.onClick(this.btnReturn,function(){var e=MiniGameAds.isInterstitialReady();cc.audioEngine.pauseMusic(),e?MiniGameAds.showInterstitial().then(function(){console.info("====> show interstitial success"),cc.audioEngine.resumeMusic(),t.setTouchable(!1),c.default.levelServer.setLevelDropItem(),t._scene.setState(g.LevelStatusEnum.Exiting),c.default.sceneMgr.loadScene(g.SCENE.MAIN)}).catch(function(e){console.error("====> show interstitial error: "+e.message),cc.audioEngine.resumeMusic(),t.setTouchable(!1),c.default.levelServer.setLevelDropItem(),t._scene.setState(g.LevelStatusEnum.Exiting),c.default.sceneMgr.loadScene(g.SCENE.MAIN)}):(console.info("====> interstitial not ready"),cc.audioEngine.resumeMusic(),t.setTouchable(!1),c.default.levelServer.setLevelDropItem(),t._scene.setState(g.LevelStatusEnum.Exiting),c.default.sceneMgr.loadScene(g.SCENE.MAIN))}),this.btnReturn.active=!0;var e=this.getC("btnTrible");cc.tween(e).repeatForever(cc.tween(e).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),c.default.levelServer.getLevelDropItem(),m.default.getInstance().dotBackToHallView(),m.default.getInstance().dotBackToHallView2(),c.default.onClick(e,function(){t.setTouchable(!1);var i=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),i?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),t.setTouchable(!0),e&&(t.setTouchable(!0),c.default.levelServer.setLevelDropItemDouble(),t._scene.setState(g.LevelStatusEnum.Exiting),c.default.sceneMgr.loadScene(g.SCENE.MAIN))}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),cc.audioEngine.resumeMusic(),t.setTouchable(!0)}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic(),t.setTouchable(!0)),t.setTouchable(!0)})},e.prototype.showRank=function(){},e.prototype.playDamage=function(){for(var t=0;t<this.infoList.length;t++){var e=this.infoList[t];e.x-=750,cc.tween(e).by(.4,{x:880},{easing:"cubicOut"}).parallel(cc.tween(e).to(.1,{scaleX:.8},{easing:"cubicOut"}),cc.tween(e).by(.1,{x:-180},{easing:"cubicOut"})).parallel(cc.tween(e).by(.1,{x:50},{easing:"cubicOut"}),cc.tween(e).to(.1,{scaleX:1},{easing:"cubicOut"})).start()}},e.prototype.initDamage=function(){var t=this.getC("totalDamage"),e=this.getC("totalKill"),i=this.getC("averageDamage"),n=this.seekC(t,"labNum"),o=this.seekC(e,"labNum"),r=this.seekC(i,"labNum"),a=Math.ceil(c.default.levelServer.getTotalDamage()),s=c.default.levelServer.getTotalKill(),l=c.default.levelServer.getCurLevel(),u=Math.ceil(a/l);n.getComponent(cc.Label).string=String(a),o.getComponent(cc.Label).string=String(s),r.getComponent(cc.Label).string=String(u),this.playDamage()},e.prototype.initScroll=function(){this.layout=this.getC("layout");for(var t=c.default.levelServer.getLevelDropItem(),e=0;e<t.length;e++){var i=t[e][0],n=t[e][1];if(null!=i&&0!=n){var o=this.createReportIcon(i,n);o.opacity=1,o.scale=.2,cc.tween(o).delay(.5*e).to(.5,{opacity:255,scale:1},{easing:"BackOutIn"}).start()}}},e.prototype.createReportIcon=function(t,e){var i=cc.instantiate(this.ComIcon);return i.parent=this.layout,i.getComponent(y.default).initialize(t,e),this.seekC(i,"Icon"),i},e.prototype.onDestroy=function(){cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME&&c.default.adMgr.closeBannerAd(),cc.sys.platform==u.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.closeNativeAd(),t.prototype.onDestroy.call(this)},s([C(cc.Node)],e.prototype,"btnReturn",void 0),s([C(cc.Node)],e.prototype,"infoList",void 0),s([C(cc.Prefab)],e.prototype,"ComIcon",void 0),s([C(cc.Prefab)],e.prototype,"titleSpinePrefab",void 0),s([_],e)}(f.default);r.default=b,cc._RF.pop()},{}],FinalReward:[function(t,e,i){"use strict";cc._RF.push(e,"ac725ZZFwlG+6pF0dplqpR2","FinalReward");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BagConst"),u=o("ActionUtils"),p=o("AdaptUtils"),d=o("LoggerUtils"),h=o("BaseView"),f=o("Tbl"),g=o("CCEvent"),y=o("UI"),m=cc._decorator.ccclass,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropList=null,e.originWidth=null,e.clickPercent=0,e.imgBarBg=null,e.imgBar=null,e.isFinish=!1,e._scene=null,e.isBanner=!1,e}return a(e,t),e.prototype.onLoad=function(){this.initUI(),this.initData(),this.initBtn(),this.addEventListener(),this.initBanner()},e.prototype.initBanner=function(){},e.prototype.addEventListener=function(){this.eventOn(g.default.CLOSE_VIEW,this.handlerCloseView,this)},e.prototype.handlerCloseView=function(t){t==y.UI.COMMONREWARD_VIEW.config.url&&(l.default.viewMgr.showUIWithoutSound(y.UI.FINAL_REPORT,this._scene),l.default.sdkMgr.changeBannerPos(0,.8),l.default.sdkMgr.hideBanner(),this.closeSelf())},e.prototype.initBtn=function(){var t=this,e=this.getC("btnClick");l.default.onClick(e,function(){t.clickPercent+=14,!(l.default.roleServer.isShouQNewHand()&&l.default.roleServer.getEnterFightTimes()<=2)&&t.clickPercent>60&&0==t.isBanner&&(t.isBanner=!0,l.default.sdkMgr.changeBannerPos(0,.6),l.default.sdkMgr.showBanner(),u.default.sequence(t.node,2,function(){l.default.sdkMgr.changeBannerPos(0,.8),l.default.sdkMgr.hideBanner()}))})},e.prototype.initUI=function(){this.imgBarBg=this.getC("imgBarBg"),this.imgBar=this.getC("imgBar"),this.originWidth=this.imgBar.width,this.imgBar.width=0},e.prototype.initData=function(){var t=this,e=f.default.ChapterTable.findById(l.default.levelServer.getCurChapter()).finalReward;if(null==e)d.default.error("\u7ae0\u8282\u672a\u914d\u7f6e\u6700\u7ec8\u7ed3\u7b97\u5b9d\u7bb1\uff0c\u5148\u7ed91000\u91d1\u5e01"),this.dropList=[[1,1e3]];else{var i=l.default.outputMgr.drop(e);this.dropList=[],i.forEach(function(e,i){t.dropList.push([i,e])})}},e.prototype.start=function(){t.prototype.start.call(this),this._scene=this.getArgs()[0]},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");p.default.adaptSize2Winsize(t)},e.prototype.refreshBar=function(){this.imgBar.width=this.originWidth*this.clickPercent/100},e.prototype.getReward=function(){l.default.bagMgr.addItemList(this.dropList,c.BagSourceEnum.FinalReward),l.default.audioMgr.playSoundByResId(114),l.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,this.dropList)},e.prototype.update=function(){this.isFinish||(this.clickPercent>=100?(this.getReward(),this.isFinish=!0):(this.refreshBar(),this.clickPercent-=.5,this.clickPercent<0&&(this.clickPercent=0)))},s([m],e)}(h.default);r.default=v,cc._RF.pop()},{}],FloorCollision:[function(t,e,i){"use strict";cc._RF.push(e,"46b22rscQFFrrc7B5ei/6L0","FloorCollision");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ComCollision"),c=o("ObjConst"),u=o("NodeUtils"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onCollisionEnter=function(t,e){var i=t.node,n=e.node,o=u.default.getWorldPos(n),r=u.default.getWorldPos(i),a=o.y+e.offset.y+e.size.height/2;r.y<=a&&Math.abs(r.y-a)<=10&&u.default.setWorldPos(i,r.x,a),t.node.getComponent("ObjHero").setState(c.ObjStateEnum.OnGround),t.node.getComponent("ObjHero").exitState(c.ObjStateEnum.Jumping),t.node.getComponent("ObjHero").resetJumpTime()},e.prototype.onCollisionStay=function(t,e){var i=t.node,n=e.node,o=u.default.getWorldPos(n),r=u.default.getWorldPos(i),a=o.y+e.offset.y+e.size.height/2;r.y<=a&&Math.abs(r.y-a)<=10&&u.default.setWorldPos(i,r.x,a),t.node.getComponent("ObjHero").setState(c.ObjStateEnum.OnGround)},e.prototype.onCollisionExit=function(t){t.node.getComponent("ObjHero").exitState(c.ObjStateEnum.OnGround)},s([d],e)}(l.default));r.default=h,cc._RF.pop()},{}],GenieGroupTable:[function(t,e,i){"use strict";cc._RF.push(e,"b1269YeUiRHdpY6AoRYl+BU","GenieGroupTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("GenieGroupVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("genie_group_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],GenieGroupVO:[function(t,e,i){"use strict";cc._RF.push(e,"50f341AMRBC/5Eud535rmEz","GenieGroupVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.group=t[1]},cc._RF.pop()},{}],GenieTable:[function(t,e,i){"use strict";cc._RF.push(e,"bda0eO805pGMJylCvC23TzL","GenieTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("GenieVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("genie_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],GenieVO:[function(t,e,i){"use strict";cc._RF.push(e,"df7feRzxbVIEYe8MWP10BlG","GenieVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.offset=t[1],this.firstPos=t[2],this.enterRadio=t[3],this.followRadio=t[4],this.resId=t[5]},cc._RF.pop()},{}],GlobalUtils:[function(t,e,i){"use strict";cc._RF.push(e,"e7492St+M1GqpPRgyZmlHF4","GlobalUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("LoggerUtils"),a=function(){function t(){}return t.isDebug=function(){return!1},t.isTest=function(){return r.default.error("GlobalUtils \u6d4b\u8bd5\u4ee3\u7801"),!0},t.isOpen=function(){return!0},t}();o.default=a,cc._RF.pop()},{}],GoodsIconTable:[function(t,e,i){"use strict";cc._RF.push(e,"2f19e+E+NpM94y6QHIvxDLZ","GoodsIconTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("GoodsIconVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("goods_icon_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],GoodsIconVO:[function(t,e,i){"use strict";cc._RF.push(e,"2e8c1IEXXxDu5CWNFA/D6+q","GoodsIconVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.interval=t[1],this.icons=t[2]},cc._RF.pop()},{}],GuideMgr:[function(t,e,i){"use strict";cc._RF.push(e,"8dfdb592J5GbLPpzki36yWf","GuideMgr");var n,o,r=t,a=i,s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0}),a.GuideLineTypeConst=a.GuideTypeEnum=a.GuideLineEnum=void 0;var l,c,u=r("DataHelper");(function(t){t[t.GuideEnterFight=1]="GuideEnterFight",t[t.GuideClickSelectOneSkill=2]="GuideClickSelectOneSkill",t[t.GuidePlayerMoveHero=3]="GuidePlayerMoveHero",t[t.GuidePlayerTouchJumpBtn=4]="GuidePlayerTouchJumpBtn",t[t.GuidePlayerInitiativeSkill=5]="GuidePlayerInitiativeSkill",t[t.GuideEnterEquipment=6]="GuideEnterEquipment",t[t.GuideClickEquipment=7]="GuideClickEquipment",t[t.GuideEquipEquipment=8]="GuideEquipEquipment",t[t.GuideEquipmentChapter=9]="GuideEquipmentChapter",t[t.GuideEquipmentFight=10]="GuideEquipmentFight",t[t.GuidePlayerEnterShop=11]="GuidePlayerEnterShop",t[t.GuideShopAccelerate=12]="GuideShopAccelerate",t[t.GuideShopAccelerateConfirm=13]="GuideShopAccelerateConfirm",t[t.GuideShopRareReward=14]="GuideShopRareReward",t[t.GuideShopKingReward=15]="GuideShopKingReward",t[t.GuideShopRefresh=16]="GuideShopRefresh",t[t.GuideShopRefreshConfirm=17]="GuideShopRefreshConfirm",t[t.GuideShopCommonReward=18]="GuideShopCommonReward",t[t.GuideShopSeniorReward=19]="GuideShopSeniorReward",t[t.GuideEnterChapterAfterShop=20]="GuideEnterChapterAfterShop",t[t.GuideClickFightAfterShop=21]="GuideClickFightAfterShop",t[t.GuideEnterCard=22]="GuideEnterCard",t[t.GuideClickCard=23]="GuideClickCard",t[t.GuideCardEquip=24]="GuideCardEquip",t[t.GuideCardClear=25]="GuideCardClear",t[t.GuideCardChapter=26]="GuideCardChapter",t[t.GuideCardFight=27]="GuideCardFight"})(l=a.GuideLineEnum||(a.GuideLineEnum={})),function(t){t[t.Fight=1]="Fight",t[t.Equipment=2]="Equipment",t[t.Shop=3]="Shop",t[t.Card=4]="Card"}(c=a.GuideTypeEnum||(a.GuideTypeEnum={})),a.GuideLineTypeConst=((o={})[l.GuideEnterFight]=c.Fight,o[l.GuideClickSelectOneSkill]=c.Fight,o[l.GuidePlayerMoveHero]=c.Fight,o[l.GuidePlayerTouchJumpBtn]=c.Fight,o[l.GuidePlayerInitiativeSkill]=c.Fight,o[l.GuideEnterEquipment]=c.Equipment,o[l.GuideClickEquipment]=c.Equipment,o[l.GuideEquipEquipment]=c.Equipment,o[l.GuideEquipmentChapter]=c.Equipment,o[l.GuideEquipmentFight]=c.Equipment,o[l.GuidePlayerEnterShop]=c.Shop,o[l.GuideShopAccelerate]=c.Shop,o[l.GuideShopAccelerateConfirm]=c.Shop,o[l.GuideShopRareReward]=c.Shop,o[l.GuideShopKingReward]=c.Shop,o[l.GuideShopRefresh]=c.Shop,o[l.GuideShopRefreshConfirm]=c.Shop,o[l.GuideShopCommonReward]=c.Shop,o[l.GuideShopSeniorReward]=c.Shop,o[l.GuideEnterChapterAfterShop]=c.Shop,o[l.GuideClickFightAfterShop]=c.Shop,o[l.GuideEnterCard]=c.Card,o[l.GuideClickCard]=c.Card,o[l.GuideCardEquip]=c.Card,o[l.GuideCardClear]=c.Card,o[l.GuideCardChapter]=c.Card,o[l.GuideCardFight]=c.Card,o);var p=function(t){function e(){var e=t.call(this)||this;return e.guideData=null,e.init(),e}return s(e,t),e.prototype.init=function(){t.prototype.init.call(this,"GuideMgr"),this.initData()},e.prototype.initData=function(){this.guideData=this.getValue("GUIDE_MGR_DATA",{finishGuideLineList:[],finishGuideTypeList:[],isSkip:!1})},e.prototype.skipGuideType=function(t){this.guideData.finishGuideTypeList.push(t),this.save()},e.prototype.skipAllGuide=function(){this.guideData.isSkip=!0,this.save()},e.prototype.save=function(){this.setValue("GUIDE_MGR_DATA",this.guideData)},e.prototype.finishGuide=function(t){this.guideData.finishGuideLineList.push(t),this.save()},e.prototype.isFinishGuide=function(t){if(this.guideData.isSkip)return!0;var e=a.GuideLineTypeConst[t];return-1!=this.guideData.finishGuideTypeList.indexOf(e)||-1!=this.guideData.finishGuideLineList.indexOf(t)},e.prototype.getCurrentGuide=function(){return this.guideData.isSkip?Number.MAX_VALUE:this.guideData.finishGuideLineList[this.guideData.finishGuideLineList.length-1]},e}(u.default);a.default=p,cc._RF.pop()},{}],GuideWordTable:[function(t,e,i){"use strict";cc._RF.push(e,"81341/MXmxE8oS5DPGbj+Bx","GuideWordTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("GuideWordVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("guide_word_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],GuideWordVO:[function(t,e,i){"use strict";cc._RF.push(e,"1976ayGsotEBKAP7VrwWmQk","GuideWordVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.word=t[2],this.isForce=t[3],this.isTalkBox=t[4],this.isLihui=t[5],this.isGuideRepeat=t[6],this.repeatInterval=t[7]},cc._RF.pop()},{}],HallView:[function(t,e,i){"use strict";cc._RF.push(e,"06e4bnKsDJBjbBquEo11i89","HallView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,c=o("AdVideoOPPO"),u=o("App"),p=o("BaseMiniView"),d=o("BagConst"),h=o("CommonConst"),f=o("GuideMgr"),g=o("Recorder"),y=o("ResGroupLoader"),m=(o("ShopConst"),o("SystemOpenConst")),v=o("ActionUtils"),_=o("AdaptUtils"),C=o("CommonCfgUtils"),b=o("GlobalUtils"),S=o("LoggerUtils"),O=o("MathUtils"),E=o("NodeUtils"),I=(o("RedPointUtils"),o("TipsUtils")),w=o("Utils"),A=o("BaseView"),R=o("Tbl"),T=o("CCEvent"),P=o("ENUMS"),L=o("RES"),M=o("RES"),k=o("UI");(function(t){t[t.Equipment=0]="Equipment",t[t.Card=1]="Card",t[t.QuickGame=2]="QuickGame",t[t.Shop=3]="Shop",t[t.Daily=4]="Daily"})(l||(l={}));var B=cc._decorator,V=B.ccclass,N=B.property,D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnCard=null,e.btnQuickGame=null,e.btnDaily=null,e.scrollViewLevel=null,e.comScrollView=null,e.levelList=null,e.TaskMiniView=null,e.CardMiniView=null,e.ChapterMiniView=null,e.ShopMiniView=null,e.WarHonorMiniView=null,e.EquipmentMiniView=null,e.miniViewBtn=[],e.miniViewList=[],e.curMiniViewIndex=null,e.miniViewLockClick=!1,e.updateCount=0,e.firstInit=!0,e.hideCount=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initData(),this.initUI(),this.initUIMiniView(),this.initGold(),this.initDiamond(),this.preLoad(),u.default.roleServer.enterHall(),this.addEventListener()},e.prototype.start=function(){var e=this;if(t.prototype.start.call(this),g.default.getInstance().dotOpenHallView(),u.default.audioMgr.playMusicByResId(2),this.initHideReward(),cc.sys.platform==h.PlatformTypeEnum.WECHAT_GAME?(this.showContinueFightView(),v.default.sequence(this.node,.5,function(){e.checkFinalReportDoubleReward()}),u.default.adMgr.showPortalAd()):cc.sys.platform==h.PlatformTypeEnum.HUAWEI_GAME?u.default.channelMgr.isAddDestktop()?0==u.default.roleServer.isSignin()&&u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEquipmentFight)?u.default.viewMgr.showUI(k.UI.SIGNIN_VIEW):(this.showContinueFightView(),v.default.sequence(this.node,.5,function(){e.checkFinalReportDoubleReward()})):u.default.channelMgr.isHuaweiShowDesktop()&&(u.default.channelMgr.addHuaweiShowTimes(),u.default.viewMgr.showUI(k.UI.HALL_ADDDESKTOP)):0==u.default.roleServer.isSignin()&&u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEquipmentFight)?u.default.viewMgr.showUI(k.UI.SIGNIN_VIEW):(this.showContinueFightView(),v.default.sequence(this.node,.5,function(){e.checkFinalReportDoubleReward()})),cc.sys.platform==h.PlatformTypeEnum.OPPO_GAME){if(u.default.adMgr.showBanner(c.OPPOAdUnitIdEnum.Banner_Main),w.default.rand()>.6){var i=this.getC("imgCollection");i.active=!0,_.default.adaptNodeToTop(i,50)}}else cc.sys.platform==h.PlatformTypeEnum.VIVO_GAME?(u.default.viewMgr.isViewShowing(k.UI.AD_BANNER)&&u.default.viewMgr.hideUI(k.UI.AD_BANNER,!1),u.default.adMgr.createNativeBannerAd(),qg.hasShortcutInstalled({success:function(t){if(0==t&&w.default.rand()>.6){var i=e.getC("imgCollection");i.active=!0,_.default.adaptNodeToTop(i,50);var n=e.seekC(i,"lab1");e.setString(n,"Add to my desktop")}}})):cc.sys.platform==h.PlatformTypeEnum.HUAWEI_GAME&&(u.default.adMgr.showBanner(),qg.hasShortcutInstalled({success:function(t){if(0==t&&w.default.rand()>.6){var i=e.getC("imgCollection");i.active=!0,_.default.adaptNodeToTop(i,50);var n=e.seekC(i,"lab1");e.setString(n,"Add to my desktop")}}}))},e.prototype.initHideReward=function(){var t=this,e=this.getC("imgAvatar");u.default.onClick(e,function(){u.default.roleServer.isGetHideReward(3)||(t.hideCount++,t.hideCount>=3&&(t.hideCount=0,u.default.viewMgr.showUI(k.UI.HIDE_REWARD)))})},e.prototype.switchAudio=function(){var t=this.getC("soud");0==t.getChildByName("guan").active?(cc.audioEngine.pauseMusic(),t.getChildByName("guan").active=!0):(cc.audioEngine.resumeMusic(),t.getChildByName("guan").active=!1)},e.prototype.checkGuideLine=function(){var t=this,e=u.default.guideMgr.getCurrentGuide();e>=f.GuideLineEnum.GuidePlayerEnterShop&&e<f.GuideLineEnum.GuideShopRareReward&&(this.setTouchable(!1),v.default.sequence(this.node,1,function(){t.selectMiniViewLazy(l.Shop)}))},e.prototype.checkGuide1=function(){if(u.default.roleServer.isFirstEnterHall()){var t=this.getC("btnQuickFight"),e=E.default.getWorldPos(t),i=C.default.get(h.CommonCfgEnum.GUIDE_WOMEN_NAME).string,n=C.default.get(h.CommonCfgEnum.GUIDE_ENTER_FIGHT).string;u.default.viewMgr.showUI(k.UI.GUIDE_VIEW,f.GuideLineEnum.GuideEnterFight,t.getContentSize(),e,i,n,!1,100)}},e.prototype.checkGuide6=function(){var t=this;if(!u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuidePlayerEnterShop)&&u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.ShopView)){this.setTouchable(!1);var e=this.getC("btnShop"),i=this.seekC(e,"imgIcon"),n=cc.instantiate(this.getC("sprBg"));n.parent=this.node,n.setPosition(0,0),n.opacity=150;var o=cc.instantiate(i);o.parent=this.node,o.setPosition(0,0),o.scale=6;var r=cc.instantiate(this.getC("labNum"));r.parent=o,r.getComponent(cc.Label).fontSize=25,r.getComponent(cc.Label).lineHeight=25,r.getComponent(cc.Label).string="Treasure chest system",r.anchorX=.5,r.anchorY=.5,r.x=0,r.y=100;var a=E.default.getWorldPos(i).sub(E.default.getWorldPos(o));cc.tween(this.node).call(function(){cc.tween(o).to(.5,{scale:2.5}).start()}).delay(1.5).call(function(){r.destroy(),n.destroy()}).delay(.5).call(function(){cc.tween(o).bezierBy(1,cc.v2(.03*a.x,1.2*a.y),cc.v2(1.2*a.x,1.2*a.y),a).start(),cc.tween(o).to(1,{scale:1}).start()}).delay(1.5).call(function(){o.destroy(),t.setTouchable(!0);var i=E.default.getWorldPos(e);i.y+=150;var n=e.getContentSize();n.height=n.width;var r=C.default.get(h.CommonCfgEnum.GUIDE_WOMEN_NAME).string,a=C.default.get(h.CommonCfgEnum.GUIDE_ENTER_SHOP).string;u.default.viewMgr.showUI(k.UI.GUIDE_VIEW,f.GuideLineEnum.GuidePlayerEnterShop,n,i,r,a,!1,50)}).start()}},e.prototype.checkGuideEquipment=function(){var t=this;if(!u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEnterEquipment)){this.setTouchable(!1);var e=this.getC("btnEquipment"),i=this.seekC(e,"imgIcon"),n=cc.instantiate(this.getC("sprBg"));n.parent=this.node,n.setPosition(0,0),n.color=cc.color(0,0,0),n.opacity=150;var o=cc.instantiate(i);o.parent=this.node,o.setPosition(0,0),o.scale=6;var r=cc.instantiate(this.getC("labNum"));r.parent=o,r.getComponent(cc.Label).fontSize=25,r.getComponent(cc.Label).lineHeight=25,r.getComponent(cc.Label).string="Equip system",r.anchorX=.5,r.anchorY=.5,r.x=0,r.y=100;var a=E.default.getWorldPos(i).sub(E.default.getWorldPos(o));cc.tween(this.node).call(function(){cc.tween(o).to(.5,{scale:2.5},{easing:"cubicIn"}).start()}).delay(1.5).call(function(){r.destroy(),n.destroy()}).delay(.5).call(function(){cc.tween(o).bezierBy(1,cc.v2(.03*a.x,1.2*a.y),cc.v2(1.2*a.x,1.2*a.y),a).start(),cc.tween(o).to(1,{scale:1}).start()}).delay(1.5).call(function(){o.destroy(),t.setTouchable(!0);var i=E.default.getWorldPos(e);i.y+=150;var n=e.getContentSize();n.height=n.width;var r=R.default.GuideWordTable.findById(f.GuideLineEnum.GuideEnterEquipment),a=r.name,s=r.word;u.default.viewMgr.showUI(k.UI.GUIDE_VIEW,f.GuideLineEnum.GuideEnterEquipment,n,i,a,s,!1,50)}).start()}},e.prototype.addEventListener=function(){this.eventOn(T.default.CLICK_CHAPTER,this.handlerClickChapter,this),this.eventOn(T.default.KEYBOARD_DOWN,this.handlerKeyboardDown,this),this.eventOn(T.default.BAG_ITEM_CHANGE,this.handlerItemChange,this),this.eventOn(T.default.CLOSE_VIEW,this.handlerCloseView,this),this.eventOn(cc.game.EVENT_HIDE,this.handlerHideGame,this),this.eventOn(cc.game.EVENT_SHOW,this.handlerShowGame,this),this.eventOnRedPoint({eventName:T.CCEventRedPoint.CardHasNewCard,handler:this.handlerCardHasNewCard,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.CardHasUpgrade,handler:this.handlerCardHasUpgrade,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.HonorFreeBox,handler:this.handlerHonorFreeBox,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.TaskWeeklyBox,handler:this.handlerTaskDailyBox,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.TaskDailyBox,handler:this.handlerTaskWeeklyBox,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.TaskAward,handler:this.handlerTaskAward,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.NewEquipment,handler:this.handlerNewEqupiment,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.StrenthEquipment,handler:this.handlerEquipmentStrenth,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.AwakeEquipment,handler:this.handlerEquipmentAwake,target:this}),this.eventOnRedPoint({eventName:T.CCEventRedPoint.ShopBox,handler:this.handlerShowRedPoint,target:this})},e.prototype.handlerNewEqupiment=function(){},e.prototype.handlerEquipmentStrenth=function(){},e.prototype.handlerEquipmentAwake=function(){},e.prototype.handlerShowGame=function(){u.default.roleServer.fixData();var t=u.default.roleServer.getOfflineReward();u.default.roleServer.resetOfflineTime(),null!=t&&u.default.viewMgr.showUI(k.UI.OFFLINE_REWARD,t)},e.prototype.handlerHideGame=function(){u.default.roleServer.setOfflineTime()},e.prototype.handlerCloseView=function(t){var e=this;if(t==k.UI.COMMONREWARD_VIEW.config.url&&(this.checkGuideEquipment(),this.checkGuide6(),this.checkGuideLine()),t==k.UI.HALL_SHOUQVIEW.config.url&&(this.showContinueFightView(),v.default.sequence(this.node,.5,function(){e.checkFinalReportDoubleReward()})),t==k.UI.SIGNIN_VIEW.config.url){this.firstInit=!1;var i=u.default.roleServer.getOfflineReward();null==i?(this.showContinueFightView(),v.default.sequence(this.node,.5,function(){e.checkFinalReportDoubleReward()})):u.default.viewMgr.showUI(k.UI.OFFLINE_REWARD,i),u.default.roleServer.resetOfflineTime()}if(t==k.UI.OFFLINE_REWARD.config.url&&(this.showContinueFightView(),v.default.sequence(this.node,.5,function(){e.checkFinalReportDoubleReward()})),t==k.UI.HALL_ADDDESKTOP.config.url){if(0==this.firstInit)return;0==u.default.roleServer.isSignin()&&u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEquipmentFight)?u.default.viewMgr.showUI(k.UI.SIGNIN_VIEW):(this.showContinueFightView(),v.default.sequence(this.node,.5,function(){e.checkFinalReportDoubleReward()}))}},e.prototype.guideEnterFightAfterShop=function(){var t=this.getC("btnQuickFight"),e=E.default.getWorldPos(t),i=t.getContentSize(),n=C.default.get(h.CommonCfgEnum.GUIDE_WOMEN_NAME).string,o=C.default.get(h.CommonCfgEnum.GUIDE_ENTER_FIGHT_AFTERSHOP).string;u.default.viewMgr.showUI(k.UI.GUIDE_VIEW,f.GuideLineEnum.GuideClickFightAfterShop,i,e,n,o,!1,150)},e.prototype.guideEnterFightAfterCard=function(){var t=this.getC("btnQuickFight"),e=E.default.getWorldPos(t),i=t.getContentSize(),n=C.default.get(h.CommonCfgEnum.GUIDE_WOMEN_NAME).string,o=C.default.get(h.CommonCfgEnum.GUIDE_ENTER_FIGHT_AFTERSHOP).string;u.default.viewMgr.showUI(k.UI.GUIDE_VIEW,f.GuideLineEnum.GuideClickFightAfterShop,i,e,n,o,!1,150)},e.prototype.handlerShowRedPoint=function(){u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.ShopView)},e.prototype.handlerTaskAward=function(){u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.TaskView)},e.prototype.handlerTaskWeeklyBox=function(){u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.TaskView)},e.prototype.handlerTaskDailyBox=function(){u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.TaskView)},e.prototype.handlerHonorFreeBox=function(){},e.prototype.handlerCardHasNewCard=function(){},e.prototype.handlerCardHasUpgrade=function(){},e.prototype.handlerItemChange=function(){this.initGold(),this.initDiamond()},e.prototype.checkFinalReportDoubleReward=function(){var t=u.default.levelServer.takeOutLevelDropItemDouble();if(null!=t&&0!=t.length){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push([n[0],n[1]])}var o=[];for(i=0;i<t.length;i++)n=t[i],o.push([n[0],n[2]]);u.default.bagMgr.addItemList(e,d.BagSourceEnum.MonsterDrop),u.default.viewMgr.showUI(k.UI.COMMONREWARD_VIEW,o)}},e.prototype.handlerClickChapter=function(){this.setTouchable(!1)},e.prototype.handlerKeyboardDown=function(t){t.isKeyOn([cc.macro.KEY.ctrl,49])&&(u.default.levelServer.enterChapter(999),u.default.sceneMgr.loadScene(P.SCENE.BATTLE))},e.prototype.onAdaptUI=function(){this.node.height=cc.winSize.height;var t=this.getC("sprBg");_.default.adaptSize2Winsize(t);var e=this.getC("TopView");_.default.adaptNodeToTopInsideSafeArea(e);var i=this.getC("ButtomView");_.default.adaptNodeToBottom(i),cc.sys.platform==h.PlatformTypeEnum.OPPO_GAME?this.adaptUIByOPPO():cc.sys.platform==h.PlatformTypeEnum.VIVO_GAME?this.adaptUIByVIVO():cc.sys.platform==h.PlatformTypeEnum.HUAWEI_GAME&&this.adaptUIByHuawei()},e.prototype.adaptUIByHuawei=function(){this.getC("ButtomView").y+=100},e.prototype.adaptUIByVIVO=function(){this.getC("ButtomView").y+=114},e.prototype.adaptUIByOPPO=function(){this.getC("ButtomView").y+=114},e.prototype.showContinueFightView=function(){var t=this;if(this.checkLastTimeIsUnusual()){if(u.default.levelServer.checkIsLevelDropItemDouble())return;this.checkGuideEquipment(),this.checkGuide6(),this.checkGuideLine()}else{var e={title:"Confirm",content:"Continue to fight?",tips:"",sureCallback:function(){var e=M.ResBattleScene.lazyLoadList||[];u.default.resMgr.loadRes(e),u.default.levelServer.setJumpLevel(u.default.levelServer.getCurLevel()),u.default.levelServer.enterChapter(u.default.levelServer.getCurChapter()),u.default.viewMgr.showUI(k.UI.LOADING_VIEW),u.default.sceneMgr.loadScene(P.SCENE.BATTLE),t.setTouchable(!1)},cancelCallBack:function(){t.setTouchable(!0),u.default.levelServer.resetLevelInfo(),t.checkGuideEquipment(),t.checkGuide6(),t.checkGuideLine()},isNeedAd:!1};u.default.viewMgr.showUI(k.UI.CONFIRM_VIEW,this,e)}},e.prototype.preLoad=function(){var t=this,e=new y.default(L.ResMainScene.lazyLoadList,!1,null,function(e,i){S.default.info("HallView[\u9884\u52a0\u8f7d] [\u5b8c\u6210] : ",e),e==L.ResMainScene.prefab.HALL_MINIVIEW_TASK.url&&(t.TaskMiniView=i),e==L.ResMainScene.prefab.HALL_MINIVIEW_SHOP.url&&(t.ShopMiniView=i),e==L.ResMainScene.prefab.HALL_MINIVIEW_CARD.url&&(t.CardMiniView=i)});this.EquipmentMiniView=u.default.resMgr.getPrefab(L.ResMainScene.prefab.HALL_MINIVIEW_EQUIPMENT.url),e.setMaxTreads(2),e.start()},e.prototype.checkIsEnterGameReal=function(){var t=u.default.levelServer.getCurChapter(),e=u.default.levelServer.getCurLevel();return 1==t&&e<=7&&e>1},e.prototype.checkLastTimeIsUnusual=function(){var t=u.default.levelServer.getCurLevel(),e=u.default.levelServer.getMaxLevel();return!(t>1&&t!=e)},e.prototype.initData=function(){u.default.levelServer.resetJumpLevel()},e.prototype.initGold=function(){var t=this.getC("nodeGold");this.seekC(t,"labNum").getComponent(cc.Label).string=O.default.numToBigNum(u.default.bagMgr.getGoldNum());var e=this.seekC(t,"imgAdd");u.default.onClick(e,function(){var t=M.ResBattleScene.lazyLoadList||[];u.default.resMgr.loadRes(t),u.default.viewMgr.showUI(k.UI.GET_GOLD)})},e.prototype.initDiamond=function(){var t=this.getC("nodeDiamond");this.seekC(t,"labNum").getComponent(cc.Label).string=O.default.numToBigNum(u.default.bagMgr.getDiamondNum());var e=this.seekC(t,"imgAdd");u.default.onClick(e,function(){var t=M.ResBattleScene.lazyLoadList||[];u.default.resMgr.loadRes(t),u.default.viewMgr.showUI(k.UI.GET_DIAMOND)})},e.prototype.initUI=function(){var t=this;this.nodeUI=this.getC("nodeUI"),this.btnEquipment=this.getC("btnEquipment"),this.btnCard=this.getC("btnCard"),this.btnQuickGame=this.getC("btnQuickGame"),this.btnShop=this.getC("btnShop"),this.btnDaily=this.getC("btnDaily"),this.miniViewBtn.push(this.btnEquipment),this.miniViewBtn.push(this.btnCard),this.miniViewBtn.push(this.btnQuickGame),this.miniViewBtn.push(this.btnShop),this.miniViewBtn.push(this.btnDaily),this.sprBgEditBox=this.getC("sprBgEditBox"),b.default.isDebug()?(this.editBox=this.seekC(this.sprBgEditBox,"editBox"),this.comEidtBox=this.editBox.getComponent(cc.EditBox)):this.sprBgEditBox.destroy(),u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.TaskView)?u.default.onClick(this.btnDaily,function(){var e=M.ResBattleScene.lazyLoadList||[];u.default.resMgr.loadRes(e),t.selectMiniView(l.Daily)}):(this.seekC(this.btnDaily,"imgLock").active=!0,u.default.onClick(this.btnDaily,function(){var t=M.ResBattleScene.lazyLoadList||[];u.default.resMgr.loadRes(t),I.default.showTips(R.default.SystemOpenTable.findById(m.SystemOpenEnum.TaskView).unlockTips)}));var e=this.getC("btnZhanling");u.default.onClick(e,function(){I.default.showTips("Coming soon!")}),this.seekC(e,"labNum").getComponent(cc.Label).string=""+u.default.warHonorMgr.getProgress();var i=this.getC("img1");u.default.onClick(i,function(){I.default.showTips("Coming soon!")}),this.seekC(this.btnCard,"imgLock").active=!0,u.default.onClick(this.btnCard,function(){I.default.showTips("Coming soon!")},u.default.onClick(this.btnQuickGame,function(){var e=M.ResBattleScene.lazyLoadList||[];u.default.resMgr.loadRes(e),g.default.getInstance().dotGameStart(),g.default.getInstance().dotGameStart2(),cc.game.emit(T.default.GUIDE_CHAPTERVIEW_AFTER_SHOP),u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEquipmentChapter)?u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideCardChapter)||t.emit(T.default.GUIDE_CARD_CHAPTER):t.emit(T.default.GUIDE_EQUIPMENT_CHAPTER),t.selectMiniView(l.QuickGame)})),u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.ShopView)?u.default.onClick(this.btnShop,function(){t.isMiniViewReady(l.Shop)?(t.selectMiniView(l.Shop),t.emit(T.default.GUIDE_ENTER_SHOP)):I.default.showTips("Loading, please be patient")}):(this.seekC(this.btnShop,"imgLock").active=!0,u.default.onClick(this.btnShop,function(){I.default.showTips(R.default.SystemOpenTable.findById(m.SystemOpenEnum.ShopView).unlockTips)})),u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.EquipmentView)?u.default.onClick(this.btnEquipment,function(){g.default.getInstance().dotEquipmentSystem(),t.isMiniViewReady(l.Equipment)?(u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEnterEquipment)||t.emit(T.default.GUIDE_ENTER_EQUIPMENT),t.selectMiniView(l.Equipment)):I.default.showTips("Loading, please be patient")}):(this.seekC(this.btnEquipment,"imgLock").active=!0,u.default.onClick(this.btnEquipment,function(){I.default.showTips(R.default.SystemOpenTable.findById(m.SystemOpenEnum.EquipmentView).unlockTips)})),this.showFirstMiniView(l.QuickGame)},e.prototype.selectMiniView=function(t){1!=this.miniViewLockClick&&this.curMiniViewIndex!=t&&(this.isMiniViewReady(t)?(this.selectMiniViewBtn(t),this.enterMiniView(t),this.exitCurMiniView(t),cc.sys.platform==h.PlatformTypeEnum.OPPO_GAME?this.showMiniViewBanner(t):cc.sys.platform==h.PlatformTypeEnum.VIVO_GAME?this.showBannerByVivo(t):cc.sys.platform==h.PlatformTypeEnum.HUAWEI_GAME&&this.showBannerByHuawei(t)):I.default.showTips("Loading, please be patient"))},e.prototype.showBannerByHuawei=function(){u.default.adMgr.showBanner(),u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEquipEquipment)&&(!u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuidePlayerEnterShop)&&u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.ShopView)||!u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideCardEquip)&&u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.EquipmentView)||u.default.adMgr.showNativeInterstitialAd())},e.prototype.showBannerByVivo=function(){u.default.adMgr.showNativeInterstitialAd(),u.default.viewMgr.isViewShowing(k.UI.AD_BANNER)||!u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuidePlayerEnterShop)&&u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.ShopView)||!u.default.guideMgr.isFinishGuide(f.GuideLineEnum.GuideEnterEquipment)&&u.default.systemOpenMgr.isOpen(m.SystemOpenEnum.EquipmentView)||u.default.adMgr.createNativeBannerAd()},e.prototype.showMiniViewBanner=function(t){if(u.default.channelMgr.getSwtich()&&t==l.QuickGame)u.default.adMgr.hideBanner();else{var e;switch(t){case l.Shop:e=c.OPPOAdUnitIdEnum.Banner_Shop;break;case l.Card:e=c.OPPOAdUnitIdEnum.Banner_Card;break;case l.Daily:e=c.OPPOAdUnitIdEnum.Banner_Task;break;case l.Equipment:e=c.OPPOAdUnitIdEnum.Banner_Equipment;break;case l.QuickGame:e=c.OPPOAdUnitIdEnum.Banner_Battle}u.default.adMgr.showBanner(e)}},e.prototype.selectMiniViewLazy=function(t){var e=this;this.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){e.node.stopAllActions(),e.setTouchable(!0),e.selectMiniView(t)}))))},e.prototype.showFirstMiniView=function(t){this.getMiniView(t),this.curMiniViewIndex=t,this.selectMiniViewBtn(t)},e.prototype.enterMiniView=function(t){var e=this;if(this.curMiniViewIndex!=t){this.miniViewLockClick=!0;var i=this.getMiniView(t).getComponent(p.default);i?this.curMiniViewIndex<t?i.enterFromTheRight(function(){e.miniViewLockClick=!1,e.curMiniViewIndex=t}):i.enterFromTheLeft(function(){e.miniViewLockClick=!1,e.curMiniViewIndex=t}):S.default.error("MainScene enterMiniView com = null")}},e.prototype.isMiniViewReady=function(t){switch(t){case l.Daily:return null!=this.TaskMiniView;case l.Card:return null!=this.CardMiniView;case l.QuickGame:return null!=this.ChapterMiniView;case l.Shop:return null!=this.ShopMiniView;case l.Equipment:return null!=this.EquipmentMiniView}return!1},e.prototype.getMiniView=function(t){if(this.miniViewList[t])return this.miniViewList[t].active=!0,this.miniViewList[t].getComponent(p.default).refresh(),this.miniViewList[t];var e;switch(t){case l.Daily:e=cc.instantiate(this.TaskMiniView);break;case l.Card:e=cc.instantiate(this.CardMiniView);break;case l.QuickGame:e=cc.instantiate(this.ChapterMiniView);break;case l.Shop:e=cc.instantiate(this.ShopMiniView);break;case l.Equipment:e=cc.instantiate(this.EquipmentMiniView)}return e.parent=this.nodeUI,this.miniViewList[t]=e,e},e.prototype.exitCurMiniView=function(t){if(null!=this.curMiniViewIndex){var e=this.getMiniView(this.curMiniViewIndex),i=e.getComponent(p.default);i?this.curMiniViewIndex<t?i.exitFromTheLeft(function(){e.active=!1}):this.curMiniViewIndex>t&&i.exitFromTheRight(function(){e.active=!1}):S.default.error("MainScene exitCurMiniView com = null")}},e.prototype.selectMiniViewBtn=function(t){for(var e=0;e<this.miniViewBtn.length;e++)e==t?this.showMiniViewBtnBeSelect(this.miniViewBtn[e],!0):this.showMiniViewBtnBeSelect(this.miniViewBtn[e],!1)},e.prototype.showMiniViewBtnBeSelect=function(t,e){var i=this.seekC(t,"nodeNormal"),n=this.seekC(t,"nodeSelect");e?(n.active=!0,i.active=!1):(n.active=!1,i.active=!0)},e.prototype.initUIMiniView=function(){},e.prototype.eidtEnd=function(t){u.default.levelServer.setJumpLevel(Number(t.string))},e.prototype.update=function(t){u.default.roleServer.isFirstGame()&&this.updateCount<=60||(this.updateCount+=t,this.updateCount>300&&(this.updateCount=0,this.updateInterstitialAd()))},e.prototype.updateInterstitialAd=function(){},e.prototype.onDestroy=function(){u.default.adMgr.destroyPortalAd(),t.prototype.onDestroy.call(this)},s([N(cc.Prefab)],e.prototype,"ChapterMiniView",void 0),s([V],e)}(A.default);r.default=D,cc._RF.pop()},{}],HeroAttrTable:[function(t,e,i){"use strict";cc._RF.push(e,"217f04+EeFPIITerpa2jkkY","HeroAttrTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("HeroAttrVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("hero_attr_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],HeroAttrVO:[function(t,e,i){"use strict";cc._RF.push(e,"5f050UM7IpGUqhARoYI3Dcx","HeroAttrVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.gun=t[1],this.level=t[2],this.upgradePrice=t[3],this.jumpTime=t[4],this.jumpSpeed=t[5],this.attackSpeed=t[6],this.speed=t[7],this.attackRange=t[8],this.hpmax=t[9],this.dodge=t[10],this.attackType=t[11],this.attack=t[12],this.bloodSucking=t[13],this.bloodSuckingChance=t[14],this.hitHealing=t[15],this.hitHealingChance=t[16],this.attackPao1=t[17],this.attackPao1Times=t[18],this.attackPao2=t[19],this.attackPao2Times=t[20],this.attackPao3=t[21],this.attackPao3Times=t[22],this.attackPao4=t[23],this.attackPao4Times=t[24],this.defense=t[25],this.armorType=t[26],this.armorDefense=t[27],this.magicDefenseType=t[28],this.magicDefense=t[29],this.crit=t[30],this.critDamage=t[31],this.tenacity=t[32],this.breakArmor=t[33],this.breakArmorRate=t[34],this.breakMagicDefense=t[35],this.breakMagicDefenseRate=t[36],this.penetrate=t[37]},cc._RF.pop()},{}],HeroCollision:[function(t,e,i){"use strict";cc._RF.push(e,"a385ceWUI5Gwbzp724xDdQt","HeroCollision");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ComCollision"),c=o("NodeUtils"),u=cc._decorator.ccclass,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onCollisionEnter=function(t,e){var i=e.node,n=t.node,o=c.default.getWorldPos(i),r=c.default.getWorldPos(n).y+t.size.height/2+t.offset.y,a=i.getComponent("ComMover").speed;o.y>=r&&a<=0&&(i.getComponent("ComMover").speed=0)},e.prototype.onCollisionStay=function(t,e){var i=e.node,n=t.node,o=c.default.getWorldPos(i),r=c.default.getWorldPos(n).y+t.size.height/2+t.offset.y,a=i.getComponent("ComMover").speed;o.y>=r&&a<=0&&(i.getComponent("ComMover").speed=0)},e.prototype.onCollisionExit=function(){},s([u],e)}(l.default);r.default=p,cc._RF.pop()},{}],HeroMgr:[function(t,e,i){"use strict";cc._RF.push(e,"bc36bOMLxhAf6xULIvV4VxB","HeroMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Singleton"),c=cc._decorator.ccclass,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hero=null,e}return a(e,t),e.prototype.initHero=function(t){this._hero=t},e.prototype.getHpPercent=function(){return this._hero.getHpPercent()},e.prototype.finalize=function(){},s([c],e)}(l.default);r.default=u,cc._RF.pop()},{}],HeroTable:[function(t,e,i){"use strict";cc._RF.push(e,"ab080Rm6mFA1rt1+oHp3yMU","HeroTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("HeroVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("hero_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],HeroVO:[function(t,e,i){"use strict";cc._RF.push(e,"f6cccdKFuxAIYEys8wrda2e","HeroVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.scale=t[1],this.aniResId=t[2],this.skill=t[3],this.dmgAudioResId=t[4],this.bulletFeatureList=t[5],this.collisionRange=t[6],this.bodyRange=t[7],this.searchRange=t[8]},cc._RF.pop()},{}],HideRewardView:[function(t,e,i){"use strict";cc._RF.push(e,"8ffb3oAPfNM2b8I6IIFBw6x","HideRewardView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("AdaptUtils"),d=o("BaseView"),h=o("CCEvent"),f=o("UI"),g=cc._decorator,y=g.ccclass,m=(g.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){t.prototype.start.call(this),this.initBtn(),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_640_backup,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initBtn=function(){this.initBtnSure(),this.initBtnCancel()},e.prototype.initBtnSure=function(){var t=this,e=this.getC("btnSure");cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&0==c.default.adMgr.isHuaweiRewardReady()&&(e.active=!1),c.default.onClick(e,function(){t.setTouchable(!1),c.default.adMgr.show({adType:u.AdTypeEnum.GetHideInHall,callback:function(e){t.setTouchable(!0),e&&(c.default.roleServer.getHideReward(3),c.default.bagMgr.addItem(1001505,1),c.default.viewMgr.showUI(f.UI.COMMONREWARD_VIEW,[[1001505,1]]),t.closeSelf())},errorCallback:function(){t.setTouchable(!0)},timeout:3})})},e.prototype.initBtnCancel=function(){var t=this,e=this.getC("btnCancel");c.default.onClick(e,function(){t.closeSelf()})},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");p.default.adaptSize2Winsize(t)},e.prototype.onDestroy=function(){cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(h.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(h.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(h.default.HUAWEI_CLOSE_NATIVE),t.prototype.onDestroy.call(this)},s([y],e)}(d.default));r.default=m,cc._RF.pop()},{}],HongbaoConst:[function(t,e,i){"use strict";cc._RF.push(e,"e855c8LMV1LoqauJpvODgGm","HongbaoConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.HongbaoDateEnum=void 0,function(t){t[t.DayOne=1]="DayOne",t[t.DayTwo=2]="DayTwo",t[t.DayThree=3]="DayThree",t[t.DayFour=4]="DayFour",t[t.DayFive=5]="DayFive",t[t.DaySix=6]="DaySix",t[t.DaySeven=7]="DaySeven"}(n.HongbaoDateEnum||(n.HongbaoDateEnum={})),cc._RF.pop()},{}],HongbaoEnterView:[function(t,e,i){"use strict";cc._RF.push(e,"eb654edLYtAKb9R4vj82Lr8","HongbaoEnterView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("AdaptUtils"),u=o("BaseView"),p=cc._decorator.ccclass,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.btnSelect=null,e}return a(e,t),e.prototype.onLoad=function(){this.initUI()},e.prototype.initUI=function(){this.btnClose=this.getC("btnClose"),this.btnSelect=this.getC("btnSelect")},e.prototype.start=function(){t.prototype.start.call(this),this.initBtn()},e.prototype.initBtn=function(){var t=this;l.default.onClick(this.btnClose,function(){t.closeSelf()}),l.default.onClick(this.btnSelect,function(){t.closeSelf()})},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");c.default.adaptSize2Winsize(t)},s([p],e)}(u.default);r.default=d,cc._RF.pop()},{}],HongbaoMgr:[function(t,e,i){"use strict";cc._RF.push(e,"85e29fk+MJAWp6l8bfTy/bD","HongbaoMgr");var n,o,r,a=t,s=i,l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(s,"__esModule",{value:!0});var u=a("App"),p=a("DataHelper"),d=a("CommonConst"),h=a("LoggerUtils"),f=a("CCEvent"),g=a("HongbaoConst"),y=cc._decorator.ccclass,m=((o={})[g.HongbaoDateEnum.DayOne]=[.19,.1,.1,.07],o[g.HongbaoDateEnum.DayTwo]=[.15,.08,.08,.07],o[g.HongbaoDateEnum.DayThree]=[.14,.07,.08,.07],o[g.HongbaoDateEnum.DayFour]=[.14,.08,.07,.07],o[g.HongbaoDateEnum.DayFive]=[.13,.08,.07,.07],o[g.HongbaoDateEnum.DaySix]=[.39,.11,.1,.1],o[g.HongbaoDateEnum.DaySeven]=[.04,.03,.04,.03],o),v=((r={})[g.HongbaoDateEnum.DayOne]=[.01,.02,.01,.02],r[g.HongbaoDateEnum.DayTwo]=[.01,.02,.01,.02],r[g.HongbaoDateEnum.DayThree]=[.01,.02,.01,.02],r[g.HongbaoDateEnum.DayFour]=[.01,.02,.01,.02],r[g.HongbaoDateEnum.DayFive]=[.01,.02,.01,.02],r[g.HongbaoDateEnum.DaySix]=[.01,.02,.01,.02],r[g.HongbaoDateEnum.DaySeven]=[.01,.02,.01,.02],r),_=function(t){function e(){var e=t.call(this)||this;return e._hongbaoInfo=null,e.lastLoginDate=null,e.initialize(),e}return l(e,t),e.prototype.initialize=function(){this.init(d.DataNameEnum.HongbaoMgr),this._hongbaoInfo=this.getValue("HONGBAO_DATA"),this.dataFix(),this.addEventListener()},e.prototype.addEventListener=function(){cc.game.on(f.default.HONGBAO_INFO_GET,this.handlerHongbaoInfoGet,this)},e.prototype.handlerHongbaoInfoGet=function(t){h.default.info("event get hongbaoinfo",t)},e.prototype.dataFix=function(){if(null==this._hongbaoInfo){var t=new Date,e=t.getTime(),i=u.default.getTime()+604800;i=i-3600*t.getHours()-60*t.getMinutes()-t.getSeconds(),this._hongbaoInfo={lastLoginTime:e,activityEndTime:i,date:g.HongbaoDateEnum.DayOne,nextShow:0,count:0,oldList:[],video_get:[],time_two:0,time_three:0,time_four:0},this.setHongbaoInfo()}this.refreshDataBySDK()},e.prototype.refreshDataBySDK=function(){var t=this._hongbaoInfo.date;u.default.sdkMgr.getHongbaoInfo(t)},e.prototype.setHongbaoVideoGet=function(t,e){h.default.info(e),e?(this._hongbaoInfo.video_get=[e.video_one,e.video_two,e.video_three,e.video_four],this._hongbaoInfo.time_two=e.time_two,this._hongbaoInfo.time_three=e.time_three,this._hongbaoInfo.time_four=e.time_four):(3002==u.default.sdkMgr.getSceneId()?this._hongbaoInfo.video_get=m[t]:this._hongbaoInfo.video_get=v[t],this._hongbaoInfo.time_two=300,this._hongbaoInfo.time_three=600,this._hongbaoInfo.time_four=1200),this.setHongbaoInfo()},e.prototype.getHongbaoInfo=function(){return this._hongbaoInfo},e.prototype.onFix=function(){this.lastLoginDate=new Date(this._hongbaoInfo.lastLoginTime);var t=new Date,e=t.getTime()-this.lastLoginDate.getTime(),i=Math.floor(e/864e5);this.lastLoginDate.getDate()==t.getDate()&&this.lastLoginDate.getMonth()==t.getMonth()&&this.lastLoginDate.getFullYear()==t.getFullYear()||(this._hongbaoInfo.oldList.push([this._hongbaoInfo.date,this._hongbaoInfo.count,this._hongbaoInfo.video_get]),this._hongbaoInfo.nextShow=0,this._hongbaoInfo.date=this._hongbaoInfo.date+1+i,this._hongbaoInfo.count=0,this.setHongbaoInfo()),this._hongbaoInfo.lastLoginTime=t.getTime(),this.setHongbaoInfo()},e.prototype.getLastLoginDate=function(){return this.lastLoginDate},e.prototype.getHongbaoSucc=function(){switch(this._hongbaoInfo.count++,this._hongbaoInfo.count){case 1:this._hongbaoInfo.nextShow=u.default.getTime()+300;break;case 2:this._hongbaoInfo.nextShow=u.default.getTime()+600;break;case 3:this._hongbaoInfo.nextShow=u.default.getTime()+1200}this.setHongbaoInfo()},e.prototype.getHongbao=function(t){u.default.sdkMgr.createHongbaoAd(t)},e.prototype.setHongbaoInfo=function(){this.setValue("HONGBAO_DATA",this._hongbaoInfo)},e.prototype.isInOldList=function(t){for(var e=0;e<this._hongbaoInfo.oldList.length;e++)if(this._hongbaoInfo.oldList[e][0]==t)return!0;return!1},e.prototype.getOldCount=function(t){for(var e=0;e<this._hongbaoInfo.oldList.length;e++)if(this._hongbaoInfo.oldList[e][0]==t)return this._hongbaoInfo.oldList[e][1];return null},e.prototype.getCount=function(t){return this._hongbaoInfo.date==t?this._hongbaoInfo.count:this.getOldCount(t)},c([y],e)}(p.default);s.default=_,cc._RF.pop()},{}],HongbaoRewardView:[function(t,e,i){"use strict";cc._RF.push(e,"90653BPdLNDqpCUNYYuBLup","HongbaoRewardView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("AdaptUtils"),u=o("BaseView"),p=cc._decorator.ccclass,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnSure=null,e.moneyNum=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.initData=function(){this.btnSure=this.getC("btnSure"),this.moneyNum=this.getArgs()[0]||Number(0)},e.prototype.start=function(){var e=this;this.initData(),this.setTouchable(!1),cc.tween(this.node).delay(1).call(function(){e.setTouchable(!0)}).start(),this.getC("labNum").getComponent(cc.Label).string=this.moneyNum+" yuan",this.initBtn(),this.initStart(),t.prototype.start.call(this)},e.prototype.initBtn=function(){var t=this;l.default.onClick(this.btnSure,function(){t.closeSelf()})},e.prototype.initStart=function(){},e.prototype.onAdaptUI=function(){var t=this.getC("imgBg");c.default.adaptSize2Winsize(t)},s([p],e)}(u.default);r.default=d,cc._RF.pop()},{}],HongbaoView:[function(t,e,i){"use strict";cc._RF.push(e,"ceccemkMkJLeIFMSi/vc8ED","HongbaoView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("HongbaoConst"),c=o("App"),u=o("AdaptUtils"),p=o("LoggerUtils"),d=o("NodeUtils"),h=o("TipsUtils"),f=o("BaseView"),g=o("CCEvent"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fingerClickPreafb=null,e.btnClose=null,e.btnSelect=null,e.labTime=null,e.dayBtnList=[],e.hongbaoList=[],e.curDay=null,e.hongbaoInfo=null,e.isCount=!1,e.timeCount=0,e.guideFinger=null,e}return a(e,t),e.prototype.onLoad=function(){this.refreshData(),this.initUI(),this.checkGuide()},e.prototype.checkGuide=function(){if(this.hongbaoInfo.date==l.HongbaoDateEnum.DayOne&&0==this.hongbaoInfo.count){var t=this.getC("hongbao1"),e=this.seekC(t,"canGet"),i=this.seekC(e,"btnGet");this.guideFinger=cc.instantiate(this.fingerClickPreafb),this.guideFinger.parent=this.node,d.default.setWorldPos(this.guideFinger,d.default.getWorldPos(i))}},e.prototype.guideClose=function(){var t=this.getC("btnClose");d.default.setWorldPos(this.guideFinger,d.default.getWorldPos(t))},e.prototype.refreshData=function(){this.hongbaoInfo=c.default.hongbaoMgr.getHongbaoInfo();var t=c.default.hongbaoMgr.getLastLoginDate();this.curYear=t.getFullYear(),this.curMonth=t.getMonth(),this.curDate=t.getDate(),this.curDay=this.hongbaoInfo.date},e.prototype.initUI=function(){this.btnClose=this.getC("btnClose"),this.labTime=this.getC("labTime");for(var t=1;t<=4;t++){var e=this.getC("hongbao"+t);this.hongbaoList.push(e)}},e.prototype.refreshHongbaoView=function(){},e.prototype.start=function(){t.prototype.start.call(this),this.initBtn(),this.initTime(),this.initFirstView()},e.prototype.initBtn=function(){var t=this;c.default.onClick(this.btnClose,function(){t.closeSelf()}),this.initDailyBtn()},e.prototype.initDailyBtn=function(){for(var t=this,e=this.hongbaoInfo,i=function(i){var o=n.getC("btn"+i),r=n.seekC(o,"btnActive"),a=n.seekC(o,"btnUnActive");i==e.date||c.default.hongbaoMgr.isInOldList(i)?(r.active=!0,a.active=!1,c.default.onClick(o,function(){t.curDay=i,t.refreshView()})):(r.active=!1,a.active=!0,c.default.onClick(o,function(){h.default.showTips("Locked")})),n.dayBtnList.push(o)},n=this,o=1;o<=7;o++)i(o)},e.prototype.initTime=function(){this.refreshEventDeadline(),this.refreshHongbaoTime()},e.prototype.refreshEventDeadline=function(){},e.prototype.refreshHongbaoTime=function(){},e.prototype.initFirstView=function(){this.curDay=this.hongbaoInfo.date,this.refreshView()},e.prototype.refreshView=function(){var t=this,e=c.default.hongbaoMgr.getCount(this.curDay),i=c.default.hongbaoMgr.getHongbaoInfo();if(null!=e){for(var n=i.oldList,o=i.video_get,r=0;r<n.length;r++)n[r][0]==this.curDay&&(o=n[r][2]);for(r=0;r<this.hongbaoList.length;r++){var a=this.hongbaoList[r],s=this.seekC(a,"hadGet"),l=this.seekC(a,"canGet"),u=this.seekC(a,"lock");if(r==e){if(i.date!=this.curDay){s.active=!1,l.active=!1,u.active=!0,(h=this.seekC(u,"labNum")).getComponent(cc.Label).string="Expired";break}var d=this.hongbaoInfo.nextShow-c.default.getTime();if(d>0){s.active=!1,l.active=!1,u.active=!0,this.isCount=!0;var h=this.seekC(u,"labNum"),f=Math.floor(d/3600%24),y=Math.floor(d/60%60),m=Math.ceil(d%60);h.getComponent(cc.Label).string=f+":"+y+":"+m+"Claimable"}else{s.active=!1,l.active=!0,u.active=!1,h=this.seekC(l,"labNum");var v=void 0;switch(r){case 0:v="Max 2 yuan";break;case 1:v="Max 10 yuan";break;case 2:v="Max 15 yuan";break;case 3:v="Max 20 yuan"}h.getComponent(cc.Label).string=v;var _=this.seekC(a,"btnOpen"),C=this.seekC(a,"btnGet");c.default.onClick(_,function(){c.default.hongbaoMgr.getHongbao(function(){c.default.hongbaoMgr.getHongbaoSucc(),cc.game.emit(g.default.HONGBAO_GET),t.refreshView(),t.guideFinger&&t.guideClose()})}),c.default.onClick(C,function(){c.default.hongbaoMgr.getHongbao(function(){c.default.hongbaoMgr.getHongbaoSucc(),cc.game.emit(g.default.HONGBAO_GET),t.refreshView(),t.guideFinger&&t.guideClose()})})}}else r<e?(s.active=!0,l.active=!1,u.active=!1,(h=this.seekC(s,"labNum")).getComponent(cc.Label).string=o[r]+" yuan"):(s.active=!1,l.active=!1,u.active=!0,(h=this.seekC(u,"labNum")).getComponent(cc.Label).string="Last red packet not opened")}}else p.default.error("\u7ea2\u5305\u7cfb\u7edf\u6709\u95ee\u9898\uff0c\u7b2c\u4e00\u5929\u7684\u8bb0\u5f55\u4e22\u5931")},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");u.default.adaptSize2Winsize(t);var e=this.getC("topView");u.default.adaptNodeToTop(e);var i=this.getC("contentView");i.width=cc.winSize.width,i.height=cc.winSize.height-348,u.default.adaptNodeToTop(i,348);var n=this.seekC(i,"imgBg");n.width=cc.winSize.width,n.height=cc.winSize.height-348},e.prototype.refreshActivityCount=function(){var t=this.hongbaoInfo.activityEndTime,e=Math.ceil(t-c.default.getTime()),i=Math.floor(e/86400%31),n=Math.floor(e/3600%24),o=Math.floor(e/60%60),r=Math.ceil(e%60);this.labTime.getComponent(cc.Label).string="Event countdown: "+i+"Day "+n+"H:"+o+"M:"+r+"S"},e.prototype.refreshHongbaoCount=function(){var t=this,e=c.default.hongbaoMgr.getCount(this.curDay),i=this.hongbaoList[e];if(i){var n=this.seekC(i,"lock"),o=this.hongbaoInfo.nextShow-c.default.getTime();if(o>0){this.isCount=!0;var r=Math.floor(o/3600),a=Math.floor(o/60),s=Math.ceil(o%60);(u=this.seekC(n,"labNum")).getComponent(cc.Label).string=r+":"+a+":"+s+"Claimable"}else{var l=this.seekC(i,"canGet");l.active=!0,n.active=!1,this.isCount=!1;var u=this.seekC(l,"labNum"),p=void 0;switch(e){case 0:p="Max 2 yuan";break;case 1:p="Max 10 yuan";break;case 2:p="Max 15 yuan";break;case 3:p="Max 20 yuan"}u.getComponent(cc.Label).string=p;var d=this.seekC(i,"btnOpen"),h=this.seekC(i,"btnGet");c.default.onClick(d,function(){c.default.hongbaoMgr.getHongbao(function(){c.default.hongbaoMgr.getHongbaoSucc(),cc.game.emit(g.default.HONGBAO_GET),t.refreshView()})}),c.default.onClick(h,function(){c.default.hongbaoMgr.getHongbao(function(){c.default.hongbaoMgr.getHongbaoSucc(),cc.game.emit(g.default.HONGBAO_GET),t.refreshView()})})}}},e.prototype.update=function(t){if(this.timeCount+=t,this.timeCount>=1){if(this.timeCount=0,this.refreshActivityCount(),0==this.isCount)return;this.refreshHongbaoCount()}},s([v(cc.Prefab)],e.prototype,"fingerClickPreafb",void 0),s([m],e)}(f.default);r.default=_,cc._RF.pop()},{}],IntensifyCeilTable:[function(t,e,i){"use strict";cc._RF.push(e,"5e6c0aLyUhAd4SEMsa7+oDO","IntensifyCeilTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("IntensifyCeilVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("intensify_ceil_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],IntensifyCeilVO:[function(t,e,i){"use strict";cc._RF.push(e,"d0eae48c0dB6KncALjuFMq9","IntensifyCeilVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.suitAttr=t[2],this.iconPath=t[3],this.intensifyDetail=t[4],this.maxLevel=t[5]},cc._RF.pop()},{}],IntensifyCostTable:[function(t,e,i){"use strict";cc._RF.push(e,"6a5d94v5yVDUo8B3bTZeaa5","IntensifyCostTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("IntensifyCostVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("intensify_cost_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.level,n)}},t.prototype.findByLevel=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],IntensifyCostVO:[function(t,e,i){"use strict";cc._RF.push(e,"c6c1bwJXIRBJ7i+R2oSSHvg","IntensifyCostVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.level=t[0],this.hpmax=t[1],this.attackPao1=t[2],this.attackPao2=t[3],this.attackPao3=t[4],this.dodge=t[5],this.crit=t[6]},cc._RF.pop()},{}],IntensifyDetailTable:[function(t,e,i){"use strict";cc._RF.push(e,"d8456KfvNZNiaFWO6zvETrG","IntensifyDetailTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("IntensifyDetailVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("intensify_detail_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.level,n)}},t.prototype.findByLevel=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],IntensifyDetailVO:[function(t,e,i){"use strict";cc._RF.push(e,"da88aGFECVAPrAIvSgHkhk7","IntensifyDetailVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.level=t[0],this.hpmax=t[1],this.attackPao1=t[2],this.attackPao2=t[3],this.attackPao3=t[4],this.attackPao4=t[5],this.dodge=t[6],this.crit=t[7],this.defense=t[8],this.lightAttack=t[9],this.darkAttack=t[10],this.iceAttack=t[11],this.fireAttack=t[12]},cc._RF.pop()},{}],ItemGiftPackTable:[function(t,e,i){"use strict";cc._RF.push(e,"dfc23ObPk9MN43KMKkemCf2","ItemGiftPackTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ItemGiftPackVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("item_gift_pack"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.itemId,n)}},t.prototype.findByItemid=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ItemGiftPackVO:[function(t,e,i){"use strict";cc._RF.push(e,"beac26HholAj67GPhohx8a/","ItemGiftPackVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.itemId=t[0],this.desc=t[1],this.award=t[2]},cc._RF.pop()},{}],ItemTable:[function(t,e,i){"use strict";cc._RF.push(e,"02740GRZgFKAKkLXlPS6ZM5","ItemTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ItemVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("item_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ItemUtils:[function(t,e,i){"use strict";cc._RF.push(e,"1bfa706yXtEFIcz/F8YcCWx","ItemUtils");var n=t,o=i,r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("Tbl"),s=n("App"),l=n("BagConst"),c=cc._decorator,u=c.ccclass,p=(c.property,function(){function t(){}var e;return e=t,t.getItemName=function(t){return a.default.ItemTable.findById(t).name},t.getItemVO=function(t){return a.default.ItemTable.findById(t)},t.getItemIconPath=function(t){var i=e.getItemVO(t);return i.icon?"icon2/"+i.icon:null},t.getItemReportIconPath=function(t){var i=e.getItemVO(t);return i.reportIcon?"icon2/"+i.reportIcon:null},t.getItemReportBgPath=function(t){var i=e.getItemVO(t);return i.reportIconBg?"icon2/"+i.reportIconBg:null},t.getCardIconSpriteFram=function(t){var i=e.getItemVO(t);if(i.type==l.ItemTypeEnum.Card){var n=a.default.CardLevelTable.findFirst(function(e){if(e.id==t)return!0});return s.default.resMgr.getSpriteFrame("icon2/"+n.icon)}return i.icon?s.default.resMgr.getSpriteFrame("icon2/"+i.icon):null},t.getItemIconSpriteFrame=function(t){var i=e.getItemVO(t);return i.icon?s.default.resMgr.getSpriteFrame("icon2/"+i.icon):null},t.getEquipmentIconSpriteFrame=function(t){var e=a.default.EquipmentStarLevelTable.findFirst(function(e){return e.id==t});return e.icon?s.default.resMgr.getSpriteFrame("icon2/"+e.icon):null},t.getItemType=function(t){var i=e.getItemVO(t);return i.type?i.type:null},e=r([u],t)}());o.default=p,cc._RF.pop()},{}],ItemVO:[function(t,e,i){"use strict";cc._RF.push(e,"dc2fccFR59M8Ir0m6I8FmTw","ItemVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.type=t[1],this.name=t[2],this.desc=t[3],this.html5Desc=t[4],this.reportIcon=t[5],this.reportIconBg=t[6],this.icon=t[7],this.dropScale=t[8],this.iconLightRedId=t[9],this.iconPart=t[10],this.dropAudio=t[11],this.stampType=t[12],this.iconBig=t[13],this.autoUse=t[14],this.priority=t[15],this.existTime=t[16],this.maxStack=t[17],this.price=t[18],this.noShow=t[19],this.skillId=t[20],this.level=t[21],this.showLevel=t[22],this.nextLevel=t[23],this.levelBuff=t[24],this.preOutputItemList=t[25],this.disableOuputItemList=t[26]},cc._RF.pop()},{}],Language:[function(t,e,i){"use strict";cc._RF.push(e,"dddf5fTgwNPo6l9703KiaKh","Language");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.BulletCreateError="bulletId:%s",t}();n.default=o,cc._RF.pop()},{}],LevelMgr:[function(t,e,i){"use strict";cc._RF.push(e,"7d844mEG1lJHKFA9R6GKm71","LevelMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("EventConst"),p=o("EventMgr"),d=o("NodeUtils"),h=o("Tbl"),f=o("CCEvent"),g=o("BornEnum"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._scene=null,e._mapMgr=null,e._heroNode=null,e._objHero=null,e._chapter=null,e._curLevel=null,e._ChapterLevelVO=null,e._monsterBornPointList=[],e}return a(e,t),e.prototype.initialize=function(t,e,i){this._scene=t,this._mapMgr=t.getMapMgr(),this._heroNode=t.getHero(),this._objHero=this._heroNode.getComponent("ObjHero"),this._chapter=e,this._curLevel=i,this._monsterBornPointList=[],this._ChapterLevelVO=null,this.waveChange(),p.default.getInstance().emit(u.Event_ChallengeLevel,{chapter:this._chapter,level:this._curLevel,isSucc:!1})},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onTick=function(){this.createMonster(),this.updateWave()},e.prototype.getLevelLastMonsterNum=function(){var t=this,e=0;this._scene.foreachMonster(function(t){0!=t.isLive()&&0!=t.isTarget()&&e++});for(var i=0;i<this._monsterBornPointList.length;i++){var n=this._monsterBornPointList[i];n.lastTimes<=0||null!=n.VO.isTarget&&0!=n.VO.isTarget&&(e+=n.lastTimes)}return h.default.ChapterLevelTable.forEach(function(i){if(i.id==t._chapter&&i.level==t._curLevel&&!(null!=t._ChapterLevelVO&&t._ChapterLevelVO.wave>=i.wave))for(var n=i.bornPoint||[],o=function(i){var o=n[i],r=h.default.MonsterBornPointTable.findFirst(function(e){return e.id==t._chapter&&e.level==t._curLevel&&e.point==o&&null!=e.monster});if(null==r)return"continue";if(null==r.isTarget||0==r.isTarget)return"continue";if(null==r.rebirth)return e++,"continue";if(2==r.rebirth.length){var a=r.rebirth[1];a>0&&(e+=a)}},r=0;r<n.length;r++)o(r)}),e},e.prototype.updateWave=function(){for(var t=this,e=0;e<this._monsterBornPointList.length;e++){var i=this._monsterBornPointList[e];if(i.lastTimes>0&&null!=i.VO.isTarget)return}if(!(this._scene.getTargetMonsterNum()>0)){var n=1;null!=this._ChapterLevelVO&&(n+=this._ChapterLevelVO.wave);var o=h.default.ChapterLevelTable.findFirst(function(e){return e.id==t._chapter&&e.level==t._curLevel&&e.wave==n});null!=o?(this._monsterBornPointList=[],this._ChapterLevelVO=o,this.checkLevelWarning(),this.waveChange()):(this._scene.passLevel(),p.default.getInstance().emit(u.Event_ChallengeLevel,{chapter:this._chapter,level:this._curLevel,isSucc:!0}))}},e.prototype.getCurLevel=function(){return this._curLevel},e.prototype.createMonster=function(){var t=this;if(null!=this._ChapterLevelVO){if(null==this._monsterBornPointList||0==this._monsterBornPointList.length)for(var e=this._scene.getTime(),i=this._ChapterLevelVO.bornPoint||[],n=function(n){var r=i[n],a=h.default.MonsterBornPointTable.findFirst(function(e){return e.id==t._chapter&&e.level==t._curLevel&&e.point==r&&null!=e.monster});if(null==a)return console.error("[LevelMgr] \u627e\u4e0d\u5230\u51fa\u751f\u70b9 %s-%s",o._chapter,o._curLevel),"continue";var s={VO:a,nextBornAt:e+a.delayTime/1e3,lastTimes:1,isClimb:!0,bornWPos:cc.v2(),bornPos:cc.v2(a.offset[0],a.offset[1])},l=a.rebirth;l&&l[1]&&(s.lastTimes=l[1]),o._monsterBornPointList.push(s)},o=this,r=0;r<i.length;r++)n(r);var a=this._scene.getTime();for(r=0;r<this._monsterBornPointList.length;r++){var s=this._monsterBornPointList[r];if(0!=s.lastTimes&&!(s.nextBornAt>a)){if(s.isClimb){s.nextBornAt+=1;var c=s.bornPos;if(!s.VO.monster)return;var u,p=h.default.MonsterTable.findById(s.VO.monster).bornArgs,d=0;(u=p?p[0]:0)==g.MonsterBornTypeEnum.Fly&&(d=Math.sqrt(2*p[1]/Math.abs(l.default.getGravity())));var f=this._scene.getObjhero().getWorldPos().x,y=cc.v2(f+c.x,c.y+this._scene.getFloorHeight()+.1);return s.bornWPos=y,this._scene.showMonsterBornWaring(y,u,d),void(s.isClimb=!1)}-1!=s.lastTimes&&s.lastTimes--;var m=s.VO.rebirth;null!=m&&m[0]?s.nextBornAt=a+m[0]/1e3:s.nextBornAt=0;var v=!1;s.VO.isTarget&&1==s.VO.isTarget&&(v=!0),l.default.levelServer.isFirstTimeEnterChapter(l.default.levelServer.getCurChapter())?this._scene.createMonster(s.VO.monster,s.VO.point,v,this._ChapterLevelVO,s.bornWPos,s.VO.firstEnterChapterDropId):this._scene.createMonster(s.VO.monster,s.VO.point,v,this._ChapterLevelVO,s.bornWPos,s.VO.dropId)}}}},e.prototype.checkLevelFinish=function(){var t=d.default.getWorldPos(this._heroNode),e=this._mapMgr.getCurMapEndX();t.x>e&&l.default.levelServer.isCurChapterLastLevel()&&this.emit(f.default.CHAPTER_FINISH)},e.prototype.checkLevelWarning=function(){null!=this._ChapterLevelVO&&this._ChapterLevelVO.warningType>0&&l.default.event.emit(f.default.LEVEL_WARNING,{warningType:this._ChapterLevelVO.warningType,warningFadeInTime:this._ChapterLevelVO.warningFadeInTime,warningStayTime:this._ChapterLevelVO.warningStayTime,warningFadeOutTime:this._ChapterLevelVO.warningFadeOutTime,warningShowTimes:this._ChapterLevelVO.warningShowTimes})},e.prototype.waveChange=function(){var t=this,e=this._ChapterLevelVO;null==e&&(e=h.default.ChapterLevelTable.findFirst(function(e){return e.id==t._chapter&&e.level==t._curLevel&&1==e.wave})),l.default.event.emit(f.default.LEVEL_WAVE_CHANGE,e)},s([m],e)}(c.default));r.default=v,cc._RF.pop()},{}],LevelOutputFilter:[function(t,e,i){"use strict";cc._RF.push(e,"ccb3cpPaaxC+IvgrKzC/cPH","LevelOutputFilter");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("App"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.isValidOutPut=function(t){var e=s.default.ItemTable.findById(t);return null==e?(console.warn("\u65e0\u6548\u9053\u5177%s",t),!1):!!this.isOwnPreOutputItem(e)&&!l.default.roleServer.isDisableItem(e.id)},e.prototype.isOwnPreOutputItem=function(t){return!t.preOutputItemList||l.default.roleServer.isOwnItemList(t.preOutputItemList)},e}(o("OutputFilter").default);r.default=c,cc._RF.pop()},{}],LevelServer:[function(t,e,i){"use strict";cc._RF.push(e,"d727b/hA9dIxrX40LkfJTgU","LevelServer");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("ObjConst"),p=o("DataHelper"),d=o("CommonConst"),h=o("LevelOutputFilter"),f=o("Recorder"),g=o("CommonCfgUtils"),y=o("ItemUtils"),m=o("LoggerUtils"),v=function(t){function e(){var e=t.call(this)||this;return e._levelData=null,e._totalDamage=0,e._totalKill=0,e._rebornTime=0,e._killEarnGold=0,e._curChapterWinGold=0,e._jumpLevel=-1,e._levelDropMap=new Map,e._isLockSaveInfo=!1,e.initialize(),e}return a(e,t),e.prototype.initialize=function(){t.prototype.init.call(this,d.DataNameEnum.LevelServer),this.initLevelData(),this.fixLevelData()},e.prototype.initLevelData=function(){this._levelData=this.getValue("LEVEL_SERVER_DATA",{curChapter:1,maxChapter:1,curLevel:1,storyLevel:0,maxLevel:0,isLastChanllengeSuc:!0,maxLevelList:[],maxPassLevelList:[],curHeroHp:0,levelDropMap:new Map,rewardSkillList:[],isReardByFinalReport:!1,isTribleReward:!1,extraReardByFinalReport:null,enterChapterTimesList:[]}),null==this._levelData.isReardByFinalReport&&(this._levelData.isReardByFinalReport=!1),null==this._levelData.isTribleReward&&(this._levelData.isTribleReward=!1)},e.prototype.fixLevelData=function(){null==this._levelData.maxLevelList&&(this._levelData.maxLevelList=[]),null==this._levelData.maxPassLevelList&&(this._levelData.maxPassLevelList=this._levelData.maxLevelList.concat([])),null==this._levelData.storyLevel&&(this._levelData.storyLevel=0),null==this._levelData.enterChapterTimesList&&(this._levelData.enterChapterTimesList=[])},e.prototype.getLevelInfo=function(){return this._levelData},e.prototype.setLevelInfo=function(){1!=this._isLockSaveInfo&&this.setValue("LEVEL_SERVER_DATA",this.getLevelInfo())},e.prototype.lockSaveInfo=function(t){this._isLockSaveInfo=t,0==t&&this.setLevelInfo()},e.prototype.checkIsShowStory=function(){var t=this.getLevelInfo();return t.storyLevel<t.curChapter&&(t.storyLevel=t.curChapter,this.setLevelInfo(),!0)},e.prototype.setJumpLevel=function(t){t<=1||(this._jumpLevel=t)},e.prototype.resetJumpLevel=function(){this._jumpLevel=-1},e.prototype.getJumpLevel=function(){return this._jumpLevel},e.prototype.resetLevelInfo=function(){var t=this.getLevelInfo();t.curLevel=1,t.curHeroHp=0,t.rewardSkillList=[],this._levelDropMap.clear(),this.setLevelInfo()},e.prototype.enterChapter=function(t){void 0===t&&(t=1);var e=this.getLevelInfo();1==e.curLevel&&(e.curChapter=t,e.curLevel=1,e.rewardSkillList=[],this.addEnterChapterTimes(t),this._totalDamage=0,this._totalKill=0,this._rebornTime=0,this._levelDropMap.clear(),this._jumpLevel>1&&(e.curLevel=this._jumpLevel),this.setLevelInfo())},e.prototype.addEnterChapterTimes=function(t){void 0===t&&(t=1);for(var e=this.getLevelInfo(),i=0;i<e.enterChapterTimesList.length;i++){var n=e.enterChapterTimesList[i];if(n[0]==t)return n[1]++,void this.setLevelInfo()}e.enterChapterTimesList.push([t,1]),this.setLevelInfo()},e.prototype.isFirstTimeEnterChapter=function(t){void 0===t&&(t=1);for(var e=this.getLevelInfo(),i=0;i<e.enterChapterTimesList.length;i++){var n=e.enterChapterTimesList[i];if(n[0]==t)return 1==n[1]}return m.default.error("LevelServer \u903b\u8f91\u9519\u8bef"),!1},e.prototype.getCurChapter=function(){return this.getLevelInfo().curChapter},e.prototype.getMaxChapter=function(){return this.getLevelInfo().maxChapter},e.prototype.setCurChapterLevelNumber=function(){var t=this.getLevelInfo(),e=this.getCurChapter(),i=s.default.ChapterTable.findById(e).levelRange[1];t.maxLevel=i},e.prototype.passLevel=function(){var t=this.getLevelInfo(),e=this.getCurChapterVO().levelRange;if(c.default.sdkMgr.passLevel(t.curChapter,t.curLevel),t.curLevel==e[1])f.default.getInstance().dotChapterSuccess(),this.passChapter(),this.refreshChapterMaxLevel(t.curChapter,t.curLevel),this.refreshChapterPassMaxLevel(t.curChapter,t.curLevel),c.default.event.emit(l.default.CHAPTER_FINISH);else{var i=this.getCurLevelDropInfo();this.refreshChapterPassMaxLevel(t.curChapter,t.curLevel),f.default.getInstance().dotLevelSuccess(),t.curLevel++,c.default.event.emit(l.default.LEVEL_FINISH,i),this.refreshChapterMaxLevel(t.curChapter,t.curLevel)}this.setLevelInfo()},e.prototype.passChapter=function(){var t=this.getLevelInfo();if(t.curChapter==t.maxChapter){var e=t.curChapter+1,i=s.default.ChapterTable.findById(e);i&&i.isOpen&&(t.maxChapter=e)}},e.prototype.refreshChapterMaxLevel=function(t,e){for(var i=this.getLevelInfo(),n=0;n<i.maxLevelList.length;n++){var o=i.maxLevelList[n];if(o.chapter==t&&e>o.maxLevel)return o.maxLevel=e,void this.setLevelInfo()}i.maxLevelList.push({maxLevel:e,chapter:t})},e.prototype.refreshChapterPassMaxLevel=function(t,e){for(var i=this.getLevelInfo(),n=0;n<i.maxPassLevelList.length;n++){var o=i.maxPassLevelList[n];if(o.chapter==t&&e>o.maxLevel)return o.maxLevel=e,void this.setLevelInfo()}i.maxPassLevelList.push({maxLevel:e,chapter:t})},e.prototype.getPlayerChapterMaxLevel=function(t){for(var e=this.getLevelInfo(),i=0;i<e.maxLevelList.length;i++){var n=e.maxLevelList[i];if(n.chapter==t)return n.maxLevel}return 0},e.prototype.getPlayerChapterMaxPassLevel=function(t){for(var e=this.getLevelInfo(),i=0;i<e.maxPassLevelList.length;i++){var n=e.maxPassLevelList[i];if(n.chapter==t)return n.maxLevel}return 0},e.prototype.getChapterPrecent=function(t){return this.getPlayerChapterMaxPassLevel(t)/this.getChapterVO(t).levelRange[1]},e.prototype.monsterDropItem=function(t,e,i,n){return this._monsterDropItem(n,t,e.goldBouns,i)},e.prototype._monsterDropItem=function(t,e,i,n){var o=c.default.outputMgr.drop(t);if(o){for(var r=Array.from(o),a=0;a<r.length;a++)1==r[a][0]&&(r[a][1]*=i);r.length>0&&n==u.ObjTypeEnum.Monster?c.default.event.emit(l.default.MONSTER_DROP_ITEM,{itemList:r,wPos:e}):r.length>0&&n==u.ObjTypeEnum.BOSS&&c.default.event.emit(l.default.BOSS_DROP_ITEM,{itemList:r,wPos:e})}},e.prototype.getChapterSelectOneDropSkillList=function(){var t=this.getCurChapterVO(),e=t.selectOneDropId;if(null==e)return null;var i=this.getCurLevelVO(),n=i.videoAllSelect,o=i.videoChange;return n||o?c.default.roleServer.setLimitInitiativeSkillNumWithAll():c.default.roleServer.setLimitInitiativeSkillNumWithoutAll(),this.isFirstTimeEnterChapter(this.getCurChapter())&&(e=t.selectOneDropIdFirst),c.default.outputMgr.drop(e,new h.default)},e.prototype.getChapterSelect3DropSkillList=function(){var t=this.getCurChapterVO(),e=t.selectThreeDropId;if(null==e)return null;new h.default;var i=this.getCurLevelVO();return i.videoAllSelect,i.videoChange,c.default.roleServer.setLimitInitiativeSkillNumWithAll(),this.isFirstTimeEnterChapter(this.getCurChapter())&&(e=t.selectThreeDropIdFirst),c.default.outputMgr.drop(e,new h.default)},e.prototype.getCurLevelDropInfo=function(){var t=this.getCurLevelVO();m.default.info(t.level);var e=t.skillDrop,i=t.videoAllSelect,n=t.videoChange,o=t.videoUpgrade,r=t.rewardSkillVIew;return i||n?c.default.roleServer.setLimitInitiativeSkillNumWithAll():c.default.roleServer.setLimitInitiativeSkillNumWithoutAll(),this.isFirstTimeEnterChapter(this.getCurChapter())&&(e=t.skillDropFirst),{skillList:c.default.outputMgr.drop(e,new h.default),videoAllSelect:i,videoChange:n,videoUpgrade:o,rewardSkillView:r}},e.prototype.getCurLevelChangeInfo=function(){var t=this.getCurLevelVO();m.default.info(t.level);var e=t.ChangeDrop,i=t.videoAllSelect,n=t.videoChange,o=t.videoUpgrade,r=t.rewardSkillVIew;return i||n?c.default.roleServer.setLimitInitiativeSkillNumWithAll():c.default.roleServer.setLimitInitiativeSkillNumWithoutAll(),this.isFirstTimeEnterChapter(this.getCurChapter())&&(e=t.ChangeDropFirst),{skillList:c.default.outputMgr.drop(e,new h.default),videoAllSelect:i,videoChange:n,videoUpgrade:o,rewardSkillView:r}},e.prototype.getLastLevelDropInfo=function(){var t=this.getLastLevelVO(),e=t.skillDrop,i=t.videoAllSelect,n=t.videoChange,o=t.videoUpgrade,r=t.rewardSkillVIew;return i||n?c.default.roleServer.setLimitInitiativeSkillNumWithAll():c.default.roleServer.setLimitInitiativeSkillNumWithoutAll(),this.isFirstTimeEnterChapter(this.getCurChapter())&&(e=t.skillDropFirst),{skillList:c.default.outputMgr.drop(e,new h.default),videoAllSelect:i,videoChange:n,videoUpgrade:o,rewardSkillView:r}},e.prototype.refreshLevelDrop=function(){var t=this.getCurLevelDropInfo().skillList;c.default.event.emit(l.default.REWARD_VIEW_REFLASH_DROP,t)},e.prototype.refreshLevelDropChange=function(){var t=this.getCurLevelChangeInfo().skillList;c.default.event.emit(l.default.REWARD_VIEW_REFLASH_DROP,t)},e.prototype.isCurChapterLastLevel=function(){var t=this.getLevelInfo(),e=this.getCurChapterVO();return t.curLevel==e.levelRange[1]},e.prototype.getCurChapterHero=function(){var t=this.getCurChapter();return s.default.ChapterTable.findById(t).initGunId},e.prototype.isLastLevel=function(){var t=this.getCurChapterVO();return this.getCurLevel()==t.levelRange[1]},e.prototype.getCurShowLevel=function(){return this.getCurLevel()-this.getCurChapterVO().levelRange[1]+1},e.prototype.getCurLevel=function(){return this.getLevelInfo().curLevel},e.prototype.getCurLevelVO=function(){var t=this.getCurChapter(),e=this.getCurLevel();return s.default.ChapterLevelTable.findFirst(function(i){return i.id==t&&i.level==e})},e.prototype.getLastLevelVO=function(){var t=this.getCurChapter(),e=this.getCurLevel()-1;return s.default.ChapterLevelTable.findFirst(function(i){return i.id==t&&i.level==e})},e.prototype.getCurChapterVO=function(){var t=this.getCurChapter();return s.default.ChapterTable.findById(t)},e.prototype.getChapterVO=function(t){return s.default.ChapterTable.findById(t)},e.prototype.getMaxLevel=function(){return this.getLevelInfo().maxLevel},e.prototype.addTotalDamage=function(t){null!=t?this._totalDamage=this._totalDamage+t:m.default.warn("LevelServer >>>>>>>> 95 \u6ca1\u6709\u4f24\u5bb3\u6570\u5b57\u8f93\u5165!!!!!")},e.prototype.getTotalDamage=function(){return this._totalDamage},e.prototype.addTotalKill=function(){this._totalKill++},e.prototype.addLevelDropItem=function(t,e){if(this._levelDropMap.has(t)){var i=this._levelDropMap.get(t);i+=e,this._levelDropMap.set(t,i)}else this._levelDropMap.set(t,e);var n=this.getLevelInfo();n.levelDropMap=this._levelDropMap,n.extraReardByFinalReport=this.getLevelDropItemDouble(),this.setLevelInfo()},e.prototype.getLevelDropItemDouble=function(){var t=[];return this._levelDropMap.forEach(function(e,i){t.push([i,2*e,3*e])}),t.sort(function(t,e){return t[0]-e[0]}),t},e.prototype.getLevelDropItem=function(){var t=[];return this._levelDropMap.forEach(function(e,i){t.push([i,e])}),t.sort(function(t,e){var i=y.default.getItemVO(t[0]).price||0;return(y.default.getItemVO(e[0]).price||0)-i}),t},e.prototype.setLevelDropItem=function(){var t=this.getLevelInfo();t.isReardByFinalReport=!0,t.isTribleReward=!1,this.setLevelInfo()},e.prototype.setLevelDropItemDouble=function(){var t=this.getLevelInfo();t.isReardByFinalReport=!0,t.isTribleReward=!0,this.setLevelInfo()},e.prototype.takeOutLevelDropItemDouble=function(){var t,e=this.getLevelInfo();if(!e.isReardByFinalReport)return null;if(e.isTribleReward)null==(t=JSON.parse(JSON.stringify(e.extraReardByFinalReport)))&&(t=[]);else{null==(t=JSON.parse(JSON.stringify(e.extraReardByFinalReport)))&&(t=[]);for(var i=0;i<t.length;i++)t[i][2]=t[i][1]/2,t[i][1]=0}return e.isReardByFinalReport=!1,e.isTribleReward=!1,e.extraReardByFinalReport=null,this.setLevelInfo(),t},e.prototype.isGetDropDouble=function(){var t=this.getLevelInfo();return!!t.extraReardByFinalReport&&!!(t.extraReardByFinalReport.length>0&&t.isReardByFinalReport)},e.prototype.checkIsLevelDropItemDouble=function(){var t=this.getLevelInfo();return 0!=t.isReardByFinalReport&&null!=t.extraReardByFinalReport&&0!=t.extraReardByFinalReport.length},e.prototype.addRebornTime=function(){this._rebornTime++},e.prototype.getRebornTime=function(){return this._rebornTime},e.prototype.isHeroNoRebornTime=function(){var t=g.default.get("RebornTimes").number;return this.getRebornTime()>=t},e.prototype.getTotalKill=function(){return this._totalKill},e.prototype.getTotalEarnGold=function(){return this._killEarnGold+this._curChapterWinGold},e.prototype.getKillEarnDiamond=function(){return this._killEarnDiamond},e.prototype.setCurHeroHp=function(t){this.getLevelInfo().curHeroHp=t,this.setLevelInfo()},e.prototype.getCurHeroHp=function(){return this.getLevelInfo().curHeroHp},e.prototype.addRewardSkill=function(t){this.getLevelInfo().rewardSkillList.push(t),this.setLevelInfo()},e.prototype.getRewardSkillList=function(){return this.getLevelInfo().rewardSkillList},e}(p.default);r.default=v,cc._RF.pop()},{}],LevelTable:[function(t,e,i){"use strict";cc._RF.push(e,"5a05czEXR1LjL1OIk3V5BAW","LevelTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("LevelVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("level_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],LevelVO:[function(t,e,i){"use strict";cc._RF.push(e,"120ee/iSXBOQKqszFqBu2rT","LevelVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.mapId=t[1],this.type=t[2],this.buyPrice=t[3],this.coinDrop=t[4],this.skillDrop=t[5],this.videoAllSelect=t[6],this.videoChange=t[7],this.videoUpgrade=t[8],this.rewardSkillView=t[9],this.goldBonus=t[10]},cc._RF.pop()},{}],LoadScene:[function(t,e,i){"use strict";cc._RF.push(e,"5e91fyTl+FFRJD1YQ+Lo6h/","LoadScene");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseScene"),u=o("CommonConst"),p=o("AdaptUtils"),d=o("LoggerUtils"),h=o("NodeUtils"),f=o("Utils"),g=o("CCEvent"),y=o("ENUMS"),m=o("Recorder"),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadTotalAmount=0,e.loadCount=0,e.loadingBar=null,e.loadingBg=null,e.labLoading=null,e.deviceID=null,e.ageLimit=null,e.privacyBtn=null,e.userAgreeBtn=null,e.sdkInitSuccessed=!1,e.originWidth=null,e.timeCount=0,e}return a(e,t),e.prototype.onLoad=function(){l.default.getInstance(),this.initUI();var t=this.getC("LoadView");p.default.adaptBgHeight2Screen(t),this.addEventListener()},e.prototype.initUI=function(){this.loadingBar=this.getC("loadingBar"),this.originWidth=this.loadingBar.width,this.loadingBar.width=0,this.loadingBg=this.getC("loadingBg"),this.labLoading=this.getC("labLoading"),this.ageLimit=this.getC("AgeLimit")},e.callbackJs=function(t,e){switch(d.default.info("[LoadScene] callbackJs > %s",t),t){case"APP_AD_VEDIO_Init_SUCCESS":cc.game.emit("GetDeviceID",e);break;default:d.default.info("[AdVideoAndroid] \u4e8b\u4ef6\u672a\u88ab\u5904\u7406\uff1a%s",t)}},e.prototype.addEventListener=function(){m.default.getInstance().dotEnterLoadingView(),m.default.getInstance().dotEnterLoadingView2(),this.eventOn(g.default.GAME_STARTLOAD,this.handlerStartLoad,this),this.eventOn(g.default.RES_LOAD_SUCC,this.handlerResLoadSucc,this)},e.prototype.updateDeviceID=function(t){this.sdkInitSuccessed=!0,console.error("\u83b7\u53d6\u5230deviceID"),this.deviceID.active=!0,this.deviceID.getComponent(cc.Label).string=t,setTimeout(function(){l.default.roleServer.isFirstGame()?(l.default.levelServer.enterChapter(1),l.default.sceneMgr.loadScene(y.SCENE.BATTLE)):l.default.sceneMgr.loadScene(y.SCENE.MAIN)},3e3)},e.prototype.handlerStartLoad=function(t){this.loadTotalAmount=t},e.prototype.handlerResLoadSucc=function(){this.loadCount++;var t=this.loadCount/this.loadTotalAmount;t>1&&(t=1),t<.53&&(t=.53),this.loadingBar.width=this.originWidth*t},e.prototype.start=function(){var t=this,e=this.getC("imgNotice"),i=this.getC("imgOtherNotice"),n=this.getC("nodeProtocol");this.loadingBar.width<.53*this.originWidth&&(this.loadingBar.width=.53*this.originWidth);var o=h.default.getWorldPos(e);if(h.default.setWorldPos(e,cc.v2(o.x,.26*cc.winSize.height)),h.default.setWorldPos(this.loadingBg,cc.v2(o.x,.18*cc.winSize.height)),0==f.default.isMobile()&&(e.active=!1),cc.sys.platform!=u.PlatformTypeEnum.OPPO_GAME&&cc.sys.platform!=u.PlatformTypeEnum.VIVO_GAME||(e.active=!1),cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&(e.active=!1,i.active=!0,0==l.default.channelMgr.isAgreeProtocol())){n.active=!0;var r=this.seekC(n,"btnAgree"),a=this.seekC(n,"btnDisagree");return l.default.onClickWithoutSound(r,function(){t.setTouchable(!1),n.active=!1,l.default.channelMgr.setAgreeProtocol(!0),m.default.getInstance().dotEndLoadingView(),m.default.getInstance().dotEndLoadingView2(),l.default.roleServer.isFirstGame()?(l.default.levelServer.enterChapter(1),l.default.sceneMgr.loadScene(y.SCENE.BATTLE)):l.default.sceneMgr.loadScene(y.SCENE.MAIN)}),void l.default.onClickWithoutSound(a,function(){t.setTouchable(!1),i.active=!1,qg.exitApplication({})})}l.default.roleServer.isFirstGame()?(l.default.levelServer.enterChapter(1),l.default.sceneMgr.loadScene(y.SCENE.BATTLE)):l.default.sceneMgr.loadScene(y.SCENE.MAIN)},e.prototype.update=function(t){this.timeCount+=t,this.timeCount<.5?this.labLoading.getComponent(cc.Label).string="loading.":this.timeCount<1?this.labLoading.getComponent(cc.Label).string="loading..":this.timeCount<1.5?this.labLoading.getComponent(cc.Label).string="loading...":this.timeCount=0},s([_],e)}(c.default));r.default=C,cc._RF.pop()},{}],LoggerUtils:[function(t,e,i){"use strict";cc._RF.push(e,"af34bfHC65J7qrZ9IrsSJ+s","LoggerUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},t.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,t)},t.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.warn.apply(console,t)},t}();n.default=o,cc._RF.pop()},{}],MainScene:[function(t,e,i){"use strict";cc._RF.push(e,"249b5RWX5ZKir/ipN9uagCn","MainScene");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseScene"),u=o("RES"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this);var e=l.default.resMgr.getPrefab(u.ResMainScene.prefab.UI_HALL_VIEW.url);cc.instantiate(e).parent=this.node,l.default.channelMgr.initChannel()},s([d],e)}(c.default));r.default=h,cc._RF.pop()},{}],MapMgr:[function(t,e,i){"use strict";cc._RF.push(e,"bab30XGYCRO+bJw/rEnW8bd","MapMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=o("ComMap"),p=o("ArrayUtils"),d=o("CommonCfgUtils"),h=o("LoggerUtils"),f=o("MathUtils"),g=o("NodeUtils"),y=o("RectUtils"),m=o("CCEvent"),v=o("RES"),_=o("ZIndexConst"),C=cc._decorator,b=C.ccclass,S=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nodeGame=null,e._farNodeMap=null,e._midNodeMap=null,e._nodeMap=null,e._closeNodeMap=null,e._mapRoot=null,e._mapList=[],e.gameCamera=null,e._midCamera=null,e._farCamera=null,e._closeCamera=null,e.mapPrefabList=null,e.mapMidBg=null,e.midBgList=[],e.midBgIndex=0,e.midBgLength=0,e.mapFarBg=null,e.farBgList=[],e.farBgIndex=0,e.farBgLength=0,e.mapCloseBg=null,e.closeBgList=[],e.closeBgIndex=0,e.closeBgLength=0,e.farMoveRate=0,e.midMoveRate=0,e.closeMoveRate=0,e._stepsList=null,e._floorsList=null,e._floorsRangeList=[],e._mapBeginX=0,e._scene=null,e.curLevel=1,e.maxLevel=0,e.firstInitLevelNumber=2,e._allLevelCount=0,e.mapFloorHeight=0,e}return a(e,t),e.prototype.onLoad=function(){this.initNode(),this.initMap(),this.initData(),this._initFirstMap(),this._initStepAndFloor(),this.addEventListener(),this.initSchedule()},e.prototype.start=function(){this._initFarBg(),this._initMidBg(),this._initCloseBg()},e.prototype.onTick=function(){this.updateMidAndFarCamera()},e.prototype.update=function(){for(var t=!1,e=0;e<this._mapList.length;e++)this._mapList[e].isLegal&&!this._mapList[e].comMap.isLegal()&&(this._clearMap(e),t=!0);t&&this.resetStepAndFloor()},e.prototype.onTick1=function(){var t=g.default.getWorldPos(this._midCamera),e=g.default.getWorldPos(this._farCamera);g.default.getWorldPos(this._closeCamera).x>=this.closeBgIndex*this.closeBgLength-1e3&&(this.closeBgList[this.closeBgIndex]=cc.instantiate(this.mapCloseBg),this._closeNodeMap.addChild(this.closeBgList[this.closeBgIndex]),this.closeBgList[this.closeBgIndex].x=this.closeBgLength*this.closeBgIndex,this.closeBgIndex>=2&&(this.closeBgList[this.closeBgIndex-2].destroy(),this.closeBgList[this.closeBgIndex-2]=null),this.closeBgIndex++),t.x>=this.midBgIndex*this.midBgLength-700&&(this.midBgList[this.midBgIndex]=cc.instantiate(this.mapMidBg),this._midNodeMap.addChild(this.midBgList[this.midBgIndex]),this.midBgList[this.midBgIndex].x=this.midBgLength*this.midBgIndex,this.midBgIndex>=2&&(this.midBgList[this.midBgIndex-2].destroy(),this.midBgList[this.midBgIndex-2]=null),this.midBgIndex++),e.x>=this.farBgIndex*this.farBgLength-500&&(this.farBgList[this.farBgIndex]=cc.instantiate(this.mapFarBg),this._farNodeMap.addChild(this.farBgList[this.farBgIndex]),this.farBgList[this.farBgIndex].x=this.farBgLength*this.farBgIndex,this.farBgIndex>=2&&(this.farBgList[this.farBgIndex-2].destroy(),this.farBgList[this.farBgIndex-2]=null),this.farBgIndex++)},e.prototype.updateMidAndFarCamera=function(){if(null!=this.gameCamera){var t=g.default.getWorldPos(this.gameCamera),e=g.default.getWorldPos(this._midCamera),i=g.default.getWorldPos(this._farCamera),n=g.default.getWorldPos(this._closeCamera);n.x=f.default.smoothClose(n.x,t.x*this.closeMoveRate+360,1),g.default.setWorldPos(this._closeCamera,n),e.x=f.default.smoothClose(e.x,t.x*this.midMoveRate+360,1),g.default.setWorldPos(this._midCamera,e),i.x=f.default.smoothClose(i.x,t.x*this.farMoveRate+360,1),g.default.setWorldPos(this._farCamera,i)}},e.prototype.addEventListener=function(){this.eventOn(m.default.LEVEL_FINISH,this.handlerLevelFinish,this)},e.prototype.initialize=function(t){this._scene=t},e.prototype.initGameCamera=function(t){this.gameCamera=t},e.prototype.initSchedule=function(){this.schedule(this.onTick1,1)},e.prototype.initData=function(){this.farMoveRate=d.default.get("FarMoveRate").number,this.midMoveRate=d.default.get("MidMoveRate").number,this.closeMoveRate=d.default.get("CloseMoveRate").number},e.prototype.initNode=function(){this._nodeGame=this.getC("nodeGame"),this._farNodeMap=this.getC("nodeFarMapLayer"),this._midNodeMap=this.getC("nodeMidMapLayer"),this._nodeMap=this.getC("nodeMapLayer"),this._closeNodeMap=this.getC("nodecloseMapLayer"),this._midCamera=this.getC("MidCamera"),this._farCamera=this.getC("FarCamera"),this._closeCamera=this.getC("CloseCamera")},e.prototype.initMap=function(){var t=this,e=l.default.levelServer.getCurChapter();this.fetchUI(v.ResBattleScene.map["Chapter"+e].url,function(e){t._nodeMap.addChild(e,_.default.Map),t._mapRoot=e;var i=e.getComponent("ComMapList");t.mapPrefabList=i.getMapList(),t.mapMidBg=i.getMidBg(),t.mapFarBg=i.getFarBg(),t.mapCloseBg=i.getCloseBg(),t._allLevelCount=t.mapPrefabList.length,l.default.levelServer.setCurChapterLevelNumber();var n=l.default.levelServer.getCurLevel();if(n>1)for(var o=0;o<n-1;o++)p.default.remove(t.mapPrefabList,0)})},e.prototype._initCloseBg=function(){this.closeBgIndex=0,this.closeBgList[this.closeBgIndex]=cc.instantiate(this.mapCloseBg),this.closeBgLength=this.closeBgList[this.closeBgIndex].width,this._closeNodeMap.addChild(this.closeBgList[this.closeBgIndex]),this.closeBgIndex++},e.prototype._initMidBg=function(){this.midBgIndex=0,this.midBgList[this.midBgIndex]=cc.instantiate(this.mapMidBg),this.midBgLength=this.midBgList[this.midBgIndex].width,this._midNodeMap.addChild(this.midBgList[this.midBgIndex]),this.midBgIndex++},e.prototype._initFarBg=function(){this.farBgIndex=0,this.farBgList[this.farBgIndex]=cc.instantiate(this.mapFarBg),this.farBgLength=this.farBgList[this.farBgIndex].width,this._farNodeMap.addChild(this.farBgList[this.farBgIndex]),this.farBgIndex++},e.prototype._initFirstMap=function(){this.addMapLeftByFisrt(this.firstInitLevelNumber);for(var t=0;t<this.firstInitLevelNumber;t++)this.addMapByLevel(t+1);var e=this.getFloors();if(e){var i=e[0],n=g.default.getWorldPos(i).y+i.height/2;this.setFloorHeight(n)}this.curLevel=1,this.maxLevel=this.firstInitLevelNumber},e.prototype._clearMap=function(t){this._mapList[t].map.destroy(),this._mapList[t].map=null,this._mapList[t].comMap=null,this._mapList[t].isLegal=!1},e.prototype.addMapLeftByFisrt=function(t){var e=t-1;if(e+1>this.mapPrefabList.length)h.default.error("MapId bigger than max");else{var i=cc.instantiate(this.mapPrefabList[e]);this._mapRoot.addChild(i);var n=i.addComponent(u.default);n.initialize(this);var o=n.getRect();i.x=this._mapBeginX-o.width,this._mapList.push({map:i,comMap:n,isLegal:!0})}},e.prototype.addMapByLevel=function(t){var e=t-1;if(e+1>this.mapPrefabList.length)h.default.info("MapMgr >>>>>>>> 155 ");else{var i=cc.instantiate(this.mapPrefabList[e]);this._mapRoot.addChild(i);var n=i.addComponent(u.default);n.initialize(this);var o=n.getRect();i.x=this._mapBeginX,this._mapBeginX+=o.width,this._mapList.push({map:i,comMap:n,isLegal:!0}),this.emit(m.default.MAP_UPDATE,t),this.resetStepAndFloor()}},e.prototype.getMapBeginX=function(){return this._mapBeginX},e.prototype._initStepAndFloor=function(){this._initSteps(),this._initFloors(),this._initFloorsRange()},e.prototype.resetStepAndFloor=function(){this._initStepAndFloor()},e.prototype._initSteps=function(){for(var t=[],e=0,i=this._mapList;e<i.length;e++){var n=i[e];if(n.isLegal){var o=n.comMap.getSteps();p.default.merge(t,o)}}this._stepsList=t},e.prototype._initFloors=function(){for(var t=[],e=0,i=this._mapList;e<i.length;e++){var n=i[e];if(n.isLegal){var o=n.comMap.getFloors();p.default.merge(t,o)}}this._floorsList=t},e.prototype._initFloorsRange=function(){for(var t=0;t<this._floorsList.length;t++){var e=this._floorsList[t],i=g.default.getWorldPos(e),n=i.x-e.width*e.anchorX,o=i.x+e.width*(1-e.anchorX),r=i.y+e.height*(1-e.anchorY),a=i.y-e.height*e.anchorY;this._floorsRangeList.push({floor:e,left:n,right:o,top:r,bottom:a})}},e.prototype.getFloorHeight=function(){return this.mapFloorHeight},e.prototype.setFloorHeight=function(t){this.mapFloorHeight=t},e.prototype.getCameraRegion=function(t){var e=this.curLevel-1,i=this._mapList[e];return i.isLegal?i.comMap.getCameraRegion(t)||null:(h.default.warn("MapMgr >>>>>>>> 218 \u6ca1\u627e\u5230\u5f53\u524d\u5173\u5361\u7684\u533a\u57dfID\u5217\u8868"),null)},e.prototype.getAreaIdList=function(t){var e=this.curLevel-1,i=this._mapList[e];return i.isLegal?i.comMap.getAreaIdList(t):(h.default.warn("MapMgr >>>>>>>> 218 \u6ca1\u627e\u5230\u5f53\u524d\u5173\u5361\u7684\u533a\u57dfID\u5217\u8868"),[])},e.prototype.getFloors=function(){return this._floorsList},e.prototype.getFloorsRangeList=function(){return this._floorsRangeList},e.prototype.getSteps=function(){return this._stepsList},e.prototype.getBottomStepOrFloor=function(t,e,i){for(var n=this.getSteps(),o=[],r=0;r<n.length;r++){var a=n[r],s=(p=g.default.getWorldPos(a)).x-a.width*a.anchorX,l=p.x+a.width*(1-a.anchorX),c=p.y-a.height*a.anchorY;t.x-e<s||t.x+i>l||t.y<c||o.push({node:a,yMax:p.y+a.height*(1-a.anchorY)})}var u=this.getFloors();for(r=0;r<u.length;r++){var p,d=u[r];if(s=(p=g.default.getWorldPos(d)).x-d.width*d.anchorX,l=p.x+d.width*(1-d.anchorX),!(t.x-e<s||t.x+i>l)){o.push({node:d,yMax:p.y+d.height*(1-d.anchorY)});break}}return o},e.prototype.getMaxRect=function(){for(var t=[],e=0;e<this._mapList.length;e++)if(this._mapList[e].isLegal){var i=this._mapList[e].comMap.getRect();t.push(i)}return y.default.UnionByRectArray(t)},e.prototype.getHeroBornWPos=function(){return this._mapList[0].comMap.getHeroBornWPos()},e.prototype.getCurMapEndX=function(){var t=this._mapList[this.curLevel-1];return t.isLegal?t.comMap.getEndPos().x:99999999},e.prototype.getScene=function(){return this._scene},e.prototype.getMonsterNodes=function(t){return this._mapList[t-1].comMap.getMonsterNodes()},e.prototype.addMonster=function(){},e.prototype.getMonsterBornPointWPos=function(t){var e=this.curLevel-1,i=this._mapList[e];if(!i.isLegal){var n=this._scene.getHero(),o=g.default.getWorldPos(n);return h.default.error("MapMgr >>>>>>>> 263 todo,\u5b8c\u6210\u602a\u7269\u51fa\u751f\u4f4d\u7f6e\u83b7\u53d6"),o}if(o=i.comMap.getBrushMonsterSpotWPos(t))return o},e.prototype.getMonsterBornPointPos=function(t){var e=this.curLevel-1,i=this._mapList[e];return i.isLegal?i.comMap.getBrushMonsterSportPos(t)||(console.error("Cant get monsterBornPoint Pos, spotId: %s",t),cc.v2()):(console.error("mapData is illegal, mapIndex: %s",e),cc.v2())},e.prototype.handlerLevelFinish=function(){this.curLevel++,this.maxLevel++,this.addMapByLevel(this.maxLevel)},s([b],e)}(c.default));r.default=S,cc._RF.pop()},{}],MapStruct:[function(t,e,i){"use strict";cc._RF.push(e,"d3c66EUqvFL74eGaeTQR6A/","MapStruct");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],MapTable:[function(t,e,i){"use strict";cc._RF.push(e,"e25246HIbZI9IEaSYRWWgqr","MapTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("MapVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("map_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],MapUtils:[function(t,e,i){"use strict";cc._RF.push(e,"ad005Gv4eBFlJC2CloyruST","MapUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ArrayUtils"),a=n("TypeUtils"),s=function(){function t(){}return t.getValues=function(t){for(var e in t.values())(void 0).push(e)},t.getKeys=function(t){for(var e in t)(void 0).push(e)},t.has=function(t,e){return t.has(e)},t.merge=function(t,e){for(var i in e)t.set(i,e.get(i))},t.find=function(t,e){for(var i in t.values())if(e(i))return i},t.filter=function(t,e){var i=[];for(var n in t){var o=t.get(n);e(n,o)&&i.push(o)}return i},t.forEach=function(t,e){for(var i in t)e(i,t.get(i));return[]},t.copy=function(t){for(var e=new Map,i=0,n=t.keys();i<n.length;i++){var o=n[i];a.default.isArray(t.get(o))?e.set(o,r.default.clone(t.get(o))):e.set(o,"object"==typeof t[o]?this.copy(t.get(o)):t.get(o))}return e},t.deepClone=function(t){var e;if(a.default.isObj(t))for(var i in e=new t.constructor,t)e.set(i,this.deepClone(t.get(i)));else if(a.default.isArray(t)){e=[];for(var n=0;n<t.length;n++)e.push(this.deepClone(t[n]))}else e=t;return e},t.deleteVal=function(t,e){return t.delete(e)},t.len=function(t){var e=0;for(var i in t)e++;return e},t.toArray=function(t){return Array.from(t)},t}();o.default=s,cc._RF.pop()},{}],MapVO:[function(t,e,i){"use strict";cc._RF.push(e,"f9b43QDx75Ag7fXlXTW8rkA","MapVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.mapName=t[2],this.routes=t[3],this.desc=t[4],this.gun=t[5],this.bgm=t[6],this.backGround=t[7],this.frontFloor=t[8]},cc._RF.pop()},{}],MathUtils:[function(t,e,i){"use strict";cc._RF.push(e,"2c0b6xpQ6hIIKODeq+l+/xq","MathUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tbl"),a=n("LoggerUtils"),s=2*Math.PI,l=function(){function t(){}return t.Radian2Angle=function(t){return 180/Math.PI*t},t.Angle2Radian=function(t){return Math.PI/180*t},t.StdAngle=function(t){return t<0?t%360+360:t>360?t%360:t},t.StdSignAngle=function(e){var i=t.StdAngle(e);return i>180?-(360-i):i},t.StdAngleRange=function(e){var i=t.StdAngle(e[0]),n=t.StdAngle(e[1]);return[Math.min(i,n),Math.max(i,n)]},t.StdRadian=function(t){return t<0?t%s+s:t>s?t%s:t},t.StdRadianRange=function(e){var i=t.StdRadian(e[0]),n=t.StdRadian(e[1]);return[Math.min(i,n),Math.max(i,n)]},t.pointRoundPoint=function(t,e,i){var n=(t.x-e.x)*Math.cos(i)-(t.y-e.y)*Math.sin(i)+e.x,o=(t.x-e.x)*Math.sin(i)+(t.y-e.y)*Math.cos(i)+e.y;return cc.v2(n,o)},t.smoothClose=function(t,e,i){return t+(e-t)*i},t.smoothClosePos=function(t,e,i){return cc.v2(this.smoothClose(t.x,e.x,i),this.smoothClose(t.y,e.y,i))},t.numToBigNum=function(t,e){var i;if(void 0===e&&(e=3),t<1e3)return t.toString().length>3?t.toPrecision(3):""+t;for(var n=0;t>=1e3;)t/=1e3,n++;var o=null===(i=r.default.DigitTable.findById(n))||void 0===i?void 0:i.name;return null==o?(a.default.error("\u8fd9\u4e2a\u6570\u503c\u6ca1\u6709\u5355\u4f4d\uff0c\u8bf7\u68c0\u67e5\u4f4d\u6570\u5e8f\u5217\uff1a %s",n),""+t.toPrecision(e)):""+t.toPrecision(e)+o},t}();o.default=l,cc._RF.pop()},{}],MonsterAITable:[function(t,e,i){"use strict";cc._RF.push(e,"d7b258TxfBOLIxDKe4AkeRL","MonsterAITable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("MonsterAIVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("monsterAI_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],MonsterAIVO:[function(t,e,i){"use strict";cc._RF.push(e,"138ee3ZRX9B1rUKTQusWCnB","MonsterAIVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.checkInterval=t[1],this.succPercent=t[2]},cc._RF.pop()},{}],MonsterAi:[function(t,e,i){"use strict";cc._RF.push(e,"f8ea5QUm5tHF66TGBugreuE","MonsterAi");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=o("BaseAi"),c=o("MonsterFighting"),u=o("MonsterMoving");(function(t){t[t.Idling=1]="Idling",t[t.Fighting=2]="Fighting",t[t.Freeing=3]="Freeing"})(s||(s={}));var p=function(t){function e(e){var i=t.call(this,e)||this;return i._state=null,i._state=s.Idling,i}return a(e,t),e.prototype.getObj=function(){return this._obj},e.prototype.onTick=function(e){if(this._state==s.Idling||this._state==s.Freeing){if(null!=this.getObj().getTarget())return this.doBehavior(new c.default(this,null)),void(this._state=s.Fighting);null!=this._behaviorList&&0!=this._behaviorList.length||this.addBehavior(new u.default(this,null))}if(this._state==s.Fighting){if(null==this.getObj().getTarget())return this.doBehavior(new u.default(this,null)),void(this._state=s.Freeing);null!=this._behaviorList&&0!=this._behaviorList.length||this.addBehavior(new c.default(this,null))}t.prototype.onTick.call(this,e)},e}(l.default);r.default=p,cc._RF.pop()},{}],MonsterAppear:[function(t,e,i){"use strict";cc._RF.push(e,"6e19evTyuRGi4xcigDM01Yf","MonsterAppear");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this)},a([l],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],MonsterBehavior:[function(t,e,i){"use strict";cc._RF.push(e,"dabb86g909GwbWYcyw28bDv","MonsterBehavior");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(e,i,n){return void 0===n&&(n=Number.MAX_VALUE),t.call(this,e,i,n)||this}return a(e,t),e.prototype.getOwner=function(){return this._owner},e}(o("BaseBehavior").default);r.default=s,cc._RF.pop()},{}],MonsterBornPointTable:[function(t,e,i){"use strict";cc._RF.push(e,"8cf48VSTI9OVZTfo8SHVyMz","MonsterBornPointTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("MonsterBornPointVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("monster_born_point_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],MonsterBornPointVO:[function(t,e,i){"use strict";cc._RF.push(e,"9a961DfXCtM+Zg6bHhX1hcM","MonsterBornPointVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.level=t[1],this.point=t[2],this.delayTime=t[3],this.dropId=t[4],this.firstEnterChapterDropId=t[5],this.monster=t[6],this.offset=t[7],this.rebirth=t[8],this.isTarget=t[9]},cc._RF.pop()},{}],MonsterFighting:[function(t,e,i){"use strict";cc._RF.push(e,"1f7ea/xWGBMHrfd0KgJq+Y6","MonsterFighting");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Utils"),l=o("MonsterBehavior"),c=o("MonsterMovingTo"),u=o("MonsterUsingSkill"),p=function(t){function e(e,i,n){void 0===n&&(n=Number.MAX_VALUE);var o=t.call(this,e,i,n)||this;return o._interval=0,o.checkInterval=e.getObj().getMonsterAIVO().checkInterval,o.succPercent=e.getObj().getMonsterAIVO().succPercent,o}return a(e,t),e.prototype.isFinished=function(){return!!t.prototype.isFinished.call(this)||this._isFinished},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this._interval+=e,0!=this.getOwner().getObj().isCanAttack()&&0!=this.getOwner().getObj().isInsideScreen()&&this._interval>this.checkInterval?(this._interval=0,s.default.rand()<this.succPercent&&this._owner.doBehavior(new u.default(this._owner,null,e))):this._owner.doBehavior(new c.default(this._owner,null,e))},e}(l.default);r.default=p,cc._RF.pop()},{}],MonsterGroupTable:[function(t,e,i){"use strict";cc._RF.push(e,"443b9h2MmRAQLJhgxqebegJ","MonsterGroupTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("MonsterGroupVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("monster_group_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],MonsterGroupVO:[function(t,e,i){"use strict";cc._RF.push(e,"957f15bZjRAj4a6nep9EhoU","MonsterGroupVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.bornType=t[1],this.monsterPool=t[2],this.bornDelayTime=t[3],this.hpBonusRatio=t[4],this.attackBonusRadio=t[5],this.dropId=t[6],this.showWarn=t[7],this.warnTime=t[8],this.warnTimes=t[9]},cc._RF.pop()},{}],MonsterMgr:[function(t,e,i){"use strict";cc._RF.push(e,"95b24ttieBPwZRS1FLVPxZb","MonsterMgr");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},a([c(cc.Label)],e.prototype,"label",void 0),a([c],e.prototype,"text",void 0),a([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],MonsterMovingTo:[function(t,e,i){"use strict";cc._RF.push(e,"60a7fvB2YxNybHnG61zbGJM","MonsterMovingTo");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ObjConst"),l=function(t){function e(e,i,n){return void 0===n&&(n=Number.MAX_VALUE),t.call(this,e,i,n)||this}return a(e,t),e.prototype.isFinished=function(){return!!t.prototype.isFinished.call(this)||this._isFinished},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e);var i=this.getOwner().getObj();i.getMonsterAIVO().id!=s.MonsterAiEnum.BatBiteType?i.moveByAi(e):i.moveByBatBite(e)},e}(o("MonsterBehavior").default);r.default=l,cc._RF.pop()},{}],MonsterMoving:[function(t,e,i){"use strict";cc._RF.push(e,"d33eddw+0hGYJtAJFDNR5bP","MonsterMoving");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(e,i,n){return void 0===n&&(n=Number.MAX_VALUE),t.call(this,e,i,n)||this}return a(e,t),e.prototype.isFinished=function(){return!!t.prototype.isFinished.call(this)||this._isFinished},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.getOwner().getObj().moveByAiFreeing(e)},e}(o("MonsterBehavior").default);r.default=s,cc._RF.pop()},{}],MonsterStanding:[function(t,e,i){"use strict";cc._RF.push(e,"e3fa8oyApVF4oA1fQlWo89Z","MonsterStanding");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(e,i,n){return void 0===n&&(n=Number.MAX_VALUE),t.call(this,e,i,n)||this}return a(e,t),e.prototype.isFinished=function(){return!!t.prototype.isFinished.call(this)||this._isFinished},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.getOwner().getObj().idleByAi()},e}(o("MonsterBehavior").default);r.default=s,cc._RF.pop()},{}],MonsterTable:[function(t,e,i){"use strict";cc._RF.push(e,"e6f8duhvhVM5Y8Z4oxOc4DT","MonsterTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("MonsterVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("monster_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],MonsterUsingSkill:[function(t,e,i){"use strict";cc._RF.push(e,"acda4pPTS9HRLEbjt66HIEu","MonsterUsingSkill");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("SkillConst"),l=function(t){function e(e,i,n){return void 0===n&&(n=Number.MAX_VALUE),t.call(this,e,i,n)||this}return a(e,t),e.prototype.isFinished=function(){return!!t.prototype.isFinished.call(this)||this._isFinished},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e);var i=this._owner.getObj(),n=i.findAllSkill(function(t){return t.getSkillVO().castType==s.SkillCastTypeEnum.Auto&&!t.isCooling()&&t.isCanUse()==s.SkillUseEnum.UseSucc&&0!=t.isInRange()});0!=n.length?(n.sort(function(t,e){return e.getSkillVO().priority-t.getSkillVO().priority}),i.addUseSkillList(n),i.moveByAi(e)):this._isFinished=!0},e}(o("MonsterBehavior").default);r.default=l,cc._RF.pop()},{}],MonsterVO:[function(t,e,i){"use strict";cc._RF.push(e,"cb8583tiPJMsbybe87ZdD22","MonsterVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.type=t[1],this.aniResId=t[2],this.monsterAi=t[3],this.hpmax=t[4],this.speed=t[5],this.attack=t[6],this.hitDefense=t[7],this.bedamageDefense=t[8],this.frozenDefense=t[9],this.skill=t[10],this.bodyCollBuffIdList=t[11],this.attackSpeed=t[12],this.minDistance=t[13],this.attackRange=t[14],this.searchRange=t[15],this.muzzleOffset=t[16],this.bloodOffset=t[17],this.modelScale=t[18],this.bornFacing=t[19],this.defaultFace=t[20],this.hitSpeed=t[21],this.isGravity=t[22],this.isAttackAnywhere=t[23],this.dieMove=t[24],this.dieFlySpeed=t[25],this.collisionRange=t[26],this.forceTime=t[27],this.frozenScale=t[28],this.dieSound=t[29],this.dieEffect=t[30],this.damageNumberOffset=t[31],this.bodyRange=t[32],this.bornArgs=t[33],this.aniWalk=t[34],this.aniRun=t[35]},cc._RF.pop()},{}],NodePoolMgr:[function(t,e,i){"use strict";cc._RF.push(e,"674c38YTP5ArLfphwQH/UdX","NodePoolMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("ComSkin"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nodePoolMap=new Map,e}return a(e,t),e.prototype.createNodePool=function(t,e,i){for(var n=new cc.NodePool(""+t),o=s.default.ClientTable.findById(t),r=0;r<e;r++){var a=l.default.createSkin(o,i);n.put(a)}this._nodePoolMap.set(t,n)},e.prototype.isCanGetNode=function(t){return this._nodePoolMap.has(t)&&this._nodePoolMap.get(t).size()>0},e.prototype.getNodeByPool=function(t,e){if(this._nodePoolMap.has(t)){var i=this._nodePoolMap.get(t),n=null;if(i.size()>0)n=i.get();else{var o=s.default.ClientTable.findById(t);n=l.default.createSkin(o,e)}return n}return null},e.prototype.returnNodeToPool=function(t,e){if(this._nodePoolMap.has(t))this._nodePoolMap.get(t).put(e);else{var i=new cc.NodePool(""+t);i.put(e),this._nodePoolMap.set(t,i)}},e.prototype.clearNodePool=function(){this._nodePoolMap.forEach(function(t){t.clear()}),this._nodePoolMap.clear()},e}(o("Singleton").default);r.default=c,cc._RF.pop()},{}],NodeStruct:[function(t,e,i){"use strict";cc._RF.push(e,"98e71tIkbNGE4IUzfuf4U4l","NodeStruct");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.StQuickNode=void 0;var r=n("NodeUtils");o.StQuickNode=function(t){this.node=t,this.wPos=r.default.getWorldPos(t),this.xMin=this.wPos.x-this.node.width*this.node.anchorX,this.xMxn=this.wPos.x+this.node.width*(1-this.node.anchorX),this.yMin=this.wPos.y-this.node.height*this.node.anchorY,this.yMax=this.wPos.y+this.node.height*(1-this.node.anchorY)},cc._RF.pop()},{}],NodeUtils:[function(t,e,i){"use strict";cc._RF.push(e,"7f6fbU0qCJIfq0e7SJfrqPf","NodeUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=(o.ccclass,o.property,function(){function t(){}return t.seekC=function(t,e){if(t){if(t.name===e)return t;for(var i=t.children,n=0;n<i.length;++n){var o=this.seekC(i[n],e);if(o)return o}}},t.foreachNode=function(e,i){for(var n=0,o=e.children;n<o.length;n++){var r=o[n];i(r),t.foreachNode(r,i)}},t.getWorldPos=function(t){var e=t.parent||null;return null!=e?cc.v2(e.convertToWorldSpaceAR(t.getPosition())):cc.v2(0,0)},t.setWorldPos=function(t,e,i){if("number"==typeof e){var n=cc.v2(e,i);if(null!=(r=t.parent||null)){var o=cc.v2(r.convertToNodeSpaceAR(n));t.setPosition(o)}}else{var r;n=e,null!=(r=t.parent||null)&&(o=cc.v2(r.convertToNodeSpaceAR(n)),t.setPosition(o))}},t.getWorldBingdingBox=function(t){var e,i,n,o,r=this.getWorldPos(t);return n=t.width*t.scaleX,o=t.height*t.scaleY,e=r.x-t.anchorX*n,i=r.y-t.anchorY*o,cc.rect(e,i,n,o)},t.getWorldAngle=function(t){return null==t?0:t.angle+this.getWorldAngle(t.parent)},t.setWorldAngle=function(t,e){var i=this.getWorldAngle(t);t.angle+=e-i},t.getWorldRotation=function(t){return null==t?0:t.rotation+this.getWorldRotation(t.parent)},t.setWorldRotation=function(t,e){var i=this.getWorldAngle(t);t.rotation+=e-i},t.alignmentL2R=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=e[0].x+e[0].width*(1-e[0].anchorX)+t,o=1;o<e.length;o++){var r=e[o];r.x=n,n+=r.width+t}},t.destroyAllChildren=function(t){for(var e=t.childrenCount;e>0;e--)t.children[e-1].destroy()},t}());n.default=r,cc._RF.pop()},{}],NullScene:[function(t,e,i){"use strict";cc._RF.push(e,"9c3deDUblBAYb6U9Z9odZoZ","NullScene");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("BaseComponent"),c=o("LoggerUtils"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){var t=this;cc.assetManager.loadBundle("BattleSpineDir_all",function(e,i){c.default.error("NullScene >>>>>>>> 33 bundle = ",i),i.load("ef_hit_buqiang/buqiang_hit",sp.SkeletonData,function(e,i){if(e)c.default.error("NullScene >>>>>>>> 82 err1 = ",e);else{var n=new cc.Node("");n.parent=t.node;var o=n.addComponent(sp.Skeleton);c.default.error("NullScene >>>>>>>> 113 "),o.skeletonData=i,o.setAnimation(0,"play",!0),c.default.error("NullScene >>>>>>>> 118 ")}})})},s([p],e)}(l.default));r.default=d,cc._RF.pop()},{}],ObjBase:[function(t,e,i){"use strict";cc._RF.push(e,"a820dSkqFJLsYkDzlHjpYA4","ObjBase");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("NodeUtils"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._uid=null,e._objType=null,e._scene=null,e._campType=null,e._legal=!0,e._tickFuncMap=new Map,e}return a(e,t),e.prototype.initialize=function(t,i){this._uid=e.allocUid(),this._objType=t,this._scene=i},e.allocUid=function(){return this._objUidIndex++},e.prototype.getUid=function(){return this._uid},e.prototype.getType=function(){return this._objType},e.prototype.setCamp=function(t){this._campType=t},e.prototype.getCamp=function(){return this._campType},e.prototype.getScene=function(){return this._scene},e.prototype.getTime=function(){return this._scene.getTime()},e.prototype.onTick=function(t){var e=this;this._tickFuncMap.forEach(function(i,n){i[0]+=t,i[0]>=i[1]&&(i[0]-=i[1],n.call(e,i[1]))}),this._wPos=s.default.getWorldPos(this.node)},e.prototype.registerTick=function(t,e){void 0===e&&(e=.1),this._tickFuncMap.set(t,[0,e])},e.prototype.clearTick=function(){this._tickFuncMap.clear()},e.prototype.getPos=function(){return this.node.getPosition()},e.prototype.getWorldPos=function(){return null==this.node?cc.v2(0,0):s.default.getWorldPos(this.node)},e.prototype.setPos=function(t){this.node.setPosition(t)},e.prototype.setWorldPos=function(t){var e=cc.v2(this.node.parent.convertToNodeSpaceAR(t));this.setPos(e)},e.prototype.setLegal=function(t){this._legal=t},e.prototype.isLegal=function(){return this._legal},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.lateUpdate=function(){},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e._objUidIndex=0,e}(o("BaseComponent").default);r.default=l,cc._RF.pop()},{}],ObjBullet:[function(t,e,i){"use strict";cc._RF.push(e,"f73dehejGdCsLG859hUzWiG","ObjBullet");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.ObjBullet=void 0;var l=o("ObjConst"),c=o("Tbl"),u=o("LoggerUtils"),p=o("ObjBase"),d=o("PointUtils"),h=o("NodeUtils"),f=o("AudioMgr"),g=o("SpineUtils"),y=o("SkillConst"),m=o("GlobalUtils"),v=o("CombatConst"),_=o("CombatUtils"),C=o("ObjStruct"),b=o("MathUtils"),S=o("CollisionUtils"),O=o("Utils"),E=o("RectUtils"),I=o("App"),w=cc._decorator,A=w.ccclass,R=(w.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bulletFeature=null,e._bulletFeatureBuffList=[],e._heroMaxDistance=null,e._heroMinDistance=null,e._isLimitMissTag=null,e._isLimitMissFinish=null,e._skin=null,e._particleList=[],e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e,i,n,o,r,a){this.initialize(l.ObjTypeEnum.Bullet,o),this._skillBulletVO=c.default.SkillbulletTable.findById(t),this._attacker=n,this._skill=e,this._bulletRank=r,this._firstTargetBeAimedPos=a,this._targetBuffIdList=this._skill.getTargetBuffIdList(),this._attackerBuffIdList=this._skill.getAttackerBuffIdList(),this._hitMonsterHistory=[],this._motionSteak=null,this.setCamp(this._attacker.getCamp()),this.setLegal(!0),this._target=i,this._consttime=0,this._curRadian=d.default.angle2Radian(0),this.initRandomScale(),this.initBulletFeature(),this.playPrepareAni(),this.initSkin(),this.initLimitMiss(),this.playShotSound()},e.prototype.initLimitMiss=function(){this.getAttacker().getCamp()==l.CampTypeEnum.Monster&&(this._heroMaxDistance=100,this._heroMinDistance=50,this._isLimitMissTag=!1,this._isLimitMissFinish=!1)},e.prototype.initRandomScale=function(){this._skillBulletVO.bulletResScaleRange?2!=this._skillBulletVO.bulletResScaleRange.length?(u.default.warn("ObjBullet \u914d\u7f6e\u8868\u914d\u7f6e\u9519\u8bef,\u8868:\u6280\u80fd\u5b50\u5f39(skillbullet_config),\u5b57\u6bb5:bulletResScaleRange,\u5b50\u5f39ID:%s",this._skillBulletVO.id),this.randomScale=1):this.randomScale=O.default.randFloat(this._skillBulletVO.bulletResScaleRange[0],this._skillBulletVO.bulletResScaleRange[1]):this.randomScale=1,this._skillBulletVO.hitPathScaleRange?2!=this._skillBulletVO.hitPathScaleRange.length?(u.default.warn("ObjBullet \u914d\u7f6e\u8868\u914d\u7f6e\u9519\u8bef,\u8868:\u6280\u80fd\u5b50\u5f39(skillbullet_config),\u5b57\u6bb5:hitPathScaleRange,\u5b50\u5f39ID:%s",this._skillBulletVO.id),this.randBombScale=1):this.randBombScale=O.default.randFloat(this._skillBulletVO.hitPathScaleRange[0],this._skillBulletVO.hitPathScaleRange[1]):this.randBombScale=1},e.prototype.initBulletFeature=function(){this._bulletFeature=this.getAttacker().getBulletFeatureByWeight(this),this._bulletFeature&&(this._bulletFeatureBuffList=this._bulletFeature.getTargetBuffIdList())},e.prototype.playPrepareAni=function(){if(this._skillBulletVO.bulletPrepareResID)if(this.getAttacker().getType()==l.ObjTypeEnum.Hero)this.getAttacker().showMuzzleFire(this._skillBulletVO.bulletPrepareResID);else{var t=this.getAttacker().getMuzzle();if(null==t&&(t=this.getAttacker().node),null==g.default.playSpineOnce(this._skillBulletVO.bulletPrepareResID,t))return void console.error("node is null")}},e.prototype.initSkin=function(){var t=this.node.addComponent("ComSkin");if(t.init(this),t){if(!this._skillBulletVO)return void u.default.warn("ObjHero 68 this._skillBulletVO == null");if(this._bulletFeature)return t.initWithResId(this._bulletFeature.getSkinResId()),void(this._skin=t.getSkin());this._skillBulletVO.bulletResID?(t.initWithResId(this._skillBulletVO.bulletResID),this._skin=t.getSkin()):(this._skin=new cc.Node("skin"),this._skin.parent=this.node)}else u.default.warn("ObjFight \u6dfb\u52a0\u7ec4\u4ef6\u5931\u8d25:comSkin")},e.prototype.playShotSound=function(){this._skillBulletVO.shotSoundId?f.default.getInstance().playSoundByResId(this._skillBulletVO.shotSoundId):console.warn("Not shot sound, bulletId: %s",this.getSkillBulletVO().id)},e.prototype.addParticleList=function(t){this._particleList.push(t)},e.prototype.getAttacker=function(){return this._attacker},e.prototype.getTarget=function(){return this._target},e.prototype.getTargetBuffIdList=function(){return this._targetBuffIdList},e.prototype.getAttackerBuffIdList=function(){return this._casterBuffIdList},e.prototype.getSkillBulletVO=function(){return this._skillBulletVO},e.prototype.getSkill=function(){return this._skill},e.prototype.getDamageRatio=function(){var t=this._skillBulletVO.damageLossRatio||0;return this._hitCount=this._hitCount||0,1*(1-t)^(this._hitCount>0&&this._hitCount-1||this._hitCount)},e.prototype.getSkin=function(){return this._skin},e.prototype.setOrientation=function(t){this.glAngle=d.default.getAngleByVector(t);var e=this.glAngle-90;this._curAngle=e,this._curRadian=d.default.angle2Radian(this._curAngle),h.default.seekC(this.node,"skin").angle=this._curAngle},e.prototype.hitActionGroup=function(t){this._hitCount=(this._hitCount||0)+1,this.getAttacker().hitEnemyActions(t),this.addBuffToTarget(t),this.hitOne(t),this.checkUseExtraSkill(t),this.checkFeatureExtraAction(t)},e.prototype.addBuffToTarget=function(t){var e=this.getTargetBuffIdList(),i=this.getAttackerBuffIdList(),n=this.getAttacker();if(n.isValid)if(null!=t){var o=this.getDamageRatio(),r=this._curAngle+90;n.addBuffIdList(i,n,[o]),t.addBuffIdList(e,n,[o,r]),this._bulletFeatureBuffList.length>0&&t.addBuffIdList(JSON.parse(JSON.stringify(this._bulletFeatureBuffList)),n)}else cc.warn("targeter == nil,%s",this.getSkillBulletVO().id)},e.prototype.checkLimitMiss=function(){if(this.getAttacker().getCamp()==l.CampTypeEnum.Monster&&!this._isLimitMissFinish){var t=this.getScene().getObjhero(),e=t.getPos();e.y+=50;var i=this.node.getPosition(),n=e.sub(i).mag();if(n>this._heroMaxDistance){if(!this._isLimitMissTag)return;this._isLimitMissFinish=!0,t.useSkillByType(y.SkillTypeEnum.LimitMiss)}n>this._heroMinDistance&&(this._isLimitMissTag=!0)}},e.prototype.beginCheckCollision=function(){return!!this.isLegal()},e.prototype.CheckCollisionFinish=function(){},e.prototype.checkCollision_enemyGroup=function(){var t=this,e=this.getAttacker();if(e.isValid){var i=this;this.getScene().foreachEnemy(e.getCamp(),function(e){e.getType()!=l.ObjTypeEnum.Bullet&&t.isLegal()&&!e.isState(l.ObjStateEnum.Die)&&t.isHit(e)&&i.hitActionGroup(e)})}},e.prototype.checkCollision_Step=function(){for(var t=this._scene.getSteps(),e=this.getWorldPos(),i=0,n=t;i<n.length;i++){var o=n[i],r=h.default.getWorldPos(o);if(Math.abs(r.y-e.y)>o.height/2)return;if(Math.abs(r.x-e.x)>o.width/2)return;return this.showCollExplose(),void this.setLegal(!1)}},e.prototype.checkCollision_Floor=function(){var t=this._scene.getFloors(),e=this.getWorldPos(),i=this._scene.getFloorHeight();this.getWorldPos().y<=i&&(this.showCollExplose(),this.setLegal(!1));for(var n=0,o=t;n<o.length;n++){var r=o[n],a=h.default.getWorldPos(r);if(Math.abs(a.y-e.y)>r.height/2)return;if(Math.abs(a.x-e.x)>r.width/2)return;return this.showCollExplose(),void this.setLegal(!1)}},e.prototype.isTargetInHistory=function(t){for(var e=0,i=this._hitMonsterHistory;e<i.length;e++)if(t==i[e][0])return!0;return!1},e.prototype.isHitByVirtualBody=function(t){var e=t.getVirtualBody(),i=this._collisionRange.getMaxRect();return!!E.default.rectIntersectsRect(e,i)},e.prototype.isHit_norepeat=function(t){if(!t.isCanAttacked())return!1;if(this.isTargetInHistory(t))return!1;if(!this.isHitByVirtualBody(t))return!1;if(this._skillBulletVO.fixCollisionRange[0]!=v.RangeType.Rect){var e=t.getCollBox(),i=this._collisionRange;return S.default.circleIntersectRect(i,e)}for(var n=t.getCollBox(),o=this._collisionRange,r=E.default.getRectPoints(n),a=0;a<r.length;a++){var s=r[a];if(cc.Intersection.pointInPolygon(s,o.points))return!0}for(a=0;a<o.points.length;a++){var l=o.points[a];if(l.x>=n.xMin&&l.x<=n.xMax&&l.y>=n.yMin&&l.y<=n.yMax)return!0}if(this._lastCollisionRange){var c=this._lastCollisionRange;if(S.default.lineSegmentIntersectRect(o.center,c.center,n))return!0}return!1},e.prototype.hitOne_norepeat=function(t){this.insertTargetInHistory(t)},e.prototype.insertTargetInHistory=function(t){this._hitMonsterHistory.push([t,0])},e.prototype.checkCollision=function(){this.checkCollision_enemyGroup(),this._skillBulletVO.isCheckObstacleColl==l.IsCheckObstacleCollEnum.Non||(this._skillBulletVO.isCheckObstacleColl==l.IsCheckObstacleCollEnum.Step?this.checkCollision_Step():this._skillBulletVO.isCheckObstacleColl==l.IsCheckObstacleCollEnum.Floor?this.checkCollision_Floor():this._skillBulletVO.isCheckObstacleColl==l.IsCheckObstacleCollEnum.StepAndFloor&&(this.checkCollision_Floor(),this.checkCollision_Step()))},e.prototype.isHit=function(){return!0},e.prototype.hitOne=function(t){this.showCollExplose(t),this.playCollSound()},e.prototype.playCollSound=function(t){void 0===t&&(t=null);var e=this._skillBulletVO.explosionSound;this._bulletFeature&&(e=this._bulletFeature.getExploSound()),e&&I.default.audioMgr.playSoundByResId(e)},e.prototype.showCollExplose=function(t){var e,i;if(void 0===t&&(t=null),i=this.getCamp()==l.CampTypeEnum.Hero?h.default.seekC(this.getScene().node,"heroBulletExploLayer"):h.default.seekC(this.getScene().node,"monsterBulletExploLayer"),this._bulletFeature){var n=this._bulletFeature.getBulletBombResId();if(n&&null==(e=g.default.createSpineByResId(n,!1,i)))return}else if(null==(e=g.default.createSpineByResId(this._skillBulletVO.hitPathId,!1,i)))return;var o=90*(O.default.rand()-.5);e.scale*=this.randBombScale,e.angle=e.angle+o;var r=e.getComponent("ComSpine"),a=this._skillBulletVO.hitPathId;this._bulletFeature&&this._bulletFeature.getBulletBombResId()&&(a=this._bulletFeature.getBulletBombResId()),r.setCompleteListener(function(t){"play"==t.animation.name&&I.default.nodePoolMgr.returnNodeToPool(a,e)}),h.default.setWorldPos(e,h.default.getWorldPos(this.node))},e.prototype.checkUseExtraSkill=function(){},e.prototype.checkUseExtraSkillByFeature=function(){},e.prototype.checkFeatureExtraAction=function(t){this._bulletFeature&&this._bulletFeature.runActionByFeatureType(t)},e.prototype.breakOff=function(){u.default.info("ObjBullet >>>>>>>> 393 \u4e2d\u65ad\u5b50\u5f39"),this.setLegal(!1)},e.prototype.onTick=function(e){if(cc.isValid(this._attacker)){if(this._attacker.isState(l.ObjStateEnum.TimeStop)&&this._attacker.getType()!=l.ObjTypeEnum.Hero)return void this.updateEnterTimestopAction(e);this.updateExitTimestopAction(e)}t.prototype.onTick.call(this,e),this.updateMover(e),this.updateRange(),this.beginCheckCollision(e)&&(this.checkCollision(e),this.CheckCollisionFinish(e)),this.checkLimitMiss(),this.updateTargetHitTime(e),this.updateDrawRange(),this.checkOutSideScreenDel()},e.prototype.updateEnterTimestopAction=function(){if(this.getSkin()&&this.getSkin().getComponent(sp.Skeleton)&&(this.getSkin().getComponent(sp.Skeleton).paused=!0),this._particleList.length>0)for(var t=0;t<this._particleList.length;t++){var e=this._particleList[t];e&&1==e.active&&(e.stopSystem(),e.active=!1)}},e.prototype.updateExitTimestopAction=function(){var t;if(1==(null===(t=this.getSkin().getComponent(sp.Skeleton))||void 0===t?void 0:t.paused)&&(this.getSkin().getComponent(sp.Skeleton).paused=!1),this._particleList.length>0)for(var e=0;e<this._particleList.length;e++){var i=this._particleList[e];0==i.active&&(i.resetSystem(),i.active=!0)}},e.prototype.updateMover=function(){},e.prototype.updateTargetHitTime=function(t){for(var e=this._hitMonsterHistory.length;e>0;e--){var i=this._hitMonsterHistory[e-1][1];(i+=t)>=this._skillBulletVO.triggerTime?this._hitMonsterHistory.splice(e-1,1):this._hitMonsterHistory[e-1][1]=i}},e.prototype.updateRange=function(){var t=this._skillBulletVO.fixCollisionRange,e=this.getWorldPos();if(this._lastCollisionRange=this._collisionRange,t[0]==v.RangeType.Rect){var i=_.default.getBodyRectByConfigRange(e,t);this._collisionRange=new C.StShapeRotationRect(i,this._curRadian,e)}else if(t[0]==v.RangeType.Circle){var n=e.x+t[1],o=e.y+t[2],r=b.default.pointRoundPoint(cc.v2(n,o),e,this._curRadian);this._collisionRange=new C.StShapeCircle(r,t[3])}},e.prototype.updateDrawRange=function(){if(m.default.isDebug()){var t=this._skillBulletVO.fixCollisionRange;if(t[0]==v.RangeType.Rect){var e=this._collisionRange,i=this.getWorldPos();this.getScene().drawRorationRect(e.rect,i,e.radian)}else if(t[0]==v.RangeType.Circle){var n=this._collisionRange;this.getScene().drawCircle(n.point,n.radius)}}},e.prototype.checkOutSideScreenDel=function(){this._skillBulletVO.isOutScreenDel==v.StdBool.True&&(this.getScene().isNodeAtCamera(this.node)||this.setLegal(!1))},e.prototype.setLegal=function(e){0==e&&(this._bulletFeature?I.default.nodePoolMgr.returnNodeToPool(this._bulletFeature.getSkinResId(),this._skin):I.default.nodePoolMgr.returnNodeToPool(this._skillBulletVO.bulletResID,this._skin)),t.prototype.setLegal.call(this,e)},s([A],e)}(p.default));r.ObjBullet=R,cc._RF.pop()},{}],ObjConst:[function(t,e,i){"use strict";cc._RF.push(e,"49010uKV6NFK7dSH6Luahi8","ObjConst");var n,o,r,a,s,l=i;Object.defineProperty(l,"__esModule",{value:!0}),l.MonsterAiEnum=l.AniFromBuffPlayTypeEnum=l.IsCheckObstacleCollEnum=l.HeroMoveTypeEnum=l.IsGravityEnum=l.BulletBornTypeEnum=l.SkinColorEnum=l.MonsterAniFacingEnum=l.MonsterFacingEnum=l.MonsterBornFacingEnum=l.ObjStateGroupType=l.ObjStateGroupEnum=l.ObjStateEnum=l.EquipmentPosEnum=l.EquipmentTypeEnum=l.EnemyRaceConst=l.CampTypeEnum=l.MonsterTypeEnum=l.ObjTypeEnum=void 0,function(t){t[t.Hero=1]="Hero",t[t.Monster=2]="Monster",t[t.Costar=3]="Costar",t[t.Genie=4]="Genie",t[t.Bullet=5]="Bullet",t[t.BOSS=6]="BOSS",t[t.Summons=7]="Summons",t[t.Particle=10]="Particle"}(l.ObjTypeEnum||(l.ObjTypeEnum={})),function(t){t[t.LightArmor=1]="LightArmor",t[t.HeavyArmor=2]="HeavyArmor",t[t.Boss=3]="Boss"}(l.MonsterTypeEnum||(l.MonsterTypeEnum={})),function(t){t[t.Default=0]="Default",t[t.Hero=1]="Hero",t[t.Monster=2]="Monster",t[t.Costar=3]="Costar",t[t.Genie=4]="Genie",t[t.Natural=99]="Natural"}(r=l.CampTypeEnum||(l.CampTypeEnum={})),l.EnemyRaceConst=((n={})[r.Hero]=[r.Monster,r.Costar],n[r.Monster]=[r.Hero],n[r.Costar]=[r.Monster],n[r.Genie]=[r.Monster],n),function(t){t[t.Weapon=1]="Weapon",t[t.Helmet=2]="Helmet",t[t.Clothes=3]="Clothes",t[t.Gloves=4]="Gloves"}(l.EquipmentTypeEnum||(l.EquipmentTypeEnum={})),function(t){t[t.Weapon=1]="Weapon",t[t.Helmet=2]="Helmet",t[t.Clothes=3]="Clothes",t[t.Gloves=4]="Gloves"}(l.EquipmentPosEnum||(l.EquipmentPosEnum={})),function(t){t[t.Idle=1]="Idle",t[t.Frozen=2]="Frozen",t[t.Noenemy=3]="Noenemy",t[t.Poisoning=4]="Poisoning",t[t.Burning=5]="Burning",t[t.BeatBack=7]="BeatBack",t[t.Damage=8]="Damage",t[t.Red=9]="Red",t[t.Die=10]="Die",t[t.OneHitOneKill=11]="OneHitOneKill",t[t.LockMoveState=12]="LockMoveState",t[t.ReduceDamage=13]="ReduceDamage",t[t.LowHp=14]="LowHp",t[t.Dying=15]="Dying",t[t.CastingAndPlayingAnimation=20]="CastingAndPlayingAnimation",t[t.SuperArmor=21]="SuperArmor",t[t.TimeStop=22]="TimeStop",t[t.ExecuteOrder=30]="ExecuteOrder",t[t.LockHead=35]="LockHead",t[t.OnGround=40]="OnGround",t[t.OnStep=41]="OnStep",t[t.Jumping=42]="Jumping",t[t.Drop=43]="Drop",t[t.Born=50]="Born",t[t.Climb=60]="Climb",t[t.AppearShow=70]="AppearShow",t[t.AppearClimb=71]="AppearClimb",t[t.AppearNormal=72]="AppearNormal",t[t.AppearDrop=73]="AppearDrop"}(a=l.ObjStateEnum||(l.ObjStateEnum={})),function(t){t[t.Jump=1]="Jump"}(s=l.ObjStateGroupEnum||(l.ObjStateGroupEnum={})),l.ObjStateGroupType=((o={})[a.OnGround]=s.Jump,o[a.OnStep]=s.Jump,o[a.Jumping]=s.Jump,o[a.Drop]=s.Jump,o),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(l.MonsterBornFacingEnum||(l.MonsterBornFacingEnum={})),function(t){t[t.Left=1]="Left",t[t.Right=2]="Right"}(l.MonsterFacingEnum||(l.MonsterFacingEnum={})),function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(l.MonsterAniFacingEnum||(l.MonsterAniFacingEnum={})),function(t){t[t.Unknown=0]="Unknown",t[t.Slowly=1]="Slowly",t[t.Damage=2]="Damage",t[t.LowHp=3]="LowHp"}(l.SkinColorEnum||(l.SkinColorEnum={})),function(t){t[t.BORNXRIGHT=1]="BORNXRIGHT",t[t.BORNY=2]="BORNY",t[t.BORNXLEFT=3]="BORNXLEFT"}(l.BulletBornTypeEnum||(l.BulletBornTypeEnum={})),function(t){t[t.NotEffect=1]="NotEffect"}(l.IsGravityEnum||(l.IsGravityEnum={})),function(t){t[t.Non=0]="Non",t[t.TouchMove=1]="TouchMove",t[t.RockerMove=2]="RockerMove"}(l.HeroMoveTypeEnum||(l.HeroMoveTypeEnum={})),function(t){t[t.Non=0]="Non",t[t.Step=1]="Step",t[t.Floor=2]="Floor",t[t.StepAndFloor=3]="StepAndFloor"}(l.IsCheckObstacleCollEnum||(l.IsCheckObstacleCollEnum={})),function(t){t[t.StopLast=0]="StopLast",t[t.Loop=1]="Loop",t[t.Once=2]="Once"}(l.AniFromBuffPlayTypeEnum||(l.AniFromBuffPlayTypeEnum={})),function(t){t[t.BatBiteType=100]="BatBiteType"}(l.MonsterAiEnum||(l.MonsterAiEnum={})),cc._RF.pop()},{}],ObjFightAttr:[function(t,e,i){"use strict";cc._RF.push(e,"f2841G0ZZ9IzZG0IGEk0Cox","ObjFightAttr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(e,i){var n=t.call(this)||this;return n._objFight=null,n._objFight=i,n.initByConfig(e),n}return a(e,t),e.prototype.addAttr=function(e,i,n){var o=t.prototype.addAttr.call(this,e,i,n);return this._objFight.attrChange(e,i),o},e}(o("Attribute").default);r.default=s,cc._RF.pop()},{}],ObjFight:[function(t,e,i){"use strict";cc._RF.push(e,"35583GthgVImpxTO8ebHCT+","ObjFight");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Skill"),l=o("Buff"),c=o("ObjBase"),u=o("ObjFightAttr"),p=o("ObjConst"),d=o("Utils"),h=o("Tbl"),f=o("SkillConst"),g=o("AttributeConst"),y=o("LoggerUtils"),m=o("NodeUtils"),v=o("ComSpine"),_=o("BulletFeature"),C=o("EffectConst"),b=o("CombatUtils"),S=o("GlobalUtils"),O=o("ComBlood"),E=o("SpineUtils"),I=o("CoolDownMgr"),w=o("CommonCfgUtils"),A=o("ComShadow"),R=o("SkillComboFactory"),T=o("TipsUtils"),P=o("MathUtils"),L=o("App"),M=o("RES"),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._owner=null,e._objAttr=null,e._attackCoolDownAt=null,e._skillMap=new Map,e._replaceSkillMap=new Map,e._castingSkill=null,e._buffList=[],e._buffDt=0,e._skillDt=0,e._objSpine=null,e._muzzle=null,e._punchPoint=null,e._colorLists=[],e._skinColor=null,e._status=[],e._bulletFeatureList=[],e._bulletFeatureRandomSeed=d.default.rand(1,99999),e._collisionBox=null,e._bodyBox=null,e._virtualBox=null,e._fightTarget=null,e._bloodNode=null,e._bloodCtrl=null,e._configVO=null,e._coolDownMgr=null,e.lastPos=cc.v2(0,0),e.stayTime=0,e.stayCount=0,e.isStay=!0,e.isDrop=!1,e.aniFromBuff=new Map,e._mergeDamageList=[],e._mergeSuckList=[],e._limitTotalDamage=null,e._skillNameAbove=null,e}return a(e,t),e.prototype.initialize=function(e,i,n,o,r){t.prototype.initialize.call(this,e,i),this._owner=o,this._objAttr=new u.default(n,this),this._configVO=n,this._limitTotalDamage=w.default.get("MaxDamageTotalTimes").number,null!=r?this.setCamp(r):this._campType=o?o.getCamp():p.CampTypeEnum.Default,this.stayTime=w.default.get("HeroStayCount").number,this.initCoolDownMgr(),this.initBloodSpr(),this.updateBodyBox(),this.registerTick(this.updateMergeDemage,.2)},e.prototype.initShadow=function(){var t=new cc.Node("");t.parent=m.default.seekC(this._scene.node,"nodeShadowLayer"),this._shadow=t.addComponent(A.default),this._shadow.initialize(this,this._scene)},e.prototype.initCoolDownMgr=function(){var t=this;this._coolDownMgr=new I.default(this.getScene().getClock());var e=this._coolDownMgr.alloc();e.init("setSkinColor",w.default.get("SetSkinColorInterval").number),e.register(.1,function(){t.clearSkinColor()}),this._coolDownMgr.alloc().init("skillResult",.5)},e.prototype.getCoolDownMgr=function(){return this._coolDownMgr},e.prototype.initBloodSpr=function(){if(this.getType()==p.ObjTypeEnum.Monster||this.getType()==p.ObjTypeEnum.BOSS){if(this._bloodNode=cc.instantiate(L.default.resMgr.getPrefab(M.ResBattleScene.prefab.ComMonsterBlood.url)),this._bloodNode.parent=this.seekC(this.getScene().node,"nodeMonsterBloodLayer"),null==this._bloodNode)return;this._bloodCtrl=this._bloodNode.addComponent(O.default),this._bloodCtrl.init(this,this.getAttr(g.AttrTypeEnum.hpmax))}else{if(this._bloodNode=this.getC("blood"),null==this._bloodNode)return;this._bloodCtrl=this._bloodNode.addComponent(O.default),this._bloodCtrl.init(this,this.getAttr(g.AttrTypeEnum.hpmax))}},e.prototype.initSkin=function(t){if(this._objSpine=this.node.addComponent("ObjSpine"),this._objSpine.init(this),this.getType()==p.ObjTypeEnum.Hero)if(this._objSpine){if(!t)return void y.default.warn("ObjHero objId == null");var e=m.default.seekC(this.node,"spineHero"),i=e.addComponent("ComSpine");this._objSpine.setObjSkin(e),this._objSpine.setComSpine(i),i.setComSke(e.getComponent(sp.Skeleton)),this._objSpine.moveInScreen()}else y.default.warn("ObjFight \u6dfb\u52a0\u7ec4\u4ef6\u5931\u8d25:this._objSpine");else if(this._objSpine){if(!t)return void y.default.warn("ObjMonster objId == null");var n=h.default.MonsterTable.findById(t).aniResId;this._objSpine.initWithResId(n),this._objSpine.idle()}else y.default.warn("ObjFight \u6dfb\u52a0\u7ec4\u4ef6\u5931\u8d25:comSkin");this.getSkin().zIndex=100},e.prototype.getBone=function(t){return this._objSpine.getBone(t)},e.prototype.initMuzzle=function(){if(this._muzzle=m.default.seekC(this.node,"muzzle"),!this._muzzle){var t=new cc.Node("Muzzle"),e=this._objSpine.getSkin().height;t.parent=this.node,t.y+=e/2,this._muzzle=t}},e.prototype.getMuzzle=function(){return this._muzzle},e.prototype.getMuzzleWPos=function(){return this._muzzle?m.default.getWorldPos(this._muzzle):this.getWorldPos()},e.prototype.initPunchPoint=function(){if(this._punchPoint=m.default.seekC(this.node,"punchPoint"),!this._punchPoint){console.warn("this objfight dont get punchpoint, uuid: %s",this.uuid);var t=new cc.Node("PunchPoint"),e=this._objSpine.getSkin().height;t.parent=this.node,t.y+=e/2,this._punchPoint=t}},e.prototype.getPunchPoint=function(){return this._punchPoint},e.prototype.getPunchPointWPos=function(){return this._punchPoint?m.default.getWorldPos(this._punchPoint):this.getWorldPos()},e.prototype.showMuzzleFire=function(){},e.prototype.isEmemy=function(t){var e=this.getCamp();return-1!=p.EnemyRaceConst[e].indexOf(t.getCamp())},e.prototype.getTarget=function(){var t=this,e=this.findTarget(function(e){if(t.isEmemy(e))return!0});return this._fightTarget=e,this._fightTarget},e.prototype.findTarget=function(t){var e=this.getScene().getObjListBySector(m.default.getWorldPos(this.node),[0,1e3],[0,360],this.filterTargetList,!0),i=[];if(t)for(var n=0;n<e.length;n++)t(c=e[n])&&i.push(c);else i=e;for(var o=this.getPos(),r=9999,a=null,s=0,l=i;s<l.length;s++){var c;if(c=l[s]){var u=c.getPos().sub(o).mag();u<r&&(r=u,a=c)}}return a},e.prototype.filterTargetList=function(){return!0},e.prototype.showSkillNameAbove=function(t,e){var i=this;if(this._skillNameAbove)y.default.warn("\u5df2\u7ecf\u6709\u6280\u80fd\u540d\u5b57\u5728\u663e\u793a\uff0c\u4e0d\u663e\u793a");else{this._skillNameAbove=cc.instantiate(L.default.resMgr.getPrefab(M.ResCommon.prefab.COM_SKILL_NAME.url)),this._skillNameAbove.parent=this.node,this._skillNameAbove.y=this._bloodNode.y+50,this._skillNameAbove.getComponent(cc.Label).string=t,this._skillNameAbove.opacity=0,cc.tween(this._skillNameAbove).to(.25,{opacity:255}).delay(e).to(.25,{opacity:0}).call(function(){i._skillNameAbove.active=!1}).start();var n=this._skillNameAbove.color,o=cc.color(.5*n.r,.5*n.g,.5*n.b);cc.tween(this._skillNameAbove).delay(.25).repeatForever(cc.tween().to(.4,{color:o}).to(.4,{color:n})).start()}},e.prototype.playIdle=function(){this._objSpine.idle()},e.prototype.playAttackStart=function(){},e.prototype.playAttackLoop=function(){},e.prototype.playAttackEnd=function(){},e.prototype.updateMergeDemage=function(){if(0!=this._mergeDamageList.length){for(var t=!1,e=0,i=0;i<this._mergeDamageList.length;i++){var n=this._mergeDamageList[i];n[0],n[1][1]&&(t=!0),e+=n[1][0]}e=e>this._limitTotalDamage?this._limitTotalDamage:e;var o=this._mergeDamageList[0][3],r=this._mergeDamageList[0][4],a=this._mergeDamageList[0][5];this.showDamageNumber(P.default.numToBigNum(e),t,o,r,a),this._mergeDamageList=[],this.addAttr(g.AttrTypeEnum.hp,-e,null),this.setSkinColor(cc.color(255,0,0)),this.updateMergeSuckList()}},e.prototype.onTick=function(e){this._shadow&&this._shadow.onTick(e),this.checkSkillName(),this.isState(p.ObjStateEnum.TimeStop)&&this.getType()!=p.ObjTypeEnum.Hero?(t.prototype.onTick.call(this,e),this.updateBodyBox(),this.updateCollBox(),this.updateVirtual(),this.updateDrawRange()):this.isState(p.ObjStateEnum.Die)?(this.updateBodyBox(),this.updateCollBox(),this.updateVirtual(),this.updateDrawRange(),t.prototype.onTick.call(this,e)):(t.prototype.onTick.call(this,e),this._skillMap.forEach(function(t){t.onTick(e)}),this.updateBuff(e),this.updateCoolDownMgr(e),this.updateBodyBox(),this.updateCollBox(),this.updateVirtual(),this.updateDrawRange())},e.prototype.checkSkillName=function(){null!=this._skillNameAbove&&0==this._skillNameAbove.active&&(this._skillNameAbove.destroy(),this._skillNameAbove=null)},e.prototype.updateCoolDownMgr=function(t){this._coolDownMgr&&this._coolDownMgr.onTick(t)},e.prototype.getAttribute=function(){return this._objAttr},e.prototype.getAttr=function(t){return this._objAttr.getAttr(t)},e.prototype.addAttr=function(t,e,i){return void 0===i&&(i=0),t==g.AttrTypeEnum.hp&&e>0&&this.showHealingNumber(""+Math.ceil(e)),this._objAttr.addAttr(t,e,i)},e.prototype.setAttr=function(t,e,i){this._objAttr.setAttr(t,e,i)},e.prototype.addOtherAttribute=function(t){this._objAttr.addOtherAttribute(t)},e.prototype.getHpPercent=function(){return this.getAttr(g.AttrTypeEnum.hp)/this.getAttr(g.AttrTypeEnum.hpmax)},e.prototype.getHp=function(){return this.getAttr(g.AttrTypeEnum.hp)},e.prototype.addHp=function(t){this.addAttr(g.AttrTypeEnum.hp,t,0)},e.prototype.isLive=function(){return this.getHp()>0},e.prototype.makeHurt=function(t){this.addHp(t)},e.prototype.updateMergeSuckList=function(){0!=this._mergeSuckList.length&&(this._mergeSuckList.forEach(function(t){t[1].makeHurt(t[0])}),this._mergeSuckList=[])},e.prototype.beDamage=function(t,e,i,n,o,r,a){if(void 0===i&&(i=!1),void 0===n&&(n=f.HitTypeEnum.HIT),void 0===o&&(o=C.DamageTypeEnum.Real),void 0===r&&(r=null),void 0===a&&(a=!1),!((e=Math.floor(e))<=0)){var s=w.default.get("MaxDamageSingleTimes").number;e=e>s?s:e,this.setSkinColor(cc.color(255,0,0));var l=t.getUid();this._mergeDamageList.push([l,[e,i,n,o,r,t]]);var c=0,u=t.getAttr(g.AttrTypeEnum.bloodSuckingChance)/1e4;d.default.rand()<=u&&(c+=e*t.getAttr(g.AttrTypeEnum.bloodSucking)/1e4);var p=t.getAttr(g.AttrTypeEnum.hitHealingChance)/1e4;d.default.rand()<=p&&(c+=t.getAttr(g.AttrTypeEnum.hitHealing)),c>0&&(this._mergeSuckList[l]?this._mergeSuckList[l][0]+=c:this._mergeSuckList[l]=[Math.ceil(c),t])}},e.prototype.attrChange=function(){},e.prototype.hpChange=function(){},e.prototype.addBulletFeature=function(t,e){this._bulletFeatureList.push(new _.default(t,e,this.getScene(),this))},e.prototype.getBulletFeatureByWeight=function(t){for(var e=[],i=0;i<this._bulletFeatureList.length;i++){var n=this._bulletFeatureList[i];n.isTargetBullet(t)&&e.push([n,n.getWeight()])}if(e.length>0){var o=d.default.randomInArrayByWeight(e);if(o)return o;y.default.warn("bulletFeature == null")}return null},e.prototype.delBulletFeature=function(t){for(var e=this._bulletFeatureList.length;e>0;e--)if(this._bulletFeatureList[e-1].getFeatureId()==t)return void this._bulletFeatureList.splice(e-1,1)},e.prototype.setSkin=function(t){this._objSpine.setSkin(t)},e.prototype.setSkinColor=function(t){this._coolDownMgr.getCoolDown("setSkinColor").do()&&(this._objSpine.getSkin().color=t)},e.prototype.clearSkinColor=function(){this._objSpine.getSkin().color=cc.color(255,255,255)},e.prototype.playAnimation=function(t,e,i,n,o){void 0===e&&(e=!1),void 0===i&&(i=1),this.isState(p.ObjStateEnum.Die)||this._objSpine.playAnimation(t,e,i,n,o)},e.prototype.getAnimationDuration=function(t){return this._objSpine.getAnimationDuration(t)},e.prototype.showSkillUseResult=function(t){if(this._coolDownMgr.getCoolDown("skillResult").do())switch(t){case f.SkillUseEnum.Cooling:T.default.showTips("Skill is CD!");break;case f.SkillUseEnum.UsingSkill:T.default.showTips("Other skills are in use!");break;case f.SkillUseEnum.NoSkill:T.default.showTips("No such skill!");break;case f.SkillUseEnum.StateWrong:T.default.showTips("Skill status error!");break;case f.SkillUseEnum.TargetOutOfRange:T.default.showTips("Target is out of range!");break;case f.SkillUseEnum.NoTarget:T.default.showTips("No target!")}},e.prototype.useSkillByCombo=function(t){if(null==t)return f.SkillUseEnum.NoSkill;if(t.isCooling())return f.SkillUseEnum.Cooling;var e=t.isCanUse();if(e!=f.SkillUseEnum.UseSucc)return e;if(null!=this._castingSkill){if(t.getPriority()<=this._castingSkill.getPriority())return f.SkillUseEnum.UsingSkill;this._castingSkill.breakOff()}if(t.use(),t.getSkillVO().nameTip&&this.showSkillNameAbove(t.getSkillVO().name,t.getSkillVO().nameTip),t.isSkillComboTypeEmpty())return t.cast(),t.stop(),f.SkillUseEnum.UseSucc;var i=R.default.createCombo(t.getSkillComboId());return null==i?(T.default.error("\u627e\u4e0d\u5230\u6280\u80fd"+t.getSkillId()+"\u6280\u80fd\u7ec4\u5408\u7684\u914d\u7f6e\u8868:"+t.getSkillComboId()),f.SkillUseEnum.NoCombo):(y.default.info("ObjFight >>>>>>>> 601 "),t.setSkillCombo(i),this._castingSkill=t,i.initialize(this,t,this.getScene()),i.execute(),f.SkillUseEnum.UseSucc)},e.prototype.getAttackCD=function(){return 1/((1e-8|this.getAttr(g.AttrTypeEnum.attackSpeed))/1e4)},e.prototype.resetAttackCD=function(){this._attackCoolDownAt=0},e.prototype.isAttackCooling=function(){var t=Date.now()/1e3;return this._attackCoolDownAt>=t},e.prototype.foreachSkill=function(t){this._skillMap.forEach(function(e){t(e)})},e.prototype.findFirstSkill=function(t){for(var e=this._skillMap.values(),i=0;i<this._skillMap.size;i++){var n=e.next().value;if(t(n))return n}},e.prototype.findAllSkill=function(t){var e=[];if(null==this._skillMap||0==this._skillMap.size)return e;for(var i=this._skillMap.values(),n=0;n<this._skillMap.size;n++){var o=i.next().value;t(o)&&e.push(o)}return e},e.prototype.isHasSkillUsing=function(){for(var t=this._skillMap.values(),e=0;e<this._skillMap.size;e++)if(t.next().value.isUsing())return!0;return!1},e.prototype.getSkin=function(){return this._objSpine.getSkin()},e.prototype.getShadowSkin=function(){return this._shadow.getSkin()},e.prototype.getSkillList=function(){var t=[];return null==this._skillMap?t:(this._skillMap.forEach(function(e){t.push(e)}),t)},e.prototype.addSkillList=function(t){if(null!=t)for(var e=0;e<t.length;e++){var i=t[e];this.addSkill(i)}},e.prototype.replaceSkill=function(t,e){this._replaceSkillMap.set(t,e)},e.prototype.addSkill=function(t){if(this._skillMap.has(t))console.error("addSkill \u91cd\u590d\u6dfb\u52a0\u6280\u80fd\u3002SkillId:%s",t);else{var e=h.default.SkillTable.findById(t);if(null!=e){if(null!=e.mutexGroupId&&e.mutexGroupId>0)for(var i=this._skillMap.values(),n=0;n<this._skillMap.size;n++){var o=i.next().value;if(e.mutexGroupId==o.getSkillVO().mutexGroupId){if(e.mutexGroupPriority>=o.getSkillVO().mutexGroupPriority)return;this._skillMap.delete(o.getSkillId()),this.replaceSkill(o.getSkillId(),t);break}}var r=new s.default(t,this,this._scene);return this._skillMap.set(r.getSkillId(),r),r}console.error("\u6280\u80fd\u914d\u7f6e\u4e0d\u5b58\u5728\u3002SkillId:%s",t)}},e.prototype.delSkill=function(t){this._skillMap.has(t)?(this._skillMap.get(t).onExit(),this._skillMap.delete(t)):console.error("Error delete Skill, skillid = %s",t)},e.prototype.selectSkill=function(t){if(void 0===t&&(t=0),0==t){var e=this.findAllSkill(function(t){return t.getSkillVO().castType==f.SkillCastTypeEnum.Auto&&!t.isCooling()});if(0==(t=this.selectSkillByPriority(e)))return}for(;this._replaceSkillMap.get(t);)t=this._replaceSkillMap.get(t);var i=this._skillMap.get(t);if(null!=i)return i},e.prototype.selectSkillByPriority=function(t){t.sort(function(t,e){return e.getSkillVO().priority-t.getSkillVO().priority});for(var e=0;e<t.length;e++){var i=t[e];if(i.isCanUse()==f.SkillUseEnum.UseSucc)return i.getSkillId()}return 0},e.prototype.removeSameGroupState=function(t){if(p.ObjStateGroupType[t])for(var e=p.ObjStateGroupType[t],i=this._status.length;i>=0;i--){var n=this._status[i];p.ObjStateGroupType[n]==e&&this.exitState(n)}},e.prototype.setState=function(t){this._status&&(-1==this._status.indexOf(t)&&(this.removeSameGroupState(t),this._status.push(t),this.handlerStateEnter(t)),p.ObjStateEnum.Frozen)},e.prototype.exitState=function(t){var e=this._status.indexOf(t);-1!=e&&(this._status.splice(e,1),this.handlerStateExit(t))},e.prototype.isState=function(t){return-1!=this._status.indexOf(t)},e.prototype.clearAllState=function(){this._status=[]},e.prototype.hitEnemyActions=function(t){this.useSkillByCastEvent(f.SkillCastEventTypeEnum.HitEnemy,t)},e.prototype.useSkillByCastEvent=function(t){for(var e=this.getSkillList(),i=0;i<e.length;i++){var n=e[i];n.isTriggerByEvent(t)&&this.useSkillByCombo(n)}},e.prototype.handlerStateEnter=function(){},e.prototype.handlerStateExit=function(t){t==p.ObjStateEnum.CastingAndPlayingAnimation&&this._castingSkill&&(this._castingSkill.clearSkillCombo(),this._castingSkill=null)},e.prototype.addBuff=function(t,e,i){var n=h.default.BuffTable.findByBuffid(t);if(null!=n){if(n.mutexId)for(var o=0;o<this._buffList.length;o++){var r=this._buffList[o],a=r.getBuffVO();if(n.mutexId==a.mutexId){if(n.priorityId<=a.priorityId)return;this.removeBuffByUid(r.getUid());break}}var s=new l.default(n.buffId,this,e,i);s.isOnce()?(s.onTick(0),s.onExit()):this._buffList.push(s)}else console.error("\u4e0d\u5b58\u5728\u7684BUFFId:%s",t)},e.prototype.addBuffIdList=function(t,e,i){void 0===t&&(t=[]);for(var n=0;n<t.length;n++){var o=t[n];this.addBuff(o,e,i)}},e.prototype.hasBuff=function(t){for(var e=0;e<this._buffList.length;e++)if(this._buffList[e].getBuffVO().buffId==t)return!0;return!1},e.prototype.removeBuffByUid=function(t){for(var e=0;e<this._buffList.length;e++){var i=this._buffList[e];if(i.getUid()==t)return i.onExit(),void this._buffList.splice(e,1)}},e.prototype.removeBuffByUidList=function(t){for(var e=0;e<t.length;e++){var i=t[e];this.removeBuffByUid(i)}},e.prototype.removeBuffById=function(t){for(var e=[],i=0;i<this._buffList.length;i++){var n=this._buffList[i];n.getBuffVO().buffId==t&&e.push(n.getUid())}this.removeBuffByUidList(e)},e.prototype.updateBuff=function(t){for(var e=this._buffList||[],i=0;i<e.length;i++)(n=e[i]).onTick(t);for(i=e.length-1;i>=0;i--){var n;(n=e[i]).isExpired()&&(n.onExit(),e.splice(i,1))}},e.prototype.playAniFromBuff=function(t,e){var i=h.default.BuffTable.findByBuffid(t).playAni,n=[];if(this.aniFromBuff.has(t)){for(var o=this.aniFromBuff.get(t),r=0;r<o.length;r++)o[r]&&o[r].destroy();this.aniFromBuff.delete(t)}var a=function(o){var r=i[o][0],a=h.default.ClientTable.findById(r);if(null==a||null==a)return console.error("\u914d\u7f6e\u4e86\u4e00\u4e2a\u6ca1\u6709\u7684\u52a8\u753b, buffId: %s, aniId: %s",t,r),{value:void 0};var l=a.defaultAni||"play",c=E.default.createSpineByResId(r,!0,s.node),u=i[o][1]||0;c.zIndex=100+u,u>=0&&c.zIndex++;var d=c.getComponent(v.default);d.setCompleteListener(function(){}),e==p.AniFromBuffPlayTypeEnum.StopLast?d.play(0,l,!1):e==p.AniFromBuffPlayTypeEnum.Loop?"play_ready"==l?(d.play(0,"play_ready",!1),d.addAnimation(0,"play_continue",!0)):"play_start"==l?(d.play(0,"play_start",!1),d.addAnimation(0,"play_loop",!0)):d.play(0,l,!0):e==p.AniFromBuffPlayTypeEnum.Once&&("play_ready"==l?(d.play(0,"play_ready",!1),d.addAnimation(0,"play_continue",!1),d.addAnimation(0,"play_end",!1),d.setCompleteListener(function(t){"play_end"==t.animation.name&&c.destroy()})):"play_start"==l?(d.play(0,"play_start",!1),d.addAnimation(0,"play_continue",!1),d.addAnimation(0,"play_end",!1),d.setCompleteListener(function(t){"play_end"==t.animation.name&&c.destroy()})):(d.play(0,l,!1),d.setCompleteListener(function(t){t.animation.name==l&&c.destroy()}))),n.push(c)},s=this;for(r=0;r<i.length;r++){var l=a(r);if("object"==typeof l)return l.value}this.aniFromBuff.set(t,n)},e.prototype.stopAniFromBuff=function(t){if(this.aniFromBuff.has(t)){for(var e=this.aniFromBuff.get(t),i=0;i<e.length;i++)e[i]&&e[i].destroy();this.aniFromBuff.delete(t)}},e.prototype.clearSkinState=function(){this._objSpine.clearState()},e.prototype.isInsideScreen=function(){var t=this._scene.convertWorldToScreenPoint(this.getWorldPos()),e=w.default.get("ScreenFixLength").number;return t.x>=0-e&&t.x<=cc.winSize.width+e&&t.y>=0&&t.y<=cc.winSize.height},e.prototype.isInsideScreenInside=function(){var t=this._scene.convertWorldToScreenPoint(this.getWorldPos());return t.x>=50&&t.x<=cc.winSize.width-50&&t.y>=0&&t.y<=cc.winSize.height},e.prototype.isInsideScreenOut=function(){var t=this._scene.convertWorldToScreenPoint(this.getWorldPos());return t.x>=-50&&t.x<=cc.winSize.width+50},e.prototype.getConfigVO=function(){return this._configVO},e.prototype.beatBack=function(){console.error("\u5b50\u7c7b\u91cd\u5199")},e.prototype.resetJumpTime=function(){},e.prototype.showDamageNumberWPos=function(){return m.default.getWorldPos(this.node)},e.prototype.showDamageNumber=function(t,e,i,n,o){void 0===i&&(i=f.HitTypeEnum.HIT),void 0===n&&(n=C.DamageTypeEnum.Real);var r=this.showDamageNumberWPos();this.getType()==p.ObjTypeEnum.Hero&&(null==o||null==o?o={color:cc.color(255,0,0),scale:1}:o.color=cc.color(255,0,0)),this.getScene().showDamageNumber(r,t,e,i,n,o)},e.prototype.showHealingNumber=function(t){var e=this.showDamageNumberWPos(),i={color:cc.color(0,255,0),scale:1};this.getScene().showDamageNumber(e,t,!1,f.HitTypeEnum.HIT,C.DamageTypeEnum.Common,i)},e.prototype.showWudiNumber=function(){var t=this.showDamageNumberWPos();this.getScene().showWudiNumber(t)},e.prototype.showDodgeLab=function(){var t=this.showDamageNumberWPos();this.getScene().showDodgeLab(t)},e.prototype.showFrozenDefense=function(){var t=this.showDamageNumberWPos();this.getScene().showFrozenDefense(t)},e.prototype.getAreaIdList=function(){return this._scene.getAreaIdList(m.default.getWorldPos(this.node))},e.prototype.dropFloor=function(){this.isState(p.ObjStateEnum.OnGround)||this.isState(p.ObjStateEnum.OnStep)||this._objSpine.jumpEnd()},e.prototype.drop=function(){this._objSpine.fall()},e.prototype.isFlipX=function(){return!1},e.prototype.faceLeft=function(){},e.prototype.setAngle=function(t){if(this._objSpine.isFlipX())(e=P.default.StdAngle(t))>=90&&e<=180?(this.getSkin(),this.getSkin().angle=e-180):this.getSkin().angle=e>=180&&e<=270?e-180:t;else{var e=P.default.StdAngle(t);this.getSkin().angle=e>=0&&e<=90?e:e>=270&&e<=360?e:t}},e.prototype.updateVirtual=function(){var t=this._collisionBox.xMin+this._collisionBox.width/2,e=this._collisionBox.yMin+this._collisionBox.height/2,i=Math.sqrt(this._collisionBox.width*this._collisionBox.width+this._collisionBox.height*this._collisionBox.height);this._virtualBox=cc.rect(t-i/2,e-i/2,i,i)},e.prototype.getVirtualBody=function(){return this._virtualBox},e.prototype.updateBodyBox=function(){var t=m.default.getWorldPos(this.node);this._bodyBox=b.default.getBodyRectByConfigRange(t,[2,0,0,100,100])},e.prototype.updateCollBox=function(){var t=m.default.getWorldPos(this.node);this._collisionBox=b.default.getCollosionRangeByConfigRange(t,[2,0,0,100,100])},e.prototype.getBodyBox=function(){return this._bodyBox},e.prototype.getCollBox=function(){return this._collisionBox},e.prototype.getBodyBoxOffsetX=function(){return 0},e.prototype.getCollisionRangeCenter=function(){return cc.v2(this._collisionBox.x+this._collisionBox.width/2,this._collisionBox.y+this._collisionBox.height/2)},e.prototype.isCanAttacked=function(){return!0},e.prototype.updateDrawRange=function(){S.default.isDebug()&&(this.getScene().drawRect(this._bodyBox,b.default.DrawNodeColor.BodyRange),this.getScene().drawRect(this._collisionBox,b.default.DrawNodeColor.CollisionRange),this.getScene().drawRect(this._virtualBox,b.default.DrawNodeColor.VirtualRange))},e.prototype.onDestroy=function(){this._shadow&&(this._shadow.destroy(),this._shadow=null)},e}(c.default);r.default=k,cc._RF.pop()},{}],ObjGun1:[function(t,e,i){"use strict";cc._RF.push(e,"20b2efZXuRHYbLh/AD9o994","ObjGun1");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ObjFight"),c=cc._decorator,u=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([u],e)}(l.default));r.default=p,cc._RF.pop()},{}],ObjHero:[function(t,e,i){"use strict";cc._RF.push(e,"24f9aPu+AVKXInHIIdWjHfg","ObjHero");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tbl"),c=o("ObjConst"),u=o("ObjFight"),p=o("LoggerUtils"),d=o("NodeUtils"),h=o("AttributeConst"),f=o("SkillConst"),g=o("Utils"),y=o("CCEvent"),m=o("PointUtils"),v=o("CombatUtils"),_=o("ENUMS"),C=o("SpineUtils"),b=o("App"),S=o("CommonCfgUtils"),O=o("EffectConst"),E=o("BagConst"),I=o("AnimationEnum"),w=o("Recorder"),A=cc._decorator,R=A.ccclass,T=(A.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._heroVO=null,e._gunNode=null,e._gunBone=null,e.isJumping=!1,e.jumpTime=null,e.comMover=null,e.collider=null,e.jumpSpeed=null,e.collEvent=null,e._curGun=null,e.spineTimestop=null,e.initiativeSkillList=[],e}return a(e,t),e.prototype.initById=function(t,e){this._heroId=t;var i=l.default.HeroTable.findById(t);this._heroVO=i;var n=l.default.HeroAttrTable.findById(1001);this.initialize(c.ObjTypeEnum.Hero,e,n,null,c.CampTypeEnum.Hero),this.initMover(e),this.initBulletFeature(),this.initSkin(),this.initSkill(),this.initMuzzle(),this.initGunBone(),this.initBornPosition(),this.initExtraAttr(),this.initAudio(),this.addEventListener(),this.resetJumpTime(),this.registerTick(this.updateEnemyTarget,.5)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.initAudio=function(){},e.prototype.addEventListener=function(){this.eventOn(y.default.FIGHT_ATTRCHANGE,this.attrChange,this),this.eventOn(y.default.HERO_JUMP,this.hanlderHeroJump,this),this.eventOn(y.default.HERO_FALL,this.handlerHeroFall,this)},e.prototype.useInitiativeSkill=function(t){var e=this.useSkillByCombo(t);this.showSkillUseResult(e)},e.prototype.hanlderHeroJump=function(){var t=this;if(0==this.isState(c.ObjStateEnum.Jumping)&&this.jumpTime>0){this.setState(c.ObjStateEnum.Jumping),this.exitState(c.ObjStateEnum.OnGround),this.comMover.setSpeed(this.getAttr(h.AttrTypeEnum.jumpSpeed)),this.jumpTime--;var e=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){t.exitState(c.ObjStateEnum.Jumping)}));this.node.runAction(e);var i=C.default.playSpineOnce(55,this.getScene().node);d.default.setWorldPos(i,this.getWorldPos()),this._objSpine.jumpBegin()}},e.prototype.handlerHeroFall=function(){var t=this;if(0==this.isState(c.ObjStateEnum.Drop)){this.setState(c.ObjStateEnum.Drop);var e=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){t.exitState(c.ObjStateEnum.Drop)}));this.node.runAction(e)}},e.prototype.initBulletFeature=function(){if(this._heroVO.bulletFeatureList)for(var t=0,e=this._heroVO.bulletFeatureList;t<e.length;t++){var i=e[t],n=JSON.parse(JSON.stringify(i)),o=n.splice(0,1)[0];n.length>0?this.addBulletFeature(o,n):p.default.warn("\u5b50\u5f39\u7279\u5f81\u914d\u7f6e\u683c\u5f0f\u9519\u8bef:[\u5b50\u5f39\u7279\u5f81ID,\u6280\u80fd\u7c7b\u578b,\u6280\u80fd\u7c7b\u578b,...,\u6280\u80fd\u7c7b\u578b]")}},e.prototype.initGunBone=function(){var t=d.default.seekC(this.node,"spineHero").getComponent(sp.Skeleton);this._gunBone=t.findBone("weapon_ctrl")},e.prototype.initMover=function(t){this.comMover=this.node.addComponent("ComMover"),this.comMover.initialize(this,t)},e.prototype.initMuzzle=function(){this._muzzle=this.getC("zhupao_ready"),this._muzzle&&(this._muzzle.active=!1)},e.prototype.initCoolDownMgr=function(){t.prototype.initCoolDownMgr.call(this),this._coolDownMgr.alloc().init("monsterColl",1)},e.prototype.showMuzzleFire=function(){this._muzzle.active=!0;var t=this._muzzle.getComponent(sp.Skeleton);t&&(t.setAnimation(0,"play",!1),t.timeScale=1)},e.prototype.initEquipment=function(){},e.prototype.addSkill=function(e){var i=t.prototype.addSkill.call(this,e);if(null!=i)return this.createNodePoolForSkill(e),i.getSkillVO().castType==f.SkillCastTypeEnum.ManMake&&this.initiativeSkillList.length<=2&&(b.default.roleServer.increaseInitiativeSkillList(),this.initiativeSkillList.push(i),this.getScene().getBattleUICom().addInitiativeSkill(this.initiativeSkillList.length,i)),i},e.prototype.createNodePoolForSkill=function(t){30015==t&&(b.default.nodePoolMgr.createNodePool(101,24,this.node),b.default.nodePoolMgr.createNodePool(102,30,this.node)),30021==t&&(b.default.nodePoolMgr.createNodePool(149,20,this.node),b.default.nodePoolMgr.createNodePool(150,20,this.node)),30022==t&&b.default.nodePoolMgr.createNodePool(153,5,this.node)},e.prototype.getEquipmentAttr=function(){return 0},e.prototype.initSkin=function(){t.prototype.initSkin.call(this,this._heroId),this.initWeaponSkin()},e.prototype.initWeaponSkin=function(){var t=b.default.equipmentMgr.getEquipmentInPos(c.EquipmentPosEnum.Weapon);if(t){var e=b.default.equipmentMgr.getEquipment(t).equipmentId,i=l.default.EquipmentStarLevelTable.findFirst(function(t){return t.id==e}).spine;i?this._objSpine.setSkin(i):this._objSpine.setSkin("skin_weapon_1")}else this._objSpine.setSkin("skin_weapon_1")},e.prototype.initSkill=function(){this.addSkillList(this._heroVO.skill),this.addSkillList(b.default.cardMgr.getSlotSkill()),this.addItemByCard(),this.addSkillByEquipment(),this.initLastTimeSkills()},e.prototype.addSkillByEquipment=function(){var t=b.default.equipmentMgr.getAllSkills();if(null!=t)for(var e=0;e<t.length;e++)b.default.bagMgr.addItem(t[e],1)},e.prototype.addItemByCard=function(){for(var t=b.default.cardMgr.getSlotItemList(),e=0;e<t.length;e++){var i=t[e];b.default.bagMgr.addItem(i,1,E.BagSourceEnum.Unknow)}},e.prototype.initLastTimeSkills=function(){for(var t=b.default.levelServer.getRewardSkillList(),e=b.default.levelServer.getCurHeroHp(),i=0;i<t.length;i++){var n=t[i];b.default.bagMgr.addItem(n,1,E.BagSourceEnum.RewardSelect)}0!=e&&(this.setAttr(h.AttrTypeEnum.hp,e,null),this._bloodCtrl.hpChange(this.getHp(),this.getHpPercent()))},e.prototype.initBornPosition=function(){var t=this.getScene().getMapMgr().getHeroBornWPos();d.default.setWorldPos(this.node,t)},e.prototype.initExtraAttr=function(){var t=b.default.cardMgr.getAllCardAttribute();this._objAttr.addOtherAttribute(t);var e=b.default.equipmentMgr.getAllAttribute();this._objAttr.addOtherAttribute(e)},e.prototype.moveHeroByRocker=function(t,e){var i=this,n=this.node.getPosition(),o=cc.v2(0,0);switch(t){case"left":this.stayCount=0,this._fightTarget||this._objSpine.filpX(!0),o=cc.v2(-e*this.getAttr(h.AttrTypeEnum.speed),0);break;case"right":this.stayCount=0,this._fightTarget||this._objSpine.filpX(!1),o=cc.v2(e*this.getAttr(h.AttrTypeEnum.speed),0);break;case"up":if(0==this.isState(c.ObjStateEnum.Jumping)&&this.jumpTime>0){this.setState(c.ObjStateEnum.Jumping),this.exitState(c.ObjStateEnum.OnGround),this.comMover.setSpeed(this.getAttr(h.AttrTypeEnum.jumpSpeed)),this.jumpTime--;var r=cc.sequence(cc.delayTime(.1),cc.callFunc(function(){i.exitState(c.ObjStateEnum.Jumping)}));this.node.runAction(r);var a=C.default.playSpineOnce(55,this.getScene().node);d.default.setWorldPos(a,this.getWorldPos()),this._objSpine.jumpBegin()}break;case"down":0==this.isState(c.ObjStateEnum.Drop)&&(this.setState(c.ObjStateEnum.Drop),r=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){i.exitState(c.ObjStateEnum.Drop)})),this.node.runAction(r))}n.addSelf(o),this.setPos(n)},e.prototype.getHeroBlood=function(){return this.getC("blood")},e.prototype.getSkin=function(){return this._objSpine.getSkin()},e.prototype.getGunAngle=function(){return this._gunBone.rotation},e.prototype.resetJumpTime=function(){this.jumpTime=this.getAttr(h.AttrTypeEnum.jumpTime)},e.prototype.updateSkill=function(){var t=this.selectSkill();t&&(this.isStay&&this._objSpine.standAttack(),this.useSkill(t))},e.prototype.useSkillByType=function(t){var e=this.findAllSkill(function(e){return e.getSkillType()==t&&!e.isCooling()}),i=null;e.length>0&&(i=e[g.default.rand(0,e.length-1)]),null!=i&&this.useSkill(i)},e.prototype.useSkill=function(t){this.useSkillByCombo(t)},e.prototype.selectSkill=function(e){return void 0===e&&(e=0),t.prototype.selectSkill.call(this,e)},e.prototype.isFlipX=function(){return this._objSpine.isFlipX()},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.isState(c.ObjStateEnum.Die)?this.onTickMover(e):(this.updateGunPoint(),this.updateSkill(e),this.onTickMover(e),this.updateHeroPosChange(e),this.checkFixPos(),this.updateMonsterColl(e),this.updateTimeStop(e))},e.prototype.updateTimeStop=function(){this.spineTimestop&&d.default.setWorldPos(this.spineTimestop,this.getWorldPos().x,this.getWorldPos().y+250)},e.prototype.updateMonsterColl=function(){var t=this;if(!this.isState(c.ObjStateEnum.TimeStop)){var e=this.getWorldPos(),i=this.getBodyBox(),n=i.width,o=i.height;this._scene.foreachMonster(function(i){if(!i.isState(c.ObjStateEnum.Die)){var r=i.getWorldPos(),a=i.getCollBox(),s=a.width,l=a.height;Math.abs(e.x-r.x)>Math.abs(n/2+s/2)||Math.abs(e.y-r.y)>Math.abs(o/2+l/2)||t.collWithMonster(i)}})}},e.prototype.collWithMonster=function(t){if(this._coolDownMgr.getCoolDown("monsterColl").do()){var e=t.getBodyCollBuffIdList();this.addBuffIdList(e,t)}},e.prototype.onTickMover=function(t){this.comMover.onTick(t)},e.prototype.updateHeroPosChange=function(t){this.isState(c.ObjStateEnum.Born)||this.isState(c.ObjStateEnum.CastingAndPlayingAnimation)||(this.isState(c.ObjStateEnum.Drop)&&this.lastPos.y>this.getWorldPos().y?(this._objSpine.fall(),this.lastPos=this.getWorldPos()):(this.lastPos.x==this.getWorldPos().x&&this.lastPos.y==this.getWorldPos().y?this.stayCount+=t:this.stayCount=0,this.stayCount>this.stayTime?this._objSpine.idle():this._objSpine.run(),this.lastPos=this.getWorldPos()))},e.prototype.checkFixPos=function(){var t=this.getBodyBox(),e=t.x,i=this.getScene().getCameraLeft();if(e<i){var n=0;n+=t.width/2;var o=i+(n-=this._heroVO.bodyRange[1]),r=this.getWorldPos();this.setWorldPos(cc.v2(o,r.y))}else{var a=this.getScene().getCameraRight();t.x+t.width>a&&(n=0,n+=t.width/2,o=a-(n+=this._heroVO.bodyRange[1]),r=this.getWorldPos(),this.setWorldPos(cc.v2(o,r.y)))}},e.prototype.updateGunPoint=function(){var t=this._fightTarget;if(t){if(null==t.node)return;var e=t.getPos(),i=this.getPos(),n=e.sub(i);n.x<0?this._objSpine.filpX(!0):this._objSpine.filpX(!1);var o=m.default.getAngleByVector(n);o>90?o=180-o:o<-90&&(o=-180-o),this._gunBone.rotation=o}else this._gunBone.rotation=0},e.prototype.idle=function(){this._objSpine.idle()},e.prototype.updateEnemyTarget=function(){this.getTarget()},e.prototype.findTarget=function(){for(var t=this.getScene().getObjListBySector(d.default.getWorldPos(this.node),[0,this._heroVO.searchRange],[0,360],this.filterTargetList,!0),e=this.getPos(),i=9999,n=null,o=0,r=t;o<r.length;o++){var a=r[o];if(a){var s=a.getPos().sub(e).mag();s<i&&(i=s,n=a)}}return n},e.prototype.filterTargetList=function(t){return!(t.getType()!=c.ObjTypeEnum.BOSS&&t.getType()!=c.ObjTypeEnum.Monster||t.isState(c.ObjStateEnum.Die)||t.isState(c.ObjStateEnum.Dying)||!t.isInsideScreen())},e.prototype.updateBodyBox=function(){if(!this._heroVO.bodyRange)return t.prototype.updateBodyBox.call(this);var e=d.default.getWorldPos(this.node);this._bodyBox=v.default.getBodyRectByConfigRange(e,this._heroVO.bodyRange)},e.prototype.updateCollBox=function(){if(!this._heroVO.collisionRange)return t.prototype.updateCollBox.call(this);var e=d.default.getWorldPos(this.node);this._collisionBox=v.default.getCollosionRangeByConfigRange(e,this._heroVO.collisionRange)},e.prototype.updateGun=function(){null!=this.getTarget()&&this.getPos().sub(this._fightTarget.getPos()).len()},e.prototype.changeGun=function(t){t==c.EquipmentPosEnum.Weapon?this._objSpine.setSkin(_.HeroSkinEnum.Hero1Gun2):t==c.EquipmentPosEnum.Gloves&&this._objSpine.setSkin(_.HeroSkinEnum.Hero1Gun2)},e.prototype.rebornHero=function(){var t=this.getAttr(h.AttrTypeEnum.hp);this.addAttr(h.AttrTypeEnum.hp,-t);var e=S.default.get("Reborn_Hero_Blood_Precent").number,i=this.getAttr(h.AttrTypeEnum.hpmax),n=Math.ceil(i*e/100);this.addAttr(h.AttrTypeEnum.hp,n),this.addBuff(210004,this),this.exitState(c.ObjStateEnum.Die),this._objSpine.clearState(),this.getScene().pauseScene(!1),this._bloodCtrl.hpChange(n,e/100),this.clearSkinColor(),this.emit(y.default.HERO_REBORN)},e.prototype.handlerStateEnter=function(e){t.prototype.handlerStateEnter.call(this,e),e==c.ObjStateEnum.TimeStop&&(this.handleStateTimeStopEnter(),this._scene.handleHeroTimeStopEnter()),e==c.ObjStateEnum.Die&&this.emit(y.default.HERO_DEAD)},e.prototype.handleStateTimeStopEnter=function(){var t=this.seekC(this.getScene().node,"nodeShadowLayer");this.spineTimestop=C.default.createSpineByResId(78,!1,t),d.default.setWorldPos(this.spineTimestop,this.getWorldPos()),this.spineTimestop.y+=250;var e=this.spineTimestop.getComponent(sp.Skeleton);e.setAnimation(0,"play_start",!1),e.addAnimation(0,"play_loop",!0)},e.prototype.handlerStateExit=function(e){t.prototype.handlerStateExit.call(this,e),e==c.ObjStateEnum.TimeStop&&(this.handleStateTimeStopExit(),this._scene.handleHeroTimeStopExit())},e.prototype.handleStateTimeStopExit=function(){var t=this;if(this.spineTimestop){var e=this.spineTimestop.getComponent(sp.Skeleton);e.setAnimation(0,"play_end",!1),e.setCompleteListener(function(){t.spineTimestop.destroy(),t.spineTimestop=null})}},e.prototype.attrChange=function(e,i){t.prototype.attrChange.call(this,e,i),e==h.AttrTypeEnum.hp&&i>0&&this.hpChange()},e.prototype.beDamage=function(e,i,n,o,r,a,s){void 0===n&&(n=!1),void 0===o&&(o=f.HitTypeEnum.HIT),void 0===r&&(r=O.DamageTypeEnum.Real),void 0===a&&(a=null),void 0===s&&(s=!1),this.isState(c.ObjStateEnum.Die)||(this.isState(c.ObjStateEnum.Noenemy)?this.showWudiNumber():t.prototype.beDamage.call(this,e,i,n,o=f.HitTypeEnum.HIT,r,a,s))},e.prototype.updateMergeDemage=function(){this.isState(c.ObjStateEnum.Die)||0==this._mergeDamageList.length||(t.prototype.updateMergeDemage.call(this),this._objSpine.beDamage(),this.emit(y.default.HERO_HURT),this.hpChange())},e.prototype.hpChange=function(t){var e=this;if(void 0===t&&(t=!1),!this.isState(c.ObjStateEnum.Die)){var i=this.getHp(),n=this.getHpPercent();this._bloodNode&&this._bloodCtrl.hpChange(i,n),i<=0?(p.default.error("ObjHero >>>>>>>> 637 \u4e3b\u89d2\u6b7b\u4ea1"),this.setState(c.ObjStateEnum.Die),w.default.getInstance().dotHeroDied(),b.default.levelServer.isHeroNoRebornTime()?(w.default.getInstance().dotLevelFail(),this.emit(y.default.LEVEL_FAIL),cc.tween(this._scene.node).delay(1).call(function(){e.emit(y.default.CHAPTER_FINISH,1)}).start(),this._bloodNode.destroy(),this._objSpine.onDieStay(),this._objSpine.setCompleteListener(function(){I.ObjSpineAnimationEnum.Die})):(this._objSpine.onDieStay(),this.emit(y.default.OPEN_REBORN_VIEW))):this.checkUseSkillByHpChange(i,n)}},e.prototype.checkUseSkillByHpChange=function(){for(var t=0,e=this.getSkillList();t<e.length;t++){var i=e[t];i.getSkillType()==f.SkillTypeEnum.FightBack?this.useSkill(i):i.getSkillType()==f.SkillTypeEnum.WildWarrior&&this.useSkill(i)}},s([R],e)}(u.default));r.default=T,cc._RF.pop()},{}],ObjMonster:[function(t,e,i){"use strict";cc._RF.push(e,"a8408Llix9LHZ5VpNrlZysa","ObjMonster");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tbl"),c=o("ObjFight"),u=o("LoggerUtils"),p=o("SkillConst"),d=o("CCEvent"),h=o("MonsterAi"),f=o("NodeUtils"),g=o("AttributeConst"),y=o("CombatUtils"),m=o("ObjConst"),v=o("App"),_=o("ActionUtils"),C=o("BornEnum"),b=o("AnimationEnum"),S=o("SpineUtils"),O=o("Utils"),E=o("CommonCfgUtils"),I=o("TaskConst"),w=o("EffectConst"),A=cc._decorator,R=A.ccclass,T=(A.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._MonsterVO=null,e._ai=null,e.comMover=null,e._isTarget=!1,e._chapterLevelVO=null,e._faceDirector=null,e._climbTime=1,e._climbAnimationOffsetX=0,e._climbAnimationOffsetY=0,e._climbAnimationScale=1,e._outsideScreenTime=0,e._isHigh=!1,e._hitScaleY=null,e.dieMoveX=null,e.minDistance=100,e.forceDieTime=null,e.frozenSpine=null,e.skillUseList=[],e.monsterWarning=null,e.dieCounting=0,e}return a(e,t),e.prototype.initById=function(t,e,i,n,o){void 0===i&&(i=!1),this._monsterId=t,this._MonsterVO=l.default.MonsterTable.findById(t),this._isTarget=i,this._dropId=o,this._MonsterVO.type==m.MonsterTypeEnum.Boss?(this.initialize(m.ObjTypeEnum.BOSS,e,this._MonsterVO,null,m.CampTypeEnum.Monster),e.createBossBlood()):this.initialize(m.ObjTypeEnum.Monster,e,this._MonsterVO,null,m.CampTypeEnum.Monster),this.initLevelAddition(n),this.initSkill(),this.initSkin(),this.initMuzzle(),this.initPunchPoint(),this.addEventListener();var r=this.node.addComponent(cc.BoxCollider);r.enabled=!0,r.offset=cc.v2(0,70),this._ai=new h.default(this),this.initMover(e),this.tellCamera(!1),this.initBorn();var a=this.getAttr(g.AttrTypeEnum.attackRange)*(O.default.rand(0,4)/10-.2);this.addAttr(g.AttrTypeEnum.attackRange,a),null!=this._MonsterVO.minDistance&&(1==this._MonsterVO.minDistance.length?this.minDistance=this._MonsterVO.minDistance[0]:this._MonsterVO.minDistance.length>=2&&(this.minDistance=O.default.rand(this._MonsterVO.minDistance[0],this._MonsterVO.minDistance[1]))),this._hitScaleY=E.default.get("MonsterHitScaleY").number,this.forceDieTime=this._MonsterVO.forceTime},e.prototype.initCoolDownMgr=function(){t.prototype.initCoolDownMgr.call(this),this._coolDownMgr.alloc().init("monsterBleed",E.default.get("MonsterBleedInterval").number),this._coolDownMgr.alloc().init("monsterBeatback",E.default.get("MonsterBeatbackInterval").number),this._coolDownMgr.alloc().init("monsterHitScaleY",E.default.get("MonsterHitScaleYInterval").number),this._coolDownMgr.alloc().init("monsterHit",E.default.get("MonsterHitInterval").number)},e.prototype.onTick=function(e){this.updateNecessary(e),this.isState(m.ObjStateEnum.TimeStop)?t.prototype.onTick.call(this,e):(this.checkForceDie(e),this.isState(m.ObjStateEnum.Die)||this.isState(m.ObjStateEnum.Frozen)?(this.onTickMover(e),t.prototype.onTick.call(this,e)):(t.prototype.onTick.call(this,e),this.updateUseSkillList(e),this.checkDie(),this.onTickMover(e),this.updateFacing(),this.updateMonsterPosChange(e),this.isState(m.ObjStateEnum.Born)||(this._ai.onTick(e),this.fixPos())))},e.prototype.checkForceDie=function(t){this.isState(m.ObjStateEnum.Die)&&(this.dieCounting+=t,this.dieCounting>3&&this.setLegal(!1))},e.prototype.updateUseSkillList=function(){var t=this.skillUseList.length>0?this.skillUseList[0]:null;null!=t&&(0!=t.isInRange()?this.useSkill(t)&&this.skillUseList.splice(0,1):this.skillUseList.splice(0,1))},e.prototype.updateNecessary=function(t){this._bloodNode&&this._bloodCtrl.onTick(t),this.monsterWarning&&f.default.setWorldPos(this.monsterWarning,this.getWorldPos().add(cc.v2(0,this._MonsterVO.bloodOffset[1]+50)))},e.prototype.updateMonsterPosChange=function(){this.lastPos.y!=this.getWorldPos().y&&(this.exitState(m.ObjStateEnum.OnGround),this.exitState(m.ObjStateEnum.OnStep)),this.lastPos=this.getWorldPos()},e.prototype.fixPos=function(){var t=this.getScene().getMyFloorY(this.getWorldPos().x);this.getWorldPos().y<t&&this.setWorldPos(cc.v2(this.getWorldPos().x,t))},e.prototype.dropItem=function(){var t=this.getWorldPos();v.default.levelServer.monsterDropItem(t,this._chapterLevelVO,this.getType(),this._dropId)},e.prototype.tellCamera=function(t){this.isTarget()&&this.emit(d.default.MONSTER_TARGET_MONSTER_APPEAR,this,t)},e.prototype.initBloodSpr=function(){if(this.getType()!=m.ObjTypeEnum.BOSS){t.prototype.initBloodSpr.call(this);var e=this._MonsterVO.bloodOffset;this._bloodCtrl.setOffset(cc.v2(e[0],e[1])),this._bloodNode.active=!1}},e.prototype.initSkill=function(){this.addSkillList(this._MonsterVO.skill)},e.prototype.initLevelAddition=function(t){if(this._chapterLevelVO=t,t.buffIdList&&this.addBuffIdList(t.buffIdList,this),t.hpBonusRatio){var e=this.getAttr(g.AttrTypeEnum.hpmax);e*=t.hpBonusRatio,this.addAttr(g.AttrTypeEnum.hpmax,e)}if(t.attackBonusRadio){var i=this.getAttr(g.AttrTypeEnum.attack);i*=t.attackBonusRadio,this.addAttr(g.AttrTypeEnum.attack,i)}},e.prototype.initBorn=function(){var t=this._MonsterVO.bornArgs,e=this._MonsterVO.isGravity;if(this._objSpine.StopSpineAni(),e){this.setState(m.ObjStateEnum.Born),this.setState(m.ObjStateEnum.AppearShow);var i=this._scene.getFloorHeight();this.getWorldPos().y>=i+cc.winSize.height/2&&this.setWorldPos(cc.v2(this.getWorldPos().x,i+cc.winSize.height/2))}else if(t){if(t[0]==C.MonsterBornTypeEnum.Fly){this.setState(m.ObjStateEnum.Born),this.setState(m.ObjStateEnum.Jumping),this.setState(m.ObjStateEnum.AppearDrop);var n=t[1];this.node.y+=n}else if(t[0]==C.MonsterBornTypeEnum.Dig){this.setState(m.ObjStateEnum.OnGround),this.setState(m.ObjStateEnum.Born),t[1]&&(this._climbTime=t[1]),t[2]&&(this._climbAnimationOffsetX=t[2]),t[3]&&(this._climbAnimationOffsetY=t[3]),t[4]&&(this._climbAnimationScale=t[4]);var o=this.getScene().getMyFloorY(this.getWorldPos().x),r=this.getWorldPos();this.setWorldPos(cc.v2(r.x,o)),this.setState(m.ObjStateEnum.AppearClimb)}}else this.setState(m.ObjStateEnum.Born),this.setState(m.ObjStateEnum.AppearNormal),i=this._scene.getFloorHeight(),this.getWorldPos().y>=i+cc.winSize.height/2&&this.setWorldPos(cc.v2(this.getWorldPos().x,i+cc.winSize.height/2))},e.prototype.addEventListener=function(){cc.game.on(d.default.FIGHT_ATTRCHANGE,this.attrChange,this)},e.prototype.initMover=function(t){1!=this._MonsterVO.isGravity&&(this.comMover=this.node.addComponent("ComMover"),this.comMover.initialize(this,t))},e.prototype.initSkin=function(){t.prototype.initSkin.call(this,this._monsterId);var e=this._objSpine.getSkin();e.scale=e.scale*this._MonsterVO.modelScale,this._MonsterVO.bornFacing==m.MonsterBornFacingEnum.Left?this.faceLeft(!0):this._MonsterVO.bornFacing==m.MonsterBornFacingEnum.Right&&this.faceLeft(!1)},e.prototype.isTarget=function(){return this._isTarget},e.prototype.isFlipX=function(){return this._objSpine.isFlipX()},e.prototype.beDamage=function(e,i,n,o,r,a,s){if(void 0===o&&(o=p.HitTypeEnum.HIT),void 0===r&&(r=w.DamageTypeEnum.Real),void 0===a&&(a=null),void 0===s&&(s=!1),!this.isState(m.ObjStateEnum.Die))if(this.isState(m.ObjStateEnum.Noenemy))this.showWudiNumber();else if(this.isState(m.ObjStateEnum.Born))this._objSpine.setTimeScale(4);else{(i*=v.default.getMulTestDemage())<9999999&&v.default.levelServer.addTotalDamage(i);var l=E.default.get("MaxDamageSingleTimes").number;9999999!=(i=i>l?l:i)?t.prototype.beDamage.call(this,e,i,n,o=p.HitTypeEnum.HIT,r,a,s):(this.showDamageNumber(""+i,!0,o,r,a),this.addAttr(g.AttrTypeEnum.hp,-i,null),this.setSkinColor(cc.color(255,0,0)),this.hpChange(!0))}},e.prototype.updateMergeDemage=function(){if(!this.isState(m.ObjStateEnum.Die)&&0!=this._mergeDamageList.length){for(var e=!1,i=0;i<this._mergeDamageList.length;i++)this._mergeDamageList[i][1][1]&&(e=!0);t.prototype.updateMergeDemage.call(this),this.hpChange(e),this.getType()==m.ObjTypeEnum.BOSS&&this._scene.refreBossBlood(this.getHpPercent());var n=this._coolDownMgr.getCoolDown("monsterHit");this._bloodNode&&0==this._bloodNode.active&&(this._bloodNode.active=!0),this.isState(m.ObjStateEnum.TimeStop)||this.isState(m.ObjStateEnum.CastingAndPlayingAnimation)||!n.do()||(this.showBleeding(),this.skinScaleY(),this._objSpine.beDamage())}},e.prototype.skinScaleY=function(){if(this._coolDownMgr.getCoolDown("monsterHitScaleY").do()){var t=this._objSpine.getSkin().scaleY;cc.tween(this._objSpine.getSkin()).to(.1,{scaleY:t*this._hitScaleY}).to(.1,{scaleY:t}).start()}},e.prototype.showBleeding=function(){if(this._coolDownMgr.getCoolDown("monsterBleed").do()){var t=S.default.playSpineOnce(68,this.node);t.y=0,t.y+=this._MonsterVO.bloodOffset[1]/2}},e.prototype.attrChange=function(e,i){t.prototype.attrChange.call(this,e,i)},e.prototype.handlerStateEnter=function(e){var i=this;if(t.prototype.handlerStateEnter.call(this,e),e==m.ObjStateEnum.TimeStop&&(this._objSpine.pauseAni(!0),this.monsterWarning&&(this.monsterWarning.getComponent(sp.Skeleton).paused=!0)),e==m.ObjStateEnum.Frozen&&this.handlerFrozenEnter(),e==m.ObjStateEnum.Die&&(this.tellCamera(!0),this.exitState(m.ObjStateEnum.Frozen),this.closeWarning(),this.clearSkinColor(),this.dropItem(),this.getScene().onMonsterChange()),e==m.ObjStateEnum.AppearClimb){var n=this._objSpine.getAnimationDuration(b.ObjSpineAnimationEnum.AppearClimb),o=this._climbTime/n;this._objSpine.playAnimation(b.ObjSpineAnimationEnum.AppearClimb,!1,o,null,function(){i.exitState(m.ObjStateEnum.AppearClimb)});var r=f.default.getWorldPos(this.node);r.addSelf(cc.v2(this._climbAnimationOffsetX,this._climbAnimationOffsetY)),this.getScene().showClimbAnimation(r,this._climbTime,this._climbAnimationScale)}e==m.ObjStateEnum.AppearNormal&&this._objSpine.playAnimationByTime(b.ObjSpineAnimationEnum.AppearJumpin,!1,1,null,function(){i.exitState(m.ObjStateEnum.AppearNormal)}),e==m.ObjStateEnum.AppearShow&&this._objSpine.playAnimationByTime(b.ObjSpineAnimationEnum.AppearShow,!1,1,null,function(){i.exitState(m.ObjStateEnum.AppearShow)}),e==m.ObjStateEnum.AppearDrop&&this._objSpine.playAnimationByTime(b.ObjSpineAnimationEnum.AppearDrop,!1,1,null,function(){i.exitState(m.ObjStateEnum.AppearDrop)})},e.prototype.handlerFrozenEnter=function(){if(this.isState(m.ObjStateEnum.Dying)||this.isState(m.ObjStateEnum.Die))this.exitState(m.ObjStateEnum.Frozen);else if(this._objSpine.pauseAni(!0),null==this.frozenSpine){var t=this.seekC(this._scene.node,"monterTipsLayer");this.frozenSpine=S.default.createSpineByResId(153,!1,t);var e=this._MonsterVO.frozenScale||Number(1);this.frozenSpine.scale=e,f.default.setWorldPos(this.frozenSpine,this.getWorldPos());var i=this.frozenSpine.getComponent(sp.Skeleton);i.setAnimation(0,"play_start",!1),i.addAnimation(0,"play_loop",!0)}},e.prototype.handlerStateExit=function(e){t.prototype.handlerStateExit.call(this,e),e!=m.ObjStateEnum.TimeStop?(e==m.ObjStateEnum.Frozen&&this.hanlderExitFrozen(),e==m.ObjStateEnum.Jumping&&this.isState(m.ObjStateEnum.Born)?this.exitState(m.ObjStateEnum.Born):e!=m.ObjStateEnum.Climb?e!=m.ObjStateEnum.AppearClimb&&e!=m.ObjStateEnum.AppearNormal&&e!=m.ObjStateEnum.AppearShow&&e!=m.ObjStateEnum.AppearDrop?e!=m.ObjStateEnum.CastingAndPlayingAnimation||this._objSpine.idle():(this.exitState(m.ObjStateEnum.Born),this._objSpine.clearState(),this._objSpine.idle()):(this.exitState(m.ObjStateEnum.Born),this._objSpine.idle())):(this._objSpine.pauseAni(!1),this.monsterWarning&&(this.monsterWarning.getComponent(sp.Skeleton).paused=!1))},e.prototype.hanlderExitFrozen=function(){var t=this;if(this._objSpine.pauseAni(!1),this.frozenSpine){var e=this.frozenSpine.getComponent(sp.Skeleton);e.setAnimation(0,"play_end",!1),e.setCompleteListener(function(){t.frozenSpine.destroy(),t.frozenSpine=null})}},e.prototype.addUseSkillList=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],n=!0,o=0;o<this.skillUseList.length;o++)this.skillUseList[o].getSkillId()==i.getSkillId()&&(n=!1);n&&this.skillUseList.push(i)}},e.prototype.useSkill=function(t){return!(0==this.isInsideScreen()&&!this._MonsterVO.isAttackAnywhere)&&(null==t&&(t=this.selectSkill()),null!=t&&this.useSkillByCombo(t)==p.SkillUseEnum.UseSucc)},e.prototype.checkDie=function(){this.isState(m.ObjStateEnum.Dying)&&(v.default.levelServer.addTotalKill(),this.getType()==m.ObjTypeEnum.BOSS&&this._scene.destroyBossBlood(),this._bloodNode&&(this._bloodNode.destroy(),this._bloodNode=null),this.showDieEffect(),this.onDie(!1),this.setState(m.ObjStateEnum.Die))},e.prototype.hpChange=function(t){if(!this.isState(m.ObjStateEnum.Die)&&!this.isState(m.ObjStateEnum.Dying)){var e=this.getHp(),i=this.getHpPercent();if(this._bloodNode&&this._bloodCtrl.hpChange(e,i),e<=0){if(this.isState(m.ObjStateEnum.TimeStop))return void this.setState(m.ObjStateEnum.Dying);v.default.levelServer.addTotalKill(),this.getType()==m.ObjTypeEnum.BOSS&&this._scene.destroyBossBlood(),this._bloodNode&&(this._bloodNode.destroy(),this._bloodNode=null),this.showDieEffect(),this.onDie(t),this.setState(m.ObjStateEnum.Die)}}},e.prototype.showDieEffect=function(){var t=this.seekC(this._scene.node,"nodeMonsterDieLayer");if(this.node.parent=t,this.getType()!=m.ObjTypeEnum.BOSS){var e=this._MonsterVO.dieEffect,i=this.seekC(this._scene.node,"nodeMonsterDieEffectLayer");if(null!=e){var n=e[O.default.rand(1,e.length)-1],o=S.default.playSpineOnce(n,i);f.default.setWorldPos(o,this.getWorldPos()),o.y+=100+O.default.rand(0,80)-40,o.x+=O.default.rand(0,160)-80,o.scale=o.scale*O.default.rand(10,15)/10}}},e.prototype.showDieEffectBoss=function(){var t=this,e=this._MonsterVO.dieEffect;if(this._objSpine.onDieStay(),null!=e&&1==e.length){var i=e[0];cc.tween(this.getSkin()).to(1,{color:cc.color(0,0,0)}).delay(1).to(1,{opacity:0}).call(function(){t.setLegal(!1)}).start();for(var n=this.getBodyBox(),o=this.seekC(this._scene.node,"nodeMonsterDieEffectLayer"),r=0;r<3;){r+=O.default.rand(30,60)/100;for(var a=O.default.rand(1,2),s=0;s<a;s++)cc.tween(this.node).delay(r).call(function(){var t=S.default.playSpineOnce(i,o);f.default.setWorldPos(t,n.x,n.y),t.x+=O.default.rand(n.width),t.y+=O.default.rand(n.height),t.scale=t.scale*O.default.rand(10,15)/10}).start()}v.default.levelServer.isCurChapterLastLevel()&&v.default.event.emit(d.default.LEVEL_BOSS_JUSE_DIE)}else console.error("\u7b56\u5212\u914d\u7f6eBOSS\u6b7b\u4ea1\u7279\u6548\u51fa\u9519\uff0cBOSS\u53ea\u6709\u4e00\u79cd\u7279\u6548\uff0cboss\u7684monsterId: %s",this._monsterId),this.setLegal(!1)},e.prototype.onDie=function(t){var e=this;v.default.taskMgr.incrStep(I.TaskEventType.KillMonster,1,[this._monsterId,this._MonsterVO.type,v.default.levelServer.getCurChapter(),v.default.levelServer.getCurLevel()]),this._objSpine.clearState(),this.getType()!=m.ObjTypeEnum.BOSS?this._MonsterVO.type==m.MonsterTypeEnum.LightArmor?t?(this._objSpine.onDieFly(),this._objSpine.setCompleteListener(function(t){t.animation.name==b.ObjSpineAnimationEnum.DieFallEnd&&e.setDelayDisappear(e.forceDieTime,!1)}),this.registerTick(this.dieMovingByCrit,1/60)):(this._MonsterVO.isGravity&&!this.comMover&&(this.comMover=this.node.addComponent("ComMover"),this.comMover.initialize(this,this._scene)),this._objSpine.onDieFly(),this._objSpine.setCompleteListener(function(t){t.animation.name==b.ObjSpineAnimationEnum.DieFallEnd&&e.setDelayDisappear(e.forceDieTime,!1)}),this.comMover.setSpeed(this._MonsterVO.dieMove[2]),this.registerTick(this.dieMoving1,1/60)):(this._objSpine.onDieStay(),this._objSpine.setCompleteListener(function(t){t.animation.name==b.ObjSpineAnimationEnum.Die&&e.setDelayDisappear(e.forceDieTime,!1)})):(v.default.audioMgr.playMusicByResId(1),this.showDieEffectBoss())},e.prototype.dieMovingByCrit=function(){var t=cc.v2();t=this._fightTarget?this.getPos().sub(this._fightTarget.getPos()).normalize().mul(this._MonsterVO.dieFlySpeed*(1/60)):this.getPos().sub(this._scene.getHero().getPosition()).normalize().mul(this._MonsterVO.dieFlySpeed*(1/60)),this.node.runAction(cc.moveBy(1/60,t))},e.prototype.dieMoving1=function(){var t=this._MonsterVO.dieMove;if(!this.dieMoveX){this.dieMoveX=t[1];var e=this.getTarget();e&&e.getPos().x>this.getPos().x&&(this.dieMoveX=-1*this.dieMoveX)}this.node.runAction(cc.moveBy(1/60,this.dieMoveX*(1/60),0)),this.dieMoveX=.95*this.dieMoveX},e.prototype.playDieSound=function(){v.default.audioMgr.playSoundByResId(this._MonsterVO.dieSound)},e.prototype.showWarning=function(){if(!this.isState(m.ObjStateEnum.Die)&&null==this.monsterWarning){var t=this.seekC(this.getScene().node,"nodeMonsterWaringLayer");this.monsterWarning=S.default.createSpineByResId(58,!1,t);var e=this.monsterWarning.getComponent(sp.Skeleton);e.setAnimation(0,"play_ready",!1),e.addAnimation(0,"play_continue",!0),f.default.setWorldPos(this.monsterWarning,this.getWorldPos().add(cc.v2(0,this._MonsterVO.bloodOffset[1]+50)))}},e.prototype.closeWarning=function(){this.monsterWarning&&(this.monsterWarning.destroy(),this.monsterWarning=null)},e.prototype.dieMoving=function(){var t=this;if(this._MonsterVO.type==m.MonsterTypeEnum.LightArmor){var e=this._objSpine.getSkin();this._objSpine.onDieFly(),this._objSpine.setCompleteListener(function(e){e.animation.name==b.ObjSpineAnimationEnum.DieFallEnd&&t.setDelayDisappear(t.forceDieTime,!1)});var i=this._MonsterVO.dieMove,n=(i[1],this.getTarget());n&&(n.getPos().x,this.getPos().x);var o=_.default.getDieFlyAction(i[0],i[1],i[2]);e.runAction(cc.sequence(o,cc.callFunc(function(){t.setDelayDisappear(t.forceDieTime,!1)})))}else this._objSpine.onDieStay(),this._objSpine.setCompleteListener(function(e){e.animation.name==b.ObjSpineAnimationEnum.Die&&t.setDelayDisappear(t.forceDieTime,!1)})},e.prototype.filterTargetList=function(t){return t.getType()==m.ObjTypeEnum.Hero&&!t.isState(m.ObjStateEnum.Die)},e.prototype.findTarget=function(){var t=this.getScene().getObjListBySector(f.default.getWorldPos(this.node),[0,this._MonsterVO.searchRange],[0,360],this.filterTargetList,!0);this.showWarning();for(var e=this.getPos(),i=9999,n=null,o=0,r=t;o<r.length;o++){var a=r[o];if(a){var s=a.getPos().sub(e).mag();s<i&&(i=s,n=a)}}return n},e.prototype.isCanAttack=function(){return null==this._fightTarget||this._fightTarget.getPos().sub(this.getPos()).len()<this.getAttr(g.AttrTypeEnum.attackRange)},e.prototype.getMonsterAIVO=function(){var t=this._MonsterVO.monsterAi,e=l.default.MonsterAITable.findById(t);return null==e&&u.default.error("ObjMonster aiVO == null, aiId = ",t),e},e.prototype.getBodyCollBuffIdList=function(){return this._MonsterVO.bodyCollBuffIdList?this._MonsterVO.bodyCollBuffIdList:[]},e.prototype.idleByAi=function(){this.isState(m.ObjStateEnum.Born)||this._objSpine.idle()},e.prototype.moveByAiFreeing=function(t){if(!this.isState(m.ObjStateEnum.Born)&&!this.isState(m.ObjStateEnum.Jumping)&&(this.stayCount=0,!this.isState(m.ObjStateEnum.CastingAndPlayingAnimation))){this._objSpine.move();var e=this.getAttr(g.AttrTypeEnum.speed)*t;this.isFaceLeft()&&(e*=-1);var i=cc.v2(e,0),n=this.getWorldPos().add(i),o=this._scene.getCameraLimitRect();(n.x<=o.x||n.x>=o.width+o.x)&&(this.changeFacing(),i.x=-1*i.x,n=this.getWorldPos().add(i)),this.setWorldPos(n)}},e.prototype.moveByAi=function(t){if(!this.isState(m.ObjStateEnum.Born)&&!this.isState(m.ObjStateEnum.Jumping)&&(this.stayCount=0,!this.isState(m.ObjStateEnum.CastingAndPlayingAnimation)))if(Math.abs(this._fightTarget.getPos().x-this.getPos().x)<this.minDistance)this._objSpine.idle();else{this._objSpine.move(this._MonsterVO.aniWalk);var e=this.getAttr(g.AttrTypeEnum.speed)*t;this._fightTarget.getPos().x<this.getPos().x&&(e*=-1);var i=cc.v2(e,0),n=this.getWorldPos().add(i),o=this._scene.getCameraLimitRect();(n.x<=o[0]||n.x>=o[1])&&(this.changeFacing(),i.x=-1*i.x,n=this.getWorldPos().add(i)),this.setWorldPos(n)}},e.prototype.moveByBatBite=function(t){if(!this.isState(m.ObjStateEnum.Born)&&!this.isState(m.ObjStateEnum.Jumping)&&(this.stayCount=0,!this.isState(m.ObjStateEnum.CastingAndPlayingAnimation))){var e=this._fightTarget.getWorldPos().sub(this.getWorldPos());if(e.mag()<this.minDistance)this._objSpine.idle();else{this._objSpine.move(this._MonsterVO.aniWalk);var i=this.getAttr(g.AttrTypeEnum.speed)*t,n=e.normalize().mul(i),o=this.getWorldPos().add(n);this.setWorldPos(o)}}},e.prototype.changeFacing=function(){this.isState(m.ObjStateEnum.LockHead)||(this.isFaceLeft()?this.faceLeft(!1):this.faceLeft(!0))},e.prototype.faceLeft=function(t){t?(this._MonsterVO.defaultFace==m.MonsterAniFacingEnum.Left?this._objSpine.filpX(!1):this._objSpine.filpX(!0),this._faceDirector=m.MonsterFacingEnum.Left):(this._MonsterVO.defaultFace==m.MonsterAniFacingEnum.Left?this._objSpine.filpX(!0):this._objSpine.filpX(!1),this._faceDirector=m.MonsterFacingEnum.Right)},e.prototype.isFaceLeft=function(){return this._faceDirector==m.MonsterFacingEnum.Left},e.prototype.updateFacing=function(){this.isState(m.ObjStateEnum.LockHead)||this._fightTarget&&(this._fightTarget.getPos().x<this.getPos().x?this.faceLeft(!0):this.faceLeft(!1))},e.prototype.onTickMover=function(t){this.comMover&&this.comMover.onTick(t),this.getPos().y<=-1e3&&(console.warn("Monster position too low, fix the position, MonsterId: %s",this._monsterId),this.setLegal(!1))},e.prototype.beatBack=function(t,e){this._coolDownMgr.getCoolDown("monsterBeatback").do()&&this.node.runAction(cc.moveBy(e,t))},e.prototype.showDamageNumberWPos=function(){var t=this._MonsterVO.damageNumberOffset;return f.default.getWorldPos(this.node).add(cc.v2(t[0],t[1]))},e.prototype.updateBodyBox=function(){if(!this._MonsterVO.bodyRange)return t.prototype.updateBodyBox.call(this);var e=f.default.getWorldPos(this.node);this._bodyBox=y.default.getBodyRectByConfigRange(e,this._MonsterVO.bodyRange)},e.prototype.updateCollBox=function(){if(!this._MonsterVO.collisionRange)return t.prototype.updateCollBox.call(this);var e=f.default.getWorldPos(this.node);this._collisionBox=y.default.getCollosionRangeByConfigRange(e,this._MonsterVO.collisionRange)},e.prototype.setDelayDisappear=function(t){var e=this;cc.tween(this.node).delay(t).call(function(){e.setLegal(!1)}).start(),cc.tween(this.getSkin()).to(t,{opacity:0}).start()},e.prototype.setLegal=function(e){this.frozenSpine&&(this.frozenSpine.destroy(),this.frozenSpine=null),t.prototype.setLegal.call(this,e)},s([R],e)}(c.default));r.default=T,cc._RF.pop()},{}],ObjSpine:[function(t,e,i){"use strict";cc._RF.push(e,"8bf2ffJfIVI/aQ9M8Bfs3JB","ObjSpine");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.ObjActorState=void 0;var l,c=o("AnimationEnum"),u=o("ComSkin"),p=o("CommonCfgUtils"),d=o("LoggerUtils"),h=o("NodeUtils"),f=o("SpineUtils"),g=o("Utils"),y=o("AttributeConst"),m=o("ObjConst");(function(t){t[t.Freeing=0]="Freeing",t[t.UsingSkill=1]="UsingSkill",t[t.Damaging=2]="Damaging",t[t.Moving=3]="Moving",t[t.Idle=5]="Idle",t[t.StandAttack=6]="StandAttack",t[t.JumpBegin=20]="JumpBegin",t[t.Jumping=21]="Jumping",t[t.Falling=22]="Falling",t[t.JumpEnd=23]="JumpEnd",t[t.Moribunding=99]="Moribunding",t[t.Dying=100]="Dying",t[t.StopAll=200]="StopAll"})(l=r.ObjActorState||(r.ObjActorState={}));var v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curUsingSkill=null,e._defaultAnimation=null,e._state=null,e._objfight=null,e._defaultSpeed=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._state=l.Idle,this._defaultSpeed=p.default.get("MoveDefaultSpeed").number},e.prototype.init=function(t){this._objfight=t},e.prototype.stay=function(){this._state,l.UsingSkill},e.prototype.useSkill=function(t){var e=this;if(d.default.error("ObjSpine \u5f03\u7528\u63a5\u53e3,\u73b0\u5728\u4f7f\u7528 objfight\u7684useSkillByCombo 2021\u5e741\u670813\u65e519:47:52"),this._state!=l.Dying&&this._state!=l.StopAll&&null!=t)if(t.isNeedAction()){if(null!=this._curUsingSkill){if(t.getPriority()<=this._curUsingSkill.getPriority())return;this._curUsingSkill.breakOff()}if(0!=t.use()){this._curUsingSkill=t;var i=t.getBeginAnimation();i?(this._objfight.setState(m.ObjStateEnum.CastingAndPlayingAnimation),this.playAnimation(i,!1,1,function(){t.cast()},function(){e._objfight.isState(m.ObjStateEnum.CastingAndPlayingAnimation)||console.warn("\u6ca1\u6709\u5728\u653b\u51fb\u4f46\u662f\u5374\u505c\u6b62\u4e86\uff0c\u51fa\u5927\u95ee\u9898! SkillId: %s",t.getSkillId()),e.stopSkill(),e._objfight.exitState(m.ObjStateEnum.CastingAndPlayingAnimation),e._state=l.Idle})):(t.cast(),this.stopSkill())}}else{if(0==t.use())return;t.cast(),t.stop()}},e.prototype.jumpBegin=function(){var t=this;this._state!=l.Dying&&this._state!=l.JumpBegin&&this._state!=l.StopAll&&(this._state=l.JumpBegin,this.playAnimation(c.ObjSpineAnimationEnum.JumpStart,!1,5),this.setCompleteListener(function(e){e.animation.name==c.ObjSpineAnimationEnum.JumpStart&&t.jumping()}))},e.prototype.jumping=function(){this._state!=l.Dying&&this._state!=l.StopAll&&(this.playAnimation(c.ObjSpineAnimationEnum.JumpLoop,!0),this._state=l.Jumping)},e.prototype.jumpEnd=function(){var t=this;if(this._state!=l.Dying&&this._state!=l.Moving&&this._state!=l.Idle&&this._state!=l.StandAttack&&this._state!=l.UsingSkill&&this._state!=l.JumpEnd&&this._state!=l.StopAll&&this._objfight.getType()!=m.ObjTypeEnum.Monster&&this._objfight.getType()!=m.ObjTypeEnum.BOSS){var e=f.default.playSpineOnce(55,this._objfight.getScene().node);h.default.setWorldPos(e,this._objfight.getWorldPos()),this._state=l.JumpEnd,this.playAnimation(c.ObjSpineAnimationEnum.JumpEnd,!1),this.setCompleteListener(function(e){e.animation.name==c.ObjSpineAnimationEnum.JumpEnd&&(t._state=null,t.idle())})}},e.prototype.fall=function(){this._state!=l.Dying&&this._state!=l.Falling&&this._state!=l.JumpBegin&&this._state!=l.Jumping&&this._state!=l.JumpEnd&&this._state!=l.StopAll&&this._objfight.getType()!=m.ObjTypeEnum.Monster&&this._objfight.getType()!=m.ObjTypeEnum.BOSS&&(this._state=l.Falling,this.playAnimation(c.ObjSpineAnimationEnum.JumpDown,!0))},e.prototype.sit=function(){},e.prototype.idle=function(){this._state!=l.JumpBegin&&this._state!=l.Jumping&&this._state!=l.JumpEnd&&this._state!=l.Falling&&this._state!=l.Idle&&this._state!=l.Dying&&this._state!=l.StandAttack&&this._state!=l.StopAll&&(this._objfight.isStay=!0,this.playAnimation(c.ObjSpineAnimationEnum.Idle,!0),this._state=l.Idle)},e.prototype.standAttack=function(){var t=this;this._state!=l.Dying&&this._state!=l.Moving&&this._state!=l.JumpBegin&&this._state!=l.JumpEnd&&this._state!=l.Jumping&&this._state!=l.Falling&&this._state!=l.Damaging&&this._state!=l.StandAttack&&this._state!=l.StopAll&&(this.playAnimation(c.ObjSpineAnimationEnum.Shoot,!1),this.getSkin().getComponent(sp.Skeleton).timeScale=2,this.setCompleteListener(function(e){e.animation.name==c.ObjSpineAnimationEnum.Shoot&&(t._state=null)}),this._state=l.StandAttack)},e.prototype.moveInScreen=function(){this.playAnimation(c.ObjSpineAnimationEnum.Run,!0),this._state=l.Dying},e.prototype.move=function(t){void 0===t&&(t=c.ObjSpineAnimationEnum.Walk),this._state!=l.Moving&&this._state!=l.JumpBegin&&this._state!=l.Jumping&&this._state!=l.JumpEnd&&this._state!=l.Falling&&this._state!=l.Dying&&this._state!=l.StopAll&&this.isCanMove()&&(this._objfight.getAttr(y.AttrTypeEnum.speed)&&this._defaultSpeed,this._objfight.isStay=!1,this.playAnimation(t,!0),this._state=l.Moving,d.default.info("ObjSpine >>>>>>>> 271 moveAni = ",t))},e.prototype.run=function(t){void 0===t&&(t=c.ObjSpineAnimationEnum.Run),this._state!=l.Moving&&this._state!=l.JumpBegin&&this._state!=l.Jumping&&this._state!=l.JumpEnd&&this._state!=l.Falling&&this._state!=l.Dying&&this._state!=l.StopAll&&this.isCanMove()&&(this._objfight.getAttr(y.AttrTypeEnum.speed)&&this._defaultSpeed,this._objfight.isStay=!1,this.playAnimation(t,!0),this._state=l.Moving)},e.prototype.isCanMove=function(){return this._state!=l.UsingSkill&&this._state!=l.Damaging&&this._state!=l.Dying&&this._state!=l.StopAll},e.prototype.beDamage=function(){var t=this;if(this._state!=l.Dying&&this._state!=l.JumpBegin&&this._state!=l.Jumping&&this._state!=l.JumpEnd&&this._state!=l.Damaging&&this._state!=l.StopAll&&(!this._curUsingSkill||this._curUsingSkill.isCanBreakoOff())){var e=this._objfight.getAttr(y.AttrTypeEnum.bedamageDefense)||Number(0);g.default.rand(1,1e4)<=e||(this._state=l.Damaging,this._objfight.setState(m.ObjStateEnum.Damage),this.playAnimation(c.ObjSpineAnimationEnum.Hit,!1),this.setCompleteListener(function(e){e.animation.name==c.ObjSpineAnimationEnum.Hit&&(t.playAnimation(c.ObjSpineAnimationEnum.Idle,!0),t._state=l.Idle,t._objfight.exitState(m.ObjStateEnum.Damage))}),this.stopSkill())}},e.prototype.onDieStay=function(){if(this._state!=l.Dying&&this._state!=l.StopAll){this._state=l.Dying,this._objfight.clearSkinColor();var t=this.getSkin().getComponent(sp.Skeleton);t.timeScale=1,t.setAnimation(0,c.ObjSpineAnimationEnum.Die,!1)}},e.prototype.onDieFly=function(){if(this._state!=l.Dying&&this._state!=l.StopAll){this._state=l.Dying;var t=this.getSkin().getComponent(sp.Skeleton);t.timeScale=1,t.setAnimation(0,c.ObjSpineAnimationEnum.DieFallLoop,!1),t.addAnimation(0,c.ObjSpineAnimationEnum.DieFallEnd,!1)}},e.prototype.stopSkill=function(){this._curUsingSkill&&(this._curUsingSkill.stop(),this._curUsingSkill=null)},e.prototype.clearState=function(){this._state=null},e.prototype.StopSpineAni=function(){this._state=l.StopAll},s([_],e)}(u.default));r.default=C,cc._RF.pop()},{}],ObjStruct:[function(t,e,i){"use strict";cc._RF.push(e,"344b8qtIqlO15aic/8N2pF4","ObjStruct");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.StShapeCircle=o.StShapeRotationRect=void 0;var r=n("MathUtils"),a=function(){function t(t,e,i){this.points=[],this.radian=e,this.rect=t,this.fixPoint=i||cc.v2(t.xMin,t.yMin);var n=r.default.StdRadian(this.radian),o=cc.v2(t.xMin,t.yMin),a=cc.v2(t.xMax,t.yMin),s=cc.v2(t.xMax,t.yMax),l=cc.v2(t.xMin,t.yMax),c=r.default.pointRoundPoint(o,i,n),u=r.default.pointRoundPoint(a,i,n),p=r.default.pointRoundPoint(s,i,n),d=r.default.pointRoundPoint(l,i,n);this.center=cc.v2((c.x+p.x)/2,(c.y+p.y)/2),this.points.push(c,u,p,d)}return t.prototype.getMaxRect=function(){var t=cc.v2(this.rect.width,this.rect.height).len();return cc.rect(this.center.x-t/2,this.center.y-t/2,t,t)},t}();o.StShapeRotationRect=a,o.StShapeCircle=function(t,e){this.point=t,this.radius=e,this.xMin=this.point.x-e,this.xMax=this.point.x+e,this.yMin=this.point.y-e,this.yMax=this.point.y+e},cc._RF.pop()},{}],ObjSummonsEmptyPlane:[function(t,e,i){"use strict";cc._RF.push(e,"56d09skVR5C9Lb11RlHvfBJ","ObjSummonsEmptyPlane");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AnimationEnum"),c=o("MathUtils"),u=o("ObjConst"),p=o("ObjSummons"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canUseSkill=!1,e}return a(e,t),e.prototype.initById=function(e,i,n){t.prototype.initById.call(this,e,i,n),this.initFirstPos(),this.initBorn(),this.initMuzzle()},e.prototype.initFirstPos=function(){this.offsetX=this.summonsVO.param1,this.offsetY=this.summonsVO.param2,this._owner.isFlipX()?this.node.x-=this.offsetX:this.node.x+=this.offsetX,this.node.y+=this.offsetY},e.prototype.initBorn=function(){var t=this;this.setState(u.ObjStateEnum.Born),this.playAnimation(l.ObjEmptyPlaneAniEnum.Revive,!1,1,null,function(){t.exitState(u.ObjStateEnum.Born),t.playAnimation(l.ObjEmptyPlaneAniEnum.Standby,!0)})},e.prototype.gotoDie=function(){var t=this;this.isState(u.ObjStateEnum.Die)||(this.setState(u.ObjStateEnum.Die),this.playAnimation(l.ObjEmptyPlaneAniEnum.Die,!1,1,null,function(){t.setLegal(!1)}))},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.isState(u.ObjStateEnum.Born)||this.isState(u.ObjStateEnum.Die)||(this.updateSkill(e),this.onTickMover(e),this.updateDirection(e))},e.prototype.findTarget=function(){return this._owner.findTarget()},e.prototype.filterTargetList=function(t){return this._owner.filterTargetList(t)},e.prototype.onTickMover=function(){if(this._fightTarget){var t=this.getWorldPos(),e=this._fightTarget.getWorldPos();Math.abs(t.y-e.y)<=50?this._canUseSkill=!0:this._canUseSkill=!1;var i=this._owner.getWorldPos();e.x=i.x+this.offsetX,e.y+=50,((o=this._scene.convertWorldToScreenPoint(e)).x<50||o.x>cc.winSize.width-50)&&(e.x=t.x);var n=c.default.smoothClosePos(t,e,.1);this.setWorldPos(n)}else{var o;this.spineNode.scaleX=Math.abs(this.spineNode.scaleX),t=this.getWorldPos(),(e=this._owner.getWorldPos()).addSelf(cc.v2(this.offsetX,this.offsetY)),((o=this._scene.convertWorldToScreenPoint(e)).x<50||o.x>cc.winSize.width-50)&&(e.x=t.x),n=c.default.smoothClosePos(t,e,.1),this.setWorldPos(n)}},e.prototype.updateDirection=function(){this._fightTarget?this._fightTarget.getWorldPos().x-this.getWorldPos().x>=0?this.spineNode.scaleX=Math.abs(this.spineNode.scaleX):this.spineNode.scaleX=-Math.abs(this.spineNode.scaleX):this.spineNode.scaleX=Math.abs(this.spineNode.scaleX)},e.prototype.updateSkill=function(){var t=this.getTarget();if(t&&this.getScene().isNodeAtCamera(t.node)){var e=this.selectSkill();e&&this.useSkill(e)}},e.prototype.useSkill=function(t){var e=this;!this.isState(u.ObjStateEnum.CastingAndPlayingAnimation)&&t.use()&&(this.setState(u.ObjStateEnum.CastingAndPlayingAnimation),this.playAnimation(l.ObjEmptyPlaneAniEnum.Attack,!1,1,function(){t.cast()},function(){t.stop(),e.exitState(u.ObjStateEnum.CastingAndPlayingAnimation),e.playAnimation(l.ObjEmptyPlaneAniEnum.Standby,!0,1)}))},s([h],e)}(p.default));r.default=f,cc._RF.pop()},{}],ObjSummonsFixedTurret:[function(t,e,i){"use strict";cc._RF.push(e,"00700chs+xBAofDc3HjRh0z","ObjSummonsFixedTurret");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AnimationEnum"),c=o("ComMover"),u=o("NodeUtils"),p=o("PointUtils"),d=o("CombatUtils"),h=o("ObjConst"),f=o("ObjSummons"),g=cc._decorator,y=g.ccclass,m=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canUseSkill=!1,e.comMover=null,e.bodyCtrlBone=null,e}return a(e,t),e.prototype.initById=function(e,i,n){t.prototype.initById.call(this,e,i,n),this.initFirstPos(),this.initBorn(),this.initMuzzle(),this.initMover(n),this.initCtrlBone()},e.prototype.initCtrlBone=function(){this.bodyCtrlBone=this.comSke.findBone("point_BodyControl")},e.prototype.initMover=function(t){this.comMover=this.node.addComponent(c.default),this.comMover.initialize(this,t)},e.prototype.initFirstPos=function(){this.offsetX=this.summonsVO.param1,this.offsetY=this.summonsVO.param2,this._owner.isFlipX()?this.node.x-=this.offsetX:this.node.x+=this.offsetX,this.node.y+=this.offsetY},e.prototype.initBorn=function(){var t=this;this.setState(h.ObjStateEnum.Born),this.playAnimation(l.ObjTurret2AniEnum.Revive,!1,1,null,function(){t.exitState(h.ObjStateEnum.Born),t.playAnimation(l.ObjTurret2AniEnum.Standby,!0)})},e.prototype.gotoDie=function(){var t=this;this.isState(h.ObjStateEnum.Die)||(this.setState(h.ObjStateEnum.Die),this.playAnimation(l.ObjTurret2AniEnum.Die,!1,1,null,function(){t.setLegal(!1)}))},e.prototype.drop=function(){},e.prototype.dropFloor=function(){},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.comMover&&(this.updateBodyBox(),this.comMover.onTick(e)),this.isState(h.ObjStateEnum.Born)||this.isState(h.ObjStateEnum.Die)||(this.updateGunPoint(),this.updateSkill(e),this.updateDirection(e))},e.prototype.updateGunPoint=function(){var t=this._fightTarget;if(t){if(null==t.node)return;var e=t.getPos(),i=this.getPos(),n=e.sub(i),o=p.default.getAngleByVector(n);o>=90||o<=-90?o+=180:o=-o,this.bodyCtrlBone.rotation=o}else this.bodyCtrlBone.rotation=0},e.prototype.updateBodyBox=function(){if(!this.summonsVO.bodyRange)return t.prototype.updateBodyBox.call(this);var e=u.default.getWorldPos(this.node);this._bodyBox=d.default.getBodyRectByConfigRange(e,this.summonsVO.bodyRange)},e.prototype.findTarget=function(){return this._owner.findTarget()},e.prototype.filterTargetList=function(t){return this._owner.filterTargetList(t)},e.prototype.updateDirection=function(){this._fightTarget?this._fightTarget.getWorldPos().x-this.getWorldPos().x>=0?this.spineNode.scaleX=Math.abs(this.spineNode.scaleX):this.spineNode.scaleX=-Math.abs(this.spineNode.scaleX):this.spineNode.scaleX=Math.abs(this.spineNode.scaleX)},e.prototype.updateSkill=function(){var t=this.getTarget();if(t&&this.isInsideScreenOut()&&this.getScene().isNodeAtCamera(t.node)){var e=this.selectSkill();e&&this.useSkill(e)}},e.prototype.useSkill=function(t){var e=this;this.isState(h.ObjStateEnum.CastingAndPlayingAnimation)||this.isState(h.ObjStateEnum.Die)||!t.use()||(this.setState(h.ObjStateEnum.CastingAndPlayingAnimation),this.playAnimation(l.ObjTurret2AniEnum.Attack,!1,8,function(){t.cast()},function(){t.stop(),e.exitState(h.ObjStateEnum.CastingAndPlayingAnimation),e.playAnimation(l.ObjTurret2AniEnum.Standby,!0,1)}))},s([y],e)}(f.default));r.default=m,cc._RF.pop()},{}],ObjSummonsMovingTurret:[function(t,e,i){"use strict";cc._RF.push(e,"3f645A5EXlKR5oT1pxeAsoR","ObjSummonsMovingTurret");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AnimationEnum"),c=o("ComMover"),u=o("NodeUtils"),p=o("CombatUtils"),d=o("ObjConst"),h=o("ObjSummons"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canUseSkill=!1,e.comMover=null,e.curAni=null,e}return a(e,t),e.prototype.initById=function(e,i,n){t.prototype.initById.call(this,e,i,n),this.initFirstPos(),this.initBorn(),this.initMuzzle(),this.initMover(n)},e.prototype.initMover=function(t){this.comMover=this.node.addComponent(c.default),this.comMover.initialize(this,t)},e.prototype.initFirstPos=function(){this.offsetX=this.summonsVO.param1,this.offsetY=this.summonsVO.param2,this._owner.isFlipX()?this.node.x-=this.offsetX:this.node.x+=this.offsetX,this.node.y+=this.offsetY},e.prototype.initBorn=function(){var t=this;this.setState(d.ObjStateEnum.Born),this.node.x-=200;var e=this._scene.convertScreenToWorldPoint(cc.v2(-200,0));u.default.setWorldPos(this.node,e.x,this._scene.getFloorHeight()),this.playAnimation(l.ObjTurret1AniEnum.Walk,!0,1),this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(500,0)),cc.callFunc(function(){t.exitState(d.ObjStateEnum.Born)})))},e.prototype.gotoDie=function(){var t=this;this.isState(d.ObjStateEnum.Die)||(this.setState(d.ObjStateEnum.Die),this.playAnimation(l.ObjTurret1AniEnum.Die,!1,1,null,function(){t.setLegal(!1)}))},e.prototype.drop=function(){},e.prototype.dropFloor=function(){},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.comMover&&(this.updateBodyBox(),this.comMover.onTick(e)),this.isState(d.ObjStateEnum.Born)||this.isState(d.ObjStateEnum.Die)||(this.updateSkill(e),this.onTickMover(e),this.updateDirection(e))},e.prototype.updateBodyBox=function(){if(!this.summonsVO.bodyRange)return t.prototype.updateBodyBox.call(this);var e=u.default.getWorldPos(this.node);this._bodyBox=p.default.getBodyRectByConfigRange(e,this.summonsVO.bodyRange)},e.prototype.findTarget=function(){for(var t=this.getScene().getObjListBySector(u.default.getWorldPos(this.node),[0,2e3],[0,360],this.filterTargetList,!0),e=this.getWorldPos(),i=9999,n=null,o=0,r=t;o<r.length;o++){var a=r[o],s=a.getWorldPos(),l=s.sub(e).mag();l<i&&Math.abs(s.y-e.y)<=50&&(i=l,n=a)}return n},e.prototype.filterTargetList=function(t){return!(t.getType()!=d.ObjTypeEnum.BOSS&&t.getType()!=d.ObjTypeEnum.Monster||t.isState(d.ObjStateEnum.Die)||t.isState(d.ObjStateEnum.Dying)||!t.isInsideScreen())},e.prototype.onTickMover=function(){if(!this.isState(d.ObjStateEnum.CastingAndPlayingAnimation)){var t=this.getWorldPos(),e=this._owner.getWorldPos();e.addSelf(cc.v2(this.offsetX,this.offsetY)),this._fightTarget&&(Math.abs(t.y-this._fightTarget.getWorldPos().y)<=50?this._canUseSkill=!0:this._canUseSkill=!1);var i=e.x-t.x;Math.abs(i)>20?i>0?(this.curAni!=l.ObjTurret1AniEnum.Walk&&(this.playAnimation(l.ObjTurret1AniEnum.Walk,!0,1,null,null),this.curAni=l.ObjTurret1AniEnum.Walk),this.node.x+=5):(this.curAni!=l.ObjTurret1AniEnum.WalkBack&&(this.playAnimation(l.ObjTurret1AniEnum.WalkBack,!0,1,null,null),this.curAni=l.ObjTurret1AniEnum.WalkBack),this.node.x-=5):this.curAni!=l.ObjTurret1AniEnum.Standby&&(this.playAnimation(l.ObjTurret1AniEnum.Standby,!0,1,null,null),this.curAni=l.ObjTurret1AniEnum.Standby)}},e.prototype.updateDirection=function(){this._fightTarget?this._fightTarget.getWorldPos().x-this.getWorldPos().x>=0?this.spineNode.scaleX=Math.abs(this.spineNode.scaleX):this.spineNode.scaleX=-Math.abs(this.spineNode.scaleX):this.spineNode.scaleX=Math.abs(this.spineNode.scaleX)},e.prototype.updateSkill=function(){if(this.getTarget(),this.isInsideScreenOut()){var t=this.selectSkill();t&&this.useSkill(t)}},e.prototype.useSkill=function(t){var e=this;this.isState(d.ObjStateEnum.CastingAndPlayingAnimation)||this.isState(d.ObjStateEnum.Die)||!t.use()||(this.setState(d.ObjStateEnum.CastingAndPlayingAnimation),this.playAnimation(l.ObjTurret1AniEnum.Attack,!1,1,function(){t.cast()},function(){t.stop(),e.exitState(d.ObjStateEnum.CastingAndPlayingAnimation),e.playAnimation(l.ObjTurret1AniEnum.Walk,!0,1),e.curAni=l.ObjTurret1AniEnum.Walk}))},s([g],e)}(h.default));r.default=y,cc._RF.pop()},{}],ObjSummons:[function(t,e,i){"use strict";cc._RF.push(e,"8f56eOw015LKpH56hlrByQl","ObjSummons");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tbl"),c=o("LoggerUtils"),u=o("CombatConst"),p=o("ObjConst"),d=o("ObjFight"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniNames=[],e}return a(e,t),e.prototype.initById=function(t,e,i){var n=l.default.SummonsTable.findById(t);null!=n?(this.summonsVO=n,this.initialize(p.ObjTypeEnum.Summons,i,this.summonsVO,e,e.getCamp()),this.initData(t),this.initSkill(),this.initSkin(),this.initAniNames(),this.initLife()):c.default.error("ObjSummons initById summonsVO == null,summonsId = ",t)},e.prototype.initData=function(t){this.summonsId=t},e.prototype.initSkill=function(){this.addSkillList(this.summonsVO.skillList)},e.prototype.initSkin=function(){this.spineNode=this.getC("spine"),null!=this.spineNode?this.comSke=this.spineNode.getComponent(sp.Skeleton):c.default.error("ObjSummons \u53ec\u5524\u517d\u7684spine\u52a8\u753b,\u8282\u70b9\u540d\u5b57\u5e94\u8be5\u8981\u4f7f\u7528spine")},e.prototype.isFlipX=function(){return this.spineNode.scaleX<0},e.prototype.initLife=function(){this.summonsVO.lifeTime?this.liftTime=this.summonsVO.lifeTime/1e3:this.liftTime=Number.MAX_VALUE},e.prototype.gotoDie=function(){this.setLegal(!1)},e.prototype.isCanAttacked=function(){return this.summonsVO.isCanAttacked==u.StdBool.True},e.prototype.getAttr=function(t){return this._owner.getAttr(t)*this.summonsVO.ownerAttrPrecent},e.prototype.onTick=function(e){t.prototype.onTick.call(this,e),this.liftTime-=e,this.liftTime<=0&&this.gotoDie()},e.prototype.playAnimation=function(t,e,i,n,o){void 0===e&&(e=!1),void 0===i&&(i=1),this.isOwnAnimation(t)?(this.comSke.setCompleteListener(function(t){o&&o(t)}),this.comSke.setEventListener(function(t){n&&n(t)}),this.comSke.timeScale=i,this.comSke.setAnimation(0,t,e)):c.default.info("ObjSummons play \u4e0d\u5b58\u5728\u52a8\u4f5c\u540d:",t)},e.prototype.isOwnAnimation=function(t){return-1!=this.aniNames.indexOf(t)},e.prototype.initAniNames=function(){for(var t=this.comSke.skeletonData.getRuntimeData().animations,e=0;e<t.length;e++){var i=t[e];this.aniNames[e]=i.name}},e.prototype.clearSkinColor=function(){},e.prototype.setSkinColor=function(){},s([f],e)}(d.default));r.default=g,cc._RF.pop()},{}],OfflineRewardTable:[function(t,e,i){"use strict";cc._RF.push(e,"ef2d5TOdLBPe6zhacR9LkU/","OfflineRewardTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("OfflineRewardVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("offline_reward_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.offlineTime,n)}},t.prototype.findByOfflinetime=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],OfflineRewardVO:[function(t,e,i){"use strict";cc._RF.push(e,"d432cRNpWFP+6slUgsgkR4t","OfflineRewardVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.offlineTime=t[0],this.rewards=t[1]},cc._RF.pop()},{}],OutputFilter:[function(t,e,i){"use strict";cc._RF.push(e,"19230KvedFIOKxNTTzCipWJ","OutputFilter");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.isValidOutPut=function(){return console.error("\u5b50\u7c7b\u91cd\u5199\u8fd9\u4e2a\u63a5\u53e3"),!0},t}();n.default=o,cc._RF.pop()},{}],OutputMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3d101RoCYNPSL6N9uQk6Fm5","OutputMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("DataHelper"),c=o("OutputStorage"),u=o("Utils"),p=o("ArrayUtils"),d=o("ItemUtils"),h=o("BagConst"),f=o("App"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemIndex=new Map,e.outputStorage=new c.default,e}return a(e,t),e.prototype.init=function(){t.prototype.init.call(this,"OutputMgr")},e.prototype.drop=function(t,e){var i=this;if(null==t)return console.error("\u6389\u843dID\u4e3a\u7a7a"),null;var n=s.default.DropTable.findByDropid(t);if(null==n)return console.error("\u6389\u843dID\u4e0d\u5b58\u5728"),null;var o=n.maxDrop?n.maxDrop:99999;this.outputStorage.prepareStorage(t,o);var r=n.staticGroup;for(var a in r)""!=r[a]&&this._staticGroupDrop(r[a]).forEach(function(t,e){i.outputStorage.storeItem(e,t)});for(var l=1;l<r.length;l++);var c=n.relatedGroup||{};for(var a in c)if(""!=c[a]){var u=this._relatedGroupDrop(c[a],e);this.outputStorage.storeItemList(u)}var p=n.independentGroup||{};for(var a in p)""!=p[a]&&(u=this._independentGroupDrop(p[a]),this.outputStorage.storeItemList(u));return this.outputStorage.getItemList()},e.prototype.prepareStorage=function(t,e){this.dropId=t,this.maxNumber=e,this.itemIndex.clear()},e.prototype._staticGroupDrop=function(t){var e=p.default.filter(s.default.StaticGroupTable.VOList,function(e){if(e.name==t)return d.default.getItemType(e.itemId)!=h.ItemTypeEnum.InitiativeSkill||!!f.default.roleServer.isCanGetInitiativeSkill()&&(f.default.roleServer.increaseLimitInitiativeSkillCount(),!0)}),i=new Map;for(var n in e){var o=u.default.rand(e[n].min,e[n].max);i.set(e[n].itemId,o)}return i},e.prototype._independentGroupDrop=function(t){var e=p.default.filter(s.default.SingleGroupTable.VOList,function(e){if(e.name==t)return d.default.getItemType(e.itemId)!=h.ItemTypeEnum.InitiativeSkill||!!f.default.roleServer.isCanGetInitiativeSkill()&&(f.default.roleServer.increaseLimitInitiativeSkillCount(),!0)}),i=new Map;for(var n in e)if(u.default.rand()<=e[n].prob){var o=u.default.rand(e[n].min,e[n].max);o>0&&i.set(e[n].itemId,o)}return i},e.prototype._relatedGroupDrop=function(t,e){var i=s.default.RelatedGroupTable.findByName(t);if(null!=i){var n=new Map,o=0;if(i.min==i.max)o=i.min;else{var r=0;u.default.rand(i.max-i.min)>i.average-i.min?(r=i.average-i.min,o=u.default.rand(r)+i.min):(r=i.max-i.average,o=i.max-u.default.rand(r))}for(var a=1;a<=o;a++)this._randRelatedGroupItem(i,n,[],e);return n}console.error("\u627e\u4e0d\u5230\u914d\u7f6e\u8868\uff0cgroupName = %s",t)},e.prototype._randRelatedGroupItem=function(t,e,i,n){i=i||[];var o=t.name,r=1==(t.isUnique||0),a=p.default.filter(s.default.RelatedItemTable.VOList,function(t){return!(t.name!=o||r&&e.has(t.itemId)||-1!=i.indexOf(t.itemId)||null!=n&&0==n.isValidOutPut(t.itemId)||d.default.getItemType(t.itemId)==h.ItemTypeEnum.InitiativeSkill&&!f.default.roleServer.isCanGetInitiativeSkill())});if(0!=a.length){for(var l=0,c=0,g=a;c<g.length;c++)l+=(_=g[c]).weight;for(var y=u.default.rand(l),m=0,v=a;m<v.length;m++){var _;if((y-=(_=v[m]).weight)<=0){var C=u.default.rand(_.min,_.max);return d.default.getItemType(_.itemId)==h.ItemTypeEnum.InitiativeSkill&&f.default.roleServer.increaseLimitInitiativeSkillCount(),void e.set(_.itemId,C)}}}},e}(l.default);r.default=g,cc._RF.pop()},{}],OutputStorage:[function(t,e,i){"use strict";cc._RF.push(e,"e7dc7ZjfPBM8qfmHrCiKczE","OutputStorage");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("MapUtils"),a=function(){function t(){this.itemIndex=new Map}return t.prototype.prepareStorage=function(t,e){this.dropId=t,this.maxNumber=e,this.itemIndex.clear()},t.prototype.storeItem=function(t,e){this.itemIndex.set(t,this.itemIndex.get(t)||0+e)},t.prototype.storeItemList=function(t){var e=this;t.forEach(function(t,i){e.storeItem(i,t)})},t.prototype.getItemList=function(){return r.default.deepClone(this.itemIndex)},t.prototype.depositToStorage=function(){this.dropId=null,this.maxNumber=null,this.itemIndex=null},t}();o.default=a,cc._RF.pop()},{}],PointUtils:[function(t,e,i){"use strict";cc._RF.push(e,"3cbedalwi1LtpBTZACVdZ4w","PointUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.angle2Radian=function(t){return t/180*Math.PI},t.getAngleByVector=function(t){return 180*Math.atan2(t.y,t.x)/Math.PI},t.getVector=function(t,e){return e.sub(t)},t.craeteVectorByRadian=function(t){return cc.v2(Math.cos(t),Math.sin(t))},t.angle2VectorUnit=function(t){var e=this.angle2Radian(t),i=Math.cos(e),n=Math.sin(e);return cc.v2(i,n)},t.extendVector=function(t,e){return cc.v2(t.x*e,t.y*e)},t.vectorToVectorUnit=function(t){var e=t.mag(),i=t.x/e,n=t.y/e;return cc.v2(i,n)},t}();n.default=o,cc._RF.pop()},{}],PrefabUtils:[function(t,e,i){"use strict";cc._RF.push(e,"37441sOUjdKMLqyvWJUHLIe","PrefabUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tbl"),a=n("RES"),s=n("App"),l=n("SkillConst"),c=n("LoggerUtils"),u=function(){function t(){}return t.createByResId=function(t){if(null!=t){var e=r.default.ClientTable.findById(t);if(null!=e)if(e.resType==l.ResourceTypeEnum.Prefab){var i=e.param1,n=a.ClientRes[i];if(null!=n){var o=s.default.resMgr.getPrefab(n.url);if(null!=o){var u=cc.instantiate(o);return e.scale&&(u.scale=e.scale),u}c.default.error("PrefabUtils prefab == null,%s",n.url,t)}else c.default.error("PrefabUtils ClientRes[%s] == null,%s",e.param1,t)}else c.default.error("PrefabUtils createByResId:resType is not Prefab: ",t);else c.default.error("PrefabUtils createByResId:not find resVO! resId:%s",t)}else c.default.error("PrefabUtils resId:%s",t)},t}();o.default=u,cc._RF.pop()},{}],RES:[function(t,e,i){"use strict";cc._RF.push(e,"1800bQTQ6tIY4xqefjkR8aw","RES");var n,o=t,r=i;Object.defineProperty(r,"__esModule",{value:!0}),r.SceneRes=r.ResBattleScene=r.ResMainScene=r.ResCommon=r.ClientRes=r.MyBundle=r.BoundleNameConst=void 0;var a=o("App"),s=o("ENUMS");r.BoundleNameConst={RewardSkill:"BattleScene-RewardSkill",ChapterMiniView:"ChapterMiniView",ShopMiniVIew:"ShopMiniVIew",TaskMiniView:"TaskMiniView",CardMiniView:"CardMiniView",EquipmentMiniView:"EquipmentMiniView",SigninView:"SigninView",LoadingView:"LoadingView",TestView:"TestView",ArrowView:"ArrowView",PauseView:"PauseView",RebornView:"RebornView",WarningView:"WarningView",FinalReport:"FinalReport",StoryBg:"StoryBg",UIBattle:"UIBattle",Battle:"Battle",BatleSpineH5_all:"BatleSpineH5_all",BattleSpineDir_all:"BattleSpineDir_all",MapRes1:"MapRes1",MapRes2:"MapRes2",MapRes3:"MapRes3",MapRes4:"MapRes4",MapRes5:"MapRes5",MapRes6:"MapRes6",MapRes999:"MapRes999",Common:"Common"},r.MyBundle={BattleSpineDir_all:{isJustBundle:!0,bundleName:r.BoundleNameConst.BattleSpineDir_all}};var l={common1:{url:"atlas/common1",type:cc.SpriteAtlas,bundleName:r.BoundleNameConst.Common}},c={commonBullet:{url:"textureBullet/zidan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},tiechan:{url:"textureBullet/tiechan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},zhuan:{url:"textureBullet/zhuan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},nianye:{url:"textureBullet/nianye",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},boss1_zidan:{url:"textureBullet/boss1_zidan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},boss2_zidan:{url:"textureBullet/boss2_zidan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},gongren_zidan:{url:"textureBullet/gongren_zidan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},yinerguai_zidan:{url:"textureBullet/yinerguai_zidan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},b_daodan:{url:"textureBullet/b_daodan",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.UIBattle},yingzi:{url:"texture/common/yingzi",type:cc.SpriteFrame,bundleName:r.BoundleNameConst.Common}},u={m_bat_1:{url:"spine/H5/m_bat_1/m_bat_1",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle},m_bat_2:{url:"spine/H5/m_bat_2/m_bat_2",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle},m_bat_3:{url:"spine/H5/m_bat_3/m_bat_3",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle},m_chaser_1:{url:"spine/H5/m_chaser_1/m_chaser_1",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle},m_chaser_2:{url:"spine/H5/m_chaser_2/m_chaser_2",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle},m_gunner_1:{url:"spine/H5/m_gunner_1/m_gunner_1",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle},m_gunner_2:{url:"spine/H5/m_gunner_2/m_gunner_2",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle},m_gunner_3:{url:"spine/H5/m_gunner_3/m_gunner_3",type:cc.Texture2D,bundleName:r.BoundleNameConst.Battle}},p={},d={},h={},f={bgm1:{url:"audio/music/bgm1",type:cc.AudioClip,isDir:!1,bundleName:r.BoundleNameConst.Common},boss_bgm:{url:"audio/music/boss_bgm",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},click:{url:"audio/sound/click",type:cc.AudioClip,isDir:!1,bundleName:r.BoundleNameConst.Common},guanbi:{url:"audio/sound/guanbi",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},jiesuan:{url:"audio/sound/jiesuan",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},lingqujiangli:{url:"audio/sound/lingqujiangli",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},sxy_dianji:{url:"audio/sound/sxy_dianji",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},tanchu:{url:"audio/sound/tanchu",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},xp_shengji:{url:"audio/sound/xp_shengji",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},xp_zhuangbei:{url:"audio/sound/xp_zhuangbei",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},zhu_bgm:{url:"audio/music/zhu_bgm",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},mainShoot1:{url:"audio/sound/shoot1",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},mainShoot2:{url:"audio/sound/shoot2",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},mainShoot3:{url:"audio/sound/shoot3",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},mainShoot4:{url:"audio/sound/shoot4",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},M249:{url:"audio/sound/M249",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},M416:{url:"audio/sound/M416",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},MK14:{url:"audio/sound/MK14",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common},SoundCoin:{url:"audio/sound/coin",type:cc.AudioClip,bundleName:r.BoundleNameConst.Common}},g={BOSSNODE:{url:"prefab/BattleScene/BattleView/ObjFight/nodeBoss",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},summonsEmptyPlane:{url:"prefab/BattleScene/BattleView/ObjFight/summonsEmptyPlane",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},summonsFixedTurret:{url:"prefab/BattleScene/BattleView/ObjFight/summonsFixedTurret",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},summonsMovingTurret:{url:"prefab/BattleScene/BattleView/ObjFight/summonsMovingTurret",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},UI_REWARD_SKILL:{url:"RewardSkill",type:cc.Prefab,bundleName:r.BoundleNameConst.RewardSkill},UI_REWARD_SKILL_2SELECT1:{url:"RewardSkill2Pick1",type:cc.Prefab,bundleName:r.BoundleNameConst.RewardSkill},UI_REWARD_SKILL_ONE:{url:"RewardSkillSelectOne",type:cc.Prefab,bundleName:r.BoundleNameConst.RewardSkill},UI_RANDOMEVENT_VIEW:{url:"RewardRandom",type:cc.Prefab,bundleName:r.BoundleNameConst.RewardSkill},ComSkillSelect:{url:"ComSkillSelect",type:cc.Prefab,bundleName:r.BoundleNameConst.RewardSkill},ComRewardSkillPnl:{url:"ComRewardSkillPnl",type:cc.Prefab,bundleName:r.BoundleNameConst.RewardSkill},UI_BattleUI:{url:"UIBattle",type:cc.Prefab,bundleName:r.BoundleNameConst.UIBattle},UI_ARROW_VIEW:{url:"ArrowView",type:cc.Prefab,bundleName:r.BoundleNameConst.ArrowView},UI_WARNING_VIEW:{url:"WarningView",type:cc.Prefab,bundleName:r.BoundleNameConst.WarningView},UI_STORYBG:{url:"StoryBgView",type:cc.Prefab,bundleName:r.BoundleNameConst.StoryBg},UI_PAUSE_VIEW:{url:"PauseView",type:cc.Prefab,bundleName:r.BoundleNameConst.PauseView},UI_REBORN_VIEW:{url:"RebornView",type:cc.Prefab,bundleName:r.BoundleNameConst.RebornView},UIFINALE_REPORT:{url:"FinalReport",type:cc.Prefab,bundleName:r.BoundleNameConst.FinalReport},ComNodeBossBlood:{url:"ObjFight/nodeBossBlood",type:cc.Prefab,bundleName:r.BoundleNameConst.UIBattle},ComMonsterBlood:{url:"ObjFight/ComMonsterBlood",type:cc.Prefab,bundleName:r.BoundleNameConst.UIBattle},MonsterTipsPrefab:{url:"Com/MonsterTipsPrefab",type:cc.Prefab,bundleName:r.BoundleNameConst.UIBattle},ComCircleRocker:{url:"Com/ComCircleRocker",type:cc.Prefab,bundleName:r.BoundleNameConst.UIBattle},ComRedHurt:{url:"Com/ComRedHurt",type:cc.Prefab,bundleName:r.BoundleNameConst.UIBattle},damageBaoJi:{url:"prefab/BattleScene/BattleView/fontP/damageBaoJi",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},damageDodge:{url:"prefab/BattleScene/BattleView/fontP/damageDodge",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},damageFrozenDefense:{url:"prefab/BattleScene/BattleView/fontP/damageFrozenDefense",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},damagePuGong:{url:"prefab/BattleScene/BattleView/fontP/damagePuGong",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},damageRanShao:{url:"prefab/BattleScene/BattleView/fontP/damageRanShao",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},damageWudi:{url:"prefab/BattleScene/BattleView/fontP/damageWudi",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},UI_GUIDE_VIEW:{url:"prefab/GuideView/UIGuideView",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},UI_AD_PAUSE_VIEW:{url:"prefab/AdPauseView/UIAdPauseView",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},UI_COMMONREWARD:{url:"prefab/CommonRewardView/CommonRewardView",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},UI_CONFIRM_VIEW:{url:"prefab/ConfirmView",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},UI_PRIVACYSETTING_VIEW:{url:"prefab/PrivacySettingView",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},UI_TEST_VIEW:{url:"UITestView",type:cc.Prefab,bundleName:r.BoundleNameConst.TestView},UI_RECORD_VIDEO_VIEW:{url:"prefab/RecordVideoView",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},UI_RECORD_VIDEO_SHARE_VIEW:{url:"prefab/RecordShareView",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},UI_OFFLINE_REWARD:{url:"prefab/OfflineReward/OfflineReward",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},COM_TIPS_WORD:{url:"prefab/ComTipsWord",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},COM_SKILL_NAME:{url:"prefab/ComSkillName",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},COM_AD_BANNER:{url:"prefab/ComBannerAd",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},COM_AD_NATIVE:{url:"prefab/ComNativeAd",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},COM_AD_INTERSTITIAL:{url:"prefab/ComInterstitialAd",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},HALL_MINIVIEW_SHOP:{url:"ShopMiniView",type:cc.Prefab,bundleName:r.BoundleNameConst.ShopMiniVIew},HALL_MINIVIEW_TASK:{url:"TaskMiniView",type:cc.Prefab,bundleName:r.BoundleNameConst.TaskMiniView},HALL_MINIVIEW_CARD:{url:"CardMiniView",type:cc.Prefab,bundleName:r.BoundleNameConst.CardMiniView},HALL_MINIVIEW_EQUIPMENT:{url:"EquipmentMiniView",type:cc.Prefab,bundleName:r.BoundleNameConst.EquipmentMiniView},HALL_SIGNINVIEW:{url:"SigninView",type:cc.Prefab,bundleName:r.BoundleNameConst.SigninView},HALL_GETGOLD:{url:"ComGetGold",type:cc.Prefab,bundleName:r.BoundleNameConst.ChapterMiniView},HALL_GETDIAMOND:{url:"ComGetDiamond",type:cc.Prefab,bundleName:r.BoundleNameConst.ChapterMiniView},HALL_SHOUQMAIN:{url:"ComShouQMain",type:cc.Prefab,bundleName:r.BoundleNameConst.ChapterMiniView},HALL_SHOUQMY:{url:"ComShouQMy",type:cc.Prefab,bundleName:r.BoundleNameConst.ChapterMiniView},HALL_HIDEREWARD:{url:"HideRewardView",type:cc.Prefab,bundleName:r.BoundleNameConst.ChapterMiniView},HALL_ADDDESKTOP:{url:"addDesktopView",type:cc.Prefab,bundleName:r.BoundleNameConst.ChapterMiniView},EQUIPMENT_BREAK_DOWN_VIEW:{url:"EquipmentBreakDownView",type:cc.Prefab,bundleName:r.BoundleNameConst.EquipmentMiniView},EQUIPMENT_DETAILS_VIEW:{url:"EquipmentDetailsView",type:cc.Prefab,bundleName:r.BoundleNameConst.EquipmentMiniView},UI_LOADING_VIEW:{url:"LoadingView",type:cc.Prefab,bundleName:r.BoundleNameConst.LoadingView},UI_HALL_VIEW:{url:"HallView",type:cc.Prefab,bundleName:r.BoundleNameConst.ChapterMiniView},DamageNumberBaoJi:{url:"prefab/BattleScene/BattleView/fontP/damageBaoJi",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},DamageNumberPuGong:{url:"prefab/BattleScene/BattleView/fontP/damagePuGong",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},DamageNumberRanShao:{url:"prefab/BattleScene/BattleView/fontP/damageRanShao",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},DamageWudi:{url:"prefab/BattleScene/BattleView/fontP/damageWudi",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},DamageDodge:{url:"prefab/BattleScene/BattleView/fontP/damageDodge",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},FrozenDefense:{url:"prefab/BattleScene/BattleView/fontP/damageFrozenDefense",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},particle_green_guangzhulizi:{url:"art/particle/particle_green_guangzhulizi",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},particle_blue_guangzhulizi:{url:"art/particle/particle_blue_guangzhulizi",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},particle_purple_guangzhu:{url:"art/particle/particle_purple_guangzhu",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},particle_red_guangzhulizi:{url:"art/particle/particle_red_guangzhulizi",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},particle_yellow_guangzhulizi:{url:"art/particle/particle_yellow_guangzhulizi",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},particle_gunner_yanwu_1:{url:"art/particle/particle_gunner_yanwu_1",type:cc.Prefab,bundleName:r.BoundleNameConst.Common},monster_bat_1:{url:"prefab/BattleScene/BattleView/ObjFight/monster_bat_1",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_bat_2:{url:"prefab/BattleScene/BattleView/ObjFight/monster_bat_2",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_bat_3:{url:"prefab/BattleScene/BattleView/ObjFight/monster_bat_3",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_boss_blade:{url:"prefab/BattleScene/BattleView/ObjFight/monster_boss_blade",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_boss_frank:{url:"prefab/BattleScene/BattleView/ObjFight/monster_boss_frank",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_chaser_1:{url:"prefab/BattleScene/BattleView/ObjFight/monster_chaser_1",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_chaser_2:{url:"prefab/BattleScene/BattleView/ObjFight/monster_chaser_2",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_gunner_1:{url:"prefab/BattleScene/BattleView/ObjFight/monster_gunner_1",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_gunner_2:{url:"prefab/BattleScene/BattleView/ObjFight/monster_gunner_2",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},monster_gunner_3:{url:"prefab/BattleScene/BattleView/ObjFight/monster_gunner_3",type:cc.Prefab,bundleName:r.BoundleNameConst.Battle},ef_buff_hero_qhg:{url:"ef_buff_hero_qhg/ef_buff_hero_qhg",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_buff_hero_sght:{url:"ef_buff_hero_sght/ef_buff_hero_sght",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_buff_hero_sjjz:{url:"ef_buff_hero_sjjz/ef_buff_hero_sjjz",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_buff_hero_wdhd:{url:"ef_buff_hero_wdhd/ef_buff_hero_wdhd",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_buff_hero_blood:{url:"ef_buff_hero_blood/ef_buff_hero_blood",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_buff_hero_zygt:{url:"ef_buff_hero_zygt/ef_buff_hero_zygt",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_ksdd:{url:"ef_bullet_ksdd/ef_bullet_ksdd",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_m_frozen:{url:"ef_bullet_m_frozen/ef_bullet_m_frozen",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_chainlightning:{url:"ef_bullet_chainlightning/ef_bullet_chainlightning",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_skill_FullScreenBoom:{url:"ef_bullet_skill_FullScreenBoom/ef_bullet_skill_FullScreenBoom",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_pt_jiguang:{url:"ef_bullet_pt_jiguang/ef_bullet_pt_jiguang",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_gunner_1:{url:"ef_bullet_gunner_1/ef_bullet_gunner_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_gunner_2:{url:"ef_bullet_gunner_2/ef_bullet_gunner_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_gunner_3:{url:"ef_bullet_gunner_3/ef_bullet_gunner_3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_wrj_jiguang_1:{url:"ef_bullet_wrj_jiguang_1/ef_bullet_wrj_jiguang_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_yjdd:{url:"ef_bullet_yjdd/ef_bullet_yjdd",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_hero_02:{url:"ef_bullet_hero_02/ef_bullet_hero_02",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_fire_wrj_paokou:{url:"ef_fire_wrj_paokou/ef_fire_wrj_paokou",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_fire_zhupao:{url:"ef_fire_zhupao/ef_fire_zhupao",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_m_blood1:{url:"ef_hit_m_blood1/ef_hit_m_blood1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_m_frozen_1:{url:"ef_hit_m_frozen_1/ef_hit_m_frozen_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_m_frozen_2:{url:"ef_hit_m_frozen_2/ef_hit_m_frozen_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_buqiang:{url:"ef_hit_buqiang/ef_hit_buqiang",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_Skill_FullScreenboom:{url:"ef_hit_Skill_FullScreenboom/ef_hit_Skill_FullScreenboom",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_pt_fireball:{url:"ef_hit_pt_fireball/ef_hit_pt_fireball",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_pt_jiguang:{url:"ef_hit_pt_jiguang/ef_hit_pt_jiguang",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_chainlightning_1:{url:"ef_hit_chainlightning_1/ef_hit_chainlightning_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_chainlightning_2:{url:"ef_hit_chainlightning_2/ef_hit_chainlightning_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_wrj_jiguang3:{url:"ef_hit_wrj_jiguang3/ef_hit_wrj_jiguang3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_zhuozongdan:{url:"ef_hit_zhuozongdan/ef_hit_zhuozongdan",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_item_red_guangzhu:{url:"ef_item_red_guangzhu/ef_item_red_guangzhu",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_item_yellow_guangzhu:{url:"ef_item_yellow_guangzhu/ef_item_yellow_guangzhu",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_item_blue_guangzhu:{url:"ef_item_blue_guangzhu/ef_item_blue_guangzhu",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_item_green_guangzhu:{url:"ef_item_green_guangzhu/ef_item_green_guangzhu",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_item_purple_ziguangzhu:{url:"ef_item_purple_ziguangzhu/ef_item_purple_ziguangzhu",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_skill_fwkt:{url:"ef_skill_fwkt/ef_skill_fwkt",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_skill_chainlightning:{url:"ef_skill_chainlightning/ef_skill_chainlightning",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_skill_mgbf:{url:"ef_skill_mgbf/ef_skill_mgbf",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_skill_death:{url:"ef_skill_death/ef_skill_death",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_skill_wxct:{url:"ef_skill_wxct/ef_skill_wxct",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_m_gantanhao:{url:"ef_tips_m_gantanhao/ef_tips_m_gantanhao",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_warningboom_gantanhao_1:{url:"ef_tips_warningboom_gantanhao_1/ef_tips_warningboom_gantanhao_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_warningboom_line_1:{url:"ef_tips_warningboom_line_1/ef_tips_warningboom_line_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_dilie:{url:"ef_tips_dilie/ef_tips_dilie",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_warningboom_gantanhao_2:{url:"ef_tips_warningboom_gantanhao_2/ef_tips_warningboom_gantanhao_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_warningboom_line_2:{url:"ef_tips_warningboom_line_2/ef_tips_warningboom_line_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_jiantou:{url:"ef_tips_jiantou/ef_tips_jiantou",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_tips_qi:{url:"ef_tips_qi/ef_tips_qi",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ui_tips_skill_unlock:{url:"ui_tips_skill_unlock/ui_tips_skill_unlock",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_common_1:{url:"ef_die_common_1/ef_die_common_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_common_2:{url:"ef_die_common_2/ef_die_common_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_common_3:{url:"ef_die_common_3/ef_die_common_3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_common_4:{url:"ef_die_common_4/ef_die_common_4",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_m_1:{url:"ef_die_m_1/ef_die_m_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_m_2:{url:"ef_die_m_2/ef_die_m_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_m_3:{url:"ef_die_m_3/ef_die_m_3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_die_m_4:{url:"ef_die_m_4/ef_die_m_4",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_frank:{url:"ef_bullet_frank/ef_bullet_frank",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_pt_fireball_2:{url:"ef_bullet_pt_fireball_2/ef_bullet_pt_fireball_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_pt_fireball_3:{url:"ef_bullet_pt_fireball_3/ef_bullet_pt_fireball_3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_pt_fireball_2:{url:"ef_hit_pt_fireball_2/ef_hit_pt_fireball_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_pt_fireball_3:{url:"ef_hit_pt_fireball_3/ef_hit_pt_fireball_3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_bat_wave1:{url:"ef_bullet_bat_wave1/ef_bullet_bat_wave1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_bat_wave2:{url:"ef_bullet_bat_wave2/ef_bullet_bat_wave2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_bat_wave3:{url:"ef_bullet_bat_wave3/ef_bullet_bat_wave3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_gunner_1:{url:"ef_hit_gunner_1/ef_hit_gunner_1",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_gunner_2:{url:"ef_hit_gunner_2/ef_hit_gunner_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_gunner_3:{url:"ef_hit_gunner_3/ef_hit_gunner_3",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_skill_death_2:{url:"ef_skill_death_2/ef_skill_death_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_death:{url:"ef_hit_death/ef_hit_death",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_skill_chainlightning_2:{url:"ef_skill_chainlightning_2/ef_skill_chainlightning_2",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_hit_pt_jqhq:{url:"ef_hit_pt_jqhq/ef_hit_pt_jqhq",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all},ef_bullet_pt_jqhq:{url:"ef_bullet_pt_jqhq/ef_bullet_pt_jqhq",type:cc.Prefab,bundleName:r.BoundleNameConst.BattleSpineDir_all}},y={Chapter1:{url:"Chapter/MapChapter1",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes3},Chapter2:{url:"Chapter/MapChapter2",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes2},Chapter3:{url:"Chapter/MapChapter3",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1},Chapter4:{url:"Chapter/MapChapter4",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1},Chapter5:{url:"Chapter/MapChapter5",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes2},Chapter6:{url:"Chapter/MapChapter6",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes3},Chapter7:{url:"Chapter/MapChapter7",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1},Chapter8:{url:"Chapter/MapChapter8",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes2},Chapter9:{url:"Chapter/MapChapter9",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes3},Chapter10:{url:"Chapter/MapChapter10",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1},Chapter11:{url:"Chapter/MapChapter11",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes2},Chapter12:{url:"Chapter/MapChapter12",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes3},Chapter13:{url:"Chapter/MapChapter13",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1},Chapter14:{url:"Chapter/MapChapter14",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes2},Chapter15:{url:"Chapter/MapChapter15",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes3},Chapter16:{url:"Chapter/MapChapter16",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1},Chapter17:{url:"Chapter/MapChapter17",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes2},Chapter18:{url:"Chapter/MapChapter18",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes3},Chapter19:{url:"Chapter/MapChapter19",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1},Chapter20:{url:"Chapter/MapChapter20",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes2},Chapter999:{url:"Chapter/MapChapter999",type:cc.Prefab,bundleName:r.BoundleNameConst.MapRes1}},m={},v={config:{url:"config",type:cc.JsonAsset,isDir:!0,bundleName:r.BoundleNameConst.Common,isBlock:!0},icon2:{url:"icon2",type:cc.SpriteFrame,isDir:!0,bundleName:r.BoundleNameConst.Common,isBlock:!0},common:{url:"texture/common",type:cc.SpriteFrame,isDir:!0,bundleName:r.BoundleNameConst.Common}};r.ClientRes={2001:c.commonBullet,2002:c.tiechan,2003:c.zhuan,2004:c.nianye,2005:c.boss1_zidan,2006:c.boss2_zidan,2007:c.gongren_zidan,2008:c.yinerguai_zidan,2009:c.b_daodan,2010:c.yingzi,5122:g.particle_green_guangzhulizi,5123:g.particle_purple_guangzhu,5124:g.particle_yellow_guangzhulizi,5125:g.particle_blue_guangzhulizi,5126:g.particle_red_guangzhulizi,7001:f.bgm1,7008:f.click,7010:f.mainShoot1,7011:f.mainShoot2,7012:f.mainShoot3,7013:f.mainShoot4,7014:f.MK14,7015:f.M416,7016:f.M249,7100:f.SoundCoin,7102:f.guanbi,7103:f.jiesuan,7104:f.lingqujiangli,7105:f.sxy_dianji,7106:f.tanchu,7107:f.xp_shengji,7108:f.xp_zhuangbei,7109:f.zhu_bgm,7110:f.boss_bgm,8001:g.BOSSNODE,8103:g.summonsEmptyPlane,8104:g.summonsFixedTurret,8105:g.summonsMovingTurret,8200:g.monster_bat_1,8201:g.monster_bat_2,8202:g.monster_bat_3,8210:g.monster_chaser_1,8211:g.monster_chaser_2,8220:g.monster_gunner_1,8221:g.monster_gunner_2,8222:g.monster_gunner_3,8230:g.monster_boss_blade,8231:g.monster_boss_frank,1e4:g.particle_gunner_yanwu_1},r.ResCommon={atlas:l,sprite:c,font:h,json:m,audio:f,prefab:g,text:d,texture2D:u,imageName:p,preload:[v.config,v.icon2,g.UI_GUIDE_VIEW,g.UI_COMMONREWARD,g.UI_CONFIRM_VIEW,g.UI_TEST_VIEW,g.COM_SKILL_NAME,f.click,f.guanbi,f.jiesuan,f.lingqujiangli,f.sxy_dianji,f.tanchu,f.xp_shengji,f.xp_zhuangbei,f.zhu_bgm,g.UI_AD_PAUSE_VIEW,g.UI_OFFLINE_REWARD,g.COM_AD_BANNER,g.COM_AD_NATIVE,g.COM_AD_INTERSTITIAL],lazyLoadList:[]},r.ResMainScene={atlas:l,sprite:c,font:h,json:m,audio:f,prefab:g,text:d,texture2D:u,imageName:p,preload:[l.common1,v.common,g.UI_LOADING_VIEW,g.UI_HALL_VIEW,g.HALL_MINIVIEW_EQUIPMENT,g.HALL_SIGNINVIEW,g.HALL_HIDEREWARD,g.HALL_ADDDESKTOP,g.HALL_GETGOLD,g.HALL_GETDIAMOND],lazyLoadList:[g.HALL_MINIVIEW_SHOP,g.HALL_MINIVIEW_TASK,g.HALL_MINIVIEW_CARD]},r.ResBattleScene={map:y,prefab:g,preload:[r.MyBundle.BattleSpineDir_all,f.bgm1,f.mainShoot1,f.mainShoot2,f.mainShoot3,f.mainShoot4,f.MK14,f.M416,f.M249,f.SoundCoin,u.m_chaser_1,u.m_gunner_1,g.UI_REWARD_SKILL,g.UI_REWARD_SKILL_ONE,g.UI_REWARD_SKILL_2SELECT1,g.UI_RANDOMEVENT_VIEW,g.UI_BattleUI,g.ComMonsterBlood,g.MonsterTipsPrefab,g.ComCircleRocker,g.ComRedHurt,g.DamageNumberBaoJi,g.DamageNumberPuGong,g.summonsEmptyPlane,g.summonsFixedTurret,g.summonsMovingTurret,g.monster_boss_frank,g.monster_chaser_1,g.monster_gunner_1,g.UI_PAUSE_VIEW,g.UI_REBORN_VIEW,g.UIFINALE_REPORT,g.ef_skill_fwkt,g.ef_skill_chainlightning,g.ef_skill_mgbf,g.ef_skill_death,g.ef_tips_m_gantanhao,g.ef_tips_dilie,g.ef_tips_jiantou,g.ef_buff_hero_qhg,g.ef_buff_hero_sght,g.ef_buff_hero_sjjz,g.ef_buff_hero_wdhd,g.ef_buff_hero_blood,g.ef_buff_hero_zygt,g.ef_bullet_chainlightning,g.ef_bullet_gunner_1,g.ef_bullet_hero_02,g.ef_fire_wrj_paokou,g.ef_fire_zhupao,g.ef_hit_m_blood1,g.ef_hit_buqiang,g.ef_hit_chainlightning_1,g.ef_hit_chainlightning_2,g.ef_tips_qi,g.ui_tips_skill_unlock,g.ef_die_common_1,g.ef_die_common_2,g.ef_die_common_3,g.ef_die_common_4,g.ef_die_m_1,g.ef_die_m_2,g.ef_die_m_3,g.ef_die_m_4,g.ef_bullet_frank,g.ef_hit_gunner_1,g.ef_skill_death_2,g.ef_hit_death,g.ef_skill_chainlightning_2,g.particle_gunner_yanwu_1],lazyLoadList:[f.bgm1,f.boss_bgm,f.mainShoot1,f.mainShoot2,f.mainShoot3,f.mainShoot4,f.MK14,f.M416,f.M249,f.SoundCoin,c.yingzi,g.UI_REWARD_SKILL,g.UI_REWARD_SKILL_ONE,g.UI_REWARD_SKILL_2SELECT1,g.UI_RANDOMEVENT_VIEW,g.UI_BattleUI,g.UI_ARROW_VIEW,g.UI_WARNING_VIEW,g.UI_STORYBG,g.ComNodeBossBlood,g.ComMonsterBlood,g.MonsterTipsPrefab,g.ComCircleRocker,g.ComRedHurt,c.commonBullet,c.tiechan,c.zhuan,c.nianye,c.boss1_zidan,c.boss2_zidan,c.gongren_zidan,c.yinerguai_zidan,c.b_daodan,u.m_bat_1,u.m_bat_2,u.m_bat_3,u.m_chaser_1,u.m_chaser_2,u.m_gunner_1,u.m_gunner_2,u.m_gunner_3,g.DamageNumberBaoJi,g.DamageNumberPuGong,g.DamageNumberRanShao,g.DamageWudi,g.DamageDodge,g.FrozenDefense,g.BOSSNODE,g.summonsEmptyPlane,g.summonsFixedTurret,g.summonsMovingTurret,g.particle_green_guangzhulizi,g.particle_blue_guangzhulizi,g.particle_purple_guangzhu,g.particle_red_guangzhulizi,g.particle_yellow_guangzhulizi,g.particle_gunner_yanwu_1,g.monster_bat_1,g.monster_bat_2,g.monster_bat_3,g.monster_boss_blade,g.monster_boss_frank,g.monster_chaser_1,g.monster_chaser_2,g.monster_gunner_1,g.monster_gunner_2,g.monster_gunner_3,g.UI_PAUSE_VIEW,g.UI_REBORN_VIEW,g.UIFINALE_REPORT,g.ef_buff_hero_qhg,g.ef_buff_hero_sght,g.ef_buff_hero_sjjz,g.ef_buff_hero_wdhd,g.ef_buff_hero_blood,g.ef_buff_hero_zygt,g.ef_bullet_ksdd,g.ef_bullet_m_frozen,g.ef_bullet_chainlightning,g.ef_bullet_skill_FullScreenBoom,g.ef_bullet_pt_jiguang,g.ef_bullet_gunner_1,g.ef_bullet_gunner_2,g.ef_bullet_gunner_3,g.ef_bullet_wrj_jiguang_1,g.ef_bullet_yjdd,g.ef_bullet_hero_02,g.ef_fire_wrj_paokou,g.ef_fire_zhupao,g.ef_hit_m_blood1,g.ef_hit_m_frozen_1,g.ef_hit_m_frozen_2,g.ef_hit_buqiang,g.ef_hit_Skill_FullScreenboom,g.ef_hit_pt_fireball,g.ef_hit_pt_jiguang,g.ef_hit_chainlightning_1,g.ef_hit_chainlightning_2,g.ef_hit_wrj_jiguang3,g.ef_hit_zhuozongdan,g.ef_item_red_guangzhu,g.ef_item_yellow_guangzhu,g.ef_item_blue_guangzhu,g.ef_item_green_guangzhu,g.ef_item_purple_ziguangzhu,g.ef_skill_fwkt,g.ef_skill_chainlightning,g.ef_skill_mgbf,g.ef_skill_death,g.ef_skill_wxct,g.ef_tips_m_gantanhao,g.ef_tips_warningboom_gantanhao_1,g.ef_tips_warningboom_line_1,g.ef_tips_dilie,g.ef_tips_warningboom_gantanhao_2,g.ef_tips_warningboom_line_2,g.ef_tips_jiantou,g.ef_die_common_1,g.ef_die_common_2,g.ef_die_common_3,g.ef_die_common_4,g.ef_die_m_1,g.ef_die_m_2,g.ef_die_m_3,g.ef_die_m_4,g.ef_bullet_frank,g.ef_bullet_pt_fireball_2,g.ef_bullet_pt_fireball_3,g.ef_hit_pt_fireball_2,g.ef_hit_pt_fireball_3,g.ef_bullet_bat_wave1,g.ef_bullet_bat_wave2,g.ef_bullet_bat_wave3,g.ef_hit_gunner_1,g.ef_hit_gunner_2,g.ef_hit_gunner_3,g.ef_skill_death_2,g.ef_hit_death,g.ef_bullet_pt_jqhq,g.ef_hit_pt_jqhq,g.ef_skill_chainlightning_2],getSpecialNeedsResList:function(){var t=[],e=a.default.levelServer.getCurChapter();return t.push(y["Chapter"+e]),t}},r.SceneRes=((n={})[s.SCENE.MAIN]=r.ResMainScene,n[s.SCENE.BATTLE]=r.ResBattleScene,n),cc._RF.pop()},{}],RandomEventPreconditionTable:[function(t,e,i){"use strict";cc._RF.push(e,"9b9f2TLuh1MB4C6CwTxwcOe","RandomEventPreconditionTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("RandomEventPreconditionVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("random_event_precondition"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],RandomEventPreconditionVO:[function(t,e,i){"use strict";cc._RF.push(e,"7b255IbxaRE0bk8iIHturMX","RandomEventPreconditionVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.judgeCondition=t[1],this.judgeSign=t[2],this.judgeNum=t[3],this.param1=t[4]},cc._RF.pop()},{}],RandomEventTable:[function(t,e,i){"use strict";cc._RF.push(e,"e32e91AQwVGv78SI0L7FKM0","RandomEventTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("RandomEventVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("random_event_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],RandomEventVO:[function(t,e,i){"use strict";cc._RF.push(e,"74b25IlTO5Bxreqr4Xsfs4k","RandomEventVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.type=t[1],this.eventDesc=t[2],this.require=t[3],this.option1=t[4],this.option1Video=t[5],this.option1Desc=t[6],this.option1Drop=t[7],this.option2=t[8],this.option2Video=t[9],this.option2Desc=t[10],this.option2Drop=t[11]},cc._RF.pop()},{}],RandomRewardUtils:[function(t,e,i){"use strict";cc._RF.push(e,"5d0e0B5Jz9G3ahalqXDX5PP","RandomRewardUtils");var n=t,o=i,r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.randomConditionEnum=void 0;var a,s=n("App"),l=n("ArrayUtils"),c=n("Tbl"),u=cc._decorator,p=u.ccclass;u.property,function(t){t.levelProgress="level_progress",t.heroHp="hero_hp",t.chapterId="chapter_id",t.heroItem="hero_item",t.heroCard="hero_card",t.heroTotalKill="hero_total_kill",t.heroTotalDamage="hero_total_damage"}(a=o.randomConditionEnum||(o.randomConditionEnum={}));var d=function(){function t(){}return t.getRandomEventByList=function(t){for(var e=t.length-1;e>=0;e--){var i=t[e][0],n=c.default.RandomEventTable.findById(i).require;if(null!=n)for(var o=0;o<n.length;o++){var r=n[o],u=c.default.RandomEventPreconditionTable.findById(r),p=u.judgeCondition,d=u.judgeSign,h=u.judgeNum,f=u.param1||0,g=!1;switch(p){case a.levelProgress:var y=s.default.levelServer.getCurChapterVO(),m=s.default.levelServer.getCurLevel()/y.levelRange[1]*100;if(1===d){if(m<=h){t.splice(e,1),g=!0;break}}else if(2===d){if(m>=h){t.splice(e,1),g=!0;break}}else if(3===d&&m!=h){t.splice(e,1),g=!0;break}break;case a.heroHp:var v=100*s.default.heroMgr.getHpPercent();if(1===d){if(v<=h){t.splice(e,1),g=!0;break}}else if(2===d){if(v>=h){t.splice(e,1),g=!0;break}}else if(3===d&&v!=h){t.splice(e,1),g=!0;break}break;case a.chapterId:var _=s.default.levelServer.getCurChapter();if(1===d){if(_<=h){t.splice(e,1),g=!0;break}}else if(2===d){if(_>=h){t.splice(e,1),g=!0;break}}else if(3===d&&_!=h){t.splice(e,1),g=!0;break}break;case a.heroItem:var C=s.default.bagMgr.getItemNum(h);if(1===d){if(C<=f){t.splice(e,1),g=!0;break}}else if(2===d){if(C>=f){t.splice(e,1),g=!0;break}}else if(3===d&&C!=f){t.splice(e,1),g=!0;break}break;case a.heroCard:var b=s.default.cardMgr.isCardInSlot(h);if(1===d&&!b){t.splice(e,1),g=!0;break}if(2===d&&b){t.splice(e,1),g=!0;break}break;case a.heroTotalKill:var S=s.default.levelServer.getTotalKill();if(1===d){if(S<=h){t.splice(e,1),g=!0;break}}else if(2===d){if(S>=h){t.splice(e,1),g=!0;break}}else if(3===d&&S!=h){t.splice(e,1),g=!0;break}break;case a.heroTotalDamage:var O=s.default.levelServer.getTotalDamage();if(1===d){if(O<=h){t.splice(e,1),g=!0;break}}else if(2===d){if(O>=h){t.splice(e,1),g=!0;break}}else if(3===d&&O!=h){t.splice(e,1),g=!0;break}}if(g)break}}return l.default.getNumByWeight(t)},r([p],t)}();o.default=d,cc._RF.pop()},{}],RebornView:[function(t,e,i){"use strict";cc._RF.push(e,"f71abKQF7FP5KxGpN+AZ5gG","RebornView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("Recorder"),d=o("ActionUtils"),h=o("AdaptUtils"),f=o("CommonCfgUtils"),g=o("BaseView"),y=o("CCEvent"),m=o("UI"),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._scene=null,e._itemList=[],e.isPauseTimer=!1,e}return a(e,t),e.prototype.onLoad=function(){this.addMask()},e.prototype.start=function(){t.prototype.start.call(this),this.initData(),this.initUI(),this.initTime(),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playWechatAd=function(){},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_Reborn,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initTest=function(){var t=this,e=this.getC("btnTest");c.default.onClick(e,function(){c.default.audioMgr.playSoundByResId(114),c.default.viewMgr.showUIWithoutSound(m.UI.FINAL_REPORT,t._scene),t.closeSelf()})},e.prototype.onDestroy=function(){cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(y.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(y.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(y.default.HUAWEI_CLOSE_NATIVE),t.prototype.onDestroy.call(this),this._scene.pauseScene(!1)},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");h.default.adaptSize2Winsize(t)},e.prototype.initData=function(){this._scene=this.getArgs()[0],this._scene.pauseScene(!0)},e.prototype.initUI=function(){this.initBtn()},e.prototype.initBtn=function(){var t=this,e=this.getC("btnReborn");cc.tween(e).repeatForever(cc.tween(e).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),c.default.onClick(e,function(){t.isPauseTimer=!0;var e=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),e?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),t.isPauseTimer=!1,t.rebornHero(),t.closeSelf()}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),cc.audioEngine.resumeMusic(),t.isPauseTimer=!1,t.closeSelf(),p.default.getInstance().dotLevelFail(),t.emit(y.default.LEVEL_FAIL),t.emit(y.default.CHAPTER_FINISH,1)}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic(),t.isPauseTimer=!1,t.closeSelf(),p.default.getInstance().dotLevelFail(),t.emit(y.default.LEVEL_FAIL),t.emit(y.default.CHAPTER_FINISH,1))});var i=this.getC("btnRefuse");i.active=!1,setTimeout(function(){i.active=!0},1200),c.default.onClick(i,function(){p.default.getInstance().dotLevelFail(),t.emit(y.default.LEVEL_FAIL),t.closeSelf(),t.emit(y.default.CHAPTER_FINISH,1)});var n=this.getC("touchNodeFast");c.default.onClick(n,function(){t.time--})},e.prototype.initTime=function(){var t=this;this.time=f.default.get("Reborn_Video_Timeout").number;var e=this.time;this.setTimeStr(String(this.time)),d.default.repeat(this.node,.05,function(){t.isPauseTimer||(t.time<=-1&&(p.default.getInstance().dotLevelFail(),t.emit(y.default.LEVEL_FAIL),t.closeSelf(),t.emit(y.default.CHAPTER_FINISH,1)),t.time-=.05)});var i=this.getC("sprBar").getComponent(cc.ProgressBar);d.default.repeat(this.node,.05,function(){t.time<0?(i.progress=0,t.setTimeStr(String(0))):(i.progress=t.time/e,t.setTimeStr(String(Math.ceil(t.time))))})},e.prototype.setTimeStr=function(t){this.getC("labNum").getComponent(cc.Label).string=t},e.prototype.rebornHero=function(){this._scene.getObjhero().rebornHero(),c.default.levelServer.addRebornTime(),p.default.getInstance().dotHeroResurrected()},s([_],e)}(g.default));r.default=C,cc._RF.pop()},{}],RecordShareView:[function(t,e,i){"use strict";cc._RF.push(e,"94c7cqmMDFJE4TsM/6kTCJi","RecordShareView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("Recorder"),u=o("ShareTT"),p=o("TipsUtils"),d=o("BaseView"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){this.initUI()},e.prototype.initUI=function(){var t=this;this.btnNo=this.getC("btnNo"),this.btnShare=this.getC("btnShare"),l.default.onClick(this.btnNo,function(){t.closeSelf()}),l.default.onClick(this.btnShare,function(){var e=c.default.getInstance().getVideoPath();null!=e?(u.default.shareVideo(e),t.closeSelf()):(p.default.showTips("Recording failed"),t.closeSelf())})},s([f],e)}(d.default));r.default=g,cc._RF.pop()},{}],RecordVideoView:[function(t,e,i){"use strict";cc._RF.push(e,"9e855d1xHZBebLQOjppdPDu","RecordVideoView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("Recorder"),u=o("TipsUtils"),p=o("BaseView"),d=o("UI"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){this.initUI()},e.prototype.initUI=function(){this.btnStartRecode=this.getC("btnStartRecode"),this.sprStartRecord=this.getC("sprStartRecord"),this.sprStopRecord=this.getC("sprStopRecord"),this.labName=this.getC("labName"),l.default.onClick(this.btnStartRecode,function(){if(!l.default.viewMgr.isViewShowing(d.UI.RECORD_VIDEO_SHARE_VIEW))if(c.default.getInstance().isShowRecordVideoStarting()){if(!c.default.getInstance().isOverMinRecordTime())return void u.default.showTips("Screen recording time can't be less than 3s");c.default.getInstance().stopRecordVideo()}else c.default.getInstance().startRecordVideo()})},e.prototype.update=function(){c.default.getInstance().isShowRecordVideoStarting()?(this.sprStartRecord.active=!1,this.sprStopRecord.active=!0,this.setString(this.labName,"Recording..")):(this.sprStartRecord.active=!0,this.sprStopRecord.active=!1,this.setString(this.labName,"Recording"))},s([f],e)}(p.default));r.default=g,cc._RF.pop()},{}],RecorderAndroidHelper:[function(t,e,i){"use strict";cc._RF.push(e,"25ecfjHyvpL+ZIJSCzoVbUd","RecorderAndroidHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onEvent=function(){},e}(o("RecorderHelper").default);r.default=s,cc._RF.pop()},{}],RecorderConst:[function(t,e,i){"use strict";cc._RF.push(e,"f70cetH1edCea7ZAe5uy9ST","RecorderConst");var n,o,r=i;Object.defineProperty(r,"__esModule",{value:!0}),r.BI_VIDEO_SUBTYPE=r.WechatRecordEventConfig=r.AndroidRecordEventName=r.BaseRecordEventName=void 0,r.BaseRecordEventName={EnterLoadingView:"EnterLoadingView",EndLoadingView:"EndLoadingView",FinalReportTouchBackHallView:"FinalReportTouchBackHallView",ClickStory:"ClickStory",SeleSkill:"SeleSkill",HeroAttack:"HeroAttack",CrossView:"CrossView",LevelSuccessReward:"LevelSuccessReward",ClickPractice:"ClickPractice",EquipmentSystem:"EquipmentSystem",ClickDagger:"ClickDagger",EquipmentWear:"EquipmentWear",ClickBack:"ClickBack",ClickPVE:"ClickPVE",GameStart:"GameStart",OpenHallView:"OpenHallView",GameBegin:"GameBegin",GameBeginCommonResFinish:"GameBeginCommonResFinish",GameBeginEnterFighting:"GameBeginEnterFighting",GameEnterLoadResAppInitializeTool:"GameEnterLoadRes_1_0_0",GameEnterLoadResStartLoadCommonRes:"GameEnterLoadRes_1_1_0",GameEnterLoadReshandlerResLoadSucc:"GameEnterLoadRes_1_1_1",GameEnterLoadResInitTblBegin:"GameEnterLoadRes_1_2_0",GameEnterLoadResInitTblEnd:"GameEnterLoadRes_1_2_1",GameEnterLoginRequestSdkLogin:"GameEnterLogin_2_0_0",GameEnterLoginRequestSdkLoginSuccess:"GameEnterLogin_2_0_1",GameEnterLoginGetServerListSuccess:"GameEnterLogin_2_1_0",GameEnterLoginOnOpen:"GameEnterLogin_2_2_0",GameEnterLoginRequestlogin:"GameEnterLogin_2_3_0",GameEnterLoginHandlerLoginSucc:"GameEnterLogin_2_3_1",GameEnterLoginCreataRole:"GameEnterLogin_2_4_0",GameEnterLoginRequestRoleInfo:"GameEnterLogin_2_5_0",GameEnterLoginGetRoleInfo:"GameEnterLogin_2_5_1",GameEnterLoginRequestRoleSettingInfo:"GameEnterLogin_2_7_0",GameEnterFightingStart:"GameEnterFighting_3_0_0",GameEnterFightingInitHero:"GameEnterFighting_3_1_0",GameEnterFightingShowStoryView:"GameEnterFighting_3_2_0",GameEnterFightingCloseStoryView:"GameEnterFighting_3_2_1",HeroDiePVE:"HeroDiePVE",HeroReborn:"HeroReborn",LevelSuccess:"LevelSuccess",LevelFail:"LevelFail",ChapterSuccess:"ChapterSuccess",TouchVideo:"TouchVideo",VideoBegin:"VideoBegin",VideoEnd:"VideoEnd",AdRetureVal:"AdRetureVal",AdBtnShow:"AdBtnShow",HeroDied:"HeroDied",HeroResurrected:"HeroResurrected",FirstPayInfo:"FirstPayInfo",PayBtnShow:"PayBtnShow",PayBtnClick:"PayBtnClick",GuideTriggle:"GuideTriggle",GuideFinishPoint:"GuideFinishPoint",GuideFinishLine:"GuideFinishLine",GuideJumpGuide:"GuideJumpGuide"},r.AndroidRecordEventName=((n={})[r.BaseRecordEventName.LevelSuccess]="level_success",n[r.BaseRecordEventName.LevelFail]="level_fail",n[r.BaseRecordEventName.ChapterSuccess]="chapter_success",n[r.BaseRecordEventName.TouchVideo]="gt_ad_request",n[r.BaseRecordEventName.VideoBegin]="dl_ad_show",n[r.BaseRecordEventName.VideoEnd]="dl_ad_show_end",n[r.BaseRecordEventName.AdRetureVal]="dl_ad_send",n[r.BaseRecordEventName.AdBtnShow]="dl_ad_button_show",n[r.BaseRecordEventName.HeroDied]="hero_died",n[r.BaseRecordEventName.HeroResurrected]="hero_resurrected",n[r.BaseRecordEventName.FirstPayInfo]="bz_pay_first",n[r.BaseRecordEventName.PayBtnClick]="bz_pay_button_click",n[r.BaseRecordEventName.GuideTriggle]="dl_guide_triggle",n[r.BaseRecordEventName.GuideFinishPoint]="dl_guide_finish_point",n[r.BaseRecordEventName.GuideFinishLine]="dl_guide_finish_line",n),r.WechatRecordEventConfig=((o={})[r.BaseRecordEventName.GameBegin]={isRepeat:!1},o[r.BaseRecordEventName.GameBeginCommonResFinish]={isRepeat:!1},o[r.BaseRecordEventName.GameBeginEnterFighting]={isRepeat:!1},o[r.BaseRecordEventName.FinalReportTouchBackHallView]={isRepeat:!1},o[r.BaseRecordEventName.OpenHallView]={isRepeat:!1},o[r.BaseRecordEventName.HeroDiePVE]={isRepeat:!1},o[r.BaseRecordEventName.HeroReborn]={isRepeat:!0,maxRecordChapter:3},o[r.BaseRecordEventName.LevelSuccess]={isRepeat:!1},o[r.BaseRecordEventName.LevelFail]={isRepeat:!1},o[r.BaseRecordEventName.ChapterSuccess]={isRepeat:!1},o[r.BaseRecordEventName.TouchVideo]={isRepeat:!0},o[r.BaseRecordEventName.VideoBegin]={isRepeat:!0},o[r.BaseRecordEventName.VideoEnd]={isRepeat:!0},o[r.BaseRecordEventName.AdRetureVal]={isRepeat:!0},o[r.BaseRecordEventName.AdBtnShow]={isRepeat:!0},o[r.BaseRecordEventName.HeroDied]={isRepeat:!0},o[r.BaseRecordEventName.HeroResurrected]={isRepeat:!0},o[r.BaseRecordEventName.FirstPayInfo]={isRepeat:!0},o[r.BaseRecordEventName.PayBtnShow]={isRepeat:!0},o[r.BaseRecordEventName.PayBtnClick]={isRepeat:!0},o[r.BaseRecordEventName.GuideTriggle]={isRepeat:!1},o[r.BaseRecordEventName.GuideFinishPoint]={isRepeat:!1},o[r.BaseRecordEventName.GuideFinishLine]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoadResAppInitializeTool]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoadResStartLoadCommonRes]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoadReshandlerResLoadSucc]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoadResInitTblBegin]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoadResInitTblEnd]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginRequestSdkLogin]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginRequestSdkLoginSuccess]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginGetServerListSuccess]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginOnOpen]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginRequestlogin]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginHandlerLoginSucc]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginCreataRole]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginRequestRoleInfo]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginGetRoleInfo]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterLoginRequestRoleSettingInfo]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterFightingStart]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterFightingInitHero]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterFightingShowStoryView]={isRepeat:!1},o[r.BaseRecordEventName.GameEnterFightingCloseStoryView]={isRepeat:!1},o),function(t){t[t.videoOpen=0]="videoOpen",t[t.userCloseVideo=1]="userCloseVideo",t[t.clickVideoBtn=2]="clickVideoBtn",t[t.closeVideo=3]="closeVideo",t[t.videoPlayOver=4]="videoPlayOver",t[t.videoReward=5]="videoReward",t[t.noVideo=6]="noVideo",t[t.showVideoBtn=7]="showVideoBtn"}(r.BI_VIDEO_SUBTYPE||(r.BI_VIDEO_SUBTYPE={})),cc._RF.pop()},{}],RecorderHelper:[function(t,e,i){"use strict";cc._RF.push(e,"82850Nn355MM4N0EoE0pKo1","RecorderHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ReocordVideoStatusEnum=void 0;var s,l=o("LoggerUtils"),c=o("LevelServer"),u=o("Singleton"),p=o("UserUtils"),d=o("RecorderConst");(function(t){t[t.Idle=1]="Idle",t[t.Start=2]="Start",t[t.Stop=3]="Stop"})(s=r.ReocordVideoStatusEnum||(r.ReocordVideoStatusEnum={}));var h=function(t){function e(){var e=t.call(this)||this;return e._status=s.Idle,e._minRecordTime=3,e._remainMinRecordTime=0,e._videoPath=null,e}return a(e,t),e.prototype.getPlatformRecordEventConfig=function(){return d.WechatRecordEventConfig},e.prototype.canRecode=function(t,e){if(!this.isNullConfig(t))return this.isCanRepeatConfig(t)?this.isChapterCanRecord(t):!this.hasRecord(t,e)&&this.isChapterCanRecord(t);console.log("[RecorderWechatHelper] \u6280\u672f:\u53ef\u80fd\u6ca1\u6709\u5907\u6ce8\u4e8b\u4ef6\u662f\u5426\u91cd\u590d")},e.prototype.isNullConfig=function(t){if(null==d.WechatRecordEventConfig[t])return!0},e.prototype.isChapterCanRecord=function(t){return null==d.WechatRecordEventConfig[t].maxRecordChapter||c.default.getInstance().getCurChapter()<=d.WechatRecordEventConfig[t].maxRecordChapter},e.prototype.hasRecord=function(t,e){return this.getRecordTimes(t,e)>0},e.prototype.recordOnce=function(t,e){var i=this.getSaveName(t,e),n=p.default.getFloatVal(i,0);p.default.setFloatVal(i,n+1)},e.prototype.getRecordTimes=function(t,e){var i=this.getSaveName(t,e);return p.default.getFloatVal(i,0)},e.prototype.getSaveName=function(t,e){return e&&e.chapter&&e.level?"[Recorder]"+t+e.chapter+e.level:"[Recorder]"+t},e.prototype.onBIEvent=function(t,e,i,n){console.log("[RecorderHelper] bi \u6253\u70b9:",t,e,n,i)},e.prototype.onBIVideoEvent=function(t,e){console.log("[RecorderHelper] bi \u89c6\u9891\u6253\u70b9:",t,e)},e.prototype.onBIAppOnceEvent=function(t){console.log("[RecorderHelper] bi \u6f0f\u6597\u6253\u70b9:",t)},e.prototype.dotTouchVideo=function(){},e.prototype.dotVideoBegin=function(){},e.prototype.dotVideoEnd=function(){},e.prototype.dotVideoOpen=function(){},e.prototype.dotUserCloseVideo=function(){},e.prototype.dotClickVideoBtn=function(){},e.prototype.dotCloseVideo=function(){},e.prototype.dotVideoPlayOver=function(){},e.prototype.dotVideoReward=function(){},e.prototype.dotNoVideo=function(){},e.prototype.dotShowVideoBtn=function(){},e.prototype.dotEnterLoadingView=function(){},e.prototype.dotEndLoadingView=function(){},e.prototype.dotBackToHallView=function(){},e.prototype.dotOpenHallView=function(){},e.prototype.HeroReborn=function(){},e.prototype.dotGameStart=function(){},e.prototype.dotGameBegin=function(){},e.prototype.dotGameBeginCommonResFinish=function(){},e.prototype.dotGameBeginEnterFighting=function(){},e.prototype.dotLevelSuccess=function(){},e.prototype.dotLevelFail=function(){},e.prototype.dotChapterSuccess=function(){},e.prototype.dotHeroDie=function(){},e.prototype.dotHeroDied=function(){},e.prototype.dotClickStory=function(){},e.prototype.dotSeleSkill=function(){},e.prototype.dotHeroAttack=function(){},e.prototype.dotCrossView=function(){},e.prototype.dotLevelSuccessReward=function(){},e.prototype.dotClickPractice=function(){},e.prototype.dotEquipmentSystem=function(){},e.prototype.dotClickDagger=function(){},e.prototype.dotEquipmentWear=function(){},e.prototype.dotClickBack=function(){},e.prototype.dotClickPVE=function(){},e.prototype.dotRewardVideoAdReturn=function(){},e.prototype.dotFirstPayInfo=function(){},e.prototype.dotAdBtnShow=function(){},e.prototype.dotPayBtnShow=function(){},e.prototype.dotPayBtnClick=function(){},e.prototype.dotGuideTriggle=function(){},e.prototype.dotFinishGuidePoint=function(){},e.prototype.dotFinishGuideLine=function(){},e.prototype.dotJumpGuideLine=function(){},e.prototype.isCanRepeatConfig=function(t){return d.WechatRecordEventConfig[t].isRepeat},e.prototype.onEvent=function(){console.warn("[RecorderHelper] onEvent \u5e94\u8be5\u7531\u5b50\u7c7b\u91cd\u5199\uff01")},e.prototype.startRecordVideo=function(){return console.warn("[RecorderHelper] startRecordVideo \u5e94\u8be5\u7531\u5b50\u7c7b\u91cd\u5199\uff01"),this._status!=s.Start||(l.default.error("\u89c6\u9891\u72b6\u6001\u64ad\u653e\u4e2d,\u4e0d\u80fd\u91cd\u590d\u64ad\u653e"),!1)},e.prototype.stopRecordVideo=function(){return console.warn("[RecorderHelper] stopRecordVideo \u5e94\u8be5\u7531\u5b50\u7c7b\u91cd\u5199\uff01"),this._status==s.Start||(l.default.error("\u89c6\u9891\u4e0d\u662f\u64ad\u653e\u4e2d,\u4e0d\u80fd\u505c\u6b62"),!1)},e.prototype.isShowRecordVideoView=function(){return console.warn("[RecorderHelper] isShowRecordVideoView \u5e94\u8be5\u7531\u5b50\u7c7b\u91cd\u5199\uff01"),!1},e.prototype.isShowRecordVideoStarting=function(){return this._status==s.Start},e.prototype.isOverMinRecordTime=function(){return l.default.info("RecorderHelper >>>>>>>> 59 this._remainMinRecordTime = ",this._remainMinRecordTime),this._remainMinRecordTime<0},e.prototype.getRemainMinRecordTime=function(){return this._remainMinRecordTime},e.prototype.getVideoPath=function(){return this._videoPath},e.prototype.onTick=function(t){this.isShowRecordVideoStarting()&&(this._remainMinRecordTime-=t)},e}(u.default);r.default=h,cc._RF.pop()},{}],RecorderHuaweiHelper:[function(t,e,i){"use strict";cc._RF.push(e,"648832yElpOEpN6uDntkHDE","RecorderHuaweiHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return e.initVideoRecord(),e}return a(e,t),e.prototype.initVideoRecord=function(){},e.prototype.startRecordVideo=function(){return!1},e.prototype.stopRecordVideo=function(){return!1},e.prototype.onEvent=function(){},e.prototype.isShowRecordVideoView=function(){return!1},e}(o("RecorderHelper").default);r.default=s,cc._RF.pop()},{}],RecorderIosHelper:[function(t,e,i){"use strict";cc._RF.push(e,"e3d19up6kBGnJazXZFM6kOJ","RecorderIosHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onEvent=function(t,e,i){console.log("[RecorderIosHelper] onEvent > %s",i),cc.sys.isNative&&jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",i)},e}(o("RecorderHelper").default);r.default=s,cc._RF.pop()},{}],RecorderMgrTT:[function(t,e,i){"use strict";cc._RF.push(e,"56114jqheRANoni6F+kxWnR","RecorderMgrTT");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return e.isCanRecord=!0,e.recorder=null,e.recordData={state:"init",startTime:0,pauseTime:0,resumeTime:0,endTime:0,timer:0},e.isSucc=null,e.videoPath=null,e.clipIndexList=[],e}return a(e,t),e}(o("Singleton").default);r.default=s,cc._RF.pop()},{}],RecorderOPPOHelper:[function(t,e,i){"use strict";cc._RF.push(e,"68d26GIBfZFS4AOeq3VsGHV","RecorderOPPOHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return e.initVideoRecord(),e}return a(e,t),e.prototype.initVideoRecord=function(){},e.prototype.startRecordVideo=function(){return!1},e.prototype.stopRecordVideo=function(){return!1},e.prototype.onEvent=function(){},e.prototype.isShowRecordVideoView=function(){return!1},e}(o("RecorderHelper").default);r.default=s,cc._RF.pop()},{}],RecorderShouQHelper:[function(t,e,i){"use strict";cc._RF.push(e,"d00b1cYd05Cvrn86OYM+FmG","RecorderShouQHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return e.initVideoRecord(),e}return a(e,t),e.prototype.initVideoRecord=function(){},e.prototype.startRecordVideo=function(){return!1},e.prototype.stopRecordVideo=function(){return!1},e.prototype.onEvent=function(t,e){wx.uma.trackEvent(t,e)},e.prototype.isShowRecordVideoView=function(){return!1},e}(o("RecorderHelper").default);r.default=s,cc._RF.pop()},{}],RecorderTTHelper:[function(t,e,i){"use strict";cc._RF.push(e,"2a595MkuSZK07e8u8IPlaxP","RecorderTTHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("UI"),l=o("App"),c=o("RecorderHelper"),u=function(t){function e(){var e=t.call(this)||this;return e.initVideoRecord(),e}return a(e,t),e.prototype.initVideoRecord=function(){var t=this;tt.getGameRecorderManager().onStop(function(e){t._status=c.ReocordVideoStatusEnum.Idle,t._videoPath=e.videoPath,l.default.viewMgr.showUI(s.UI.RECORD_VIDEO_SHARE_VIEW)})},e.prototype.startRecordVideo=function(){return!!t.prototype.startRecordVideo.call(this)&&(this._status=c.ReocordVideoStatusEnum.Start,tt.getGameRecorderManager().start({duration:300}),this._remainMinRecordTime=this._minRecordTime,!0)},e.prototype.stopRecordVideo=function(){return!!t.prototype.stopRecordVideo.call(this)&&(this._status=c.ReocordVideoStatusEnum.Idle,tt.getGameRecorderManager().stop(),!0)},e.prototype.onEvent=function(t,e,i){console.log("[RecorderTTHelper] onEvent > %s",i),tt.reportAnalytics(t,e)},e.prototype.isShowRecordVideoView=function(){return!0},e}(c.default);r.default=u,cc._RF.pop()},{}],RecorderVIVOHelper:[function(t,e,i){"use strict";cc._RF.push(e,"68fa1D8q31GY4Hrg1GT3Qch","RecorderVIVOHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){var e=t.call(this)||this;return e.initVideoRecord(),e}return a(e,t),e.prototype.initVideoRecord=function(){},e.prototype.startRecordVideo=function(){return!1},e.prototype.stopRecordVideo=function(){return!1},e.prototype.onEvent=function(){},e.prototype.isShowRecordVideoView=function(){return!1},e}(o("RecorderHelper").default);r.default=s,cc._RF.pop()},{}],RecorderWindowHelper:[function(t,e,i){"use strict";cc._RF.push(e,"d92d1o6kkhBc5ddKWE5m5tD","RecorderWindowHelper");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("UI"),l=o("App"),c=o("LoggerUtils"),u=o("RecorderHelper"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.startRecordVideo=function(){return!!t.prototype.startRecordVideo.call(this)&&(c.default.info("RecorderWindowHelper [\u5f00\u59cb\u5f55\u5236]"),this._status=u.ReocordVideoStatusEnum.Start,this._remainMinRecordTime=this._minRecordTime,!0)},e.prototype.stopRecordVideo=function(){return c.default.info("RecorderWindowHelperstopRecordVideo "),!!t.prototype.stopRecordVideo.call(this)&&(this._status=u.ReocordVideoStatusEnum.Idle,c.default.info("RecorderWindowHelper [\u5f55\u5236\u5b8c\u6210]"),l.default.viewMgr.showUI(s.UI.RECORD_VIDEO_SHARE_VIEW),!0)},e.prototype.onEvent=function(){},e.prototype.isShowRecordVideoView=function(){return!0},e}(u.default);r.default=p,cc._RF.pop()},{}],Recorder:[function(t,e,i){"use strict";cc._RF.push(e,"a3ee7UeMdpI5oIHayTNeTmd","Recorder");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("App"),l=o("CommonConst"),c=o("LoggerUtils"),u=o("Singleton"),p=(o("RecorderAndroidHelper"),o("RecorderConst")),d=o("RecorderHuaweiHelper"),h=(o("RecorderIosHelper"),o("RecorderOPPOHelper")),f=o("RecorderShouQHelper"),g=o("RecorderTTHelper"),y=o("RecorderVIVOHelper"),m=o("RecorderWindowHelper"),v=function(t){function e(){var e=t.call(this)||this;switch(e._helper=null,cc.sys.platform){case cc.sys.BYTEDANCE_GAME:case cc.sys.BYTEDANCE_GAME_SUB:e._helper=new g.default;break;case l.PlatformTypeEnum.WECHAT_GAME:e._helper=new f.default;break;case l.PlatformTypeEnum.OPPO_GAME:e._helper=new h.default;break;case l.PlatformTypeEnum.VIVO_GAME:e._helper=new y.default;break;case l.PlatformTypeEnum.HUAWEI_GAME:e._helper=new d.default}return null==e._helper&&(e._helper=new m.default),e}return a(e,t),e.prototype.dotEnterLoadingView=function(){var t="[\u767b\u5f55\u6e38\u620f][\u8fdb\u5165loading\u9875\u9762]";this._helper.onEvent(p.BaseRecordEventName.EnterLoadingView,{desc:t},t),this._helper.dotEnterLoadingView()},e.prototype.dotEnterLoadingView2=function(){null!=this._helper?this._helper.onEvent("jinRuDengLu",{},"[\u767b\u5f55\u6e38\u620f][\u8fdb\u5165loading\u9875\u9762]"):c.default.warn("\u6ca1\u6709helper")},e.prototype.dotEndLoadingView=function(){var t="[\u767b\u5f55\u6e38\u620f][\u8bfb\u53d6\u5b8cloading]";this._helper.onEvent(p.BaseRecordEventName.EndLoadingView,{desc:t},t),this._helper.dotEndLoadingView()},e.prototype.dotEndLoadingView2=function(){null!=this._helper?this._helper.onEvent("DengLuWanCheng",{},"[\u767b\u5f55\u6e38\u620f][\u8bfb\u53d6\u5b8cloading]"):c.default.warn("\u6ca1\u6709helper")},e.prototype.dotBackToHallView=function(){var t="[\u7ed3\u7b97\u754c\u9762][\u70b9\u51fb\u8fd4\u56de\u5927\u5385]";this._helper.onEvent(p.BaseRecordEventName.FinalReportTouchBackHallView,{desc:t},t),this._helper.dotBackToHallView()},e.prototype.dotBackToHallView2=function(){null!=this._helper?this._helper.onEvent("fanHuiDaTing",{},"[\u7ed3\u7b97\u754c\u9762][\u70b9\u51fb\u8fd4\u56de\u5927\u5385]"):c.default.warn("\u6ca1\u6709helper")},e.prototype.dotOpenHallView=function(){this._helper.onEvent(p.BaseRecordEventName.OpenHallView,{desc:"[\u6253\u5f00\u5927\u5385]"},"[\u6253\u5f00\u5927\u5385]"),this._helper.dotOpenHallView()},e.prototype.HeroReborn=function(){var t="\u7b2c"+s.default.levelServer.getCurChapter()+"\u7ae0\u7b2c"+s.default.levelServer.getCurLevel()+"\u5173\u590d\u6d3b";this._helper.onEvent(p.BaseRecordEventName.HeroReborn,{desc:t},t)},e.prototype.dotGameStart=function(){this._helper.onEvent(p.BaseRecordEventName.GameStart,{desc:"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f"},"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f"),this._helper.dotGameStart()},e.prototype.dotGameStart2=function(){null!=this._helper?this._helper.onEvent("DianJiKaiShiYouXi",{},"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f"):c.default.warn("\u6ca1\u6709helper")},e.prototype.dotGameBegin=function(){var t="[\u5f00\u59cb\u6e38\u620f][\u52a0\u8f7d1/3]";this._helper.onEvent(p.BaseRecordEventName.GameBegin,{desc:t},t),this._helper.dotGameBegin()},e.prototype.dotGameBeginCommonResFinish=function(){var t="[\u52a0\u8f7d\u901a\u7528\u8d44\u6e90\u5b8c\u6210][\u52a0\u8f7d2/3]";this._helper.onEvent(p.BaseRecordEventName.GameBeginCommonResFinish,{desc:t},t)},e.prototype.dotGameBeginEnterFighting=function(){var t="[\u8fdb\u5165\u6218\u6597\u754c\u9762\u5b8c\u6210][\u52a0\u8f7d3/3]";this._helper.onEvent(p.BaseRecordEventName.GameBeginEnterFighting,{desc:t},t)},e.prototype.dotSeleSkill=function(t){this._helper.onEvent(p.BaseRecordEventName.SeleSkill,{desc:"\u70b9\u9009\u6280\u80fd"},"\u70b9\u9009\u6280\u80fd"),this._helper.dotSeleSkill(t)},e.prototype.dotSeleSkill2=function(){null!=this._helper?this._helper.onEvent("DianXuanJiNeng",{},"\u70b9\u9009\u6280\u80fd"):c.default.warn("\u6ca1\u6709helper")},e.prototype.dotHeroAttack=function(t){this._helper.onEvent(p.BaseRecordEventName.HeroAttack,{desc:"\u653b\u51fb"},"\u653b\u51fb"),this._helper.dotHeroAttack(t)},e.prototype.dotCrossView=function(t){this._helper.onEvent(p.BaseRecordEventName.CrossView,{desc:"\u80dc\u5229\u754c\u9762\u5f39\u51fa"},"\u80dc\u5229\u754c\u9762\u5f39\u51fa"),this._helper.dotCrossView(t)},e.prototype.dotCrossView2=function(){null!=this._helper?this._helper.onEvent("ShengLiTanChu",{},"\u80dc\u5229\u754c\u9762\u5f39\u51fa"):c.default.warn("\u6ca1\u6709helper")},e.prototype.dotLevelSuccessReward=function(){this._helper.onEvent(p.BaseRecordEventName.LevelSuccessReward,{desc:"\u901a\u5173\u5956\u52b1\u786e\u8ba4\u754c\u9762"},"\u901a\u5173\u5956\u52b1\u786e\u8ba4\u754c\u9762"),this._helper.dotLevelSuccessReward()},e.prototype.dotEquipmentSystem=function(){this._helper.onEvent(p.BaseRecordEventName.EquipmentSystem,{desc:"\u70b9\u51fb\u88c5\u5907\u7cfb\u7edf"},"\u70b9\u51fb\u88c5\u5907\u7cfb\u7edf"),this._helper.dotEquipmentSystem()},e.prototype.dotClickDagger=function(){this._helper.onEvent(p.BaseRecordEventName.ClickDagger,{desc:"\u70b9\u51fb\u65b0\u624b\u77ed\u5251"},"\u70b9\u51fb\u65b0\u624b\u77ed\u5251"),this._helper.dotClickDagger()},e.prototype.dotEquipmentWear=function(){this._helper.onEvent(p.BaseRecordEventName.EquipmentWear,{desc:"\u70b9\u51fb\u88c5\u5907\u5b8c\u6210\u7a7f\u6234"},"\u70b9\u51fb\u88c5\u5907\u5b8c\u6210\u7a7f\u6234"),this._helper.dotEquipmentWear()},e.prototype.dotClickBack=function(){this._helper.onEvent(p.BaseRecordEventName.ClickBack,{desc:"\u70b9\u51fb\u8fd4\u56de"},"\u70b9\u51fb\u8fd4\u56de"),this._helper.dotClickBack()},e.prototype.dotLevelSuccess=function(){if(null!=this._helper){var t=s.default.levelServer.getMaxChapter(),e=s.default.levelServer.getCurLevel(),i="[\u5173\u5361]_"+t+"_"+e+"_[\u6311\u6218\u6210\u529f]";this._helper.onEvent("LevelSuccess",{chapter:t,level:e},i)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotLevelFail=function(){if(null!=this._helper){var t=s.default.levelServer.getMaxChapter(),e=s.default.levelServer.getCurLevel(),i="[\u5173\u5361]_"+t+"_"+e+"_[\u6311\u6218\u5931\u8d25]";this._helper.onEvent("LevelFail",{chapter:t,level:e},i)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotChapterSuccess=function(){if(null!=this._helper){var t=s.default.levelServer.getMaxChapter(),e="[\u7ae0\u8282]_"+t+"_[\u6311\u6218\u6210\u529f]";this._helper.onEvent("ChapterSuccess",{chapter:t},e)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotHeroDie=function(t){null==t&&(t=-1);var e="\u7b2c"+s.default.levelServer.getCurChapter()+"\u7ae0\u7b2c"+s.default.levelServer.getCurLevel()+"\u5173\u7b2c"+t+"\u6b21\u6b7b\u4ea1";this._helper.onEvent(p.BaseRecordEventName.HeroDiePVE,{desc:e},e)},e.prototype.dotTouchVideo=function(t){if(null!=this._helper){var e="[\u89c6\u9891]_"+l.AdName[t]+"_[\u8bf7\u6c42]";this._helper.onEvent("TouchVideo",{adType:l.AdName[t]},e)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotVideoBegin=function(t){if(null!=this._helper){var e="[\u89c6\u9891]_"+l.AdName[t]+"_[\u663e\u793a]";this._helper.onEvent("VideoBegin",{adType:l.AdName[t]},e)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotVideoEnd=function(t){if(null!=this._helper){var e="[\u89c6\u9891]_"+l.AdName[t]+"_[\u5173\u95ed]";this._helper.onEvent("VideoEnd",{adType:l.AdName[t]},e)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotVideoOpen=function(t){this._helper.dotVideoOpen(t)},e.prototype.dotUserCloseVideo=function(t){this._helper.dotUserCloseVideo(t)},e.prototype.dotClickVideoBtn=function(t){this._helper.dotClickVideoBtn(t)},e.prototype.dotCloseVideo=function(t){this._helper.dotCloseVideo(t)},e.prototype.dotVideoPlayOver=function(t){this._helper.dotVideoPlayOver(t)},e.prototype.dotVideoReward=function(t){this._helper.dotVideoReward(t)},e.prototype.dotNoVideo=function(t){this._helper.dotNoVideo(t)},e.prototype.dotShowVideoBtn=function(t){this._helper.dotShowVideoBtn(t)},e.prototype.dotHeroDied=function(){if(null!=this._helper){var t=s.default.levelServer.getMaxChapter(),e=s.default.levelServer.getCurLevel(),i="[\u82f1\u96c4]_"+t+"_"+e+"_[\u6b7b\u4ea1]";this._helper.onEvent("HeroDied",{chapter:t,level:e},i)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotHeroResurrected=function(){if(null!=this._helper){var t=s.default.levelServer.getMaxChapter(),e=s.default.levelServer.getCurLevel(),i="[\u82f1\u96c4]_"+t+"_"+e+"_[\u590d\u6d3b]";this._helper.onEvent("HeroResurrected",{chapter:t,level:e},i)}else c.default.warn("\u6ca1\u6709helper")},e.prototype.dotRewardVideoAdReturn=function(t){this._helper.onEvent(p.BaseRecordEventName.AdRetureVal,{code:t},"\u6fc0\u52b1\u89c6\u9891\u8fd4\u56de\u9519\u8bef\u7801")},e.prototype.dotFirstPayInfo=function(){var t=s.default.levelServer.getCurChapter();this._helper.onEvent(p.BaseRecordEventName.FirstPayInfo,{chapter:t},"\u9996\u6b21\u652f\u4ed8")},e.prototype.dotAdBtnShow=function(t){this._helper.onEvent(p.BaseRecordEventName.AdBtnShow,{adType:t},"\u5e7f\u544a\u6309\u94ae\u5c55\u793a"),this._helper.dotAdBtnShow(t)},e.prototype.dotPayBtnShow=function(t){this._helper.onEvent(p.BaseRecordEventName.PayBtnShow,{payPosition:t},"\u652f\u4ed8\u6309\u94ae\u5c55\u793a")},e.prototype.dotPayBtnClick=function(t){this._helper.onEvent(p.BaseRecordEventName.PayBtnClick,{payPosition:t},"\u652f\u4ed8\u6309\u94ae\u70b9\u51fb")},e.prototype.dotFinishGuidePoint=function(){this._helper.onEvent(p.BaseRecordEventName.GuideFinishPoint,{desc:"[\u5b8c\u6210\u65b0\u624b\u5f15\u5bfc\u70b9]"},"[\u5b8c\u6210\u65b0\u624b\u5f15\u5bfc\u70b9]"),this._helper.dotFinishGuidePoint()},e.prototype.dotJumpGuideLine=function(){this._helper.onEvent(p.BaseRecordEventName.GuideFinishLine,{desc:"[\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc]"},"[\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc]"),this._helper.dotJumpGuideLine()},e.prototype.dotGameEnterLoadResAppInitializeTool=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u52a0\u8f7d\u8d44\u6e90][\u521d\u59cb\u5316\u5f00\u59cb]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoadResAppInitializeTool,{desc:t},t)},e.prototype.dotGameEnterLoadResStartLoadCommonRes=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u52a0\u8f7d\u8d44\u6e90][\u52a0\u8f7d\u901a\u7528\u8d44\u6e90\u5f00\u59cb]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoadResStartLoadCommonRes,{desc:t},t)},e.prototype.dotGameEnterLoadReshandlerResLoadSucc=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u52a0\u8f7d\u8d44\u6e90][\u52a0\u8f7d\u901a\u7528\u8d44\u6e90\u6210\u529f]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoadReshandlerResLoadSucc,{desc:t},t)},e.prototype.dotGameEnterLoadResInitTblBegin=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u52a0\u8f7d\u8d44\u6e90][\u52a0\u8f7dTBL\u5f00\u59cb]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoadResInitTblBegin,{desc:t},t)},e.prototype.dotGameEnterLoadResInitTblEnd=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u52a0\u8f7d\u8d44\u6e90][\u52a0\u8f7dTBL\u7ed3\u675f]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoadResInitTblEnd,{desc:t},t)},e.prototype.dotGameEnterLoginRequestSdkLogin=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][sdk\u8bf7\u6c42\u767b\u5f55]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginRequestSdkLogin,{desc:t},t)},e.prototype.dotGameEnterLoginRequestSdkLoginSuccess=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][sdk\u8bf7\u6c42\u767b\u5f55\u6210\u529f]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginRequestSdkLoginSuccess,{desc:t},t)},e.prototype.dotGameEnterLoginGetServerListSuccess=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u83b7\u5f97\u670d\u52a1\u5668\u5217\u8868]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginGetServerListSuccess,{desc:t},t)},e.prototype.dotGameEnterLoginOnOpen=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u7f51\u7edc\u8fde\u63a5]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginOnOpen,{desc:t},t)},e.prototype.dotGameEnterLoginRequestlogin=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u670d\u52a1\u5668\u8bf7\u6c42\u767b\u5f55]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginRequestlogin,{desc:t},t)},e.prototype.dotGameEnterLoginHandlerLoginSucc=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u670d\u52a1\u5668\u8bf7\u6c42\u767b\u5f55\u6210\u529f]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginHandlerLoginSucc,{desc:t},t)},e.prototype.dotGameEnterLoginCreataRole=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u521b\u5efa\u89d2\u8272]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginCreataRole,{desc:t},t)},e.prototype.dotGameEnterLoginRequestRoleInfo=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u8bf7\u6c42\u89d2\u8272\u4fe1\u606f]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginRequestRoleInfo,{desc:t},t)},e.prototype.dotGameEnterLoginGetRoleInfo=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u83b7\u5f97\u89d2\u8272\u4fe1\u606f]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginGetRoleInfo,{desc:t},t)},e.prototype.dotGameEnterLoginRequestRoleSettingInfo=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8bf7\u6c42\u767b\u5f55][\u83b7\u5f97\u89d2\u8272setting\u6570\u636e]";this._helper.onEvent(p.BaseRecordEventName.GameEnterLoginRequestRoleSettingInfo,{desc:t},t)},e.prototype.dotGameEnterFightingStart=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8fdb\u5165\u6218\u6597][\u6218\u6597\u573a\u666f\u5f00\u59cb]";this._helper.onEvent(p.BaseRecordEventName.GameEnterFightingStart,{desc:t},t)},e.prototype.dotGameEnterFightingInitHero=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8fdb\u5165\u6218\u6597][\u521d\u59cb\u5316\u82f1\u96c4]";this._helper.onEvent(p.BaseRecordEventName.GameEnterFightingInitHero,{desc:t},t)},e.prototype.dotGameEnterFightingShowStoryView=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8fdb\u5165\u6218\u6597][\u663e\u793a\u5267\u60c5\u754c\u9762]";this._helper.onEvent(p.BaseRecordEventName.GameEnterFightingShowStoryView,{desc:t},t)},e.prototype.dotGameEnterFightingCloseStoryView=function(){var t="[\u8fdb\u5165\u6e38\u620f][\u8fdb\u5165\u6218\u6597][\u5173\u95ed\u5267\u60c5\u754c\u9762]";this._helper.onEvent(p.BaseRecordEventName.GameEnterFightingCloseStoryView,{desc:t},t)},e.prototype.isShowRecordVideoView=function(){return this._helper.isShowRecordVideoView()},e.prototype.isShowRecordVideoStarting=function(){return this._helper.isShowRecordVideoStarting()},e.prototype.startRecordVideo=function(){return this._helper.startRecordVideo()},e.prototype.stopRecordVideo=function(){return this._helper.stopRecordVideo()},e.prototype.isOverMinRecordTime=function(){return this._helper.isOverMinRecordTime()},e.prototype.getVideoPath=function(){return this._helper.getVideoPath()},e}(u.default);r.default=v,cc._RF.pop()},{}],RectUtils:[function(t,e,i){"use strict";cc._RF.push(e,"9bf64a+rb5Kd5+CtVht9gXC","RectUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.Union=function(t,e){var i=new cc.Rect;return i.x=Math.min(t.x,e.x),i.y=Math.min(t.y,e.y),i.width=Math.max(t.x+t.width,e.x+e.width)-i.x,i.height=Math.max(t.y+t.height,e.y+e.height)-i.y,i},t.UnionByRectArray=function(t){for(var e=[],i=[],n=[],o=[],r=0;r<t.length;r++){var a=t[r];e.push(a.x),i.push(a.y),n.push(a.x+a.width),o.push(a.y+a.height)}var s=new cc.Rect;return s.x=Math.min.apply(Math,e),s.y=Math.min.apply(Math,i),s.width=Math.max.apply(Math,n)-s.x,s.height=Math.max.apply(Math,o)-s.y,s},t.rectContainsPoint=function(t,e){var i=!1;return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height&&(i=!0),i},t.getRectPoints=function(t){var e=[],i=cc.v2(t.x,t.y);e.push(i);var n=cc.v2(t.x+t.width,t.y);e.push(n);var o=cc.v2(t.x,t.y+t.height);e.push(o);var r=cc.v2(t.x+t.width,t.y+t.height);return e.push(r),e},t.rectIntersectsRect=function(t,e){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},t}();n.default=o,cc._RF.pop()},{}],RedPointUtils:[function(t,e,i){"use strict";cc._RF.push(e,"2dea5eU2g1CwoA2+r7ww0A0","RedPointUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ComRedPoint"),a=function(){function t(){}return t.ShowRedPoint=function(t,e,i){if(null!=t){var n=t.getComponent(r.default);null==n&&(n=t.addComponent(r.default)),n.setRedPointActive(e),n.setNodeAttr(i)}},t}();o.default=a,cc._RF.pop()},{}],RelatedGroupTable:[function(t,e,i){"use strict";cc._RF.push(e,"ca72f9H0UhKKIZE8sWvqF7E","RelatedGroupTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("RelatedGroupVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("related_group_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.name,n)}},t.prototype.findByName=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],RelatedGroupVO:[function(t,e,i){"use strict";cc._RF.push(e,"cbe75cepi1LTbYp2q2tp3Tx","RelatedGroupVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.name=t[0],this.isUnique=t[1],this.min=t[2],this.max=t[3],this.average=t[4]},cc._RF.pop()},{}],RelatedItemTable:[function(t,e,i){"use strict";cc._RF.push(e,"2a3c8U8AhpCdozCnaQQ6w8i","RelatedItemTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("RelatedItemVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("related_item_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],RelatedItemVO:[function(t,e,i){"use strict";cc._RF.push(e,"c3dd8hwfZBGlY7VoQM9cjVu","RelatedItemVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.name=t[0],this.itemId=t[1],this.min=t[2],this.max=t[3],this.weight=t[4]},cc._RF.pop()},{}],ResGroupBundlePreloader:[function(t,e,i){"use strict";cc._RF.push(e,"eaef2GjUZ5GGYA6oTel6eQL","ResGroupBundlePreloader");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("App"),l=o("ArrayUtils"),c=o("LoggerUtils"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bundleNameList=[],e}return a(e,t),e.prototype.initialize=function(t){this.setBeginDelayTime(0),this.setBundleDelayTime(0),this._index=0,this._isStart=!1,this._lock=!0;for(var e=0;e<t.length;e++){t[e];var i=t[e].bundleName;l.default.isInside(this.bundleNameList,i)||s.default.resMgr.getBundle(i)||this.bundleNameList.push(i)}},e.prototype.setBeginDelayTime=function(t){this._beginDelayTime=t,this._beginDelayTimeDt=this._beginDelayTime},e.prototype.setBundleDelayTime=function(t){this._bundleDelayTime=t,this.resetBundleDelayTime()},e.prototype.resetBundleDelayTime=function(){this._bundleDelayTimeDt=this._bundleDelayTime},e.prototype.goStart=function(){this._isStart=!0,this._lock=!1},e.prototype.loadBundle=function(t,e){var i=this;s.default.resMgr.loadBundle(t,function(n){n?i.loadBundle(t,e):e()})},e.prototype.update=function(t){var e=this;if(this._index>this.bundleNameList.length-1)this.destroy();else if(this._isStart&&!this._lock)if(this._beginDelayTimeDt>0)this._beginDelayTimeDt-=t;else if(this._bundleDelayTimeDt-=t,!(this._bundleDelayTimeDt>0)){var i=this.bundleNameList[this._index];s.default.resMgr.getBundle(i)||(this.loadBundle(i,function(){c.default.info("ResGroupBundlePreloader [\u52a0\u8f7d\u5305] [ \u5b8c\u6210] ["+i+"]"),e._lock=!1,e.resetBundleDelayTime()}),this._index++,this._lock=!0,c.default.info("ResGroupBundlePreloader [\u52a0\u8f7d\u5305] ["+i+"]"))}},e}(cc.Component);r.default=u,cc._RF.pop()},{}],ResGroupLoader:[function(t,e,i){"use strict";cc._RF.push(e,"4863fE9j81AYoqBSgupHRim","ResGroupLoader");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("CCEvent"),a=n("App"),s=n("LoggerUtils"),l=function(){function t(t,e,i,n){void 0===e&&(e=!1),this.array=t,this.release=e,this.onComplete=i,this.onProgress=n,this.index=0,this.threads=0,this.completed=!1,this.surplus=t.length,this.maxThreads=7,this.length=t.length,this.list={},this.assets=[],this._isBlock=!1}return t.prototype.setMaxTreads=function(t){this.maxThreads=t},t.prototype.start=function(){this.toLoad()},t.prototype.toLoad=function(){if(!this.completed)for(;this.index<this.length&&this.threads<=this.maxThreads&&!this.isBlocking();){var t=this.array[this.index],e=!!t.isDir,i=!!t.isJustBundle,n=!!t.bundleName;this.list[t.url]?cc.warn("\u91cd\u590d\u52a0\u8f7d\u8d44\u6e90["+this.index+"]\uff1a"+t.url):i?this.toLoadBundle(this.index):e?n?this.toLoadDirByBundle(this.index):this.toLoadDir(this.index):n?this.toLoadResByBundle(this.index):this.toLoadRes(this.index),this.list[t.url]=!0}},t.prototype.isBlocking=function(){return this._isBlock},t.prototype.isBlock=function(t){return 1==this.array[t].isBlock},t.prototype.setBlock=function(t){this._isBlock=t},t.prototype.autoBlock=function(t){this.isBlock(t)&&this.setBlock(!0)},t.prototype.autoUnBlock=function(t){this.isBlock(t)&&this.setBlock(!1)},t.prototype.toLoadDir=function(t){var e=this,i=this.array[t];if(a.default.resMgr.isDirAssetInside(i.url))this.plusIndex(),this.surplus--,this.callback(i.url,a.default.resMgr.getDirAsset(i.url));else{this.autoBlock(t),this.threads++,this.plusIndex();var n=this.release?this.release:i.release;a.default.resMgr.loadDir(i.url,i.type,n,function(n,o){n?(cc.error("[loadRes][isDir]\u52a0\u8f7d\u8d44\u6e90["+i.url+"]\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d..."),e.threads--,e.toLoadDir(t)):(e.autoUnBlock(t),e.surplus--,e.threads--,e.callback(i.url,o))})}},t.prototype.toLoadRes=function(t){var e=this,i=this.array[t];if(a.default.resMgr.isAssetInside(i.url,i.type))this.plusIndex(),this.surplus--,this.callback(i.url,a.default.resMgr.get(i.url,i.type));else{this.autoBlock(t),this.threads++,this.plusIndex();var n=this.release?this.release:i.release;a.default.resMgr.load(i.url,i.type,n,function(n,o){n?(cc.error("[else][load]\u52a0\u8f7d\u8d44\u6e90["+i.url+"]\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d..."),e.threads--,e.toLoadRes(t)):(e.autoUnBlock(t),e.surplus--,e.threads--,e.callback(i.url,o))})}},t.prototype.toLoadBundle=function(t){var e=this,i=this.array[t];null==a.default.resMgr.getBundle(i.url)?(this.autoBlock(t),this.plusIndex(),this.threads++,a.default.resMgr.loadBundle(i.bundleName,function(n,o){n?(e.threads--,e.toLoadBundle(t)):(e.autoUnBlock(t),e.surplus--,e.threads--,e.callback(i.url,o))})):(this.plusIndex(),this.surplus--,this.callback(i.url,a.default.resMgr.getBundle(i.url)))},t.prototype.toLoadDirByBundle=function(t){var e=this,i=this.array[t];a.default.resMgr.isDirAssetInside(i.url)?(this.plusIndex(),this.surplus--,this.callback(i.url,a.default.resMgr.getDirAsset(i.url))):(this.autoBlock(t),this.plusIndex(),this.threads++,a.default.resMgr.loadBundle(i.bundleName,function(n,o){n?(e.threads--,e.toLoadDirByBundle(t)):a.default.resMgr.loadBundleInnerDir(o,i.url,i.type,function(n,o){n?(e.threads--,e.toLoadDirByBundle(t)):(e.autoUnBlock(t),e.surplus--,e.threads--,e.callback(i.url,o))})}))},t.prototype.toLoadResByBundle=function(t){var e=this,i=this.array[t];a.default.resMgr.isAssetInside(i.url,i.type)?(this.plusIndex(),this.surplus--,this.callback(i.url,a.default.resMgr.get(i.url,i.type))):(this.autoBlock(t),this.plusIndex(),this.threads++,a.default.resMgr.loadBundle(i.bundleName,function(n,o){n?(e.threads--,e.toLoadResByBundle(t)):a.default.resMgr.loadBundleInnerRes(o,i.url,i.type,function(n,r){n?(s.default.error("[loadBundle][load]\u52a0\u8f7d\u8d44\u6e90["+i.url+"]\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d...",o),s.default.error("error =  ",n),e.threads--,e.toLoadResByBundle(t)):(e.autoUnBlock(t),e.surplus--,e.threads--,e.callback(i.url,r))})}))},t.prototype.plusIndex=function(){this.index++},t.prototype.callback=function(t,e){cc.game.emit(r.default.RES_LOAD_SUCC),this.onProgress&&this.onProgress(t,e),0==this.surplus?this.onComplete&&this.onComplete(null,null):this.toLoad()},t}();o.default=l,cc._RF.pop()},{}],ResMgr:[function(t,e,i){"use strict";cc._RF.push(e,"32b07qK6+5Dt6vAOE7aFRCr","ResMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("LoggerUtils"),l=o("Singleton"),c=o("ResGroupLoader"),u=function(t){function e(){var e=t.call(this)||this;return e.cahche=new Map,e.fonts=new Map,e.prefabs=new Map,e.jsons=new Map,e.ttFonts=new Map,e.audios=new Map,e.atlas=new Map,e.sprites=new Map,e.bitmapFonts=new Map,e.releases=new Map,e.asset=new Map,e.textAssets=new Map,e.texture2Ds=new Map,e.skeletonDatas=new Map,e.dirAssets=new Map,e.cahche.set(cc.Font,e.fonts),e.cahche.set(cc.Prefab,e.prefabs),e.cahche.set(cc.TTFFont,e.ttFonts),e.cahche.set(cc.JsonAsset,e.jsons),e.cahche.set(cc.AudioClip,e.audios),e.cahche.set(cc.SpriteAtlas,e.atlas),e.cahche.set(cc.SpriteFrame,e.sprites),e.cahche.set(cc.BitmapFont,e.bitmapFonts),e.cahche.set(cc.Asset,e.asset),e.cahche.set(cc.TextAsset,e.textAssets),e.cahche.set(cc.Texture2D,e.texture2Ds),e.cahche.set(sp.SkeletonData,e.skeletonDatas),e}return a(e,t),e.prototype.load=function(t,e,i,n){var o=this;void 0===i&&(i=!1);var r=this.get(t,e);if(r)i&&this.releases.set(t,e),n&&n(null,r);else{if(null==cc.resources)return void s.default.error("ResMgr cc.resources == null, paths = ",t);cc.resources.load(t,e,function(r,a){r?cc.error("\u52a0\u8f7d\u8d44\u6e90: "+e+"\u5931\u8d25\uff0c\u8def\u5f84\uff1a"+t):(o.put(t,e,a),i&&o.releases.set(t,e)),n&&n(r,a)})}},e.prototype.loadDir=function(t,e,i,n,o){var r=this;void 0===i&&(i=!1),cc.resources.loadDir(t,e,function(t,e,i){o&&o(t,e,i)},function(o,a){if(!o){r.dirAssets.set(t,a);for(var s=0;s<a.length;s++){var l=t+a[s].name;r.put(l,e,a[s]),i&&r.releases.set(l,e)}n&&n(o,a)}})},e.prototype.loadRes=function(t,e,i,n){void 0===e&&(e=!1),new c.default(t,e,i,n).start()},e.prototype.releaseAsset=function(t){cc.assetManager.releaseAsset(t),t=null},e.prototype.releaseAll=function(){var t=this;cc.log("\u91ca\u653e\u524d\uff0c\u8d44\u6e90\u7684\u6570\u91cf\uff1a",cc.assetManager.assets.count),this.cahche.forEach(function(e){t.toReleaseMap(e)}),this.cahche.clear(),cc.log("\u91ca\u653e\u540e\uff0c\u8d44\u6e90\u7684\u6570\u91cf\uff1a",cc.assetManager.assets.count)},e.prototype.releaseSceneAssets=function(){var t=this;this.releases.forEach(function(e,i){var n=t.cahche.get(e);n&&(t.releaseAsset(n.get(i)),n.delete(i))}),this.releases.clear()},e.prototype.toReleaseMap=function(t){var e=this;t.forEach(function(t){e.releaseAsset(t)}),t.clear()},e.prototype.isAssetInside=function(t,e){return null!=this.cahche.get(e).get(t)},e.prototype.isDirAssetInside=function(t){return null!=this.dirAssets.get(t)},e.prototype.getDirAsset=function(t){return this.dirAssets.get(t)},e.prototype.put=function(t,e,i){var n=this.cahche.get(e);!n.get(t)&&n.set(t,i)},e.prototype.dump=function(){cc.log("\u6240\u6709\u52a0\u8f7d\u7f13\u5b58:",this.cahche)},e.prototype.get=function(t,e){return this.cahche.get(e).get(t)},e.prototype.getSpriteAtlas=function(t){return this.get(t,cc.SpriteAtlas)},e.prototype.getSpriteFrame=function(t){return this.get(t,cc.SpriteFrame)},e.prototype.getPrefab=function(t){return this.get(t,cc.Prefab)},e.prototype.getJsonAsset=function(t){return this.get(t,cc.JsonAsset)},e.prototype.getJson=function(t){return this.get("config/"+t,cc.JsonAsset).json},e.prototype.getSkeletonData=function(t){return this.get(t,sp.SkeletonData)},e.prototype.getFont=function(t){return this.get(t,cc.Font)},e.prototype.getTTFont=function(t){return this.get(t,cc.TTFFont)},e.prototype.getBitmapFont=function(t){return this.get(t,cc.BitmapFont)},e.prototype.getAudioClip=function(t){return this.get(t,cc.AudioClip)},e.prototype.getTexture2D=function(t){return this.get(t,cc.Texture2D)},e.prototype.getTextAsset=function(t){return this.get(t,cc.TextAsset)},e.prototype.getAsset=function(t){return this.get(t,cc.Asset)},e.prototype.getBundle=function(t){return cc.assetManager.getBundle(t)},e.prototype.loadBundle=function(t,e){var i=this;cc.assetManager.loadBundle(t,function(n,o){n?(s.default.error("[ResMgr]\u52a0\u8f7dboundle\u5931\u8d25  = ",n),i.loadBundle(t,e)):(s.default.info("ResMgr >>>>>>>> 371 bundle = ",t),e(n,o))})},e.prototype.loadBundleInnerRes=function(t,e,i,n){var o=this;t.load(e,i,function(t,r){t?(s.default.error("[loadBundleInnerRes]\u52a0\u8f7d\u8d44\u6e90["+e+"]\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d..."),s.default.error("error =  ",t),n(t,r)):(o.put(e,i,r),n(t,r))})},e.prototype.loadBundleInnerResByBundleName=function(t,e,i,n){var o=this,r=this.getBundle(t);r?this.loadBundleInnerRes(r,e,i,n):this.loadBundle(t,function(r,a){r?(s.default.error("ResMgr loadBundleInnerResByBundleName \u518d\u6b21\u52a0\u8f7dbundle\u5931\u8d25 ",r),o.loadBundleInnerResByBundleName(t,e,i,n)):(s.default.info("ResMgr loadBundleInnerResByBundleName \u52a0\u8f7d\u5305\u6210\u529f:",t),o.loadBundleInnerRes(a,e,i,n))})},e.prototype.loadBundleInnerDir=function(t,e,i,n){var o=this;t.loadDir(e,i,function(t,r){if(t)s.default.error("[loadBundleInnerDir]\u52a0\u8f7d\u8d44\u6e90["+e+"]\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d..."),s.default.error("error =  ",t),n(t,r);else{o.dirAssets.set(e,r);for(var a=0;a<r.length;a++){var l=e+"/"+r[a].name;o.put(l,i,r[a])}n(t,r)}})},e}(l.default);r.default=u,cc._RF.pop()},{}],RewardSkill2Pick1:[function(t,e,i){"use strict";cc._RF.push(e,"7f4adjyoyhMzqXhpzU0Q36r","RewardSkill2Pick1");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("LoggerUtils"),d=o("UI"),h=o("RewardSkill"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){if(t.prototype.start.call(this),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME)c.default.adMgr.showBanner(l.OPPOAdUnitIdEnum.Banner_2Pick1);else if(cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME){if(c.default.viewMgr.isViewShowing(d.UI.AD_BANNER))return;c.default.adMgr.createNativeBannerAd()}else cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.adMgr.showBanner()},e.prototype.initData=function(){var t=this.getArgs();this._battleScene=t[0];var e=t[1];this.videoAllSelect=e.videoAllSelect,this.videoChagne=e.videoChange,this.videoUpgrade=e.videoUpgrade,this.initItemList(e.skillList),this._type=2},e.prototype.initItemList=function(t){this._itemList=Array.from(t),this._itemList=[this._itemList[0],this._itemList[1]],p.default.info("RewardSkill2Pick1 this._itemList = ",this._itemList)},e.prototype.initBtn=function(){},s([g],e)}(h.default));r.default=y,cc._RF.pop()},{}],RewardSkillRandom:[function(t,e,i){"use strict";cc._RF.push(e,"55272SNQHRJEoOveVhbm3YG","RewardSkillRandom");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.RandomEventTypeEnum=void 0;var l,c=o("AdVideoOPPO"),u=o("App"),p=o("BagConst"),d=o("CommonConst"),h=o("ActionUtils"),f=o("AdaptUtils"),g=o("TipsUtils"),y=o("BaseView"),m=o("Tbl"),v=o("CCEvent"),_=cc._decorator,C=_.ccclass;_.property,function(t){t[t.GrandMaster=1]="GrandMaster",t[t.Commander=2]="Commander"}(l=r.RandomEventTypeEnum||(r.RandomEventTypeEnum={}));var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labDesc=null,e.labReceive=null,e.labRefuse=null,e._scene=null,e.randomEventId=null,e.randomEventVO=null,e.activeNode=null,e}return a(e,t),e.prototype.onLoad=function(){this.viewFadeIn(.5),this.initNodes()},e.prototype.initNodes=function(){this.labDesc=this.getC("labDesc"),this.labReceive=this.getC("labReceive"),this.labRefuse=this.getC("labRefuse")},e.prototype.start=function(){t.prototype.start.call(this),this.initData(),this.initUI(),cc.sys.platform==d.PlatformTypeEnum.WECHAT_GAME&&h.default.sequence(this.node,.2,function(){}),cc.sys.platform==d.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==d.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==d.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playWechatAd=function(){u.default.adMgr.showBanner()},e.prototype.playHuaweiAd=function(){u.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){u.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){u.default.adMgr.showNativeAd(c.OPPOAdUnitIdEnum.Native_Reborn,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");f.default.adaptSize2Winsize(t)},e.prototype.initData=function(){this._scene=this.getArgs()[0],this.randomEventId=this.getArgs()[1],this.randomEventVO=m.default.RandomEventTable.findById(this.randomEventId)},e.prototype.initUI=function(){this.initDesc(),this.initBtn()},e.prototype.initDesc=function(){var t=this.getC("nodeGrandMaster"),e=this.getC("nodeCommander");this.randomEventVO.type==l.GrandMaster?(t.active=!0,e.active=!1,this.activeNode=t,this.seekC(this.activeNode,"labDesc").getComponent(cc.RichText).string=this.randomEventVO.eventDesc):(t.active=!1,e.active=!0,this.activeNode=e,this.seekC(this.activeNode,"labDesc").getComponent(cc.RichText).string=this.randomEventVO.eventDesc)},e.prototype.initBtn=function(){cc.sys.platform,d.PlatformTypeEnum.WECHAT_GAME,this.initBtnReceive(),this.initBtnRefuse()},e.prototype.initBtnReceive=function(){var t=this,e=this.seekC(this.activeNode,"btnReceive"),i=this.seekC(e,"labReceive"),n=this.randomEventVO.option1,o=this.randomEventVO.option1Desc;i.getComponent(cc.RichText).string=n;var r=this.randomEventVO.option1Drop;if(null!=r){var a=Array.from(u.default.outputMgr.drop(r));this.randomEventVO.option1Video?(cc.sys.platform==d.PlatformTypeEnum.HUAWEI_GAME&&0==u.default.adMgr.isHuaweiRewardReady()&&(e.active=!1),u.default.onClick(e,function(){u.default.adMgr.show({adType:d.AdTypeEnum.RandomEvent,callback:function(e){o&&g.default.showTips(o),e&&a.length>0&&(t._scene.showUpgradeLineFromHero(),u.default.bagMgr.addItemList(a,p.BagSourceEnum.Unknow))},errorCallback:null,timeout:3}),t.closeSelf()})):u.default.onClick(e,function(){o&&g.default.showTips(o),u.default.bagMgr.addItemList(a,p.BagSourceEnum.Unknow),t.closeSelf()})}else u.default.onClick(e,function(){g.default.showTips(o),t.closeSelf()})},e.prototype.initBtnRefuse=function(){var t=this,e=this.seekC(this.activeNode,"btnRefuse"),i=this.seekC(e,"labRefuse"),n=this.randomEventVO.option2;i.getComponent(cc.RichText).string=n;var o=this.randomEventVO.option2Desc,r=this.randomEventVO.option2Drop;if(null!=r){var a=Array.from(u.default.outputMgr.drop(r))||[];this.randomEventVO.option2Video?(cc.sys.platform==d.PlatformTypeEnum.HUAWEI_GAME&&0==u.default.adMgr.isHuaweiRewardReady()&&(e.active=!1),u.default.onClick(e,function(){u.default.adMgr.show({adType:d.AdTypeEnum.RandomEvent,callback:function(e){o&&g.default.showTips(o),e&&a.length>0&&(t._scene.showUpgradeLineFromHero(),u.default.bagMgr.addItemList(a,p.BagSourceEnum.Unknow))},errorCallback:null,timeout:3}),t.closeSelf()})):u.default.onClick(e,function(){o&&g.default.showTips(o),u.default.bagMgr.addItemList(a,p.BagSourceEnum.Unknow),t.closeSelf()})}else u.default.onClick(e,function(){g.default.showTips(o),t.closeSelf()})},e.prototype.onDestroy=function(){cc.sys.platform==d.PlatformTypeEnum.OPPO_GAME?u.default.event.emit(v.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==d.PlatformTypeEnum.VIVO_GAME?u.default.event.emit(v.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==d.PlatformTypeEnum.HUAWEI_GAME&&u.default.event.emit(v.default.HUAWEI_CLOSE_NATIVE),t.prototype.onDestroy.call(this)},s([C],e)}(y.default);r.default=b,cc._RF.pop()},{}],RewardSkillSelectOne:[function(t,e,i){"use strict";cc._RF.push(e,"1add1bLytpPYLHP+wdTzqlV","RewardSkillSelectOne");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CommonConst"),p=o("LoggerUtils"),d=o("CCEvent"),h=o("RewardSkill"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),cc.sys.platform==u.PlatformTypeEnum.OPPO_GAME?this.playOPPOAdOne():cc.sys.platform==u.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){},e.prototype.playOPPOAdOne=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_Reborn,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.onDestroy=function(){cc.sys.platform==u.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(d.default.HUAWEI_CLOSE_NATIVE),t.prototype.onDestroy.call(this),this._battleScene.checkStartSelectThree()},e.prototype.initData=function(){var t=this.getArgs();this._battleScene=t[0];var e=t[1];this.initItemList(e),this._type=1},e.prototype.initItemList=function(t){this._itemList=Array.from(t),this._itemList=[this._itemList[0]],p.default.info("RewardSkillSelectOne this._itemList = ",this._itemList)},e.prototype.initBtn=function(){this.getC("btnChange").active=!1,this.getC("btnAll").active=!1},s([g],e)}(h.default));r.default=y,cc._RF.pop()},{}],RewardSkill:[function(t,e,i){"use strict";cc._RF.push(e,"13179VI3ZZLCr1YSZ5ZxRNQ","RewardSkill");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("BagConst"),p=o("CommonConst"),d=o("GuideMgr"),h=o("ActionUtils"),f=o("AdaptUtils"),g=o("ItemUtils"),y=o("LoggerUtils"),m=o("NodeUtils"),v=o("TipsUtils"),_=o("BaseView"),C=o("Tbl"),b=o("CCEvent"),S=o("UI"),O=(o("ComRewardSkillPnl"),cc._decorator),E=O.ccclass,I=O.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ComRewardSkillPnl=null,e.GodParticlePrefab=null,e._battleScene=null,e.videoAllSelect=0,e.videoChagne=0,e.videoUpgrade=0,e.showIndex=0,e._itemList=[],e._type=0,e}return a(e,t),e.prototype.initialize=function(){},e.prototype.onLoad=function(){this.viewFadeIn(.5)},e.prototype.onEnable=function(){},e.prototype.start=function(){t.prototype.start.call(this),this.addMask(),this.initData(),this.initUI(),this.addEventListener(),this.initAction(),cc.sys.platform==p.PlatformTypeEnum.WECHAT_GAME||this.checkGuide2(),cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME&&3==this._type?this.playOPPOAd():cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME&&3==this._type?this.playVIVOAd():cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playWechatAd=function(){},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_SkillReward,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.checkAutoVideo=function(){var t=this;if(this.videoAllSelect&&(y.default.info("\u5c1d\u8bd5\u81ea\u52a8\u64ad\u653e\u89c6\u9891\u9886\u53d6\u5956\u52b1"),3==this._type))if(console.info(c.default.roleServer.isShouQNewHand(),c.default.roleServer.getEnterFightTimes()),c.default.roleServer.isShouQNewHand()&&c.default.roleServer.getEnterFightTimes()>2){y.default.info("\u81ea\u52a8\u64ad\u653e\u89c6\u9891\u9886\u53d6\u5956\u52b1111111111111"),this.setTouchable(!1);var e=JSON.parse(JSON.stringify(this._itemList));this.node,c.default.adMgr.autoShow({adType:p.AdTypeEnum.AllSkill,callback:function(i){t.setTouchable(!0),i&&(y.default.info("\u663e\u793a\u89c6\u9891\u6210\u529f\uff1a---\x3e\u83b7\u5f97\u5956\u52b1----\x3e"),v.default.showTips("Congratulations on getting all skills!"),e.forEach(function(e){t.selectItem(e[0])}),t.closeSelf(!1))},errorCallback:function(){t.setTouchable(!0)},timeout:3})}else if(0==c.default.roleServer.isShouQNewHand()){y.default.info("\u81ea\u52a8\u64ad\u653e\u89c6\u9891\u9886\u53d6\u5956\u52b1222222222222"),this.setTouchable(!1);var i=JSON.parse(JSON.stringify(this._itemList));this.node,c.default.adMgr.autoShow({adType:p.AdTypeEnum.AllSkill,callback:function(e){t.setTouchable(!0),e&&(y.default.info("\u663e\u793a\u89c6\u9891\u6210\u529f\uff1a---\x3e\u83b7\u5f97\u5956\u52b1----\x3e"),i.forEach(function(e){t.selectItem(e[0])}),t.closeSelf(!1))},errorCallback:function(){t.setTouchable(!0)},timeout:3})}else c.default.sdkMgr.showInterstitialAd()},e.prototype.onDestroy=function(){cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(b.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(b.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(b.default.HUAWEI_CLOSE_NATIVE),t.prototype.onDestroy.call(this)},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");f.default.adaptSize2Winsize(t);var e=this.getC("btnChange");e&&(e.active=!1)},e.prototype.initData=function(){var t=this.getArgs();this._battleScene=t[0];var e=t[1];this.videoAllSelect=e.videoAllSelect,this.videoChagne=e.videoChange,this.videoUpgrade=e.videoUpgrade,this.initItemList(e.skillList),this._type=3},e.prototype.initItemList=function(t){null!=t?(this._itemList=Array.from(t),y.default.info("RewardSkill >>>>>>>> 55 this._itemList = ",this._itemList),this._itemList.length<3&&y.default.warn("RewardSkill >>>>>>>> 61 \u6280\u80fd\u6570\u91cf\u5c0f\u4e8e3\u4e2a:",this._itemList.length)):console.error("[RewardSkill] initItemList itemMap == null")},e.prototype.initUI=function(){this.initBtn(),this.addThreeSkillPnl(),this.initSkillPnl()},e.prototype.initAction=function(){for(var t=this,e=this.getC("nodeParticle"),i=this.getC("layoutMid"),n=function(n){var r=g.default.getItemVO(o._itemList[n][0]),a=i.children[n],s=a.getComponent(cc.Animation);h.default.sequence(a,.15*n,function(){s.play(),r.stampType==u.ItemStampType.God&&a.getComponent("ComRewardSkillPnl").playSpineGod()}),a.y=-1e3,s.on(cc.Animation.EventType.FINISHED,function(){if(null!=r){if(r.stampType==u.ItemStampType.God){var i=cc.instantiate(t.GodParticlePrefab);i.parent=e,h.default.repeat(i,1/60,function(){m.default.setWorldPos(i,m.default.getWorldPos(a))})}}else y.default.error("RewardSkill VO == null ,itemId = ",t._itemList[n])})},o=this,r=0;r<i.childrenCount;r++)n(r)},e.prototype.initBtn=function(){var t=this,e=this.getC("btnChange");e.active=0,c.default.onClick(e,function(){t.setTouchable(!1);var e={adType:p.AdTypeEnum.ChangeSkill,callback:function(e){t.setTouchable(!0),e&&c.default.levelServer.refreshLevelDropChange()},errorCallback:function(){t.setTouchable(!0)},timeout:3};c.default.adMgr.show(e)});var i=this.getC("btnRefuse");i.active=0,this.videoAllSelect?c.default.onClick(i,function(){t.closeSelf(!1)}):i.active=!1;var n=this.getC("btnAll");cc.tween(n).repeatForever(cc.tween(n).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),this.videoAllSelect?c.default.onClick(n,function(){t.setTouchable(!1);var i=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),i?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),t.setTouchable(!0),e&&(t._itemList.forEach(function(e){t.selectItem(e[0])}),cc.tween(t.node).to(.5,{opacity:0},{easing:"cubicOut"}).call(function(){t.closeSelf(!1)}).start())}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),cc.audioEngine.resumeMusic(),t.setTouchable(!0)}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic(),t.setTouchable(!0)),t.setTouchable(!0)}):n.active=!1},e.prototype.addEventListener=function(){this.eventOn(b.default.REWARD_VIEW_REFLASH_DROP,this.handlerReflashDrop,this),this.eventOn(b.default.CLOSE_VIEW,this.handlerCloseView,this)},e.prototype.handlerCloseView=function(){this.checkGuide2()},e.prototype.addThreeSkillPnl=function(){for(var t=this.getC("layoutMid"),e=1;e<=this._itemList.length;e++){var i=cc.instantiate(this.ComRewardSkillPnl);t.addChild(i)}},e.prototype.playHuaweiAdSkillUpgrade=function(){c.default.viewMgr.isViewShowing(S.UI.AD_NATIVE)||c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAdSkillUpgrade=function(){c.default.viewMgr.isViewShowing(S.UI.AD_NATIVE)||c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_SkillUpgrade,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOSkillUpgrade=function(){c.default.viewMgr.isViewShowing(S.UI.AD_NATIVE)||c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.initSkillPnl=function(){var t=this,e=this.getC("layoutMid"),i=this.getC("upgradeNode");i&&(i.active=!1);for(var n=function(i){var n=e.children[i];n.getComponent("ComRewardSkillPnl").initialize(o._itemList[i][0],function(e){C.default.ItemTable.findById(e),t.fly2PauseBtn(n),t.setTouchable(!1),t.selectItem(e),cc.tween(t.node).to(.5,{opacity:0},{easing:"cubicOut"}).call(function(){t.closeSelf(!1)}).start(),t.getC("nodeParticle").active=!1})},o=this,r=0;r<e.childrenCount;r++)n(r)},e.prototype.fly2PauseBtn=function(t){var e=cc.instantiate(t);t.opacity=1,e.parent=this.node,cc.tween(e).to(.3,{x:-cc.winSize.width/2+50,y:cc.winSize.height/2-50,scale:.2}).start()},e.prototype.selectItem=function(t){c.default.audioMgr.playSoundByResId(112),c.default.levelServer.addRewardSkill(t),c.default.bagMgr.addItem(t,1,u.BagSourceEnum.RewardSelect),c.default.guideMgr.isFinishGuide(d.GuideLineEnum.GuideClickSelectOneSkill)||this.emit(b.default.GUIDE_CLICK_REWARD_SKILL_ONE_SELECT)},e.prototype.handlerReflashDrop=function(t){this.initItemList(t),this.initSkillPnl(),this.getC("btnChange").getComponent(cc.Button).enabled=!1},e.prototype.checkGuide2=function(){c.default.guideMgr.isFinishGuide(d.GuideLineEnum.GuideClickSelectOneSkill)||c.default.roleServer.isNewHand()&&h.default.sequence(this.node,0,function(){var t=cc.v2(cc.winSize.width/2-10,cc.winSize.height/2);t.y-=150;var e=cc.size(225,1050),i=C.default.GuideWordTable.findById(d.GuideLineEnum.GuideClickSelectOneSkill),n=i.name,o=i.word;c.default.viewMgr.showUI(S.UI.GUIDE_VIEW,d.GuideLineEnum.GuideClickSelectOneSkill,e,t,n,o,!1,-400)})},s([I(cc.Prefab)],e.prototype,"ComRewardSkillPnl",void 0),s([I(cc.Prefab)],e.prototype,"GodParticlePrefab",void 0),s([E],e)}(_.default);r.default=w,cc._RF.pop()},{}],RewardStruct:[function(t,e,i){"use strict";cc._RF.push(e,"0ce2dY8QapIGb+4E/shKA3q","RewardStruct");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],RoleServer:[function(t,e,i){"use strict";cc._RF.push(e,"3a5f4sx/VJGeL7XG5nRQgZz","RoleServer");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("CycleConst"),p=o("DataHelper"),d=o("BagConst"),h=o("CommonConst"),f=o("ItemUtils"),g=o("LoggerUtils"),y=function(t){function e(){var e=t.call(this)||this;return e._levelData=null,e._rewardSkillList=[],e._initiativeSkillNum=0,e._limitInitiativeSkillNum=0,e._limitInitiativeSKillCount=0,e.initialize(),e}return a(e,t),e.prototype.initialize=function(){t.prototype.init.call(this,h.DataNameEnum.RoleServer),this.initData()},e.prototype.initData=function(){this._levelData=this.getValue("ROLE_SERVER_DATA",{levelTb:[],talentTb:[],intensifyTb:[],runeTb:[],curHeroId:1,enterHallTimes:0,enterFightTimes:0,isCollect:!1,isAddMy:!1,lastLoginTime:1,loginDay:0,isFirstInday:!1,lastOfflineTime:null,isSignin:!1,signinCount:0,signinKeyCount:0,hideRewards:[]}),null==this._levelData.enterHallTimes&&(this._levelData.enterHallTimes=0),null==this._levelData.enterFightTimes&&(this._levelData.enterFightTimes=0),null==this._levelData.isCollect&&(this._levelData.isCollect=!1),null==this._levelData.isAddMy&&(this._levelData.isAddMy=!1),null==this._levelData.lastLoginTime&&(this._levelData.lastLoginTime=1),null==this._levelData.loginDay&&(this._levelData.loginDay=1),null==this._levelData.isSignin&&(this._levelData.isSignin=!1),null==this._levelData.signinCount&&(this._levelData.signinCount=0),null==this._levelData.signinKeyCount&&(this._levelData.signinKeyCount=0),null==this._levelData.hideRewards&&(this._levelData.hideRewards=[]),this.fixData()},e.prototype.fixData=function(){var t=new Date,e=new Date(this._levelData.lastLoginTime);t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()||(this._levelData.loginDay++,this._levelData.isSignin=!1,this._levelData.isFirstInDay=!0,7==this._levelData.signinCount&&(this._levelData.signinCount=0)),this._levelData.lastLoginTime=t.getTime(),this.setInfo()},e.prototype.onFix=function(){var t=this;c.default.cycleMgr.registerCycle(u.CycleTypeEnum.resetEveryDay,this,function(){var e=new Date,i=new Date(t._levelData.lastLoginTime);e.getDate()==i.getDate()&&e.getMonth()==i.getMonth()&&e.getFullYear()==i.getFullYear()||(t._levelData.loginDay++,t._levelData.isSignin=!1,c.default.event.emit(l.default.SIGNIN_CHANGE),t._levelData.isFirstInDay=!0,7==t._levelData.signinCount&&(t._levelData.signinCount=0)),t._levelData.lastLoginTime=e.getTime(),t.setInfo()})},e.prototype.getLastLoginTime=function(){return this._levelData.lastLoginTime},e.prototype.isGetHideReward=function(t){return-1!=this._levelData.hideRewards.indexOf(t)},e.prototype.getHideReward=function(t){this._levelData.hideRewards.push(t),this.setInfo()},e.prototype.getSigninCount=function(){return this._levelData.signinCount},e.prototype.getSigninKeyNum=function(){return this._levelData.signinKeyCount},e.prototype.addSighinCount=function(){return!this._levelData.isSignin&&(this._levelData.isSignin=!0,this._levelData.signinCount++,this._levelData.signinKeyCount++,this.setInfo(),c.default.event.emit(l.default.SIGNIN_CHANGE),!0)},e.prototype.getHugeReward=function(){return!(this._levelData.signinKeyCount<7||(this._levelData.signinKeyCount-=7,0))},e.prototype.reset=function(){this._rewardSkillList=[],this._initiativeSkillNum=0,this._limitInitiativeSkillNum=0,this._limitInitiativeSKillCount=0},e.prototype.isSignin=function(){return this._levelData.isSignin},e.prototype.setOfflineTime=function(){this._levelData.lastOfflineTime=c.default.getServerTime(),this.setInfo()},e.prototype.getOfflineTime=function(){return this._levelData.lastOfflineTime},e.prototype.resetOfflineTime=function(){this._levelData.lastOfflineTime=null,this.setInfo()},e.prototype.getOfflineReward=function(){var t=this.getOfflineTime();if(null==t)return null;var e=this.getLastLoginTime()/1e3-t;g.default.info("offlineTime: ",e);var i=0,n=null;return s.default.OfflineRewardTable.findAll(function(t){return e>t.offlineTime&&i<t.offlineTime&&(n=t.rewards,i=t.offlineTime),!1}),n},e.prototype.enterHall=function(){this._levelData.enterHallTimes+=1,this.setInfo()},e.prototype.enterFight=function(){this._levelData.enterFightTimes++,this.setInfo()},e.prototype.getInfo=function(){return this._levelData},e.prototype.setInfo=function(){this.setValue("ROLE_SERVER_DATA",this.getInfo()),this.setValue("ROLE_SERVER_DATA",this.getInfo())},e.prototype.isCollect=function(){return this._levelData.isCollect},e.prototype.addCollect=function(){this._levelData.isCollect=!0,this.setInfo()},e.prototype.isAddMy=function(){return this._levelData},e.prototype.addMy=function(){this._levelData.isAddMy=!0,this.setInfo()},e.prototype.isFirstInDay=function(){return this._levelData.isFirstInDay},e.prototype.getLoginDay=function(){return this._levelData.loginDay},e.prototype.studySkillItem=function(t){var e=f.default.getItemVO(t);this._rewardSkillList.push({itemId:t,itemType:e.type,itemVO:e}),e.type==d.ItemTypeEnum.BuffBook||e.type==d.ItemTypeEnum.InitiativeSkill?c.default.event.emit(l.default.ROLE_ADD_BUFF,e.levelBuff):g.default.warn("RoleServer >>>>>>>> 69 \u4e0d\u5e94\u8be5\u5904\u7406\u7684\u7c7b\u578b:",e.type)},e.prototype.getStudySkillIdList=function(){for(var t=[],e=0;e<this._rewardSkillList.length;e++){var i=this._rewardSkillList[e];t.push(i.itemId)}return t},e.prototype.isFirstGame=function(){return this._levelData.enterHallTimes<=0},e.prototype.isNewHand=function(){return this._levelData.enterHallTimes<=0&&this._levelData.enterFightTimes<=1},e.prototype.isShouQNewHand=function(){return 1==this._levelData.loginDay},e.prototype.isFirstEnterHall=function(){return 1==this._levelData.enterHallTimes},e.prototype.getEnterHallTimes=function(){return this._levelData.enterHallTimes},e.prototype.getEnterFightTimes=function(){return this._levelData.enterFightTimes},e.prototype.isOwnItemList=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(!this.isOwnItem(i))return!1}return!0},e.prototype.isOwnItem=function(t){for(var e=0;e<this._rewardSkillList.length;e++)if(this._rewardSkillList[e].itemId==t)return!0;return!1},e.prototype.isDisableItem=function(t){for(var e=0;e<this._rewardSkillList.length;e++){var i=this._rewardSkillList[e];if(i.itemVO.disableOuputItemList)for(var n=0;n<i.itemVO.disableOuputItemList.length;n++)if(i.itemVO.disableOuputItemList[n]==t)return!0}return!1},e.prototype.increaseInitiativeSkillList=function(){this._initiativeSkillNum++},e.prototype.getInitiativeSkillList=function(){return this._initiativeSkillNum},e.prototype.setLimitInitiativeSkillNumWithoutAll=function(){this._limitInitiativeSkillNum=3-this._initiativeSkillNum,this._limitInitiativeSKillCount=0},e.prototype.setLimitInitiativeSkillNumWithAll=function(){this._limitInitiativeSkillNum=this._initiativeSkillNum>2?0:1,this._limitInitiativeSKillCount=0},e.prototype.increaseLimitInitiativeSkillCount=function(){this._limitInitiativeSKillCount++},e.prototype.resetLimitCount=function(){this._limitInitiativeSKillCount=0},e.prototype.isCanGetInitiativeSkill=function(){return!(this._limitInitiativeSKillCount>=this._limitInitiativeSkillNum)},e}(p.default);r.default=y,cc._RF.pop()},{}],SceneMgr:[function(t,e,i){"use strict";cc._RF.push(e,"0b9d1uek+VPAb8DROjDPgBL","SceneMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.SceneLayerConfig=void 0;var s=o("CCEvent"),l=o("RES"),c=o("Singleton"),u=o("Tbl"),p=o("App"),d=o("LoggerUtils");r.SceneLayerConfig={View:{name:"View",zIndex:100},View2:{name:"View2",zIndex:140},TopsView:{name:"TopsView",zIndex:150},Tips:{name:"Tips",zIndex:200}};var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneName=null,e.isLoadingScene=!1,e.loadBoundleFinish=!1,e._curScene=null,e._layerView=null,e._layerTips=null,e}return a(e,t),e.prototype.loadScene=function(t,e){var i=this;void 0===e&&(e=!1),this.loadBoundleFinish=!1;var n=l.SceneRes[t].preload.length+l.ResCommon.preload.length;cc.game.emit(s.default.GAME_STARTLOAD,n),this.loadCommonRes(function(){var e=l.SceneRes[t];if(e){var n=e.preload;e.getSpecialNeedsResList&&(n=n.concat(e.getSpecialNeedsResList())),p.default.resMgr.loadRes(n,!1,function(){i.loadSceneReal(t)})}})},e.prototype.loadCommonRes=function(t){p.default.resMgr.loadRes(l.ResCommon.preload,!1,function(){u.default.getInstance(),p.default.lazyInitialize(),t()})},e.prototype.loadSceneReal=function(t,e,i){var n=this;void 0===e&&(e=!1),this.isLoadingScene||(d.default.warn("SceneMgr >>>>>>>> 74 "),p.default.event.emit(s.default.LOAD_SCENE),this.isLoadingScene=!0,cc.director.loadScene(t,function(){n.initLayerNode(),n.sceneName=t,n.isLoadingScene=!1,i&&i(),e&&p.default.resMgr.releaseSceneAssets(),p.default.event.emit(s.default.SCENE_LOAD_FINISH,t)}))},e.prototype.initLayerNode=function(){this._layerView=this._addCanvasLayerNode(r.SceneLayerConfig.View.name,r.SceneLayerConfig.View.zIndex),this._layerView2=this._addCanvasLayerNode(r.SceneLayerConfig.View2.name,r.SceneLayerConfig.View2.zIndex),this._layerTopView=this._addCanvasLayerNode(r.SceneLayerConfig.TopsView.name,r.SceneLayerConfig.TopsView.zIndex),this._layerTips=this._addCanvasLayerNode(r.SceneLayerConfig.Tips.name,r.SceneLayerConfig.Tips.zIndex)},e.prototype._addCanvasLayerNode=function(t,e){var i=cc.find("Canvas"),n=new cc.Node(t);return n.parent=i,n.zIndex=e,n},e.prototype.getSceneLayer=function(t){switch(t){case r.SceneLayerConfig.View.name:case r.SceneLayerConfig.Tips.name:return this._layerView;case r.SceneLayerConfig.TopsView.name:return this._layerTopView;case r.SceneLayerConfig.View2.name:return this._layerView2}return d.default.warn("SceneMgr \u627e\u4e0d\u5230\u4f60\u60f3\u8981\u7684\u7684\u573a\u666f\u8282\u70b9"),null},e.prototype.getSceneName=function(){return this.sceneName},e.prototype.setScene=function(t){this._curScene=t},e.prototype.getScene=function(){return this._curScene},e}(c.default);r.default=h,cc._RF.pop()},{}],ScrollViewUtils:[function(t,e,i){"use strict";cc._RF.push(e,"e4fa55CdXlEyIN5N83yo/N/","ScrollViewUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("LoggerUtils"),a=function(){function t(){}return t.scrollToItemIndex=function(t,e){var i=t.getComponent(cc.ScrollView);if(i.horizontal);else if(i.vertical){for(var n=i.content,o=n.getContentSize(),a=t.getContentSize(),s=o.height-a.height,l=0,c=0;c<e-1;c++)l+=n.children[c].height;r.default.info("ScrollViewUtils >>>>>>>> 37 ",1-l/s),i.scrollToPercentVertical(1-l/s)}},t}();o.default=a,cc._RF.pop()},{}],ShareTT:[function(t,e,i){"use strict";cc._RF.push(e,"e9ffdfzvJRFd68+u0zTt5F1","ShareTT");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tbl"),a=n("LoggerUtils"),s=function(){function t(){}return t.shareImge=function(){var t=r.default.CommonTable.findByKey("PLATFORM_TT_SHARE_TITLE"),e=r.default.CommonTable.findByKey("PLATFORM_TT_SHARE_DESC");tt.shareAppMessage({title:t,desc:e,templateId:"d337244i8e4938jehr",success:function(){a.default.info("ShareTT \u5206\u4eab\u6210\u529f ")},fail:function(){a.default.info("ShareTT \u5206\u4eab\u5931\u8d25 ")}})},t.shareVideo=function(t){var e=r.default.CommonTable.findByKey("PLATFORM_TT_SHARE_TITLE"),i=r.default.CommonTable.findByKey("PLATFORM_TT_SHARE_DESC");tt.shareAppMessage({title:e,desc:i,channel:"video",extra:{videoPath:t,videoTopics:["\u5c04\u51fb","\u5c04\u624b"]},templateId:"d337244i8e4938jehr",success:function(){a.default.info("ShareTT \u5206\u4eab\u6210\u529f ")},fail:function(){a.default.info("ShareTT \u5206\u4eab\u5931\u8d25 ")}})},t}();o.default=s,cc._RF.pop()},{}],ShopConst:[function(t,e,i){"use strict";cc._RF.push(e,"383cb/E/wNP45ymMihu+jNg","ShopConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ShopGoodEnum=n.ShopTypeEnum=void 0,function(t){t[t.DiamondShop=1]="DiamondShop",t[t.StoneShop=2]="StoneShop",t[t.SunShop=3]="SunShop",t[t.WeaponShop=4]="WeaponShop",t[t.HelmetShop=5]="HelmetShop",t[t.ClothesShop=6]="ClothesShop",t[t.GlovesShop=7]="GlovesShop"}(n.ShopTypeEnum||(n.ShopTypeEnum={})),function(t){t[t.GoldCoin=1]="GoldCoin",t[t.RandomCard=2]="RandomCard",t[t.WoodReward=100]="WoodReward",t[t.SilverReward=101]="SilverReward",t[t.KingReward=102]="KingReward",t[t.RandomEquipment=103]="RandomEquipment",t[t.LittleGold=800]="LittleGold",t[t.MidGold=801]="MidGold",t[t.HugeGold=802]="HugeGold",t[t.LittleDiamond=900]="LittleDiamond"}(n.ShopGoodEnum||(n.ShopGoodEnum={})),cc._RF.pop()},{}],ShopGiftTable:[function(t,e,i){"use strict";cc._RF.push(e,"7fab1SJFbRO5ZO/6N+8pxgn","ShopGiftTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ShopGiftVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("shop_gift_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ShopGiftVO:[function(t,e,i){"use strict";cc._RF.push(e,"80dd4jN0rdEXIqN/SpjxXA8","ShopGiftVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.levelProgress=t[1],this.multiple=t[2],this.extra=t[3]},cc._RF.pop()},{}],ShopMgr:[function(t,e,i){"use strict";cc._RF.push(e,"79d0eP0901HWrIbhn4/NcWc","ShopMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("DataHelper"),p=o("BagConst"),d=o("CommonConst"),h=o("ErrorEnum"),f=o("Utils"),g=o("ShopConst"),y=function(t){function e(){var e=t.call(this)||this;return e._purchasedGoodList=null,e._allSellInfo=null,e.multiple=1,e.initialize(),e}return a(e,t),e.prototype.initialize=function(){var t=this;this.init(d.DataNameEnum.ShopMgr);var e=!1;this._purchasedGoodList=this.getValue("shopPurchasedGoods")||[],s.default.ShopTable.forEach(function(i){var n=t.getPurchasedInfo(i.id);null==n?(n={id:i.id,cooldownAt:0,isRealGet:!1},t._purchasedGoodList.push(n),e=!0):null==n.isRealGet&&(n.isRealGet=!0)}),e&&this.setPurchasedGoods(),this._allSellInfo=this.getValue("allSellInfo")||[]},e.prototype.getPurchasedGoods=function(){return this._purchasedGoodList},e.prototype.getShopShowList=function(){var t=[],e=c.default.getTime();return this._purchasedGoodList.forEach(function(i){var n=s.default.ShopTable.findById(i.id),o=-1;n.buyCounting&&(o=c.default.countingMgr.getRemaining(n.buyCounting));var r=c.default.countingMgr.getAllTimes(n.buyCounting),a=i.cooldownAt,l=2;n.ticketExchange&&c.default.bagMgr.getItemNum(n.ticketExchange)>0?l=1:o<=0?l=4:a>e&&(l=3),t.push({VO:n,lastCounting:o,allTimes:r,status:l,cooldownAt:a})}),t},e.prototype.reduceGoodCD=function(t,e){this.getPurchasedInfo(t).cooldownAt-=e,this.setPurchasedGoods()},e.prototype.getPurchasedInfo=function(t){return this._purchasedGoodList.find(function(e){return e.id==t})},e.prototype.setPurchasedGoods=function(){this.setValue("shopPurchasedGoods",this._purchasedGoodList)},e.prototype.getBuyTimes=function(t){var e=s.default.ShopTable.findById(t);return c.default.countingMgr.getCountingNum(e.buyCounting)},e.prototype.setGoodRealGet=function(t,e){this.getPurchasedInfo(t).isRealGet=e,this.setPurchasedGoods()},e.prototype.getBuyPrice=function(t){var e=s.default.ShopTable.findById(t);return c.default.countingMgr.getPriceInfo(e.buyCounting)[0][1]},e.prototype.realBuyGood=function(t){var e=s.default.ShopTable.findById(t),i=this.getPurchasedInfo(t);null!=e.coolDown&&(i.cooldownAt=c.default.getTime()+e.coolDown,this.setPurchasedGoods());var n=[];if(null!=e.goods)for(var o=0;o<e.goods.length;o++){var r=e.goods[o][0],a=e.goods[o][1];n[r]=(n[r]||0)+a}if(null!=e.dropId){var u=c.default.outputMgr.drop(e.dropId);if(null!=u){var d=Array.from(u);for(o=0;o<d.length;o++)r=d[o][0],a=d[o][1],n[r]=(n[r]||0)+a}}var h=[],f=[];for(var r in n){a=n[r];var g={itemId:parseInt(r),amount:a};h.push(g),f.push([r,a])}c.default.bagMgr.addItemList(h,p.BagSourceEnum.ShopBuyGet),c.default.event.emit(l.default.SHOP_SHOW_REWARD,f)},e.prototype.isCanBuy=function(t){if(null==t)return console.error("[ShopMgr] bugGood invalid goodId:%s",t),!1;var e,i=s.default.ShopTable.findById(t);if(null==i)return console.error("[ShopMgr] bugGood invalid goodId:%s",t),!1;var n=s.default.ShopTypeTable.findById(i.shopId);if(null!=n&&null!=n.showNum){var o=this.getSellInfo(i.shopId);if(null==o)return console.error("buyGood(goodId) \u5f53\u524d\u5546\u54c1\u4e0d\u5141\u8bb8\u8d2d\u4e70! goodId:",t),!1;if(null==(e=o.sellGoods.find(function(e){return e.goodId==t})))return console.error("buyGood(goodId) \u5f53\u524d\u5546\u54c1\u4e0d\u5141\u8bb8\u8d2d\u4e70! goodId:",t),!1;if(e.isSold)return console.error("buyGood(goodId) \u4e0d\u5141\u8bb8\u91cd\u590d\u8d2d\u4e70! goodId:",t),!1}var r=i.buyCounting;if(null!=i.buyCounting&&c.default.countingMgr.getRemaining(i.buyCounting)<=0&&r)return console.error("buyGood(goodId) \u8d2d\u4e70\u5546\u54c1\u6b21\u6570\u4e0d\u8db3! goodId:",t),!1;var a=this.getPurchasedInfo(t),l=c.default.getTime();if(null!=i.coolDown&&a.cooldownAt>l)return console.error("buyGood(goodId) \u8d2d\u4e70\u5546\u54c1\u6b63\u5728\u51b7\u5374\u4e2d! goodId:",t),!1;var u=!1;if(null!=i.ticketExchange&&(u=c.default.bagMgr.isItemEnough(i.ticketExchange,1)),0==u&&null!=i.adExchange&&(u=!0),0==u&&null!=i.price&&(u=c.default.bagMgr.isItemEnough(p.ItemIdEnum.Diamond,i.price)),0==u&&null!=i.cost){for(var d=0;d<i.cost.length;d++){var h=i.cost[d],f=h[0],g=h[1];if(0==c.default.bagMgr.isItemEnough(f,g))return console.error("\u6ca1\u6709\u8db3\u591f\u7684\u9053\u5177\u53ef\u4ee5\u8d2d\u4e70\u5546\u54c1\uff01 goodId: %s",t),!1}u=!0}var y=null;if(r&&(y=c.default.countingMgr.getPriceInfo(r)),0==u&&y){var m=y[0],v=(f=m[0],m[1]);u=c.default.bagMgr.isItemEnough(f,v)}return 0!=u||(console.error("buyGood(goodId) \u8d2d\u4e70\u6240\u9700\u9053\u5177\u4e0d\u8db3! goodId:",t),!1)},e.prototype.buyGood=function(t){if(null==t)return console.error("[ShopMgr] bugGood invalid goodId:%s",t),h.ErrorEnum.ShopINotAllowToBuy;var e,i=s.default.ShopTable.findById(t);if(null==i)return console.error("[ShopMgr] bugGood invalid goodId:%s",t),h.ErrorEnum.NotFindConfig;var n=s.default.ShopTypeTable.findById(i.shopId);if(null!=n&&null!=n.showNum){var o=this.getSellInfo(i.shopId);if(null==o)return console.error("buyGood(goodId) \u5f53\u524d\u5546\u54c1\u4e0d\u5141\u8bb8\u8d2d\u4e70! goodId:",t),h.ErrorEnum.ShopINotAllowToBuy;if(null==(e=o.sellGoods.find(function(e){return e.goodId==t})))return console.error("buyGood(goodId) \u5f53\u524d\u5546\u54c1\u4e0d\u5141\u8bb8\u8d2d\u4e70! goodId:",t),h.ErrorEnum.ShopINotAllowToBuy;if(e.isSold)return console.error("buyGood(goodId) \u4e0d\u5141\u8bb8\u91cd\u590d\u8d2d\u4e70! goodId:",t),h.ErrorEnum.ShopINotAllowToRepeatBuy}var r=i.buyCounting;if(null!=i.buyCounting&&c.default.countingMgr.getRemaining(i.buyCounting)<=0&&r)return console.error("buyGood(goodId) \u8d2d\u4e70\u5546\u54c1\u6b21\u6570\u4e0d\u8db3! goodId:",t),h.ErrorEnum.ShopCountingNotEnought;var a=this.getPurchasedInfo(t),u=c.default.getTime();if(null!=i.coolDown&&a.cooldownAt>u)return console.error("buyGood(goodId) \u8d2d\u4e70\u5546\u54c1\u6b63\u5728\u51b7\u5374\u4e2d! goodId:",t),h.ErrorEnum.ShopGoodCDing;var d=!1;if(null!=i.ticketExchange&&(d=c.default.bagMgr.removeItem(i.ticketExchange,1,p.BagSourceEnum.ShopBuyCost)),0==d&&null!=i.adExchange&&(d=!0),0==d&&null!=i.price&&(d=c.default.bagMgr.removeDiamond(i.price,p.BagSourceEnum.ShopBuyCost)),0==d&&null!=i.cost){for(var f=0;f<i.cost.length;f++){var y=(v=i.cost[f])[0],m=v[1];if(0==c.default.bagMgr.isItemEnough(y,m))return void console.error("\u6ca1\u6709\u8db3\u591f\u7684\u9053\u5177\u53ef\u4ee5\u8d2d\u4e70\u5546\u54c1\uff01 goodId: %s",t)}for(f=0;f<i.cost.length;f++){var v;y=(v=i.cost[f])[0],m=v[1],c.default.bagMgr.removeItem(y,m,p.BagSourceEnum.ShopBuyCost)}d=!0}var _=null;if(r&&(_=c.default.countingMgr.getPriceInfo(r)),0==d&&_){var C=_[0],b=(y=C[0],C[1]);d=c.default.bagMgr.removeItem(y,b,p.BagSourceEnum.ShopBuyCost)}if(0==d)return console.error("buyGood(goodId) \u8d2d\u4e70\u6240\u9700\u9053\u5177\u4e0d\u8db3! goodId:",t),h.ErrorEnum.ShopItemNotEnought;null!=i.buyCounting&&r&&c.default.countingMgr.increase(i.buyCounting,1),null!=i.coolDown&&(a.cooldownAt=u+i.coolDown,this.setPurchasedGoods()),null!=e&&i.shopId!=g.ShopTypeEnum.SunShop&&(e.isSold=!0,this.setAllSellInfo());var S=[];if(this.multiple=this.getShopGiftMultiple(t),null!=i.goods)for(var O=0;O<i.goods.length;O++){y=i.goods[O][0];var E=this.multiple*i.goods[O][1];S[y]=(S[y]||0)+E}if(null!=i.dropId){var I=c.default.outputMgr.drop(i.dropId);if(null!=I){var w=Array.from(I);for(O=0;O<w.length;O++)y=w[O][0],E=this.multiple*w[O][1],S[y]=(S[y]||0)+E}}var A=[],R=[];for(var y in S){E=S[y];var T={itemId:parseInt(y),amount:E};A.push(T),R.push([y,E])}return c.default.bagMgr.addItemList(A,p.BagSourceEnum.ShopBuyGet),c.default.event.emit(l.default.SHOP_SHOW_REWARD,R),h.ErrorEnum.Succ},e.prototype.getShopGiftMultiple=function(t){var e=c.default.levelServer.getCurChapter(),i=c.default.levelServer.getPlayerChapterMaxPassLevel(e),n=s.default.ShopGiftTable.findAll(function(n){var o=n.levelProgress[0],r=n.levelProgress[1];return n.id==t&&o==e&&r==i});return 0==n.length?1:(n.length,n[0].multiple)},e.prototype.setAllSellInfo=function(){this.setValue("allSellInfo",this._allSellInfo)},e.prototype.getRestTimes=function(t){return c.default.countingMgr.getRemaining(s.default.ShopTable.findById(t).buyCounting)},e.prototype.getSellInfo=function(t){void 0===t&&(t=4);var e=s.default.ShopTypeTable.findById(t);if(null==e||null==e.resetTime)return console.error("getSellInfo(shopType) invalid shopType:",t),null;var i=this._allSellInfo.find(function(e){return e.type==t});null==i&&(i={type:t,expiredAt:0,sellGoods:[]},this._allSellInfo.push(i),this.setAllSellInfo());var n=c.default.getTime();if(i.expiredAt>n)return i;i.expiredAt=n+e.resetTime,i.sellGoods=[];var o,r=e.specificGroup;if(null!=r)for(var a=f.default.rand(r.length),l=0;l<r.length;l++)if((a-=1)<=0){var u=r[l];o=u,i.sellGoods.push({goodId:u,isSold:!1});break}var p=[];for(s.default.ShopTable.forEach(function(e){e.shopId==t&&e.weight>0&&e.id!=o&&p.push({goodId:e.id,weight:e.weight})});i.sellGoods.length<e.showNum&&p.length>0;){var d=0;for(l=0;l<p.length;l++)d+=p[l].weight;for(a=f.default.rand(d),l=0;l<p.length;l++){var h=p[l];if((a-=h.weight)<=0){i.sellGoods.push({goodId:h.goodId,isSold:!1}),p.splice(l,1);break}}}return this.setAllSellInfo(),i},e}(u.default);r.default=y,cc._RF.pop()},{}],ShopMiniView:[function(t,e,i){"use strict";cc._RF.push(e,"2a5c84lD1dAco+cN7LHcKq4","ShopMiniView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("BaseMiniView"),p=o("CommonConst"),d=o("ErrorEnum"),h=o("GuideMgr"),f=o("ShopConst"),g=o("TimeMgr"),y=o("ActionUtils"),m=o("AdaptUtils"),v=o("NodeUtils"),_=o("TipsUtils"),C=o("Tbl"),b=o("CCEvent"),S=o("UI"),O=cc._decorator,E=O.ccclass,I=(O.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollview=null,e}return a(e,t),e.prototype.onStart=function(){t.prototype.onStart.call(this),this.initData(),this.initBtn(),this.initUI(),this.addEventListener(),this.checkGuide7(),this.checkGuideLine()},e.prototype.checkGuideLine=function(){var t=this,e=c.default.guideMgr.getCurrentGuide();e>=h.GuideLineEnum.GuidePlayerEnterShop&&e<h.GuideLineEnum.GuideEnterChapterAfterShop&&this.setTouchable(!1),y.default.sequence(this.node,.5,function(){t.setTouchable(!0)})},e.prototype.checkGuide7=function(){var t=this;c.default.guideMgr.isFinishGuide(h.GuideLineEnum.GuideShopRareReward)||y.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.getC("imgCard"),i=t.seekC(e,"btnGet"),n=v.default.getWorldPos(i),o=i.getContentSize();o.height*=1.2,o.width*=1.2,o.height=o.width;var r=C.default.GuideWordTable.findById(h.GuideLineEnum.GuideShopRareReward),a=r.name,s=r.word;c.default.viewMgr.showUI(S.UI.GUIDE_VIEW,h.GuideLineEnum.GuideShopRareReward,o,n,a,s,!1,-400)})},e.prototype.initData=function(){this.imgGold=this.getC("imgGold"),this.imgCard=this.getC("imgCard"),this.imgWoodReward=this.getC("imgWood"),this.imgSilverReward=this.getC("imgSilver"),this.imgKingReward=this.getC("imgKing"),this.labKing=this.seekC(this.imgKingReward,"labTime"),this.btnFast=this.getC("btnFast"),this.btnRefresh=this.getC("btnRefresh")},e.prototype.initBtn=function(){this.initGoldBtn(),this.initCardBtn(),this.initWoodBtn(),this.initSilverBtn(),this.initKingBtn(),this.initFastBtn(),this.initRefreshBtn()},e.prototype.initFastBtn=function(){var t=this;c.default.onClickWithoutSound(this.btnFast,function(){t.setTouchable(!1);var e={adType:p.AdTypeEnum.ShopFast,callback:function(e,i){i&&t.setTouchable(!0),e&&(t.setTouchable(!0),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.GoldCoin,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.RandomCard,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.KingReward,7200),_.default.showTips("Shorten 2H to get Precious Chest"),t.refreshGoldTime(),t.refreshCardTime())},errorCallback:function(){t.setTouchable(!0)},timeout:3};c.default.adMgr.show(e)})},e.prototype.onClickFastBtn=function(){var t,e=this;cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&0==c.default.adMgr.isHuaweiRewardReady()&&(this.btnFast.active=!1),t={title:"Speed-up",content:"Watch Ads\n Shorten 2H to get Precious Chest",tips:"",sureCallback:function(){var t={adType:p.AdTypeEnum.ShopFast,callback:function(t){t&&(c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.GoldCoin,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.RandomCard,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.KingReward,7200),_.default.showTips("Shorten 2H to get Precious Chest"),e.refreshGoldTime(),e.refreshCardTime())},errorCallback:function(){e.setTouchable(!0)},timeout:3};c.default.adMgr.show(t)},cancelCallBack:null,isNeedAd:!0},c.default.viewMgr.showUI(S.UI.CONFIRM_VIEW,this,t),cc.game.emit(b.default.GUIDE_SHOP_ACCELERATE)},e.prototype.initRefreshBtn=function(){var t=this;c.default.onClickWithoutSound(this.btnRefresh,function(){t.setTouchable(!1);var e={adType:p.AdTypeEnum.ShopRefresh,callback:function(e,i){i&&t.setTouchable(!0),e&&(t.setTouchable(!0),c.default.shopMgr.setGoodRealGet(f.ShopGoodEnum.SilverReward,!0),_.default.showTips("Free to claim equip chest!"),t.refreshSilverPrice())},errorCallback:function(){t.setTouchable(!0)},timeout:3};c.default.adMgr.show(e)})},e.prototype.onClickRefreshBtn=function(){var t,e=this;cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&0==c.default.adMgr.isHuaweiRewardReady()&&(this.btnRefresh.active=!1),t={title:"Refresh",content:"Watch Ads\n Free to claim Precious Chest",tips:"",sureCallback:function(){var t={adType:p.AdTypeEnum.ShopRefresh,callback:function(t){t&&(c.default.shopMgr.setGoodRealGet(f.ShopGoodEnum.SilverReward,!0),e.refreshSilverPrice())},errorCallback:function(){e.setTouchable(!0)},timeout:3};cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME&&(t.adUnitId=l.OPPOAdUnitIdEnum.Ad_ShopRefresh),c.default.adMgr.show(t)},cancelCallBack:null,isNeedAd:!0},cc.game.emit(b.default.GUIDE_SHOP_REFRESH),c.default.viewMgr.showUI(S.UI.CONFIRM_VIEW,this,t)},e.prototype.initGoldBtn=function(){var t=this,e=this.seekC(this.imgGold,"btnGet"),i=this.seekC(this.imgGold,"btnWait"),n=c.default.getTime(),o=c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.GoldCoin).cooldownAt-n;if(console.log("\u73cd\u8d35\u521d\u59cb\u5316\u65f6,\u62ff\u5230\u7684\u51b7\u5374\u65f6\u95f4",c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.GoldCoin).cooldownAt),c.default.onClick(e,function(){c.default.shopMgr.realBuyGood(f.ShopGoodEnum.GoldCoin),console.log("\u70b9\u8d2d\u4e70\u540e,\u62ff\u5230\u7684\u51b7\u5374\u65f6\u95f4",c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.GoldCoin).cooldownAt),t.refreshGoldTime(),cc.game.emit(b.default.GUIDE_SHOP_RAREREWARD)}),c.default.onClick(i,function(){t.setTouchable(!1);var e={adType:p.AdTypeEnum.ShopFast,callback:function(e,i){i&&t.setTouchable(!0),e&&(t.setTouchable(!0),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.GoldCoin,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.RandomCard,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.KingReward,7200),_.default.showTips("Shorten 2H to get Precious Chest"),t.refreshGoldTime(),t.refreshCardTime())},errorCallback:function(){t.setTouchable(!0)},timeout:3};c.default.adMgr.show(e)}),o<=0)e.active=!0,i.active=!1;else{e.active=!1,i.active=!0;var r=this.seekC(i,"labTime"),a=g.default.trans2Hms(o);this.setString(r,a.hour+":"+a.min+":"+a.sec)}},e.prototype.initCardBtn=function(){var t=this,e=this.seekC(this.imgCard,"btnGet"),i=this.seekC(this.imgCard,"btnWait"),n=c.default.getTime(),o=c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.RandomCard).cooldownAt-n;if(c.default.onClick(e,function(){c.default.shopMgr.realBuyGood(f.ShopGoodEnum.RandomCard),cc.game.emit(b.default.GUIDE_SHOP_RAREREWARD),t.refreshCardTime()}),c.default.onClick(i,function(){t.setTouchable(!1);var e={adType:p.AdTypeEnum.ShopFast,callback:function(e,i){i&&t.setTouchable(!0),e&&(t.setTouchable(!0),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.GoldCoin,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.RandomCard,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.KingReward,7200),_.default.showTips("Shorten 2H to get Precious Chest"),t.refreshGoldTime(),t.refreshCardTime())},errorCallback:function(){t.setTouchable(!0)},timeout:3};c.default.adMgr.show(e)}),o<=0)e.active=!0,i.active=!1;else{e.active=!1,i.active=!0;var r=this.seekC(i,"labTime"),a=g.default.trans2Hms(o);this.setString(r,a.hour+":"+a.min+":"+a.sec)}},e.prototype.initWoodBtn=function(){var t=this.seekC(this.imgWoodReward,"btnGet"),e=(this.seekC(t,"labNum"),this.seekC(this.imgWoodReward,"btnRealGet"));c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.WoodReward).isRealGet?(e.active=!0,t.active=!1):(t.active=!0,e.active=!1),c.default.onClick(t,function(){_.default.showTips("Open after chapter 10 clearance!")}),c.default.onClick(e,function(){_.default.showTips("Open after chapter 10 clearance!")})},e.prototype.initSilverBtn=function(){var t=this,e=this.seekC(this.imgSilverReward,"btnGet"),i=this.seekC(e,"labNum"),n=this.seekC(this.imgSilverReward,"btnRealGet");c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.SilverReward).isRealGet?(n.active=!0,e.active=!1):(e.active=!0,n.active=!1),c.default.onClick(e,function(){c.default.shopMgr.buyGood(f.ShopGoodEnum.SilverReward)==d.ErrorEnum.ShopItemNotEnought&&_.default.showTips("Insufficient diamond"),t.refreshSilverPrice()}),c.default.onClick(n,function(){c.default.shopMgr.realBuyGood(f.ShopGoodEnum.SilverReward),c.default.shopMgr.setGoodRealGet(f.ShopGoodEnum.SilverReward,!1),t.refreshSilverPrice(),cc.game.emit(b.default.GUIDE_SHOP_SENIORREWARD)});var o=c.default.shopMgr.getBuyPrice(f.ShopGoodEnum.SilverReward);i.getComponent(cc.Label).string=String(o)},e.prototype.initKingBtn=function(){var t=this,e=this.seekC(this.imgKingReward,"btnGet"),i=this.seekC(this.imgKingReward,"btnWait");cc.tween(e).repeatForever(cc.tween(e).to(.8,{scale:.9}).to(.8,{scale:1.1})).start(),c.default.onClick(e,function(){var t=MiniGameAds.isRewardvideoReady();cc.audioEngine.pauseMusic(),t?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),cc.audioEngine.resumeMusic(),c.default.shopMgr.buyGood(f.ShopGoodEnum.KingReward),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.KingReward,7200)}).catch(function(t){console.error("====> show RewardedVideo error: "+t.message),cc.audioEngine.resumeMusic()}):(console.info("====> RewardedVideo not ready"),cc.audioEngine.resumeMusic())}),c.default.onClick(i,function(){t.setTouchable(!1);var e={adType:p.AdTypeEnum.ShopFast,callback:function(e,i){i&&t.setTouchable(!0),e&&(t.setTouchable(!0),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.GoldCoin,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.RandomCard,7200),c.default.shopMgr.reduceGoodCD(f.ShopGoodEnum.KingReward,7200),_.default.showTips("Shorten 2H to get Precious Chest"),t.refreshGoldTime(),t.refreshCardTime())},errorCallback:function(){t.setTouchable(!0)},timeout:3};c.default.adMgr.show(e)})},e.prototype.addEventListener=function(){this.eventOn(b.default.SHOP_SHOW_REWARD,this.handlerShowReward,this),this.eventOn(b.default.CLOSE_VIEW,this.handlerViewClose,this)},e.prototype.guideRareReward=function(){var t=this;y.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.getC("imgGold"),i=t.seekC(e,"btnGet"),n=v.default.getWorldPos(i),o=i.getContentSize();o.height*=1.2,o.width*=1.2;var r=C.default.GuideWordTable.findById(h.GuideLineEnum.GuideShopRareReward),a=r.name,s=r.word;c.default.viewMgr.showUI(S.UI.GUIDE_VIEW,h.GuideLineEnum.GuideShopRareReward,o,n,a,s,!1,-400)})},e.prototype.guideCommonReward=function(){var t=this;this.scrollview.getComponent(cc.ScrollView).scrollToBottom(),y.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.getC("imgWood"),i=t.seekC(e,"btnGet"),n=v.default.getWorldPos(i),o=i.getContentSize();o.height*=1.2,o.width*=1.2;var r=C.default.GuideWordTable.findById(h.GuideLineEnum.GuideShopCommonReward),a=r.name,s=r.word;c.default.viewMgr.showUI(S.UI.GUIDE_VIEW,h.GuideLineEnum.GuideShopCommonReward,o,n,a,s,!1,300)})},e.prototype.guideSeniorReward=function(){var t=this;this.scrollview.getComponent(cc.ScrollView).scrollToBottom(),y.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.getC("imgSilver"),i=t.seekC(e,"btnGet"),n=v.default.getWorldPos(i),o=i.getContentSize();o.height*=1.2,o.width*=1.2;var r=C.default.GuideWordTable.findById(h.GuideLineEnum.GuideShopSeniorReward),a=r.name,s=r.word;c.default.viewMgr.showUI(S.UI.GUIDE_VIEW,h.GuideLineEnum.GuideShopSeniorReward,o,n,a,s,!1,300)})},e.prototype.guideRefresh=function(){var t=this;y.default.sequence(this.node,.5,function(){t.setTouchable(!0);var e=t.getC("btnRefresh"),i=v.default.getWorldPos(e),n=e.getContentSize();n.height*=1.2,n.width*=1.2;var o=C.default.GuideWordTable.findById(h.GuideLineEnum.GuideShopRefresh),r=o.name,a=o.word;c.default.viewMgr.showUI(S.UI.GUIDE_VIEW,h.GuideLineEnum.GuideShopRefresh,n,i,r,a,!1,-300)})},e.prototype.handlerViewClose=function(){S.UI.CONFIRM_VIEW.config.url},e.prototype.handlerShowReward=function(t){0!=t.length?c.default.viewMgr.showUI(S.UI.COMMONREWARD_VIEW,t):_.default.showTips("Nothing in the chest, why!")},e.prototype.initUI=function(){this.scrollview=this.getC("scrollview")},e.prototype.update=function(){this.refreshGoldTime(),this.refreshCardTime()},e.prototype.refreshWoodPrice=function(){var t=this.seekC(this.imgWoodReward,"btnGet"),e=this.seekC(t,"labNum"),i=this.seekC(this.imgWoodReward,"btnRealGet"),n=c.default.shopMgr.getBuyPrice(f.ShopGoodEnum.WoodReward);e.getComponent(cc.Label).string=String(n),c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.WoodReward).isRealGet?(i.active=!0,t.active=!1):(t.active=!0,i.active=!1)},e.prototype.refreshSilverPrice=function(){var t=this.seekC(this.imgSilverReward,"btnGet"),e=this.seekC(t,"labNum"),i=this.seekC(this.imgSilverReward,"btnRealGet"),n=c.default.shopMgr.getBuyPrice(f.ShopGoodEnum.SilverReward);e.getComponent(cc.Label).string=String(n),c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.SilverReward).isRealGet?(i.active=!0,t.active=!1):(t.active=!0,i.active=!1)},e.prototype.refreshGoldTime=function(){var t=this.seekC(this.imgGold,"btnGet"),e=this.seekC(this.imgGold,"btnWait"),i=c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.GoldCoin).cooldownAt-c.default.getTime();if(i<=0)t.active=!0,e.active=!1;else{t.active=!1,e.active=!0;var n=this.seekC(e,"labTime"),o=g.default.trans2Hms(i);this.setString(n,o.hour+":"+o.min+":"+o.sec)}},e.prototype.refreshCardTime=function(){var t=this.seekC(this.imgCard,"btnGet"),e=this.seekC(this.imgCard,"btnWait"),i=c.default.shopMgr.getPurchasedInfo(f.ShopGoodEnum.RandomCard).cooldownAt-c.default.getTime();if(i<=0)t.active=!0,e.active=!1;else{t.active=!1,e.active=!0;var n=this.seekC(e,"labTime"),o=g.default.trans2Hms(i);this.setString(n,o.hour+":"+o.min+":"+o.sec)}},e.prototype.refreshKingTime=function(){},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.onAdaptUI=function(){t.prototype.onAdaptUI.call(this),m.default.adaptScrollviewInsideSafeArea(this.scrollview,null,null,m.default.MainSceneTopSpace,m.default.MainSceneBottonSpace)},e.prototype.onDestroy=function(){},s([E],e)}(u.default));r.default=I,cc._RF.pop()},{}],ShopTable:[function(t,e,i){"use strict";cc._RF.push(e,"01869gLa1lIgIQzRX0/nl7s","ShopTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ShopVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("shop_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ShopTypeTable:[function(t,e,i){"use strict";cc._RF.push(e,"921b8C6Qi5Ixp8ukq7Wslxr","ShopTypeTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("ShopTypeVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("shop_type_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],ShopTypeVO:[function(t,e,i){"use strict";cc._RF.push(e,"4c739u4W2FEhaQBv4CcvvYV","ShopTypeVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.showNum=t[1],this.resetTime=t[2],this.specificGroup=t[3]},cc._RF.pop()},{}],ShopVO:[function(t,e,i){"use strict";cc._RF.push(e,"95d7dqbqCxF95JD6x1Ogyqf","ShopVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.shopId=t[2],this.rank=t[3],this.weight=t[4],this.ticketExchange=t[5],this.adExchange=t[6],this.price=t[7],this.chargePrice=t[8],this.cost=t[9],this.buyCounting=t[10],this.coolDown=t[11],this.label=t[12],this.desc=t[13],this.icon=t[14],this.dropId=t[15],this.goods=t[16]},cc._RF.pop()},{}],SigninRewardTable:[function(t,e,i){"use strict";cc._RF.push(e,"e7371njzIlP+KsYUYejwSbt","SigninRewardTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SigninRewardVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("signin_reward_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SigninRewardVO:[function(t,e,i){"use strict";cc._RF.push(e,"b274cUIB+xCqpKukX3sEsZs","SigninRewardVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.rewards=t[1]},cc._RF.pop()},{}],SingleGroupTable:[function(t,e,i){"use strict";cc._RF.push(e,"a7d1cxUF+ZG44mTZkOCKA7g","SingleGroupTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SingleGroupVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("single_group_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SingleGroupVO:[function(t,e,i){"use strict";cc._RF.push(e,"e1e1e7Ms1BNJLtMnlaQLygz","SingleGroupVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.name=t[0],this.itemId=t[1],this.prob=t[2],this.min=t[3],this.max=t[4]},cc._RF.pop()},{}],Singleton:[function(t,e,i){"use strict";cc._RF.push(e,"587d9MlYt9JhJRoYKB7ZRNW","Singleton");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getInstance=function(){return this.__instance||(this.__instance=new this),this.__instance},t.destroyInstance=function(){this.__instance&&(this.__instance=null)},t}();n.default=o,cc._RF.pop()},{}],SkillCombo10:[function(t,e,i){"use strict";cc._RF.push(e,"c9acaBSCCNFc6e+GF5MuXWs","SkillCombo10");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AnimationEnum"),c=o("PointUtils"),u=o("AttributeConst"),p=o("ObjConst"),d=o("SkillCombo"),h=function(){function t(t){this.skillCombo=t}return t.prototype.onTick=function(){},t}(),f=function(t){function e(e){var i=t.call(this,e)||this;return i.idleTime=i.skillCombo.getIdleTime(),i.skillCombo.idle(),i.skillCombo.setObjState(p.ObjStateEnum.CastingAndPlayingAnimation),i.skillCombo.setObjState(p.ObjStateEnum.LockHead),i}return a(e,t),e.prototype.onTick=function(t){if(this.idleTime-=t,this.idleTime<=0){var e=new g(this.skillCombo);this.skillCombo.setState(e)}},e}(h),g=function(t){function e(e){var i=t.call(this,e)||this;i.skillCombo.playAnimation(l.ObjSpineAnimationEnum.AttackStart,!1,e.getStartSpeed(),null,function(){i.skillCombo.setState(new y(i.skillCombo))});var n=i.skillCombo.getSpeedVector(),o=c.default.getAngleByVector(n);return i.skillCombo.getAttacker().setAngle(o),i}return a(e,t),e.prototype.onTick=function(){},e}(h),y=function(t){function e(e){var i=t.call(this,e)||this;return i.precent=1,i.initData(),i.initAnimation(),i.skillCombo.getSkill().cast(),i}return a(e,t),e.prototype.initData=function(){this.target=this.skillCombo.getTarget(),this.attacker=this.skillCombo.getAttacker(),null==this.target&&(this.target=this.attacker.getScene().getObjhero());var t=this.target.getWorldPos();this.toLocalPos=this.target.node.convertToNodeSpaceAR(t);var e=this.getToTargetVector();this.distance=e.mag(),this.precent=1,this.totalDistance=0},e.prototype.initAnimation=function(){this.skillCombo.playAnimation(l.ObjSpineAnimationEnum.AttackLoop,!0,1)},e.prototype.onTick=function(t){var e=this.attacker.getWorldPos(),i=this.skillCombo.getSpeedVector(),n=i.x*t,o=i.y*t;this.totalDistance+=cc.v2(n,o).mag(),e.addSelf(cc.v2(n,o)),this.skillCombo.getAttacker().setWorldPos(e),this.totalDistance>=this.distance&&this.skillCombo.setState(new m(this.skillCombo))},e.prototype.getToTargetVector=function(){return c.default.getVector(this.attacker.getWorldPos(),this.skillCombo.getTargetPos())},e}(h),m=function(t){function e(e){var i=t.call(this,e)||this;return i.skillCombo.playAnimation(l.ObjSpineAnimationEnum.AttackEnd,!1,e.getEndSpeed(),null,function(){i.skillCombo.exitCastingState()}),i}return a(e,t),e.prototype.onTick=function(){},e}(h),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.idleTime=0,e.startTime=0,e.speedRadio=0,e.endTime=0,e.startSpeed=0,e.endSpeed=0,e.moveSpeed=0,e}return a(e,t),e.prototype.breakOff=function(){t.prototype.breakOff.call(this),this.onExit()},e.prototype.onExit=function(){t.prototype.onExit.call(this),this.exitObjState(p.ObjStateEnum.LockHead),this.getAttacker().setAngle(0)},e.prototype.execute=function(){this.enterCastingState(),this.initData(),this.initTarget(),this.initStartData(),this.initEndData(),this.initSpeed(),this.initSpeedVector(),this.initAnimation(),this.initState()},e.prototype.enterCastingState=function(){this.objFight.setState(p.ObjStateEnum.CastingAndPlayingAnimation)},e.prototype.exitCastingState=function(){this.objFight.exitState(p.ObjStateEnum.CastingAndPlayingAnimation)},e.prototype.initData=function(){this.idleTime=this.skillComboVO.param1,this.startTime=this.skillComboVO.param2,this.speedRadio=this.skillComboVO.param3||1,this.endTime=this.skillComboVO.param4},e.prototype.initStartData=function(){null==this.startTime?this.startSpeed=1:0==this.startTime?this.startSpeed=1:this.startSpeed=this.objFight.getAnimationDuration(l.ObjSpineAnimationEnum.AttackStart)/this.startTime},e.prototype.initEndData=function(){null==this.endTime?this.endSpeed=1:0==this.endTime?this.endSpeed=1:this.endSpeed=this.objFight.getAnimationDuration(l.ObjSpineAnimationEnum.AttackEnd)/this.endTime},e.prototype.initSpeed=function(){if(null!=this.speedRadio){var t=this.objFight.getAttr(u.AttrTypeEnum.speed);this.moveSpeed=t*this.speedRadio}else this.moveSpeed=this.speedRadio},e.prototype.initSpeedVector=function(){var t=this.getAttacker().getWorldPos(),e=this.target.getCollisionRangeCenter();this.targetPos=e;var i=c.default.getVector(t,e);this.vectorSpeed=c.default.vectorToVectorUnit(i).scale(cc.v2(this.moveSpeed,this.moveSpeed))},e.prototype.initAnimation=function(){this.objFight.playAnimation(l.ObjSpineAnimationEnum.Idle)},e.prototype.initTarget=function(){this.target=this.objFight.getTarget()},e.prototype.initState=function(){this.state=new f(this)},e.prototype.onTick=function(t){this.state.onTick(t)},e.prototype.getIdleTime=function(){return this.idleTime},e.prototype.getStartSpeed=function(){return this.startSpeed},e.prototype.getEndSpeed=function(){return this.endSpeed},e.prototype.getMoveSpeed=function(){return this.moveSpeed},e.prototype.getSpeedVector=function(){return this.vectorSpeed},e.prototype.getStartTime=function(){return this.startTime},e.prototype.setState=function(t){this.state=t},e.prototype.getTargetPos=function(){return this.targetPos},s([_],e)}(d.default));r.default=C,cc._RF.pop()},{}],SkillCombo11:[function(t,e,i){"use strict";cc._RF.push(e,"81a4e5GbAJC352qWtDoQKHA","SkillCombo11");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("LoggerUtils"),c=o("PointUtils"),u=o("Utils"),p=o("ObjConst"),d=o("SkillCombo"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.breakOff=function(){t.prototype.breakOff.call(this),this.onExit()},e.prototype.onExit=function(){t.prototype.onExit.call(this),this.bone&&(this.bone.rotation=0),this.skill.stop()},e.prototype.execute=function(){if(t.prototype.execute.call(this),this.objFight.setState(p.ObjStateEnum.CastingAndPlayingAnimation),this.animationName=this.skillComboVO.strParam1,this.boneName=this.skillComboVO.strParam2,this.rotationLowerLimit=this.skillComboVO.param1,this.rotationHightLimit=this.skillComboVO.param2,this.rotationTimeLowerLimit=this.skillComboVO.param3,this.rotationTimeHightLimit=this.skillComboVO.param4,this.rotationTime=u.default.randFloat(this.rotationTimeLowerLimit,this.rotationTimeHightLimit),this.bone=this.getAttacker().getBone(this.boneName),null!=this.bone){var e=this.getAttacker().getWorldPos(),i=this.getTarget().getCollisionRangeCenter(),n=c.default.getVector(i,e),o=c.default.getAngleByVector(n);this.rotationSpeed=(o-this.bone.rotation)/this.rotationTime,this.isShooting=!1}else l.default.warn("SkillCombo11 \u602a\u7269\u6ca1\u6709\u65cb\u8f6c\u5185\u9aa8\u9abc"),this.shoot()},e.prototype.onTick=function(t){this.isShooting||(this.rotationTime-=t,this.bone.rotation=this.fixAngle(this.bone.rotation+this.rotationSpeed*t),this.rotationTime>0||this.shoot())},e.prototype.shoot=function(){var t=this;this.isShooting=!0,this.objFight.playAnimation(this.animationName,!1,1,function(){t.skill.cast()},function(){t.objFight.isState(p.ObjStateEnum.CastingAndPlayingAnimation)||console.error("\u6ca1\u6709\u5728\u653b\u51fb\u4f46\u662f\u5374\u505c\u6b62\u4e86\uff0c\u51fa\u5927\u95ee\u9898! SkillId: "+t.skill.getSkillId()),t.objFight.exitState(p.ObjStateEnum.CastingAndPlayingAnimation)})},e.prototype.fixAngle=function(t){return t>this.rotationHightLimit?t=this.rotationHightLimit:t<this.rotationLowerLimit?t=this.rotationLowerLimit:t},s([f],e)}(d.default));r.default=g,cc._RF.pop()},{}],SkillCombo12:[function(t,e,i){"use strict";cc._RF.push(e,"a879dQRSWNLtY753+vYzVEl","SkillCombo12");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("PointUtils"),c=o("AttributeConst"),u=o("ObjConst"),p=o("SkillCombo"),d=function(){function t(t){this.skillCombo=t}return t.prototype.onTick=function(){},t}(),h=function(t){function e(e){var i=t.call(this,e)||this;return i.idleTime=i.skillCombo.getIdleTime(),i.skillCombo.idle(),i}return a(e,t),e.prototype.onTick=function(t){if(this.idleTime-=t,this.idleTime<=0){var e=new f(this.skillCombo);this.skillCombo.setState(e)}},e}(d),f=function(t){function e(e){var i=t.call(this,e)||this;return i.skillCombo.playAnimation(i.skillCombo.getBeginAniName(),!1,1,null,function(){i.skillCombo.setState(new g(i.skillCombo))}),i.skillCombo.getDirection()>0?i.skillCombo.getAttacker().faceLeft(!1):i.skillCombo.getAttacker().faceLeft(!0),i}return a(e,t),e}(d),g=function(t){function e(e){var i=t.call(this,e)||this;return i.precent=1,i.initData(),i.initAnimation(),i.skillCombo.getSkill().cast(),i}return a(e,t),e.prototype.initData=function(){},e.prototype.initAnimation=function(){this.skillCombo.playAnimation(this.skillCombo.getLoopAniName(),!0,1)},e.prototype.onTick=function(t){var e=this.skillCombo.getAttacker().getWorldPos(),i=this.skillCombo.getSpeedVector().x*t,n=this.skillCombo.getSpeedVector().y*t;e.addSelf(cc.v2(i,n)),this.skillCombo.getAttacker().setWorldPos(e);var o=this.skillCombo.getScene().getCameraRect();this.skillCombo.getDirection()>0?o.xMax-e.x<100&&this.skillCombo.setState(new y(this.skillCombo)):this.skillCombo.getDirection()<0?e.x-o.xMin<100&&this.skillCombo.setState(new y(this.skillCombo)):this.skillCombo.setState(new y(this.skillCombo))},e}(d),y=function(t){function e(e){var i=t.call(this,e)||this;return i.skillCombo.playAnimation(i.skillCombo.getEndAniName(),!1,1,null,function(){i.skillCombo.onExit()}),i}return a(e,t),e}(d),m=cc._decorator,v=m.ccclass,_=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.breakOff=function(){t.prototype.breakOff.call(this),this.onExit()},e.prototype.onExit=function(){t.prototype.onExit.call(this),this.exitObjState(u.ObjStateEnum.CastingAndPlayingAnimation),this.exitObjState(u.ObjStateEnum.LockHead),this.getSkill().stop()},e.prototype.execute=function(){t.prototype.execute.call(this),this.initData(),this.initState()},e.prototype.initData=function(){this.beginAniName=this.skillComboVO.strParam1,this.loopAniName=this.skillComboVO.strParam2,this.endAniName=this.skillComboVO.strParam3,this.speedRate=this.skillComboVO.param1,this.idleTime=this.skillComboVO.param2,this.setObjState(u.ObjStateEnum.CastingAndPlayingAnimation),this.setObjState(u.ObjStateEnum.LockHead);var t=this.getToTargetVector(),e=this.getSpeedRate(),i=this.getAttacker().getAttr(c.AttrTypeEnum.speed);this.direction=t.x/Math.abs(t.x),this.speedVector=cc.v2(i*e*this.direction,0)},e.prototype.initState=function(){this.state=new h(this)},e.prototype.onTick=function(t){this.state.onTick(t)},e.prototype.getIdleTime=function(){return this.idleTime},e.prototype.getSpeedRate=function(){return this.speedRate},e.prototype.setState=function(t){this.state=t},e.prototype.getBeginAniName=function(){return this.beginAniName},e.prototype.getLoopAniName=function(){return this.loopAniName},e.prototype.getEndAniName=function(){return this.endAniName},e.prototype.getToTargetVector=function(){return l.default.getVector(this.getAttacker().getWorldPos(),this.getTarget().getWorldPos())},e.prototype.getDirection=function(){return this.direction},e.prototype.getSpeedVector=function(){return this.speedVector},s([v],e)}(p.default));r.default=_,cc._RF.pop()},{}],SkillCombo13:[function(t,e,i){"use strict";cc._RF.push(e,"494fbgGf5RNubJJB2YKlcwj","SkillCombo13");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("PointUtils"),c=o("Utils"),u=o("AttributeConst"),p=o("ObjConst"),d=o("SkillCombo"),h=function(){function t(t){this.skillCombo=t}return t.prototype.onTick=function(){},t}(),f=function(t){function e(e){var i=t.call(this,e)||this;return i.idleTime=i.skillCombo.getIdleTime(),i.skillCombo.idle(),i}return a(e,t),e.prototype.onTick=function(t){if(this.idleTime-=t,this.idleTime<=0){var e=new g(this.skillCombo);this.skillCombo.setState(e)}},e}(h),g=function(t){function e(e){var i=t.call(this,e)||this;return i.skillCombo.playAnimation(i.skillCombo.getBeginAniName(),!1,1,null,function(){i.skillCombo.setState(new y(i.skillCombo))}),i.skillCombo.getDirection()>0?i.skillCombo.getAttacker().faceLeft(!1):i.skillCombo.getAttacker().faceLeft(!0),i}return a(e,t),e}(h),y=function(t){function e(e){var i=t.call(this,e)||this;return i.initData(),i.initAnimation(),i.skillCombo.getSkill().cast(),i}return a(e,t),e.prototype.initData=function(){this.rotationTime=this.skillCombo.getRotationTime()},e.prototype.initAnimation=function(){this.skillCombo.playAnimation(this.skillCombo.getLoopAniName(),!0,1)},e.prototype.onTick=function(t){if(this.rotationTime-=t,this.rotationTime<=0)this.skillCombo.setState(new m(this.skillCombo));else{var e=this.skillCombo.getAttacker().getWorldPos(),i=this.skillCombo.getSpeedVector().x*t*this.getDirection(),n=this.skillCombo.getSpeedVector().y*t*this.getDirection();e.addSelf(cc.v2(i,n)),this.skillCombo.getAttacker().setWorldPos(e)}},e.prototype.getDirection=function(){var t=this.skillCombo.getToTargetVector();return t.x/Math.abs(t.x)},e}(h),m=function(t){function e(e){var i=t.call(this,e)||this;return i.skillCombo.playAnimation(i.skillCombo.getEndAniName(),!1,1,null,function(){i.skillCombo.onExit()}),i}return a(e,t),e}(h),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.breakOff=function(){t.prototype.breakOff.call(this),this.onExit()},e.prototype.onExit=function(){t.prototype.onExit.call(this),this.exitObjState(p.ObjStateEnum.CastingAndPlayingAnimation),this.exitObjState(p.ObjStateEnum.LockHead),this.getSkill().stop()},e.prototype.execute=function(){t.prototype.execute.call(this),this.initData(),this.initState()},e.prototype.initData=function(){this.beginAniName=this.skillComboVO.strParam1,this.loopAniName=this.skillComboVO.strParam2,this.endAniName=this.skillComboVO.strParam3,this.speedRate=this.skillComboVO.param1,this.idleTime=this.skillComboVO.param2,this.minRotationTime=this.skillComboVO.param3,this.maxRotationTime=this.skillComboVO.param4,this.rotationTime=c.default.randFloat(this.minRotationTime,this.maxRotationTime),this.setObjState(p.ObjStateEnum.CastingAndPlayingAnimation),this.setObjState(p.ObjStateEnum.LockHead);var t=this.getToTargetVector(),e=this.getSpeedRate(),i=this.getAttacker().getAttr(u.AttrTypeEnum.speed);this.direction=t.x/Math.abs(t.x),this.speedVector=cc.v2(i*e,0)},e.prototype.initState=function(){this.state=new f(this)},e.prototype.onTick=function(t){this.state.onTick(t)},e.prototype.getIdleTime=function(){return this.idleTime},e.prototype.getSpeedRate=function(){return this.speedRate},e.prototype.setState=function(t){this.state=t},e.prototype.getBeginAniName=function(){return this.beginAniName},e.prototype.getLoopAniName=function(){return this.loopAniName},e.prototype.getEndAniName=function(){return this.endAniName},e.prototype.getToTargetVector=function(){return l.default.getVector(this.getAttacker().getWorldPos(),this.getTarget().getWorldPos())},e.prototype.getDirection=function(){return this.direction},e.prototype.getSpeedVector=function(){return this.speedVector},e.prototype.getRotationTime=function(){return this.rotationTime},s([_],e)}(d.default));r.default=C,cc._RF.pop()},{}],SkillCombo1:[function(t,e,i){"use strict";cc._RF.push(e,"4a3d4Vfn/5JP4OMsQZEOFim","SkillCombo1");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("LoggerUtils"),c=o("SkillCombo"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.execute=function(){l.default.info("SkillCombo1 >>>>>>>> 16 "),0!=this.skill.use()?(l.default.info("SkillCombo1 >>>>>>>> 22 "),this.skill.cast(),this.skill.stop()):l.default.info("SkillCombo1 >>>>>>>> 19 ")},s([p],e)}(c.default));r.default=d,cc._RF.pop()},{}],SkillCombo2:[function(t,e,i){"use strict";cc._RF.push(e,"38964iv6xBHMbRmhwqknhY1","SkillCombo2");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("TipsUtils"),c=o("ObjConst"),u=o("SkillCombo"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.execute=function(){var e=this;t.prototype.execute.call(this),null!=this.skillComboVO.strParam1?(this.objFight.setState(c.ObjStateEnum.CastingAndPlayingAnimation),this.objFight.playAnimation(this.skillComboVO.strParam1,!1,1,function(){e.skill.cast()},function(){e.objFight.isState(c.ObjStateEnum.CastingAndPlayingAnimation)||console.error("\u6ca1\u6709\u5728\u653b\u51fb\u4f46\u662f\u5374\u505c\u6b62\u4e86\uff0c\u51fa\u5927\u95ee\u9898! SkillId: "+e.skill.getSkillId()),e.skill.stop(),e.objFight.exitState(c.ObjStateEnum.CastingAndPlayingAnimation)})):l.default.error("The correct action name is not configured,skillComboId == "+this.skillComboVO.id)},s([d],e)}(u.default));r.default=h,cc._RF.pop()},{}],SkillComboConst:[function(t,e,i){"use strict";cc._RF.push(e,"11cbfCVPHtJSIaH0N7PO28I","SkillComboConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.SkillComboType=void 0,function(t){t[t.Empty=1]="Empty",t[t.SingleAniSkill=2]="SingleAniSkill",t[t.AirSprint=10]="AirSprint",t[t.RotationShoot=11]="RotationShoot",t[t.BossClash=12]="BossClash",t[t.BossRotation=13]="BossRotation"}(n.SkillComboType||(n.SkillComboType={})),cc._RF.pop()},{}],SkillComboFactory:[function(t,e,i){"use strict";cc._RF.push(e,"6e787mZSm9LX6QfxvrdBz9i","SkillComboFactory");var n,o=t,r=i,a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("TipsUtils"),c=o("SkillComboConst"),u=o("SkillCombo1"),p=o("SkillCombo10"),d=o("SkillCombo11"),h=o("SkillCombo12"),f=o("SkillCombo13"),g=o("SkillCombo2"),y=((n={})[c.SkillComboType.Empty]=u.default,n[c.SkillComboType.SingleAniSkill]=g.default,n[c.SkillComboType.AirSprint]=p.default,n[c.SkillComboType.RotationShoot]=d.default,n[c.SkillComboType.BossClash]=h.default,n[c.SkillComboType.BossRotation]=f.default,n),m=cc._decorator,v=m.ccclass,_=(m.property,function(){function t(){}return t.createCombo=function(t){var e=s.default.SkillComboTable.findById(t);if(null!=e)return y[e.comboType]?new y[e.comboType](t):(l.default.error("Can't find the combo class, or the technology is not implemented,comboId == "+t),null);l.default.error("combo VO == null ,comboId == "+t)},a([v],t)}());r.default=_,cc._RF.pop()},{}],SkillComboTable:[function(t,e,i){"use strict";cc._RF.push(e,"0cb40S//kdMIYBfilZoJS3V","SkillComboTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SkillComboVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("skill_combo_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SkillComboVO:[function(t,e,i){"use strict";cc._RF.push(e,"6fcb9vMpyBHNIuh1dZV9sDG","SkillComboVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.comboType=t[1],this.strParam1=t[2],this.strParam2=t[3],this.strParam3=t[4],this.strParam4=t[5],this.param1=t[6],this.param2=t[7],this.param3=t[8],this.param4=t[9],this.param5=t[10]},cc._RF.pop()},{}],SkillCombo:[function(t,e,i){"use strict";cc._RF.push(e,"f7167zAVLdJApZzUPPi8ZW4","SkillCombo");var n=t,o=i,r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("Tbl"),s=n("TipsUtils"),l=cc._decorator,c=l.ccclass,u=(l.property,function(){function t(t){this.objFight=null,this.skill=null,this.skillComboVO=a.default.SkillComboTable.findById(t),null!=this.skillComboVO||s.default.error("this.skillComboVO == null,comboId = "+t)}return t.prototype.initialize=function(t,e,i){this.objFight=t,this.skill=e,this.scene=i},t.prototype.execute=function(){},t.prototype.onTick=function(){},t.prototype.breakOff=function(){},t.prototype.onExit=function(){},t.prototype.idle=function(){this.objFight.playIdle()},t.prototype.attackStart=function(){this.objFight.playAttackStart()},t.prototype.attackLoop=function(){this.objFight.playAttackLoop()},t.prototype.attackEnd=function(){this.objFight.playAttackEnd()},t.prototype.setObjState=function(t){this.objFight.setState(t)},t.prototype.exitObjState=function(t){this.objFight.exitState(t)},t.prototype.playAnimation=function(t,e,i,n,o){void 0===e&&(e=!1),void 0===i&&(i=1),this.objFight.playAnimation(t,e,i,n,o)},t.prototype.getTarget=function(){return this.objFight.getTarget()},t.prototype.getAttacker=function(){return this.objFight},t.prototype.getScene=function(){return this.scene},t.prototype.getSkill=function(){return this.skill},r([c],t)}());o.default=u,cc._RF.pop()},{}],SkillConst:[function(t,e,i){"use strict";cc._RF.push(e,"946f05aMYVETpELCReHKr0Y","SkillConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.BulletHitTypeEnum=n.SkillUseEnum=n.CostarBuffRemoveConditionEnum=n.EffectScopeRangeTypeEnum=n.EffectScopeTypeEnum=n.PruductSkillBulletTypeEnum=n.SkillBulletMoverTypeEnum=n.ResourceTypeEnum=n.SkillBulletexplosionLocationTypeEnum=n.SkillBulletOriginPosTypeEnum=n.BreakThroughTypeEnum=n.SkillBulletFirstAngleTypeEnum=n.SkillBulletFlyModeEnum=n.SkillBulletTypeEnum=n.SkillCanUseRangeTypeEnum=n.SkillEnum=n.SkillStateEnum=n.SkillCreateBulletTypeEnum=n.SkillPointTypeEnum=n.SkillCastRangeTypeEnum=n.SkillCDTypeEnum=n.SkillCastEventTypeEnum=n.SkillCastTypeEnum=n.SkillTypeEnum=n.HitTypeEnum=n.BuffActionEnum=void 0,function(t){t[t.Once=1]="Once",t[t.Multiple=2]="Multiple"}(n.BuffActionEnum||(n.BuffActionEnum={})),function(t){t[t.HIT=1]="HIT",t[t.MISS=2]="MISS",t[t.CRIT=3]="CRIT",t[t.PENET=4]="PENET",t[t.IMMUNE=5]="IMMUNE",t[t.INVULNERABLE=6]="INVULNERABLE"}(n.HitTypeEnum||(n.HitTypeEnum={})),function(t){t[t.Unknown=0]="Unknown",t[t.Gun1=1]="Gun1",t[t.Gun2=2]="Gun2",t[t.Gun3=3]="Gun3",t[t.BigSkill=12]="BigSkill",t[t.SelfExplosion=13]="SelfExplosion",t[t.EffectMost=17]="EffectMost",t[t.FightBack=18]="FightBack",t[t.WildWarrior=19]="WildWarrior",t[t.LimitMiss=20]="LimitMiss",t[t.Summon=21]="Summon"}(n.SkillTypeEnum||(n.SkillTypeEnum={})),function(t){t[t.Auto=0]="Auto",t[t.ManMake=1]="ManMake",t[t.EventMake=2]="EventMake"}(n.SkillCastTypeEnum||(n.SkillCastTypeEnum={})),function(t){t[t.Default=0]="Default",t[t.HitEnemy=2]="HitEnemy"}(n.SkillCastEventTypeEnum||(n.SkillCastEventTypeEnum={})),function(t){t[t.NoCd=0]="NoCd",t[t.UseCasterAttackCD=1]="UseCasterAttackCD",t[t.SingleCD=2]="SingleCD"}(n.SkillCDTypeEnum||(n.SkillCDTypeEnum={})),function(t){t[t.Inf=0]="Inf",t[t.CirCle=1]="CirCle",t[t.Rect=2]="Rect"}(n.SkillCastRangeTypeEnum||(n.SkillCastRangeTypeEnum={})),function(t){t[t.Position=0]="Position",t[t.Target=1]="Target"}(n.SkillPointTypeEnum||(n.SkillPointTypeEnum={})),function(t){t[t.NoBullet=0]="NoBullet",t[t.HasBullet=1]="HasBullet"}(n.SkillCreateBulletTypeEnum||(n.SkillCreateBulletTypeEnum={})),function(t){t[t.Freeing=1]="Freeing",t[t.Preparing=2]="Preparing",t[t.Casting=3]="Casting",t[t.Cooling=4]="Cooling"}(n.SkillStateEnum||(n.SkillStateEnum={})),function(t){t[t.PreparingLimitedTime=3]="PreparingLimitedTime"}(n.SkillEnum||(n.SkillEnum={})),function(t){t[t.Rect=1]="Rect",t[t.Circle=2]="Circle"}(n.SkillCanUseRangeTypeEnum||(n.SkillCanUseRangeTypeEnum={})),function(t){t[t.Gun1=100]="Gun1",t[t.Gun2=101]="Gun2",t[t.Gun3=102]="Gun3",t[t.Gun4=103]="Gun4"}(n.SkillBulletTypeEnum||(n.SkillBulletTypeEnum={})),function(t){t[t.FollowTarget=1]="FollowTarget",t[t.NoTarget=2]="NoTarget",t[t.FixTargetAndFixDirection=3]="FixTargetAndFixDirection"}(n.SkillBulletFlyModeEnum||(n.SkillBulletFlyModeEnum={})),function(t){t[t.Target=1]="Target",t[t.FixAngle=2]="FixAngle"}(n.SkillBulletFirstAngleTypeEnum||(n.SkillBulletFirstAngleTypeEnum={})),function(t){t[t.NoThrought=0]="NoThrought",t[t.Throught=1]="Throught"}(n.BreakThroughTypeEnum||(n.BreakThroughTypeEnum={})),function(t){t[t.AuthorPos=1]="AuthorPos"}(n.SkillBulletOriginPosTypeEnum||(n.SkillBulletOriginPosTypeEnum={})),function(t){t[t.Bullet=1]="Bullet",t[t.Monster=2]="Monster"}(n.SkillBulletexplosionLocationTypeEnum||(n.SkillBulletexplosionLocationTypeEnum={})),function(t){t[t.CCSAni=1]="CCSAni",t[t.SpineRes=2]="SpineRes",t[t.PngRes=3]="PngRes",t[t.Audio=4]="Audio",t[t.PlistSpine=5]="PlistSpine",t[t.Prefab=6]="Prefab",t[t.DirSpine=7]="DirSpine"}(n.ResourceTypeEnum||(n.ResourceTypeEnum={})),function(t){t[t.Follow=1]="Follow",t[t.BreakThrough=2]="BreakThrough"}(n.SkillBulletMoverTypeEnum||(n.SkillBulletMoverTypeEnum={})),function(t){t[t.Single=1]="Single",t[t.AccordingToTargetNum=2]="AccordingToTargetNum",t[t.SkillMaxBulletTarget=3]="SkillMaxBulletTarget"}(n.PruductSkillBulletTypeEnum||(n.PruductSkillBulletTypeEnum={})),function(t){t[t.UserSelfBody=1]="UserSelfBody",t[t.TargetPosition=2]="TargetPosition"}(n.EffectScopeTypeEnum||(n.EffectScopeTypeEnum={})),function(t){t[t.Rectangle=1]="Rectangle",t[t.Circle=2]="Circle",t[t.NoRange=3]="NoRange"}(n.EffectScopeRangeTypeEnum||(n.EffectScopeRangeTypeEnum={})),function(t){t[t.Null=0]="Null",t[t.OutofRange=1]="OutofRange"}(n.CostarBuffRemoveConditionEnum||(n.CostarBuffRemoveConditionEnum={})),function(t){t[t.NoSkill=1]="NoSkill",t[t.StateWrong=2]="StateWrong",t[t.NoTarget=3]="NoTarget",t[t.TargetOutOfRange=4]="TargetOutOfRange",t[t.UsingSkill=5]="UsingSkill",t[t.NoCombo=6]="NoCombo",t[t.UseSucc=7]="UseSucc",t[t.Cooling=8]="Cooling"}(n.SkillUseEnum||(n.SkillUseEnum={})),function(t){t[t.Electronic=1]="Electronic",t[t.Ice=2]="Ice"}(n.BulletHitTypeEnum||(n.BulletHitTypeEnum={})),cc._RF.pop()},{}],SkillTable:[function(t,e,i){"use strict";cc._RF.push(e,"3e97eU45ilIipXiYTvflIqP","SkillTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SkillVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("skill_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SkillVO:[function(t,e,i){"use strict";cc._RF.push(e,"96520G5D+1DzqwhvFM3fcsK","SkillVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.name=t[1],this.desc=t[2],this.skillType=t[3],this.subSkillType=t[4],this.castTimes=t[5],this.castType=t[6],this.skillIcon=t[7],this.nameTip=t[8],this.castEventId=t[9],this.castRange=t[10],this.constTime=t[11],this.continueTime=t[12],this.casterType=t[13],this.genieGroupId=t[14],this.skillCdType=t[15],this.skillCd=t[16],this.isCDAtFirst=t[17],this.warningRangeGroup=t[18],this.isCanBreakOff=t[19],this.isBreakClearBullet=t[20],this.isStopClearBullet=t[21],this.isNeedTarget2Use=t[22],this.isNeedTarget2CreatBullet=t[23],this.bulletGroupId=t[24],this.selfBuffIds=t[25],this.targetBuffIds=t[26],this.mutexGroupId=t[27],this.mutexGroupPriority=t[28],this.priority=t[29],this.upgradeSkillId=t[30],this.beginAnimation=t[31],this.skillComboId=t[32],this.bulletTime=t[33],this.bulletTimeFrame=t[34],this.param1=t[35],this.param2=t[36],this.param3=t[37],this.param4=t[38],this.param5=t[39]},cc._RF.pop()},{}],SkillbulletGroupTable:[function(t,e,i){"use strict";cc._RF.push(e,"fae82cAV6xDopdQhZzLMMvC","SkillbulletGroupTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SkillbulletGroupVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("skillbullet_group_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SkillbulletGroupVO:[function(t,e,i){"use strict";cc._RF.push(e,"3ef87d3d6dAH5EfAwy5wil5","SkillbulletGroupVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.bulletIdArry=t[1],this.bulletDelay=t[2],this.groupDelay=t[3],this.delayTimes=t[4]},cc._RF.pop()},{}],SkillbulletTable:[function(t,e,i){"use strict";cc._RF.push(e,"8ef86sWR2FN0YXT/x6miaRN","SkillbulletTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SkillbulletVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("skillbullet_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SkillbulletVO:[function(t,e,i){"use strict";cc._RF.push(e,"348e3+SzMpNJKOam4UM64+B","SkillbulletVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.bulletType=t[1],this.damageLossRatio=t[2],this.triggerTime=t[3],this.speed=t[4],this.isThroughWall=t[5],this.bulletPrepareResID=t[6],this.bulletResID=t[7],this.bulletResScaleRange=t[8],this.hitPathId=t[9],this.hitPathScaleRange=t[10],this.isAimTarget=t[11],this.hitAniPlayTime=t[12],this.isCheckObstacleColl=t[13],this.bulletZOrder=t[14],this.fixCollisionRange=t[15],this.recycleDistance=t[16],this.isOutScreenDel=t[17],this.headParticleResData=t[18],this.tailParticleResData=t[19],this.isOpenStreak=t[20],this.streakResId=t[21],this.streakTime=t[22],this.streakWidth=t[23],this.streakColor=t[24],this.streakOffset=t[25],this.shotSoundId=t[26],this.explosionLocation=t[27],this.explosionSound=t[28],this.isRotate=t[29],this.damageBeginTime=t[30],this.param1=t[31],this.param2=t[32],this.param3=t[33],this.param4=t[34],this.param5=t[35],this.param6=t[36],this.param7=t[37],this.param8=t[38]},cc._RF.pop()},{}],Skill:[function(t,e,i){"use strict";cc._RF.push(e,"ccd3clWdwhObqlBrQf73eUM","Skill");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tbl"),a=n("Utils"),s=n("LoggerUtils"),l=n("SkillConst"),c=n("ObjConst"),u=n("AttributeConst"),p=n("CollisionUtils"),d=n("CombatConst"),h=n("SkillComboConst"),f=function(){function t(t,e,i){this._skillId=null,this._SkillVO=null,this._objFight=null,this._scene=null,this._state=null,this._useAt=null,this._targetList=[],this._target=null,this._skillCD=null,this._skillCDCount=0,this._cooldownAt=null,this._delayBulletList=[],this._castTimes=0,this._constTime=0,this.constTimeCount=0,this._finishTime=null,this.self=null,this.self=this,this._skillId=t,this._SkillVO=r.default.SkillTable.findById(t),this._objFight=e,this._scene=i,this._castTimes=this._SkillVO.castTimes,this._constTime=null==this._SkillVO.constTime?Number.MAX_VALUE:this._SkillVO.constTime,0==this._castTimes&&this._castTimes--,this.setState(l.SkillStateEnum.Freeing),this.initSKillCd()}return t.prototype.initSKillCd=function(){this._SkillVO.skillCdType==l.SkillCDTypeEnum.UseCasterAttackCD?this._skillCD=this.getOwner().getAttr(u.AttrTypeEnum.attackSpeed)/1e3:this._SkillVO.skillCdType==l.SkillCDTypeEnum.SingleCD&&(this._skillCD=this._SkillVO.skillCd/1e3),this._SkillVO.isCDAtFirst?(this.setState(l.SkillStateEnum.Cooling),this._skillCDCount=0):this._skillCDCount=this._skillCD},t.prototype.isUsing=function(){return!0},t.prototype.isCanBreakoOff=function(){return this._SkillVO.isCanBreakOff==d.StdBool.True},t.prototype.isInRange=function(){if(null==this._SkillVO.castRange)return!0;var t=this.getOwner().getTarget();if(!t)return!1;var e=this.getOwner().getWorldPos(),i=t.getWorldPos(),n=this._SkillVO.castRange;if(n[0]==l.SkillCastRangeTypeEnum.Inf)return!0;if(n[0]==l.SkillCastRangeTypeEnum.CirCle){var o=n[1];if(e.sub(i).len()<=o)return!0}else if(n[0]==l.SkillCastRangeTypeEnum.Rect){var r=e.x,a=e.y,s=cc.rect(r,a,n[1],n[2]);return i.x<e.x&&(s.x=s.x-s.width),p.default.rectContainPoint(s,i)}},t.prototype.isSkillComboTypeEmpty=function(){return null==this._SkillVO.skillComboId||r.default.SkillComboTable.findById(this._SkillVO.skillComboId).comboType==h.SkillComboType.Empty},t.prototype.getSkillComboId=function(){return this._SkillVO.skillComboId},t.prototype.getSkillId=function(){return this._skillId},t.prototype.getSkillVO=function(){return this._SkillVO},t.prototype.getSkillType=function(){return this._SkillVO.skillType},t.prototype.getSubSkillType=function(){return this._SkillVO.subSkillType},t.prototype.isSubSkillType=function(t){return t==this._SkillVO.subSkillType},t.prototype.getScene=function(){return this._scene},t.prototype.getOwner=function(){return this._objFight},t.prototype.getCamp=function(){return this._objFight.getCamp()},t.prototype.getBeginAnimation=function(){return this._SkillVO.beginAnimation},t.prototype.getBuffVOList=function(){var t=[],e=this._SkillVO.targetBuffIds;if(null==e)return t;for(var i=0;i<e.length;i++){var n=e[i][0],o=r.default.BuffTable.findByBuffid(n);t.push(o)}return t},t.prototype.getBreakThroughBonus=function(){return 0},t.prototype.getState=function(){return this._state},t.prototype.isState=function(t){return this._state==t},t.prototype.setState=function(t){this._state=t},t.prototype.isAutoCastType=function(){return this._SkillVO.castType==l.SkillCastTypeEnum.Auto},t.prototype.isUseByTriggleEvent=function(){return this._SkillVO.castType==l.SkillCastTypeEnum.EventMake},t.prototype.isTriggerByEvent=function(t){return this._SkillVO.castEventId==t},t.prototype.isNeedAction=function(){return this._SkillVO.beginAnimation},t.prototype.getPriority=function(){return this._SkillVO.priority},t.prototype.isBreakClearBullet=function(){return this._SkillVO.isBreakClearBullet},t.prototype.canUpgrade=function(){return 0!=this._SkillVO.upgradeSkillId},t.prototype.upgrade=function(){0!=this.canUpgrade()&&this._objFight.addSkill(this._SkillVO.upgradeSkillId)},t.prototype.getTargetBuffIdList=function(){for(var t=[],e=this._SkillVO.targetBuffIds,i=0;i<e.length;i++){var n=e[i];a.default.rand()<n[1]&&t.push(n[0])}return t},t.prototype.getAttackerBuffIdList=function(){for(var t=[],e=this._SkillVO.selfBuffIds||[],i=0;i<e.length;i++){var n=e[i];a.default.rand()<n[1]&&t.push(n[0])}return t},t.prototype.isCooling=function(){return this.isState(l.SkillStateEnum.Cooling)},t.prototype.resetCD=function(){this._skillCDCount=0},t.prototype.getTargetList=function(){var t,e=cc.v2(this._objFight.getWorldPos());t=this._objFight.getScene().getObjListBySector(e,[0,1e3],[0,360],function(){return!0},!0);for(var i=[],n=0;n<t.length;n++){var o=t[n];this.filterTargetList(o)&&i.push(o)}return i},t.prototype.setTargetList=function(t){this._targetList=t},t.prototype.setTarget=function(t){this._target=t},t.prototype.filterTargetList=function(t){for(var e=this.getCamp(),i=0,n=c.EnemyRaceConst[e];i<n.length;i++){var o=n[i];if(t.getCamp()==o)return!0}return!1},t.prototype.getSkillRestCd=function(){var t=this._skillCD-this._skillCDCount;return t<0&&(t=0),t},t.prototype.getSkillRestPercent=function(){return this.getSkillRestCd()/this._skillCD},t.prototype.isCanUse=function(){return 0==this.isState(l.SkillStateEnum.Freeing)?l.SkillUseEnum.StateWrong:(this._target=this.getOwner().getTarget(),this._SkillVO.isNeedTarget2Use&&!this._target?this.isInRange()?l.SkillUseEnum.NoTarget:l.SkillUseEnum.TargetOutOfRange:this._SkillVO.isNeedTarget2CreatBullet&&!this._target?l.SkillUseEnum.NoTarget:l.SkillUseEnum.UseSucc)},t.prototype.use=function(t){return void 0===t&&(t=[]),this.setState(l.SkillStateEnum.Preparing),this._useAt=this._objFight.getTime(),this._skillCDCount=0,this._SkillVO.continueTime&&(this._finishTime=this._useAt+this._SkillVO.continueTime),!0},t.prototype.cast=function(){var t=this;if(0!=this._castTimes)if(this._castTimes--,this._state==l.SkillStateEnum.Preparing){if(this._SkillVO.warningRangeGroup,this.setState(l.SkillStateEnum.Casting),this.getSkillType()==l.SkillTypeEnum.WildWarrior){var e=this.getOwner().getHpPercent(),i=this._SkillVO.param2;if(e<i[0]/100||e>i[1]/100){var n=this.getAttackerBuffIdList();if(n.length>0)for(var o=0,a=n;o<a.length;o++){var c=a[o];this._objFight.removeBuffById(c)}return}}var u=this.getAttackerBuffIdList();if(u.length>0&&this._objFight.addBuffIdList(u,this._objFight),this.getSkillType()!=l.SkillTypeEnum.FightBack||null!=this.getSkillVO().bulletGroupId)if(this.getSkillType()!=l.SkillTypeEnum.EffectMost||null!=this.getSkillVO().bulletGroupId)if(null==this.getSkillVO().bulletGroupId&&this.getSkillVO().targetBuffIds)this._target.addBuffIdList(this.getTargetBuffIdList(),this.getOwner());else{var p=this._SkillVO.bulletGroupId;if(null!=p){var d=r.default.SkillbulletGroupTable.findById(p);if(null!=d)for(var h=d.bulletIdArry||[],f=d.bulletDelay||[],g=d.groupDelay||0,y=d.delayTimes||1,m=this._objFight.getTime(),v=0;v<y;v++){for(var _=0;_<h.length;_++){var C=h[_],b=0;f.length>_&&(b=f[_]/1e3+g),r.default.SkillbulletTable.findById(C)&&this._delayBulletList.push([C,this._target,m+b])}g+=d.groupDelay}else s.default.error("Skill BulletGroupVO == null,bulletGroupId = %s,skillId = %s",p,this.getSkillId())}else this.setState(l.SkillStateEnum.Cooling)}else this.getScene().foreachEnemy(this._objFight.getCamp(),function(e){e.addBuffIdList(t.getTargetBuffIdList(),t._objFight)});else this.getScene().foreachEnemy(this._objFight.getCamp(),function(e){e.addBuffIdList(t.getTargetBuffIdList(),t._objFight)})}else s.default.error("skill cast. \u5f02\u5e38\u7684\u6280\u80fd\u72b6\u6001 skillId:%s state:%s",this._skillId,this._state);else this.getOwner().delSkill(this.getSkillId())},t.prototype.realCast=function(){if(0!=this._castTimes)if(this._castTimes--,this._state==l.SkillStateEnum.Preparing)if(this.setState(l.SkillStateEnum.Casting),this.getAttackerBuffIdList().length>0&&this._objFight.addBuffIdList(this.getAttackerBuffIdList(),this._objFight),null==this.getSkillVO().bulletGroupId&&this.getSkillVO().targetBuffIds)this._target.addBuffIdList(this.getTargetBuffIdList(),this.getOwner()),this.setState(l.SkillStateEnum.Cooling);else{var t=this._SkillVO.bulletGroupId;if(null!=t)for(var e=r.default.SkillbulletGroupTable.findById(t),i=e.bulletIdArry||[],n=e.bulletDelay||[],o=e.groupDelay||0,a=e.delayTimes||1,c=this._objFight.getTime(),u=0;u<a;u++){for(var p=0;p<i.length;p++){var d=i[p],h=0;n.length>p&&(h=n[p]/1e3+o),r.default.SkillbulletTable.findById(d)&&this._delayBulletList.push([d,this._target,c+h])}o+=e.groupDelay}}else s.default.error("skill cast. \u5f02\u5e38\u7684\u6280\u80fd\u72b6\u6001 skillId:%s state:%s",this._skillId,this._state);else this.getOwner().delSkill(this.getSkillId())},t.prototype.stop=function(){this._state!=l.SkillStateEnum.Preparing?(this.setState(l.SkillStateEnum.Cooling),this._finishTime=null,this._SkillVO.isStopClearBullet&&this.getScene().breakOffBulletBySkill(this)):this.stopPreparing()},t.prototype.breakOff=function(){this.stop(),this._delayBulletList=[],this.isBreakClearBullet()&&this.getScene().breakOffBulletBySkill(this),this.breakSkillCombo()},t.prototype.stopPreparing=function(){if(this._state==l.SkillStateEnum.Preparing){this._objFight.getTime();var t=l.SkillStateEnum.Freeing;this._skillCD>this._skillCDCount&&(t=l.SkillStateEnum.Cooling),this.setState(t),this._useAt=0}},t.prototype.shootBullet=function(){if(null!=this._delayBulletList&&0!=this._delayBulletList.length)for(var t=this._objFight.getTime(),e=this._delayBulletList.length-1;e>=0;e--){var i=this._delayBulletList[e],n=i[0],o=i[1],a=i[2];if(100001==n&&null==o)return;if(a<t){if(null==r.default.SkillbulletTable.findById(n)){this._delayBulletList.splice(e,1);continue}this.getScene().createBullet(n,this,o,this._objFight),this._delayBulletList.splice(e,1)}}},t.prototype.setSkillCombo=function(t){this.combo=t},t.prototype.clearSkillCombo=function(){this.combo&&(this.combo.onExit(),this.combo=null)},t.prototype.breakSkillCombo=function(){this.combo&&(this.combo.breakOff(),this.combo=null)},t.prototype.onTick=function(t){if(this._skillCDCount+=t,this.constTimeCount+=t,this.constTimeCount>=this._constTime)this.getOwner().delSkill(this.getSkillId());else{this.shootBullet();var e=this._objFight.getTime();null==this._SkillVO.continueTime&&this._state==l.SkillStateEnum.Preparing&&e>this._useAt+l.SkillEnum.PreparingLimitedTime&&(console.error("[Skill] \u51c6\u5907\u6280\u80fd\u8d85\u65f6\uff0c\u4e2d\u65ad\u51c6\u5907 \nnow = "+e+",\nthis._useAt = "+this._useAt+",\nSkillEnum.PreparingLimitedTime = "+l.SkillEnum.PreparingLimitedTime+"\nskillId = "+this.getSkillId()),this.stopPreparing()),this._state==l.SkillStateEnum.Cooling&&this._skillCD<this._skillCDCount&&this.setState(l.SkillStateEnum.Freeing),this._finishTime&&e>this._finishTime&&this.stop(),this.combo&&this.combo.onTick(t)}},t.prototype.onExit=function(){},t}();o.default=f,cc._RF.pop()},{}],SortUtils:[function(t,e,i){"use strict";cc._RF.push(e,"b1500AjBcZDeZfKmDJ/ZdpV","SortUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.sort=function(t){for(var e=0;e<t.length-1;e++){for(var i=!1,n=0;n<t.length-e-1;n++)if(t[n]>t[n+1]){var o=t[n];t[n]=t[n+1],t[n+1]=o,i=!0}if(!i)break}},t}();n.default=o,cc._RF.pop()},{}],SpecialHongbaoTable:[function(t,e,i){"use strict";cc._RF.push(e,"14e6eF/ABdIkpWhyItdgTFE","SpecialHongbaoTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SpecialHongbaoVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("special_hongbao_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.date,n)}},t.prototype.findByDate=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SpecialHongbaoVO:[function(t,e,i){"use strict";cc._RF.push(e,"d5a1e1T/xlAsKf33BHNEvSf","SpecialHongbaoVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.date=t[0],this.video1Reward=t[1],this.video1Show=t[2],this.video2Reward=t[3],this.video2Show=t[4],this.video3Reward=t[5],this.video3Show=t[6],this.video4Reward=t[7],this.video4Show=t[8]},cc._RF.pop()},{}],SpineUtils:[function(t,e,i){"use strict";cc._RF.push(e,"e556c3jrLdBX49MM0RODtjd","SpineUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("TypeUtils"),a=n("Tbl"),s=n("SkillConst"),l=n("RES"),c=n("ComSpine"),u=n("App"),p=function(){function t(){}return t.createSpine=function(t,e,i){a.default.ClientTable.findById(t);var n=null;return u.default.nodePoolMgr.isCanGetNode(t)?n=u.default.nodePoolMgr.getNodeByPool(t,u.default.sceneMgr.getScene().node):((n=new cc.Node("")).addComponent(c.default).init(e,function(){r.default.isFunction(i)&&i(n)}),n)},t.createDirSpine=function(t,e){var i=a.default.ClientTable.findById(t),n=null;if(u.default.nodePoolMgr.isCanGetNode(t))return u.default.nodePoolMgr.getNodeByPool(t,u.default.sceneMgr.getScene().node);var o=u.default.resMgr.getPrefab(i.strParam1);return(n=cc.instantiate(o)).addComponent(c.default).initWithNode(function(t,i){e&&e(t,i)}),n},t.createSpineByResId=function(t,e,i,n){var o=a.default.ClientTable.findById(t);if(null!=o){var r;if(o.resType==s.ResourceTypeEnum.PlistSpine){var u=o.param1,p=o.param2,d=o.param3,h=o.scale||1,f=l.ClientRes[u],g=l.ClientRes[p],y=l.ClientRes[d],m=y.url.lastIndexOf("/")+1,v={skeUrl:f.url,atlasUrl:g.url,imageUrl:y.url,textureName:y.url.substr(m)+".png",isEnableBatch:!0,isRetainImage:!0,isRetainText:!0};(r=this.createSpine(t,v,function(t){var r=t.getComponent("ComSpine");r.setPremultipliedAlpha(!1),t.parent=i,"play_ready"==o.defaultAni||(o.defaultAni?r.play(0,o.defaultAni,e):r.play(0,"play",e)),n&&n(t,r)})).parent=i,r.scale=h;var _=r.getComponent(c.default);o.defaultAni?_.play(0,o.defaultAni,e):_.play(0,"play",e),o.offset&&(r.x=o.offset[0],r.y=o.offset[1])}else if(o.resType==s.ResourceTypeEnum.DirSpine){(r=this.createDirSpine(t)).parent=i,r.scale=o.scale||1;var C=r.getComponent(c.default);C.setPremultipliedAlpha(!1),o.defaultAni?C.play(0,o.defaultAni,e):C.play(0,"play",e),o.offset&&(r.x=o.offset[0],r.y=o.offset[1]),n&&n(r,C)}else console.error("\u8fd9\u4e0d\u662f\u56fe\u96c6spine\uff0c\u8c03\u7528\u9519\u8bef");return r}console.error("not find resVO! resId:%s",t)},t.playSpineOnce=function(t,e){var i=this.createSpineByResId(t,!1,e),n=a.default.ClientTable.findById(t),o=n.defaultAni||"play";i.getComponent(c.default).setCompleteListener(function(e){e.animation.name==o&&u.default.nodePoolMgr.returnNodeToPool(t,i)});var r=i.getComponent(c.default);return n.defaultAni?r.play(0,n.defaultAni,!1):r.play(0,"play",!1),i},t}();o.default=p,cc._RF.pop()},{}],SpriteFrameUtils:[function(t,e,i){"use strict";cc._RF.push(e,"977108JNhZOBYOYniQ0hzoZ","SpriteFrameUtils");var n=t,o=i,r=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("Tbl"),s=n("App"),l=n("LoggerUtils"),c=cc._decorator,u=c.ccclass,p=(c.property,function(){function t(){}return t.getSkillIconSpriteFrame=function(t){var e=a.default.SkillTable.findById(t);return e.skillIcon?s.default.resMgr.getSpriteFrame("icon2/"+e.skillIcon):null},t.setSpriteFrame=function(t,e){if(null!=t)if(null!=e){var i=t.getComponent(cc.Sprite);null!=i?i.spriteFrame=e:l.default.error("SpriteFrameUtils setSpriteFrame sprite == null")}else l.default.error("SpriteFrameUtils setSpriteFrame spriteFrame == null");else l.default.error("SpriteFrameUtils setSpriteFrame node == null")},r([u],t)}());o.default=p,cc._RF.pop()},{}],StageMonsterTable:[function(t,e,i){"use strict";cc._RF.push(e,"b0748ySYTNEXJFoiyVTe1T0","StageMonsterTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("StageMonsterVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("stage_monster_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],StageMonsterVO:[function(t,e,i){"use strict";cc._RF.push(e,"41da7IFJghFwKhJ7cwQfZzR","StageMonsterVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.monsterWave=t[1],this.birthTime=t[2]},cc._RF.pop()},{}],StaticGroupTable:[function(t,e,i){"use strict";cc._RF.push(e,"011baKFeVVGgK7R8ow8/ArV","StaticGroupTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("StaticGroupVO"),s=function(){function t(){this.VOList=[],this.initVO(r.default.getInstance().getJson("static_group_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n)}},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],StaticGroupVO:[function(t,e,i){"use strict";cc._RF.push(e,"c4513teH7lJR5q7ps6Ry00o","StaticGroupVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.name=t[0],this.itemId=t[1],this.min=t[2],this.max=t[3]},cc._RF.pop()},{}],StepCollision:[function(t,e,i){"use strict";cc._RF.push(e,"fa872Bfb21B/6L5qyH7A7IR","StepCollision");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ComCollision"),c=o("ObjConst"),u=o("NodeUtils"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onCollisionEnter=function(t,e){var i=t.node,n=e.node,o=u.default.getWorldPos(n),r=u.default.getWorldPos(i),a=o.y+e.offset.y+e.size.height/2-20;t.getComponent("ComMover").speed<=0&&r.y>=a&&(t.node.getComponent("ObjHero").setState(c.ObjStateEnum.OnStep),t.node.getComponent("ObjHero").exitState(c.ObjStateEnum.Jumping),t.node.getComponent("ObjHero").resetJumpTime())},e.prototype.onCollisionStay=function(t,e){var i=t.node,n=e.node,o=u.default.getWorldPos(n),r=u.default.getWorldPos(i),a=o.y+e.offset.y+e.size.height/2;t.getComponent("ComMover").speed<=0&&r.y>=a&&(t.node.getComponent("ObjHero").setState(c.ObjStateEnum.OnStep),t.node.getComponent("ObjHero").exitState(c.ObjStateEnum.Jumping))},e.prototype.onCollisionExit=function(t){t.node.getComponent("ObjHero").exitState(c.ObjStateEnum.OnStep)},s([d],e)}(l.default));r.default=h,cc._RF.pop()},{}],StoryBgView:[function(t,e,i){"use strict";cc._RF.push(e,"0734bYwu8VE2Z/wQdqE2b39","StoryBgView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("AdaptUtils"),u=o("BaseView"),p=o("Tbl"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labArray=[],e}return a(e,t),e.prototype.onLoad=function(){for(var t=1;t<=6;t++){var e="lab"+t;this.labArray.push(this.getC(e))}},e.prototype.start=function(){var e=this;t.prototype.start.call(this);var i=l.default.levelServer.getCurChapter(),n=p.default.ChapterTable.findById(i).storyBg;this.setTouchable(!1);for(var o=0,r=0;r<this.labArray.length;r++){var a=this.labArray[r];a.getComponent(cc.Label).string=n[r],o++,cc.tween(a).delay(.8*r).to(1,{opacity:255}).start()}cc.tween(this.node).delay(.8*o).call(function(){e.setTouchable(!0)}).start(),l.default.onClick(this.getC("touchNode"),function(){e.closeSelf()})},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");c.default.adaptSize2Winsize(t)},s([h],e)}(u.default));r.default=f,cc._RF.pop()},{}],StringUtils:[function(t,e,i){"use strict";cc._RF.push(e,"38593OnoZdFTbcAZGdzSdpZ","StringUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("LoggerUtils"),a={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16",17:"17",18:"18",19:"19",20:"20",21:"21",0:"0"},s=function(){function t(){}return t.SingleDigit2ChineseNumber=function(t){return t>20||t<0?(r.default.error("StringUtils number2ChineseNumber \u53ea\u652f\u6301\u4e2a\u4f4d \u6b63\u6574\u6570"),0):(t=Math.floor(t),a[String(t)])},t}();o.default=s,cc._RF.pop()},{}],SummonsConst:[function(t,e,i){"use strict";cc._RF.push(e,"e9674FLeJFJGp2UnQgU7x68","SummonsConst");var n,o=t,r=i;Object.defineProperty(r,"__esModule",{value:!0}),r.SummonsComponent=r.SummonsType=void 0;var a,s=o("ObjSummonsEmptyPlane"),l=o("ObjSummonsFixedTurret"),c=o("ObjSummonsMovingTurret");(function(t){t[t.EmptyPlane=1]="EmptyPlane",t[t.FixedTurret=2]="FixedTurret",t[t.MovingTurret=3]="MovingTurret"})(a=r.SummonsType||(r.SummonsType={})),r.SummonsComponent=((n={})[a.EmptyPlane]=s.default,n[a.FixedTurret]=l.default,n[a.MovingTurret]=c.default,n),cc._RF.pop()},{}],SummonsTable:[function(t,e,i){"use strict";cc._RF.push(e,"0d926wh5kNAt7JkKvaGCz0t","SummonsTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SummonsVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("summons_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SummonsVO:[function(t,e,i){"use strict";cc._RF.push(e,"95c0cYLe59PuJJokK/O8q7Z","SummonsVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.type=t[1],this.resId=t[2],this.skinId=t[3],this.lifeTime=t[4],this.isCanAttacked=t[5],this.skillList=t[6],this.ownerAttrPrecent=t[7],this.collisionRange=t[8],this.bodyRange=t[9],this.param1=t[10],this.param2=t[11],this.param3=t[12]},cc._RF.pop()},{}],SystemOpenConst:[function(t,e,i){"use strict";cc._RF.push(e,"bf389UBy+lHvo9tHl1YSoT5","SystemOpenConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.SystemOpenEnum=void 0,function(t){t[t.Task=101]="Task",t[t.CardSlot_1=201]="CardSlot_1",t[t.CardSlot_2=202]="CardSlot_2",t[t.CardSlot_3=203]="CardSlot_3",t[t.CardSlot_4=204]="CardSlot_4",t[t.CardSlot_5=205]="CardSlot_5",t[t.CardSlot_6=206]="CardSlot_6",t[t.CardSlot_7=207]="CardSlot_7",t[t.CardSlot_8=208]="CardSlot_8",t[t.EquipmentView=301]="EquipmentView",t[t.TaskView=302]="TaskView",t[t.ShopView=303]="ShopView",t[t.CardView=304]="CardView"}(n.SystemOpenEnum||(n.SystemOpenEnum={})),cc._RF.pop()},{}],SystemOpenMgr:[function(t,e,i){"use strict";cc._RF.push(e,"87dccQ6l0lP36eYr8fvI7sR","SystemOpenMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("DataHelper"),c=o("CommonConst"),u=o("EventConst"),p=o("EventMgr"),d=function(t){function e(){var e=t.call(this)||this;return e._systemOpenList=null,e.initialize(),p.default.getInstance().on(u.Event_ChallengeLevel,e.onChallengeLevel.bind(e)),e}return a(e,t),e.prototype.initialize=function(){this.init(c.DataNameEnum.SystemOpenMgr),this._systemOpenList=this.getValue("systemOpenList")||[]},e.prototype.saveData=function(){this.setValue("systemOpenList",this._systemOpenList)},e.prototype.onFix=function(){var t=this,e=!1;s.default.SystemOpenTable.forEach(function(i){var n=i.id;if(null==t._systemOpenList.find(function(t){return t.id==n})){var o=!1;null!=i.defaultOpen&&i.defaultOpen>0&&(o=!0),t._systemOpenList.push({id:i.id,isOpen:o}),e=!0}}),e&&this.saveData()},e.prototype.isOpen=function(t){for(var e=0;e<this._systemOpenList.length;e++){var i=this._systemOpenList[e];if(i.id==t)return i.isOpen}return!1},e.prototype.onChallengeLevel=function(t){var e=this;0!=t.isSucc&&s.default.SystemOpenTable.forEach(function(i){if(null!=i.chapterLevel){var n=i.id,o=e._systemOpenList.find(function(t){return t.id==n});null!=o?o.isOpen||t.chapter!=i.chapterLevel[0]||t.level!=i.chapterLevel[1]||(o.isOpen=!0,e.saveData()):console.error("[SystemOpenMgr] not find data! idL%s",n)}})},e}(l.default);r.default=d,cc._RF.pop()},{}],SystemOpenTable:[function(t,e,i){"use strict";cc._RF.push(e,"8a174SIo4dIha/3i33CWjnn","SystemOpenTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("SystemOpenVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("system_open_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],SystemOpenVO:[function(t,e,i){"use strict";cc._RF.push(e,"e6dcfmV4jlDwZi3wSLG3b99","SystemOpenVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.defaultOpen=t[1],this.chapterLevel=t[2],this.unlockTips=t[3]},cc._RF.pop()},{}],TalentAttrTable:[function(t,e,i){"use strict";cc._RF.push(e,"e09c10RNIpGbp4mAwRXLii/","TalentAttrTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("TalentAttrVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("talent_attr_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.level,n)}},t.prototype.findByLevel=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],TalentAttrVO:[function(t,e,i){"use strict";cc._RF.push(e,"7f764VsLHFDNqdcwJTfzQM0","TalentAttrVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.level=t[0],this.costCoin=t[1],this.hpmax=t[2],this.attack=t[3],this.dodge=t[4],this.crit=t[5],this.defense=t[6],this.penetrate=t[7]},cc._RF.pop()},{}],TalentCeilTable:[function(t,e,i){"use strict";cc._RF.push(e,"07e4boVDAVH3r0pTu3jG/7A","TalentCeilTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("TalentCeilVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("talent_ceil_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],TalentCeilVO:[function(t,e,i){"use strict";cc._RF.push(e,"02d2fVv7ktDwah0ZGUgNBjx","TalentCeilVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.sortId=t[1],this.name=t[2],this.suitAttr=t[3],this.talentId=t[4],this.weight=t[5],this.iconPath=t[6],this.talentDetail=t[7],this.level=t[8]},cc._RF.pop()},{}],TalkingDataAndroid:[function(t,e,i){"use strict";cc._RF.push(e,"89028rXdmZMKoyyB+C4r04i","TalkingDataAndroid");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0}),n("App"),n("CommonConst"),n("LoggerUtils");var r=function(){function t(){}return t.dotLevelSuccess=function(){},t.dotLevelFail=function(){},t.dotChapterSuccess=function(){},t.dotTouchVideo=function(){},t.dotVideoBegin=function(){},t.dotVideoEnd=function(){},t.onEvent=function(){},t.dotHeroDied=function(){},t.dotHeroResurrected=function(){},t}();o.default=r,cc._RF.pop()},{}],TalkingDataIos:[function(t,e,i){"use strict";cc._RF.push(e,"beb46AhlcFBoq7SiHqTUI3D","TalkingDataIos");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("App"),a=n("CommonConst"),s=function(){function t(){}return t.dotLevelSuccess=function(){if(cc.sys.isNative){var t=r.default.levelServer.getMaxChapter()+"_"+r.default.levelServer.getCurLevel()+"_\u901a\u5173_\u6210\u529f";jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",t)}},t.dotLevelFail=function(){if(cc.sys.isNative){var t=r.default.levelServer.getMaxChapter()+"_"+r.default.levelServer.getCurLevel()+"_\u901a\u5173_\u5931\u8d25";jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",t)}},t.dotChapterSuccess=function(){if(cc.sys.isNative){var t=r.default.levelServer.getMaxChapter()+"_\u901a\u8fc7\u7ae0\u8282_\u6210\u529f";jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",t)}},t.dotTouchVideo=function(t){if(cc.sys.isNative){var e="\u70b9\u51fb\u89c6\u9891\u6309\u94ae_"+a.AdName[t];jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",e)}},t.dotVideoBegin=function(t){if(cc.sys.isNative){var e="\u89c6\u9891\u663e\u793a_"+a.AdName[t];jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",e)}},t.dotVideoEnd=function(t){if(cc.sys.isNative){var e="\u89c6\u9891\u5173\u95ed_"+a.AdName[t];jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",e)}},t.dotHeroDied=function(){if(cc.sys.isNative){var t="\u82f1\u96c4\u6b7b\u4ea1_\u7ae0\u8282"+r.default.levelServer.getMaxChapter()+"_\u5173\u5361"+r.default.levelServer.getCurLevel();jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",t)}},t.dotHeroResurrected=function(){if(cc.sys.isNative){var t="\u82f1\u96c4\u590d\u6d3b_\u7ae0\u8282"+r.default.levelServer.getMaxChapter()+"_\u5173\u5361"+r.default.levelServer.getCurLevel();jsb.reflection.callStaticMethod("TalkingDataUtils","onEvent:",t)}},t}();o.default=s,cc._RF.pop()},{}],TalkingDataUtils:[function(t,e,i){"use strict";cc._RF.push(e,"c33672DY3VMEKekiVXN/EAq","TalkingDataUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0}),n("LoggerUtils");var r=n("TalkingDataAndroid"),a=n("TalkingDataIos"),s=function(){function t(){}return t.getTalkingDataObj=function(){return cc.sys.os===cc.sys.OS_IOS?a.default:r.default},t.dotLevelSuccess=function(){},t.dotLevelFail=function(){},t.dotChapterSuccess=function(){},t.dotTouchVideo=function(){},t.dotVideoBegin=function(){},t.dotVideoEnd=function(){},t.dotHeroDied=function(){},t.dotHeroResurrected=function(){},t}();o.default=s,cc._RF.pop()},{}],TaskConst:[function(t,e,i){"use strict";cc._RF.push(e,"bdb0fp7/vxAvrBUPZa9BCim","TaskConst");var n,o,r=i;Object.defineProperty(r,"__esModule",{value:!0}),r.TaskRewardEnum=r.TaskEventType=r.TaskParams=r.TaskTypeEnum=r.TaskStatusEnum=void 0,function(t){t[t.Invalid=0]="Invalid",t[t.CanNot=1]="CanNot",t[t.CanGet=2]="CanGet",t[t.HadGet=3]="HadGet",t[t.Expired=4]="Expired"}(r.TaskStatusEnum||(r.TaskStatusEnum={})),function(t){t[t.Daily=1]="Daily",t[t.Week=2]="Week",t[t.NewPlayer=3]="NewPlayer"}(o=r.TaskTypeEnum||(r.TaskTypeEnum={})),r.TaskParams=((n={})[o.Daily]={max:5},n),function(t){t[t.Login=1]="Login",t[t.Online=2]="Online",t[t.Share=10]="Share",t[t.MagicExpression=20]="MagicExpression",t[t.Charge=50]="Charge",t[t.InviteFriends=51]="InviteFriends",t[t.FollowPublicAccounts=52]="FollowPublicAccounts",t[t.AddCustomerServiceWeChat=53]="AddCustomerServiceWeChat",t[t.WatchAds=54]="WatchAds",t[t.Withdraw=55]="Withdraw",t[t.GetTitle=56]="GetTitle",t[t.ItemCost=100]="ItemCost",t[t.ItemGet=101]="ItemGet",t[t.Level=200]="Level",t[t.VipLevel=201]="VipLevel",t[t.ChallengeLevel=300]="ChallengeLevel",t[t.KillMonster=301]="KillMonster"}(r.TaskEventType||(r.TaskEventType={})),function(t){t[t.Gold=1]="Gold",t[t.Diamond=2]="Diamond",t[t.Activity=3]="Activity",t[t.VipExp=4]="VipExp",t[t.WarHonor=5]="WarHonor"}(r.TaskRewardEnum||(r.TaskRewardEnum={})),cc._RF.pop()},{}],TaskDailyActivityTable:[function(t,e,i){"use strict";cc._RF.push(e,"020241oppdAfqXWTmNGf8CN","TaskDailyActivityTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("TaskDailyActivityVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("task_daily_activity"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],TaskDailyActivityVO:[function(t,e,i){"use strict";cc._RF.push(e,"30bbca3trlHlLgLRbNJjr+a","TaskDailyActivityVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.activity=t[1],this.award=t[2]},cc._RF.pop()},{}],TaskEventDispatcher:[function(t,e,i){"use strict";cc._RF.push(e,"c5220PsibZIb7r3l4uGSgCj","TaskEventDispatcher");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("TimeMgr"),l=o("Singleton"),c=o("TaskConst"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.incrStep=function(t,e,i,n){void 0===n&&(n=[]);var o=e.eventType;switch(o){case c.TaskEventType.Login:return this.login(t,e,i,n);case c.TaskEventType.Online:return this.online(t,e,i,n);case c.TaskEventType.Share:return this.share(t,e,i,n);case c.TaskEventType.ItemCost:return this.itemCost(t,e,i,n);case c.TaskEventType.ItemGet:return this.itemGet(t,e,i,n);case c.TaskEventType.WatchAds:return this.watchAds(t,e,i,n);case c.TaskEventType.VipLevel:return this.vipLevel(t,e,i,n);case c.TaskEventType.ChallengeLevel:return this.challengeLevel(t,e,i,n);case c.TaskEventType.KillMonster:return this.killMonster(t,e,i,n);default:console.error("TaskEventDispatcher \u914d\u7f6e\u4e86\u672a\u5b9e\u73b0\u7684\u7c7b\u578b\uff01eventType:%s",o)}return 0},e.prototype.login=function(t){t.lastLoginAt=0|t.lastLoginAt;var e=s.default.getTimestampSec();return s.default.isSameDay(t.lastLoginAt,e)?1:(t.lastLoginAt=e,t.progress+=1,1)},e.prototype.online=function(t){var e=s.default.getTimestampSec();return(null==t.lastOnlineAt||e-t.lastOnlineAt>59)&&(t.lastOnlineAt=e,t.progress+=1),1},e.prototype.share=function(t,e,i,n){var o=n[0];return null==o?(console.error("[TaskEventDispatcher] share params:",n),0):null!=e.param1&&-1==e.param1.indexOf(o)?0:(t.progress+=i,i)},e.prototype.itemCost=function(t,e,i,n){var o=n[0];if(null==o)return console.error("[TaskEventDispatcher] itemCost params:",n),0;var r=n[1];return null==r?(console.error("[TaskEventDispatcher] itemCost params:",n),0):null!=e.param1&&-1==e.param1.indexOf(o)?0:null!=e.param2&&e.param2!=r?0:(t.progress+=i,i)},e.prototype.itemGet=function(t,e,i,n){var o=n[0];if(null==o)return console.error("[TaskEventDispatcher] itemGet params:",n),0;var r=n[1];return null==r?(console.error("[TaskEventDispatcher] itemGet params:",n),0):null!=e.param1&&-1==e.param1.indexOf(o)?0:null!=e.param2&&e.param2!=r?0:(t.progress+=i,i)},e.prototype.watchAds=function(t,e,i){return t.progress+=i,i},e.prototype.vipLevel=function(t,e,i){return t.progress=i,i},e.prototype.challengeLevel=function(t,e,i,n){var o=n[0];if(null==o)return console.error("[TaskEventDispatcher] challengeLevel params:",n),0;var r=n[1];if(null==r)return console.error("[TaskEventDispatcher] challengeLevel params:",n),0;var a=n[2];return null==a?(console.error("[TaskEventDispatcher] challengeLevel params:",n),0):null!=e.param2&&e.param2!=o?0:null!=e.param4&&e.param4!=a?0:(t.progress<r&&(t.progress=r,console.log("[TaskEvent] challengeLevel level:%s",r)),1)},e.prototype.killMonster=function(t,e,i,n){var o=n[0];if(null==o)return console.error("[TaskEventDispatcher] killMonster params:",n),0;var r=n[1];if(null==r)return console.error("[TaskEventDispatcher] killMonster params:",n),0;var a=n[2];if(null==a)return console.error("[TaskEventDispatcher] killMonster params:",n),0;var s=n[3];return null==s?(console.error("[TaskEventDispatcher] killMonster params:",n),0):null!=e.param1&&e.param1.length>0&&-1==e.param1.indexOf(o)?0:null!=e.param2&&e.param2!=r?0:null!=e.param3&&e.param3!=a?0:null!=e.param4&&e.param4!=s?0:(t.progress+=i,i)},e}(l.default);r.default=u,cc._RF.pop()},{}],TaskMgr:[function(t,e,i){"use strict";cc._RF.push(e,"65d1f1hQYhAQapw5ahfsDQG","TaskMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("CycleConst"),p=o("DataHelper"),d=o("BagConst"),h=o("CommonConst"),f=o("EventConst"),g=o("EventMgr"),y=o("Utils"),m=o("TaskConst"),v=o("TaskEventDispatcher"),_=function(t){function e(){var e=t.call(this)||this;return e._taskList=null,e._isChanged=!1,e._dailyActivityInfo=null,e._weekActivityInfo=null,e.init(h.DataNameEnum.TaskMgr),e.initData(),c.default.cycleMgr.registerCycle(u.CycleTypeEnum.resetDailyTask,e,function(){e.resetAll(m.TaskTypeEnum.Daily),e._dailyActivityInfo={activity:0,receivedList:[]},e.saveDailyActivityData()}),c.default.cycleMgr.registerCycle(u.CycleTypeEnum.resetWeekTask,e,function(){e.resetAll(m.TaskTypeEnum.Week),e._weekActivityInfo={activity:0,receivedList:[]},e.saveWeekActivityData()}),c.default.cycleMgr.registerCycle(u.CycleTypeEnum.EveryMinute,e,function(){e.incrStep(m.TaskEventType.Online,1)}),g.default.getInstance().on(f.Event_ChallengeLevel,function(t){e.incrStep(m.TaskEventType.ChallengeLevel,1,[t.chapter,t.level,t.isSucc?1:0])}),e}return a(e,t),e.prototype.initData=function(){this._taskList=this.getValue("taskList")||[],null!=this._taskList&&0!=this._taskList.length||(this.resetAll(m.TaskTypeEnum.Daily),this.resetAll(m.TaskTypeEnum.Week),this.resetAll(m.TaskTypeEnum.NewPlayer)),this._dailyActivityInfo=this.getValue("taskDailyActivityInfo"),null!=this._dailyActivityInfo&&null!=this._dailyActivityInfo.activity&&null!=this._dailyActivityInfo.receivedList||(this._dailyActivityInfo={activity:0,receivedList:[]}),this._weekActivityInfo=this.getValue("taskWeekActivityInfo"),null!=this._weekActivityInfo&&null!=this._weekActivityInfo.activity&&null!=this._weekActivityInfo.receivedList||(this._weekActivityInfo={activity:0,receivedList:[]})},e.prototype.onFix=function(){for(var t=this._taskList.length-1;t>=0;t--){var e=this._taskList[t],i=s.default.TaskTable.findById(e.id);null!=i?e.progress>=i.num&&e.status==m.TaskStatusEnum.CanNot&&(e.status=m.TaskStatusEnum.CanGet,this._isChanged=!0):(this._taskList.splice(t,1),this._isChanged=!0)}this.incrStep(m.TaskEventType.Login,1),this.incrStep(m.TaskEventType.VipLevel,c.default.vipMgr.getLevel())},e.prototype.forEach=function(t){for(var e=0;e<this._taskList.length;e++)t(this._taskList[e])},e.prototype.getTask=function(t){if(null!=t)for(var e=0;e<this._taskList.length;e++){var i=this._taskList[e];if(i.id==t)return i}else console.error("[TaskMgr] getTask invalid taskId:%s",t)},e.prototype.getShowTaskList=function(){var t=new Map;function e(e){if(-1!=[m.TaskStatusEnum.CanNot,m.TaskStatusEnum.CanGet].indexOf(e.status)){var i=s.default.TaskTable.findById(e.id);0==t.has(i.showGroup)&&t.set(i.showGroup,{VO:i,task:e});var n=t.get(i.showGroup);i.id<n.VO.id&&t.set(i.showGroup,{VO:i,task:e})}}for(var i=0;i<this._taskList.length;i++)e(this._taskList[i]);var n=[];return t.forEach(function(t){n.push(t)}),n.sort(function(t,e){if(t.task.status!=e.task.status){if(t.task.status==m.TaskStatusEnum.CanGet)return-1;if(e.task.status==m.TaskStatusEnum.CanGet)return 1}return t.VO.rank==e.VO.rank?t.VO.id-e.VO.id:t.VO.rank-e.VO.rank}),n},e.prototype.saveTaskData=function(){this._isChanged&&(this.setValue("taskList",this._taskList),this._isChanged=!1)},e.prototype.saveDailyActivityData=function(){this.setValue("taskDailyActivityInfo",this._dailyActivityInfo)},e.prototype.saveWeekActivityData=function(){this.setValue("taskWeekActivityInfo",this._weekActivityInfo)},e.prototype.onTick=function(){this.saveTaskData()},e.prototype.activate=function(t,e){if(void 0===e&&(e=!1),null!=t){var i=s.default.TaskTable.findById(t);if(null!=i){var n=this.getTask(t);0==e&&null!=n||(null==n?(n={id:t,type:i.type,status:m.TaskStatusEnum.CanNot,progress:0},this._taskList.push(n),this._isChanged=!0):(n.id=t,n.type=i.type,n.status=m.TaskStatusEnum.CanNot,n.progress=0,n.lastLoginAt=0,n.lastOnlineAt=0,this._isChanged=!0),this.incrStep(m.TaskEventType.Login,1),this.incrStep(m.TaskEventType.VipLevel,2))}else console.error("[TaskMgr] activate invalid taskId:%s",t)}else console.error("[TaskMgr] activate invalid taskId:%s",t)},e.prototype.expired=function(t){var e=this.getTask(t);null!=e&&e.status!=m.TaskStatusEnum.Expired&&(e.status=m.TaskStatusEnum.Expired,this._isChanged=!0)},e.prototype.expiredAll=function(t){var e=this;this.forEach(function(i){i.type==t&&e.expired(i.id)})},e.prototype.resetAll=function(t){var e=this;console.log("[TaskMgr] resetAll type:%s",t),this.forEach(function(i){i.type==t&&(i.status=m.TaskStatusEnum.Invalid,e._isChanged=!0)});var i=(m.TaskParams[t]||{}).max||99,n=new Map,o=[],r=[];for(s.default.TaskTable.forEach(function(e){e.type==t&&(n.has(e.showGroup)?o.push(e):n.size>=i||(null!=e.weight&&e.weight<=0?(o.push(e),n.set(e.showGroup,!0)):r.push(e)))});o.length<i&&!(r.length<=0);){for(var a=0,l=0;l<r.length;l++)a+=(u=r[l]).weight;var c=y.default.rand(a);for(l=r.length-1;l>=0;l--)if((c-=(u=r[l]).weight)<=0){o.push(u),r.splice(l,1);break}}for(l=0;l<o.length;l++){var u=o[l];this.activate(u.id,!0)}},e.prototype.incrStep=function(t,e,i){var n=this;void 0===i&&(i=[]),this.forEach(function(o){if(o.status==m.TaskStatusEnum.CanNot){var r=s.default.TaskTable.findById(o.id);if(r&&r.eventType==t){var a=v.default.getInstance().incrStep(o,r,e,i);null!=a&&a>0&&(n._isChanged=!0,o.progress>=r.num&&(o.progress=r.num,o.status=m.TaskStatusEnum.CanGet,n._isChanged=!0))}}})},e.prototype.receiveAward=function(t){var e=s.default.TaskTable.findById(t);if(null!=e){var i=this.getTask(t);if(null!=i)if(i.status==m.TaskStatusEnum.CanGet){i.status=m.TaskStatusEnum.HadGet,this._isChanged=!0,this.saveTaskData();var n=e.award;c.default.bagMgr.addItemList(n,d.BagSourceEnum.TaskAward),c.default.event.emit(l.default.DailyActivity_Receive_Award)}else console.error("[TaskMgr] invalid task status! task:",i);else console.error("[TaskMgr] not find task! taskId:%s",t)}else console.error("[TaskMgr] not find taskVO! taskId:%s",t)},e.prototype.addActivity=function(t){this._dailyActivityInfo.activity+=t,this.saveDailyActivityData(),this._weekActivityInfo.activity+=t,this.saveWeekActivityData()},e.prototype.getDailyActivity=function(){return this._dailyActivityInfo},e.prototype.getWeeklyActivity=function(){return this._weekActivityInfo},e.prototype.receiveDailyActivityAward=function(t){var e=s.default.TaskDailyActivityTable.findById(t);if(null!=e)if(-1==this._dailyActivityInfo.receivedList.indexOf(t)){this._dailyActivityInfo.receivedList.push(t),this.saveDailyActivityData();var i=e.award;c.default.bagMgr.addItemList(i,d.BagSourceEnum.TaskActivityAward),c.default.event.emit(l.default.DailyActivity_Receive_DayActivityAward)}else console.error("[TaskMgr] receiveActivityAward is received! id:%s",t);else console.error("[TaskMgr] receiveDailyActivityAward not find TaskDailyActivityVO! id:%s",t)},e.prototype.receiveWeekActivityAward=function(t){var e=s.default.TaskWeekActivityTable.findById(t);if(null!=e)if(-1==this._weekActivityInfo.receivedList.indexOf(t)){this._weekActivityInfo.receivedList.push(t),this.saveWeekActivityData();var i=e.award;c.default.bagMgr.addItemList(i,d.BagSourceEnum.TaskActivityAward),c.default.event.emit(l.default.DailyActivity_Receive_WeekActivityAward)}else console.error("[TaskMgr] receiveWeekActivityAward is received! id:%s",t);else console.error("[TaskMgr] receiveWeekActivityAward not find TaskWeekActivityVO! id:%s",t)},e}(p.default);r.default=_,cc._RF.pop()},{}],TaskMiniView:[function(t,e,i){"use strict";cc._RF.push(e,"77bb6H2iYNK7IzGSH9OdutZ","TaskMiniView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.TaskWeekActivityType=void 0;var l=o("App"),c=o("BaseMiniView"),u=o("BagConst"),p=o("TaskConst"),d=o("AdaptUtils"),h=o("TipsUtils"),f=o("Tbl"),g=o("ENUMS"),y=o("UI"),m=o("ComTaskIcon"),v=o("MathUtils");(function(t){t[t.One=1]="One",t[t.Two=2]="Two"})(r.TaskWeekActivityType||(r.TaskWeekActivityType={}));var _=cc._decorator,C=_.ccclass,b=_.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskInfoPrefab=null,e.taskIcon=null,e.scrollView=null,e.scrollViewLayout=null,e.dailyBarList=[],e.dailyBarOriginWidth=0,e.dailyImgList=[],e}return a(e,t),e.prototype.onStart=function(){t.prototype.onStart.call(this),this.initData(),this.initDailyActive(),this.initWeeklyActive(),this.initScrollView()},e.prototype.onAdaptUI=function(){t.prototype.onAdaptUI.call(this);var e=this.getC("topContant");d.default.adaptNodeToTopInsideSafeArea(e,d.default.MainSceneBottonSpace+20);var i=this.getC("scrollView");d.default.adaptScrollviewInsideSafeArea(i,e,null,20,d.default.MainSceneBottonSpace)},e.prototype.initData=function(){this.scrollView=this.getC("scrollView"),this.scrollViewLayout=this.seekC(this.scrollView,"layout")},e.prototype.initDailyActive=function(){this.getC("labDailyActive").getComponent(cc.Label).string=""+l.default.taskMgr.getDailyActivity().activity,this.initDailyBar(),this.initDailyImg(),this.refreshDailyBar(),this.refreshDailyReward(),this.refreshNextReward()},e.prototype.refreshDailyActive=function(){this.getC("labDailyActive").getComponent(cc.Label).string=""+l.default.taskMgr.getDailyActivity().activity,this.refreshDailyBar(),this.refreshDailyReward(),this.refreshNextReward()},e.prototype.refreshNextReward=function(){for(var t=l.default.taskMgr.getDailyActivity().receivedList,e=this.getC("nextReward"),i=1;i<=5;i++)if(-1==t.indexOf(i)){for(var n=f.default.TaskDailyActivityTable.findById(i).award,o=0,r=0,a=0;a<n.length;a++)n[a][0]==u.ItemIdEnum.Gold&&(o=n[a][1]),n[a][0]==u.ItemIdEnum.Diamond&&(r=n[a][1]);return 0==o?this.seekC(e,"imgGold").active=!1:this.seekC(e,"labGold").getComponent(cc.Label).string=""+v.default.numToBigNum(o),void(0==r?this.seekC(e,"imgDiamond").active=!1:this.seekC(e,"labDiamond").getComponent(cc.Label).string=""+v.default.numToBigNum(r))}e.active=!1},e.prototype.initDailyBar=function(){for(var t=1;t<=5;t++){var e=this.getC("dailyBar"+t);e.active=!1,this.dailyBarList.push(e)}this.dailyBarOriginWidth=this.dailyBarList[0].width},e.prototype.initDailyImg=function(){for(var t=1;t<=5;t++){var e=this.getC("imgDaily"+t);this.seekC(e,"imgActive").active=!1,this.seekC(e,"imgUnActive").active=!1,this.seekC(e,"imgGet").active=!1,this.dailyImgList.push(e)}},e.prototype.refreshDailyBar=function(){var t=l.default.taskMgr.getDailyActivity().activity,e=f.default.TaskDailyActivityTable.findAll(function(){return!0}),i=t/e[e.length-1].activity;i>1&&(i=1);for(var n=0;i>=.2;)i-=.2,this.dailyBarList[n].active=!0,this.dailyBarList[n].width=this.dailyBarOriginWidth,n++;var o=this.dailyBarList[n];o&&(o.active=!0,o.width=this.dailyBarOriginWidth*i/.2)},e.prototype.refreshDailyReward=function(){for(var t=this,e=l.default.taskMgr.getDailyActivity(),i=f.default.TaskDailyActivityTable.findAll(function(){return!0}),n=function(n){var r=o.dailyImgList[n],a=o.seekC(r,"imgActive"),s=o.seekC(r,"imgUnActive"),c=o.seekC(r,"imgGet");e.activity>=i[n].activity?-1!=e.receivedList.indexOf(n+1)?(l.default.offClick(r.getComponent(cc.Button)),l.default.onClick(r,function(){h.default.showTips("You've claimed the reward")}),c.active=!0,s.active=!0,a.active=!1):(cc.tween(r).repeatForever(cc.tween().by(.5,{scale:.15}).by(.5,{scale:-.15})).start(),l.default.offClick(r.getComponent(cc.Button)),l.default.onClick(r,function(){l.default.taskMgr.receiveDailyActivityAward(n+1);var e=f.default.TaskDailyActivityTable.findById(n+1).award;t.refreshDailyActive(),t.initWeeklyActive(),r.stopAllActions(),l.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,e)}),c.active=!1,s.active=!1,a.active=!0):(l.default.offClick(r.getComponent(cc.Button)),l.default.onClick(r,function(){h.default.showTips("Not active enough to claim")}),c.active=!1,s.active=!0,a.active=!1)},o=this,r=0;r<5;r++)n(r)},e.prototype.initWeeklyActive=function(){this.getC("labWeekActive").getComponent(cc.Label).string=""+l.default.taskMgr.getWeeklyActivity().activity,this.refreshWeekBox()},e.prototype.refreshWeekBox=function(){for(var t=this,e=l.default.taskMgr.getWeeklyActivity(),i=f.default.TaskWeekActivityTable.findAll(function(){return!0}),n=function(n){var r=o.getC("weekBox"+n),a=o.seekC(r,"labNum"),s=o.seekC(r,"labState"),c=o.seekC(r,"btnGet");a.getComponent(cc.Label).string=""+i[n-1].activity,e.activity>=i[n-1].activity?(a.color=cc.color(246,255,0),s.color=cc.color(246,255,0),-1!=e.receivedList.indexOf(n)?(s.getComponent(cc.Label).string="Claimed",l.default.offClick(c.getComponent(cc.Button)),l.default.onClick(c,function(){h.default.showTips("You've claimed the reward")})):(cc.tween(c).repeatForever(cc.tween().by(.5,{scale:.15}).by(.5,{scale:-.15})).start(),s.getComponent(cc.Label).string="Claim",l.default.offClick(c.getComponent(cc.Button)),l.default.onClick(c,function(){var e=f.default.TaskWeekActivityTable.findById(n).award;l.default.taskMgr.receiveWeekActivityAward(n),t.refreshDailyActive(),t.initWeeklyActive(),c.stopAllActions(),l.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,e)}))):(a.color=cc.color(255,255,255),s.color=cc.color(255,255,255),s.getComponent(cc.Label).string="Claimable",l.default.offClick(c.getComponent(cc.Button)),l.default.onClick(c,function(){h.default.showTips("Not active enough to claim")}))},o=this,r=1;r<=2;r++)n(r)},e.prototype.initScrollView=function(){var t=this,e=(this.scrollView.getComponent(cc.ScrollView),l.default.taskMgr.getShowTaskList());this.scrollViewLayout.destroyAllChildren();for(var i=function(i){var o=e[i],r=o.VO,a=r.desc,s=cc.instantiate(n.taskInfoPrefab);n.scrollViewLayout.addChild(s),n.seekC(s,"labTarget").getComponent(cc.Label).string=a;var c=n.seekC(s,"labTargetNum"),u=o.task.progress,d=r.num;c.getComponent(cc.Label).string=u+"/"+d;for(var h=r.award,v=n.seekC(s,"layout"),_=0;_<h.length;_++){var C=h[_],b=C[0],S=C[1],O=cc.instantiate(n.taskIcon);O.parent=v,O.getComponent(m.default).initialize(b,S)}var E=n.seekC(s,"btnGo"),I=n.seekC(s,"btnGet");E.active=!1,I.active=!1,o.task.status==p.TaskStatusEnum.CanNot?(E.active=!0,l.default.onClick(E,function(){var t=l.default.levelServer.getMaxChapter();l.default.levelServer.enterChapter(t),l.default.sceneMgr.loadScene(g.SCENE.BATTLE)})):o.task.status==p.TaskStatusEnum.CanGet&&(I.active=!0,l.default.onClick(I,function(){l.default.taskMgr.receiveAward(o.task.id);var e=f.default.TaskTable.findById(o.task.id).award;l.default.viewMgr.showUI(y.UI.COMMONREWARD_VIEW,e),t.initScrollView(),t.refreshDailyActive(),t.initWeeklyActive()}))},n=this,o=0;o<e.length;o++)i(o);var r=new cc.Node("");r.parent=this.scrollViewLayout,r.setContentSize(200,300)},s([b(cc.Prefab)],e.prototype,"taskInfoPrefab",void 0),s([b(cc.Prefab)],e.prototype,"taskIcon",void 0),s([C],e)}(c.default);r.default=S,cc._RF.pop()},{}],TaskTable:[function(t,e,i){"use strict";cc._RF.push(e,"18df8yFlNFEjbw6pjLaqJmJ","TaskTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("TaskVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("task_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],TaskVO:[function(t,e,i){"use strict";cc._RF.push(e,"b93d5lEJdBLKJoKiZCk3eAz","TaskVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.weight=t[1],this.type=t[2],this.showGroup=t[3],this.rank=t[4],this.name=t[5],this.desc=t[6],this.icon=t[7],this.award=t[8],this.eventType=t[9],this.num=t[10],this.param1=t[11],this.param2=t[12],this.param3=t[13],this.param4=t[14],this.param5=t[15],this.jumpId=t[16]},cc._RF.pop()},{}],TaskWeekActivityTable:[function(t,e,i){"use strict";cc._RF.push(e,"8dadfrKzJVKK7w20MzVaxW7","TaskWeekActivityTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("TaskWeekActivityVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("task_week_activity"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],TaskWeekActivityVO:[function(t,e,i){"use strict";cc._RF.push(e,"e2f60w4vr5ACI7i7refKyMk","TaskWeekActivityVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.activity=t[1],this.award=t[2]},cc._RF.pop()},{}],Tbl:[function(t,e,i){"use strict";cc._RF.push(e,"a4aacH7vRFKtbpg4Xci+AsR","Tbl");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("AttributeTable"),a=n("AudioTable"),s=n("BuffTable"),l=n("BulletFeatureTable"),c=n("ChapterLevelTable"),u=n("ChapterTable"),p=n("ClientTable"),d=n("CommonHongbaoTable"),h=n("CommonTable"),f=n("CostarTable"),g=n("CountingBuyTable"),y=n("CountingTable"),m=n("CycleTable"),v=n("DigitTable"),_=n("DropTable"),C=n("EffectTable"),b=n("EquipmentPosTable"),S=n("EquipmentStarLevelTable"),O=n("EquipmentStrengthenTable"),E=n("EquipmentTable"),I=n("GenieGroupTable"),w=n("GenieTable"),A=n("GoodsIconTable"),R=n("GuideWordTable"),T=n("HeroAttrTable"),P=n("HeroTable"),L=n("IntensifyCeilTable"),M=n("IntensifyCostTable"),k=n("IntensifyDetailTable"),B=n("ItemGiftPackTable"),V=n("ItemTable"),N=n("LevelTable"),D=n("MapTable"),F=n("MonsterAITable"),U=n("MonsterBornPointTable"),j=n("MonsterGroupTable"),G=n("MonsterTable"),x=n("OfflineRewardTable"),H=n("RandomEventPreconditionTable"),W=n("RandomEventTable"),q=n("RelatedGroupTable"),z=n("RelatedItemTable"),K=n("ShopGiftTable"),J=n("ShopTable"),Q=n("ShopTypeTable"),Y=n("SigninRewardTable"),X=n("SingleGroupTable"),Z=n("SkillbulletGroupTable"),$=n("SkillbulletTable"),tt=n("SkillComboTable"),et=n("SkillTable"),it=n("SpecialHongbaoTable"),nt=n("StageMonsterTable"),ot=n("StaticGroupTable"),rt=n("SummonsTable"),at=n("SystemOpenTable"),st=n("TalentAttrTable"),lt=n("TalentCeilTable"),ct=n("TaskDailyActivityTable"),ut=n("TaskTable"),pt=n("TaskWeekActivityTable"),dt=n("TryItemTable"),ht=n("VipTable"),ft=n("WarHonorTable"),gt=n("WarningRangeTable"),yt=function(){function t(){t.AttributeTable=new r.default,t.AudioTable=new a.default,t.BuffTable=new s.default,t.BulletFeatureTable=new l.default,t.ChapterLevelTable=new c.default,t.ChapterTable=new u.default,t.ClientTable=new p.default,t.CommonHongbaoTable=new d.default,t.CommonTable=new h.default,t.CostarTable=new f.default,t.CountingBuyTable=new g.default,t.CountingTable=new y.default,t.CycleTable=new m.default,t.DigitTable=new v.default,t.DropTable=new _.default,t.EffectTable=new C.default,t.EquipmentPosTable=new b.default,t.EquipmentStarLevelTable=new S.default,t.EquipmentStrengthenTable=new O.default,t.EquipmentTable=new E.default,t.GenieGroupTable=new I.default,t.GenieTable=new w.default,t.GoodsIconTable=new A.default,t.GuideWordTable=new R.default,t.HeroAttrTable=new T.default,t.HeroTable=new P.default,t.IntensifyCeilTable=new L.default,t.IntensifyCostTable=new M.default,t.IntensifyDetailTable=new k.default,t.ItemGiftPackTable=new B.default,t.ItemTable=new V.default,t.LevelTable=new N.default,t.MapTable=new D.default,t.MonsterAITable=new F.default,t.MonsterBornPointTable=new U.default,t.MonsterGroupTable=new j.default,t.MonsterTable=new G.default,t.OfflineRewardTable=new x.default,t.RandomEventPreconditionTable=new H.default,t.RandomEventTable=new W.default,t.RelatedGroupTable=new q.default,t.RelatedItemTable=new z.default,t.ShopGiftTable=new K.default,t.ShopTable=new J.default,t.ShopTypeTable=new Q.default,t.SigninRewardTable=new Y.default,t.SingleGroupTable=new X.default,t.SkillbulletGroupTable=new Z.default,t.SkillbulletTable=new $.default,t.SkillComboTable=new tt.default,t.SkillTable=new et.default,t.SpecialHongbaoTable=new it.default,t.StageMonsterTable=new nt.default,t.StaticGroupTable=new ot.default,t.SummonsTable=new rt.default,t.SystemOpenTable=new at.default,t.TalentAttrTable=new st.default,t.TalentCeilTable=new lt.default,t.TaskDailyActivityTable=new ct.default,t.TaskTable=new ut.default,t.TaskWeekActivityTable=new pt.default,t.TryItemTable=new dt.default,t.VipTable=new ht.default,t.WarHonorTable=new ft.default,t.WarningRangeTable=new gt.default}return t.getInstance=function(){return t.__instance||(t.__instance=new t),t.__instance},t.AttributeTable=null,t.AudioTable=null,t.BuffTable=null,t.BulletFeatureTable=null,t.ChapterLevelTable=null,t.ChapterTable=null,t.ClientTable=null,t.CommonHongbaoTable=null,t.CommonTable=null,t.CostarTable=null,t.CountingBuyTable=null,t.CountingTable=null,t.CycleTable=null,t.DigitTable=null,t.DropTable=null,t.EffectTable=null,t.EquipmentPosTable=null,t.EquipmentStarLevelTable=null,t.EquipmentStrengthenTable=null,t.EquipmentTable=null,t.GenieGroupTable=null,t.GenieTable=null,t.GoodsIconTable=null,t.GuideWordTable=null,t.HeroAttrTable=null,t.HeroTable=null,t.IntensifyCeilTable=null,t.IntensifyCostTable=null,t.IntensifyDetailTable=null,t.ItemGiftPackTable=null,t.ItemTable=null,t.LevelTable=null,t.MapTable=null,t.MonsterAITable=null,t.MonsterBornPointTable=null,t.MonsterGroupTable=null,t.MonsterTable=null,t.OfflineRewardTable=null,t.RandomEventPreconditionTable=null,t.RandomEventTable=null,t.RelatedGroupTable=null,t.RelatedItemTable=null,t.ShopGiftTable=null,t.ShopTable=null,t.ShopTypeTable=null,t.SigninRewardTable=null,t.SingleGroupTable=null,t.SkillbulletGroupTable=null,t.SkillbulletTable=null,t.SkillComboTable=null,t.SkillTable=null,t.SpecialHongbaoTable=null,t.StageMonsterTable=null,t.StaticGroupTable=null,t.SummonsTable=null,t.SystemOpenTable=null,t.TalentAttrTable=null,t.TalentCeilTable=null,t.TaskDailyActivityTable=null,t.TaskTable=null,t.TaskWeekActivityTable=null,t.TryItemTable=null,t.VipTable=null,t.WarHonorTable=null,t.WarningRangeTable=null,t.__instance=null,t}();o.default=yt,cc._RF.pop()},{}],TimeMgr:[function(t,e,i){"use strict";cc._RF.push(e,"e67eaBOF9ZOnrklpGzEOKgj","TimeMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ArrayUtils"),l=function(t){function e(){var e=t.call(this)||this;return e._callFuncList=null,e._serverTime=null,e._localTime=null,e.initialize(),e._serverTime=(new Date).getTime(),e._localTime=(new Date).getTime(),e}return a(e,t),e.prototype.getServerTime=function(){if(null==this._localTime||null==this._serverTime)return(new Date).getTime();var t=(new Date).getTime()-this._localTime;return this._serverTime+t},e.prototype.getRunningTime=function(){return(new Date).getTime()-this._localTime},e.prototype.initialize=function(){this._callFuncList=[],this.initTimer()},e.prototype.finalize=function(){cc.director.getScheduler().unschedule(this.onTick,this)},e.prototype.initTimer=function(){var t=cc.director.getScheduler();t.enableForTarget(this),t.schedule(this.onTick,this,0,!1)},e.getTimestampSec=function(){return(new Date).valueOf()/1e3},e.isSameDay=function(t,i){return t|=0,i|=e.getTimestampSec(),new Date(t).toDateString()===new Date(i).toDateString()},e.getTimestampMill=function(){return(new Date).valueOf()},e.prototype.delayCallback=function(t,e,i){void 0===e&&(e=1/60),void 0===i&&(i=1),this.registerTimer(function(){t.call(e)},null,e,i)},e.prototype.registerTimer=function(t,e,i,n){void 0===i&&(i=1/60),(null==n||n<=0)&&(n=-1),this._callFuncList.push({target:e,callback:t,dt:i,curDt:0,repeatTimes:n})},e.prototype.unRegisterTimer=function(t){for(var e=0;e<this._callFuncList.length;e++){var i=this._callFuncList[e];if(i&&i.callback===t){this._callFuncList.splice(e,1);break}}},e.prototype.onTick=function(t){this.clearNoRepeatTimer();for(var i=0;i<this._callFuncList.length;i++){var n=this._callFuncList[i];n&&(n.dt?(n.curDt+=t,n.curDt>=n.dt&&(n.repeatTimes<0?n.callback.call(n.target,n.curDt,e.getTimestampMill()):(n.repeatTimes=Math.max(0,n.repeatTimes-1),n.callback.call(n.target,n.curDt,e.getTimestampMill())),n.curDt=0)):n.repeatTimes<0?n.callback.call(n.target,t,e.getTimestampMill()):(n.repeatTimes--,n.callback.call(n.target,t,e.getTimestampMill())))}},e.prototype.clearNoRepeatTimer=function(){for(var t=this._callFuncList.length-1;t>=0;t--){var e=this._callFuncList[t];e&&0==e.repeatTimes&&s.default.remove(this._callFuncList,t)}},e.getTimestampToString0=function(t){var e=(t=Math.floor(t/1e3))%60,i=Math.floor(t/60),n=i%60,o=Math.floor(t/3600);return{sec:e,min:n,hour:o%24,allMin:i,allDay:Math.floor(o/24)}},e.trans2Hms=function(t){return{hour:Math.floor(t/3600)<10?"0"+Math.floor(t/3600):""+Math.floor(t/3600),min:Math.floor(t%3600/60)<10?"0"+Math.floor(t%3600/60):""+Math.floor(t%3600/60),sec:Math.ceil(t%60)<10?"0"+Math.ceil(t%60):""+Math.ceil(t%60)}},e.getTimestampToString1=function(t){var e=(t=Math.floor(t/1e3))%60,i=Math.floor(t/60)%60,n=Math.floor(t/3600),o=n%24;return Math.floor(n/24)+"Day "+o+"H:"+i+"M:"+e+"S"},e.getTimestampToString2=function(t){var e=this.getTimestampToString0(t);return e.allDay+"Day "+e.hour+"Hour"},e}(o("Singleton").default);r.default=l,cc._RF.pop()},{}],TipsUtils:[function(t,e,i){"use strict";cc._RF.push(e,"0da00koKC9O8YNe2uRyQc9Y","TipsUtils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("CCEvent"),a=n("App"),s=n("LoggerUtils"),l=function(){function t(){}return t.showTips=function(t){var e;null!=t?a.default.event&&(null===(e=a.default.event)||void 0===e||e.emit(r.default.SHOW_TIPS_WORD,t)):s.default.warn("[TipsUtils] word == null")},t.info=function(t){s.default.info(t),this.showTips(t)},t.error=function(t){s.default.error(t),this.showTips(t)},t}();o.default=l,cc._RF.pop()},{}],TryItemTable:[function(t,e,i){"use strict";cc._RF.push(e,"605a4THB2VG7IjqZaptQnwG","TryItemTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("TryItemVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("try_item_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],TryItemVO:[function(t,e,i){"use strict";cc._RF.push(e,"6e7acejgFZCqLdb+0DaiIvB","TryItemVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.dropId=t[1],this.iconRefItemId=t[2]},cc._RF.pop()},{}],TypeUtils:[function(t,e,i){"use strict";cc._RF.push(e,"999e1fY4+hFS56HGy4aEO6z","TypeUtils");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.isRealNull=function(t){return null==t},t.isAllNull=function(t){return null==t||""===t},t.isNumber=function(t){return null!=t&&t.constructor===Number},t.isString=function(t){return null!=t&&t.constructor===String},t.isBool=function(t){return null!=t&&t.constructor===Boolean},t.isFunction=function(t){return null!=t&&t.constructor===Function},t.isObj=function(t){return null!=t&&t.constructor===Object},t.isArray=function(t){return null!=t&&t.constructor===Array},t.isNotEmptyArray=function(t){return null!=t&&t.constructor===Array&&t.length>0},t.isEmptyArray=function(t){return null==t||t.constructor!==Array||0===t.length},t.isType=function(t,e){return null!=t&&t instanceof e},t}();n.default=o,cc._RF.pop()},{}],UIAdPauseView:[function(t,e,i){"use strict";cc._RF.push(e,"6bf13tAfFpOd7IVNo31sYZr","UIAdPauseView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("LoggerUtils"),c=o("BaseView"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return a(e,t),e.prototype.start=function(){this.scheduleOnce(this.closeMe,3)},e.prototype.closeMe=function(){l.default.info("3\u79d2\u540e\u81ea\u52a8\u5220\u9664\u5c4f\u853d\u754c\u9762 UIAdPauseView"),this.closeSelf()},s([d(cc.Label)],e.prototype,"label",void 0),s([d],e.prototype,"text",void 0),s([p],e)}(c.default);r.default=h,cc._RF.pop()},{}],UICardInfoViewNew:[function(t,e,i){"use strict";cc._RF.push(e,"e9500U99DxH8p+otkSoE9lG","UICardInfoViewNew");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("BagConst"),p=o("CommonConst"),d=o("ColorUtils"),h=o("ItemUtils"),f=o("LoggerUtils"),g=o("TipsUtils"),y=o("BaseView"),m=o("CCEvent"),v=cc._decorator,_=v.ccclass,C=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnUse=null,e.btnUpgrade=null,e.attrInfo=null,e.scrollview=null,e}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.initData(),this.initUI(),this.initIcon(),this.initBar(),this.initLevel(),this.initName(),this.initAttr(),this.initBtn(),this.addEventListener(),cc.sys.platform==p.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.showBanner(),cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME?this.playOPPOAd():cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME?this.playVIVOAd():cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&this.playHuaweiAd()},e.prototype.playHuaweiAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(0*cc.winSize.width,.2*cc.winSize.height,1*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playVIVOAd=function(){c.default.adMgr.showNativeAd(null,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.playOPPOAd=function(){c.default.adMgr.showNativeAd(l.OPPOAdUnitIdEnum.Native_Reborn,new cc.Rect(.1*cc.winSize.width,.2*cc.winSize.height,.8*cc.winSize.width,.15*cc.winSize.height))},e.prototype.addEventListener=function(){this.eventOn(m.default.CARD_UPGRADE,this.handlerCardUpgrade,this)},e.prototype.handlerCardUpgrade=function(t){this.cardId==t&&(this.initUpgradeBtn(),this.initBar(),this.initAttr(),this.initLevel())},e.prototype.initBtn=function(){this.initBtnBack(),this.initUpgradeBtn(),this.initUseBtn(),this.initRemoveBtn()},e.prototype.initUpgradeBtn=function(){var t=this,e=this.seekC(this.btnUpgrade,"labNum"),i=c.default.cardMgr.getCardInfo(this.cardId),n=c.default.cardMgr.getCardLevelVO(i.cardId,i.level).cost[0][1];this.setString(e,""+n),c.default.onClick(this.btnUpgrade,function(){t.isCardEnoughtGoldToUpgrade()?t.isCardEnoughtItemToUpgrade()?c.default.cardMgr.upgradeCard(t.cardId):g.default.showTips("Insufficient piece"):(g.default.showTips("Insufficient coin"),f.default.error("[ComCard] \u91d1\u5e01\u4e0d\u8db3"))}),c.default.cardMgr.isCardEnoughtGoldToUpgrade(this.cardId)||(e.color=cc.color(255,0,0)),c.default.cardMgr.isCardEnoughtCardToUpgrade(this.cardId)||(this.btnUpgrade.active=!1)},e.prototype.isCardEnoughtItemToUpgrade=function(){var t=c.default.bagMgr.getItemNum(this.cardId),e=c.default.cardMgr.getCardInfo(this.cardId);return t>c.default.cardMgr.getCardLevelVO(e.cardId,e.level+1).needCardNum},e.prototype.isCardEnoughtGoldToUpgrade=function(){var t=this.getUpgradeGoldNumber();return c.default.bagMgr.getItemNum(u.ItemIdEnum.Gold)>=t},e.prototype.getUpgradeGoldNumber=function(){for(var t=this.getUpgradeReourceList(),e=0;e<t.length;e++){var i=t[e];if(i[0]==u.ItemIdEnum.Gold)return i[1]}return f.default.error("ComCard \u7b56\u5212\u6ca1\u6709\u914d\u7f6e\u91d1\u5e01\u4f7f\u7528\u6570\u91cf"),9999999},e.prototype.getUpgradeReourceList=function(){var t=c.default.cardMgr.getCardInfo(this.cardId);return c.default.cardMgr.getCardLevelVO(this.cardId,t.level+1).cost},e.prototype.initUseBtn=function(){var t=this;c.default.onClick(this.btnUse,function(){c.default.cardMgr.isCardOnSlot(t.cardId)?g.default.showTips("Already in the slot!"):c.default.cardMgr.isSlotFull()?g.default.showTips("Slot is full~"):(c.default.cardMgr.insertSlotCard(t.cardId),c.default.audioMgr.playSoundByResId(108),t.closeSelf(!1))}),c.default.cardMgr.isCardEnoughtCardToUpgrade(this.cardId)||(this.btnUse.x=0),c.default.cardMgr.isCardOnSlot(this.cardId)?this.btnUse.active=!1:this.btnUse.active=!0},e.prototype.initRemoveBtn=function(){var t=this,e=this.getC("btnRemove");c.default.onClickWithoutSound(e,function(){c.default.audioMgr.playSoundByResId(106);var e=c.default.cardMgr.getCardSlotId(t.cardId);e?c.default.cardMgr.removeSlotCard(e):f.default.error("UICardInfoViewNew cardId = "+t.cardId+",\u627e\u4e0d\u5230slotId,\u7a0b\u5e8f\u9519\u8bef"),t.closeSelf()}),c.default.cardMgr.isCardOnSlot(this.cardId)?e.active=!0:e.active=!1},e.prototype.initBtnBack=function(){var t=this;c.default.onClickWithoutSound(this.btnBack,function(){c.default.audioMgr.playSoundByResId(108),t.closeSelf(!1)})},e.prototype.initData=function(){var t=this.getArgs();this.cardId=t[0]},e.prototype.initUI=function(){this.ComCardIcon=this.getC("ComCardIcon"),this.labLevel=this.getC("labLevel");var t=this.getC("nodeMask");this.labName=this.getC("labName"),this.nodeBar=this.getC("nodeBar"),this.sprProgress=this.getC("sprProgress"),this.sprUp=this.getC("sprUp"),this.labProgress=this.getC("labProgress"),this.btnUse=this.getC("btnUse"),this.btnUpgrade=this.getC("btnUpgrade"),this.btnBack=this.getC("btnBack"),this.attrInfo=this.getC("attrInfo"),this.scrollview=this.getC("scrollview"),c.default.onClick(t,function(){})},e.prototype.initIcon=function(){this.getC("sprIcon").getComponent(cc.Sprite).spriteFrame=h.default.getCardIconSpriteFram(this.cardId)},e.prototype.initBar=function(){var t=c.default.cardMgr.getCardInfo(this.cardId).level+1,e=c.default.cardMgr.getCardLevelVO(this.cardId,t);if(e){var i=c.default.bagMgr.getItemNum(this.cardId);this.labProgress.getComponent(cc.Label).string=i+"/"+e.needCardNum,i>=e.needCardNum?this.sprUp.active=!0:this.sprUp.active=!1,this.sprProgress.getComponent(cc.ProgressBar).progress=i/e.needCardNum}else this.sprUp.active=!1,this.sprProgress.active=!1,this.labProgress.active=!1},e.prototype.initLevel=function(){var t=c.default.cardMgr.getCardInfo(this.cardId);t?this.labLevel.getComponent(cc.Label).string=""+t.level:f.default.error("UICardInfoView initLevel cardId = ",this.cardId)},e.prototype.initName=function(){var t=c.default.cardMgr.getCardInfo(this.cardId);if(t){var e=c.default.cardMgr.getCardLevelVO(this.cardId,t.level);this.labName.getComponent(cc.Label).string=""+e.name,this.labName.color=cc.color(e.color[0],e.color[1],e.color[2])}else f.default.error("UICardInfoView initName cardId = ",this.cardId)},e.prototype.initAttr=function(){var t,e,i=c.default.cardMgr.getCardInfo(this.cardId),n=c.default.cardMgr.getCardLevelVO(i.cardId,i.level),o=c.default.cardMgr.getCardLevelVO(i.cardId,i.level+1),r=this.seekC(this.scrollview,"view");if(r.destroyAllChildren(),n.attack){var a=cc.instantiate(this.attrInfo),s=this.seekC(a,"imgPoint"),l=this.seekC(s,"imgPointR"),u=this.seekC(s,"imgPointG"),p=this.seekC(s,"imgPointB"),h=this.seekC(s,"imgPointY");(t=this.seekC(a,"labName")).getComponent(cc.Label).string="Damage ",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=""+n.attack;var f=this.seekC(a,"labIncNum");o?f.getComponent(cc.Label).string="+"+(o.attack-n.attack):f.active=!1,a.active=!0,a.parent=r,t.color=d.default.AttrColorAttack,t.getComponent(cc.LabelOutline).color=d.default.AttrColorAttackOutline,e.color=d.default.AttrColorAttack,e.getComponent(cc.LabelOutline).color=d.default.AttrColorAttackOutline,h.zIndex++}n.hpmax&&(a=cc.instantiate(this.attrInfo),s=this.seekC(a,"imgPoint"),l=this.seekC(s,"imgPointR"),u=this.seekC(s,"imgPointG"),p=this.seekC(s,"imgPointB"),h=this.seekC(s,"imgPointY"),(t=this.seekC(a,"labName")).getComponent(cc.Label).string="HP ",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=""+n.hpmax,f=this.seekC(a,"labIncNum"),o?f.getComponent(cc.Label).string="+"+(o.hpmax-n.hpmax):f.active=!1,a.active=!0,a.parent=r,t.color=d.default.AttrColorBlood,t.getComponent(cc.LabelOutline).color=d.default.AttrColorBloodOutline,e.color=d.default.AttrColorBlood,e.getComponent(cc.LabelOutline).color=d.default.AttrColorBloodOutline,u.zIndex++),n.dodge&&(a=cc.instantiate(this.attrInfo),s=this.seekC(a,"imgPoint"),l=this.seekC(s,"imgPointR"),u=this.seekC(s,"imgPointG"),p=this.seekC(s,"imgPointB"),h=this.seekC(s,"imgPointY"),(t=this.seekC(a,"labName")).getComponent(cc.Label).string="Dodge ",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=n.dodge/100+"%",f=this.seekC(a,"labIncNum"),o?f.getComponent(cc.Label).string="+"+(o.dodge-n.dodge)/100+"%":f.active=!1,a.active=!0,a.parent=r,t.color=d.default.AttrColorDodge,t.getComponent(cc.LabelOutline).color=d.default.AttrColorDodgeOutline,e.color=d.default.AttrColorDodge,e.getComponent(cc.LabelOutline).color=d.default.AttrColorDodgeOutline,p.zIndex++),n.crit&&(a=cc.instantiate(this.attrInfo),s=this.seekC(a,"imgPoint"),l=this.seekC(s,"imgPointR"),u=this.seekC(s,"imgPointG"),p=this.seekC(s,"imgPointB"),h=this.seekC(s,"imgPointY"),(t=this.seekC(a,"labName")).getComponent(cc.Label).string="Crit",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=n.crit/100+"%",f=this.seekC(a,"labIncNum"),o?f.getComponent(cc.Label).string="+"+(o.crit-n.crit)/100+"%":f.active=!1,a.active=!0,a.parent=r,t.color=d.default.AttrColorCrit,t.getComponent(cc.LabelOutline).color=d.default.AttrColorCritOutline,e.color=d.default.AttrColorCrit,e.getComponent(cc.LabelOutline).color=d.default.AttrColorCritOutline,l.zIndex++)},e.prototype.onDestroy=function(){cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME?c.default.event.emit(m.default.OPPO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME?c.default.event.emit(m.default.VIVO_CLOSE_ADVIEW):cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&c.default.event.emit(m.default.HUAWEI_CLOSE_NATIVE),cc.sys.platform==p.PlatformTypeEnum.WECHAT_GAME&&c.default.adMgr.hideBanner(),t.prototype.onDestroy.call(this)},s([_],e)}(y.default));r.default=C,cc._RF.pop()},{}],UICardInfoView:[function(t,e,i){"use strict";cc._RF.push(e,"b57a4ONEXZKEJ1PT/spP+aM","UICardInfoView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BagConst"),u=o("LoggerUtils"),p=o("TipsUtils"),d=o("BaseView"),h=o("CCEvent"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnUse=null,e.btnUpgrade=null,e.attrInfo=null,e.scrollview=null,e}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.initData(),this.initUI(),this.initIcon(),this.initBar(),this.initLevel(),this.initName(),this.initAttr(),this.initBtn(),this.addEventListener()},e.prototype.addEventListener=function(){this.eventOn(h.default.CARD_UPGRADE,this.handlerCardUpgrade,this)},e.prototype.handlerCardUpgrade=function(t){this.cardId==t&&(this.initUpgradeBtn(),this.initBar(),this.initAttr(),this.initLevel())},e.prototype.initBtn=function(){this.initBtnBack(),this.initUpgradeBtn(),this.initUseBtn()},e.prototype.initUpgradeBtn=function(){var t=this,e=this.seekC(this.btnUpgrade,"labNum"),i=l.default.cardMgr.getCardInfo(this.cardId),n=l.default.cardMgr.getCardLevelVO(i.cardId,i.level).cost[0][1];this.setString(e,""+n),l.default.onClick(this.btnUpgrade,function(){t.isCardEnoughtGoldToUpgrade()?t.isCardEnoughtItemToUpgrade()?l.default.cardMgr.upgradeCard(t.cardId):p.default.showTips("Insufficient piece"):(p.default.showTips("Insufficient coin"),u.default.error("[ComCard] \u91d1\u5e01\u4e0d\u8db3"))})},e.prototype.isCardEnoughtItemToUpgrade=function(){var t=l.default.bagMgr.getItemNum(this.cardId),e=l.default.cardMgr.getCardInfo(this.cardId);return t>l.default.cardMgr.getCardLevelVO(e.cardId,e.level+1).needCardNum},e.prototype.isCardEnoughtGoldToUpgrade=function(){var t=this.getUpgradeGoldNumber();return l.default.bagMgr.getItemNum(c.ItemIdEnum.Gold)>=t},e.prototype.getUpgradeGoldNumber=function(){for(var t=this.getUpgradeReourceList(),e=0;e<t.length;e++){var i=t[e];if(i[0]==c.ItemIdEnum.Gold)return i[1]}return u.default.error("ComCard \u7b56\u5212\u6ca1\u6709\u914d\u7f6e\u91d1\u5e01\u4f7f\u7528\u6570\u91cf"),9999999},e.prototype.getUpgradeReourceList=function(){var t=l.default.cardMgr.getCardInfo(this.cardId);return l.default.cardMgr.getCardLevelVO(this.cardId,t.level+1).cost},e.prototype.initUseBtn=function(){var t=this;l.default.onClick(this.btnUse,function(){l.default.cardMgr.isCardOnSlot(t.cardId)?p.default.showTips("Already in the slot!"):l.default.cardMgr.isSlotFull()?p.default.showTips("Slot is full~"):(l.default.cardMgr.insertSlotCard(t.cardId),t.closeSelf())})},e.prototype.initBtnBack=function(){var t=this;l.default.onClick(this.btnBack,function(){t.closeSelf()})},e.prototype.initData=function(){var t=this.getArgs();this.cardId=t[0]},e.prototype.initUI=function(){this.ComCardIcon=this.getC("ComCardIcon"),this.labLevel=this.getC("labLevel");var t=this.getC("nodeMask");this.labName=this.getC("labName"),this.nodeBar=this.getC("nodeBar"),this.sprProgress=this.getC("sprProgress"),this.sprUp=this.getC("sprUp"),this.labProgress=this.getC("labProgress"),this.btnUse=this.getC("btnUse"),this.btnUpgrade=this.getC("btnUpgrade"),this.btnBack=this.getC("btnBack"),this.attrInfo=this.getC("attrInfo"),this.scrollview=this.getC("scrollview"),l.default.onClick(t,function(){})},e.prototype.initIcon=function(){this.ComCardIcon.getComponent("ComCardIcon").initialize(this.cardId)},e.prototype.initBar=function(){var t=l.default.cardMgr.getCardInfo(this.cardId).level+1,e=l.default.cardMgr.getCardLevelVO(this.cardId,t);if(e){var i=l.default.bagMgr.getItemNum(this.cardId);this.labProgress.getComponent(cc.Label).string=i+"/"+e.needCardNum,i>=e.needCardNum?this.sprUp.active=!0:this.sprUp.active=!1}else this.sprUp.active=!1,this.sprProgress.active=!1,this.labProgress.active=!1},e.prototype.initLevel=function(){var t=l.default.cardMgr.getCardInfo(this.cardId);t?this.labLevel.getComponent(cc.Label).string="Level "+t.level:u.default.error("UICardInfoView initLevel cardId = ",this.cardId)},e.prototype.initName=function(){var t=l.default.cardMgr.getCardInfo(this.cardId);if(t){var e=l.default.cardMgr.getCardLevelVO(this.cardId,t.level);this.labName.getComponent(cc.Label).string=""+e.name}else u.default.error("UICardInfoView initName cardId = ",this.cardId)},e.prototype.initAttr=function(){var t,e,i=l.default.cardMgr.getCardInfo(this.cardId),n=l.default.cardMgr.getCardLevelVO(i.cardId,i.level),o=l.default.cardMgr.getCardLevelVO(i.cardId,i.level+1),r=this.seekC(this.scrollview,"view");if(r.destroyAllChildren(),n.attack){var a=cc.instantiate(this.attrInfo);(t=this.seekC(a,"labName")).getComponent(cc.Label).string="Damage ",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=""+n.attack;var s=this.seekC(a,"imgPoint"),c=this.seekC(a,"labIncNum");o?c.getComponent(cc.Label).string="+"+(o.attack-n.attack):c.active=!1,a.active=!0,a.parent=r,t.color=cc.color(255,219,75),e.color=cc.color(255,219,75),s.color=cc.color(255,219,75)}n.hpmax&&(a=cc.instantiate(this.attrInfo),(t=this.seekC(a,"labName")).getComponent(cc.Label).string="HP ",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=""+n.hpmax,s=this.seekC(a,"imgPoint"),c=this.seekC(a,"labIncNum"),o?c.getComponent(cc.Label).string="+"+(o.hpmax-n.hpmax):c.active=!1,a.active=!0,a.parent=r,t.color=cc.color(85,242,68),e.color=cc.color(85,242,68),s.color=cc.color(85,242,68)),n.dodge&&(a=cc.instantiate(this.attrInfo),(t=this.seekC(a,"labName")).getComponent(cc.Label).string="Dodge ",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=n.dodge/100+"%",s=this.seekC(a,"imgPoint"),c=this.seekC(a,"labIncNum"),o?c.getComponent(cc.Label).string="+"+(o.dodge-n.dodge)/100+"%":c.active=!1,a.active=!0,a.parent=r,t.color=cc.color(52,190,235),e.color=cc.color(52,190,235),s.color=cc.color(52,190,235)),n.crit&&(a=cc.instantiate(this.attrInfo),(t=this.seekC(a,"labName")).getComponent(cc.Label).string="Crit ",(e=this.seekC(a,"labNum")).getComponent(cc.Label).string=n.crit/100+"%",s=this.seekC(a,"imgPoint"),c=this.seekC(a,"labIncNum"),o?c.getComponent(cc.Label).string="+"+(o.crit-n.crit)/100+"%":c.active=!1,a.active=!0,a.parent=r,t.color=cc.color(255,72,81),e.color=cc.color(255,72,81),s.color=cc.color(255,72,81))},s([g],e)}(d.default));r.default=y,cc._RF.pop()},{}],UICardView:[function(t,e,i){"use strict";cc._RF.push(e,"6cdc01f5lRFMYwHNGCUW7/x","UICardView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("AttributeConst"),u=o("AdaptUtils"),p=o("BaseView"),d=o("CCEvent"),h=cc._decorator,f=h.ccclass,g=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardSlot=null,e.cardBag=null,e.maxZIndex=1,e}return a(e,t),e.prototype.start=function(){this.initUI(),this.initSlot(),this.initBag(),this.initAttrite(),this.addEventListener(),t.prototype.start.call(this)},e.prototype.onAdaptUI=function(){t.prototype.onAdaptUI.call(this),u.default.adaptSize2Winsize(this.imgBg),u.default.adaptSize2Winsize(this.CardBg1),u.default.adaptNodeToTopInsideSafeArea(this.CardBg2),u.default.adaptNodeToBottom(this.CardBg3),u.default.adaptNodeToTop(this.btnBack,50);var e=this.getC("nodeAttr");u.default.adaptNodeToTopInsideSafeArea(e,80);var i=this.getC("kz_img_30");u.default.adaptNodeToTopInsideSafeArea(i,0),u.default.adaptScrollview(this.scrollCard,i,null,-100,0)},e.prototype.addEventListener=function(){this.eventOn(d.default.CARD_REMOVE_SLOT_CARD,this.handlerRemoveSlotCard,this),this.eventOn(d.default.CARD_ADD_SLOT_CARD,this.handlerAddSlotCard,this),this.eventOn(d.default.CARD_UPGRADE,this.hanlderCardUpgrade,this)},e.prototype.handlerRemoveSlotCard=function(){this.initAttrite()},e.prototype.handlerAddSlotCard=function(){this.initAttrite()},e.prototype.hanlderCardUpgrade=function(){this.initAttrite()},e.prototype.initUI=function(){var t=this;this.imgBg=this.getC("imgBg"),this.CardBg1=this.getC("CardBg1"),this.CardBg2=this.getC("CardBg2"),this.CardBg3=this.getC("CardBg3"),this.scrollCard=this.getC("scrollCard"),this.content=this.seekC(this.scrollCard,"content"),this.btnBack=this.getC("btnBack"),this.bgBtnView=this.getC("bgBtnView"),this.layoutSlotNode=this.seekC(this.content,"layoutSlotNode"),this.layoutBagNode=this.seekC(this.content,"layoutBagNode"),l.default.onClick(this.bgBtnView,function(){t.emit(d.default.CARD_VIEW_CLICK_BG)}),l.default.onClick(this.btnBack,function(){t.closeSelf()});var e=this.getC("btnTest");l.default.onClick(e,function(){l.default.bagMgr.addGold(1e4);for(var t=[10001,10101,10201,10201],e=0;e<t.length;e++){var i=t[e];l.default.bagMgr.addItem(i,5)}})},e.prototype.initSlot=function(){var t=this,e=cc.instantiate(this.cardSlot);e.getComponent("ComCardSlot").initialize(function(){t.layoutSlotNode.zIndex=t.maxZIndex++}),this.nodeCardSlot=e,this.update(1),this.layoutSlotNode.addChild(e)},e.prototype.initBag=function(){var t=this,e=cc.instantiate(this.cardBag);e.getComponent("ComCardBag").initialize(function(){t.layoutBagNode.zIndex=t.maxZIndex++}),this.nodeCardBag=e,this.update(1),this.layoutBagNode.addChild(e)},e.prototype.initAttrite=function(){var t=l.default.cardMgr.getAllCardAttribute(),e=t.getAttr(c.AttrTypeEnum.hpmax),i=t.getAttr(c.AttrTypeEnum.attack),n=t.getAttr(c.AttrTypeEnum.dodge),o=t.getAttr(c.AttrTypeEnum.crit),r=this.getC("nodeBg3"),a=this.seekC(r,"labBlood"),s=this.seekC(r,"labMiss"),u=this.seekC(r,"labAttack"),p=this.seekC(r,"labCriti");a.getComponent(cc.Label).string="+"+e,s.getComponent(cc.Label).string="+"+n/100+"%",u.getComponent(cc.Label).string="+"+i,p.getComponent(cc.Label).string="+"+o/100+"%"},e.prototype.update=function(){!this.nodeCardSlot||this.layoutSlotNode.width==this.nodeCardSlot.width&&this.layoutSlotNode.height==this.nodeCardSlot.height||(this.layoutSlotNode.width=this.nodeCardSlot.width,this.layoutSlotNode.height=this.nodeCardSlot.height),!this.nodeCardBag||this.nodeCardBag.width==this.layoutBagNode.width&&this.nodeCardBag.height==this.layoutBagNode.height||(this.layoutBagNode.width=this.nodeCardBag.width,this.layoutBagNode.height=this.nodeCardBag.height),this.content.height=this.layoutSlotNode.height+this.layoutBagNode.height},s([g(cc.Prefab)],e.prototype,"cardSlot",void 0),s([g(cc.Prefab)],e.prototype,"cardBag",void 0),s([f],e)}(p.default);r.default=y,cc._RF.pop()},{}],UIChapter:[function(t,e,i){"use strict";cc._RF.push(e,"fcebcdiSKNDq4PPuvG1KY/A","UIChapter");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CHAPTER"),c=o("Chapter"),u=o("ENUMS"),p=o("BaseComponent"),d=o("RES"),h=o("App"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.btnStart=null,e.text=null,e.texture2d=null,e.ske=null,e}return a(e,t),e.prototype.onLoad=function(){this.init(),this.addEventListener()},e.prototype.onDisable=function(){this.scrollView.scrollToTop()},e.prototype.init=function(){this.node.zIndex=u.ZINDEX.CHAPTER;for(var t=h.default.resMgr.getPrefab(d.ResMainScene.prefab.chapter),e=0;e<l.default.length;e++)h.default.instantiate(t,c.default).initialize(e,this.scrollView.content)},e.prototype.addEventListener=function(){h.default.onClick(this.btnStart,this.onBtnStart,this)},e.prototype.onBtnStart=function(){h.default.sceneMgr.loadScene(u.SCENE.TEST_BATTLE)},s([y(cc.ScrollView)],e.prototype,"scrollView",void 0),s([y(cc.Button)],e.prototype,"btnStart",void 0),s([y(cc.TextAsset)],e.prototype,"text",void 0),s([y(cc.Texture2D)],e.prototype,"texture2d",void 0),s([y(cc.TextAsset)],e.prototype,"ske",void 0),s([g],e)}(p.default);r.default=m,cc._RF.pop()},{}],UIGuideView:[function(t,e,i){"use strict";cc._RF.push(e,"f93b1wzKKVJUqGpoo3T8B1M","UIGuideView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("ComSpine"),u=o("GuideMgr"),p=o("ActionUtils"),d=o("AdaptUtils"),h=o("LoggerUtils"),f=o("NodeUtils"),g=o("BaseView"),y=o("Tbl"),m=o("CCEvent"),v=o("ComGuideSwallowNode"),_=cc._decorator,C=_.ccclass,b=_.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labName=null,e.labWord=null,e.nodeSwallow=null,e.ComGuideSwallowNode=null,e.FingerPrefab=null,e.finger=null,e.fingerComSpine=null,e.swallowNode=null,e.isForce=null,e.isTalkBox=null,e.isLihui=null,e.isGuideRepeat=null,e.repeatInterval=null,e.idleCount=0,e}return a(e,t),e.prototype.initialize=function(t,e,i,n,o,r,a){void 0===r&&(r=!1),void 0===a&&(a=0),this.guideLine=t,this.size=e,this.wPos=i,this.word=o,this.personName=n,this.isMove=r,this.offsetY=a},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addEventListener()},e.prototype.start=function(){t.prototype.start.call(this),this.initArgs(),this.initLabel(),this.initFinger(),this.initSwallow(),this.initLiHui(),this.initBtn()},e.prototype.initBtn=function(){this.initSkipBtn()},e.prototype.initSkipBtn=function(){var t=this,e=this.getC("btnSkip");l.default.onClick(e,function(){l.default.guideMgr.skipGuideType(u.GuideLineTypeConst[t.guideLine]),t.closeSelf()})},e.prototype.onAdaptUI=function(){var t=this.getC("btnSkip");f.default.setWorldPos(t,cc.winSize.width,0),d.default.adaptNodeToTop(t,250)},e.prototype.addEventListener=function(){this.eventOn(m.default.GUIDE_CLICK_REWARD_SKILL_ONE_SELECT,this.handlerGuideClickRewardSkillOneSelect,this),this.eventOn(m.default.GUIDE_CLICK_ROCKER_MOVE,this.handlerGuideClickRockerMove,this),this.eventOn(m.default.GUIDE_CLICK_JUMP,this.handlerGuideClickJump,this),this.eventOn(m.default.GUIDE_ENTER_FIGHT,this.handlerGuideEnterFight,this),this.eventOn(m.default.GUIDE_CLICK_INITIATIVESKILL,this.handlerPlayerInitiativeSkill,this),this.eventOn(m.default.GUIDE_ENTER_SHOP,this.handlerEnterShop,this),this.eventOn(m.default.GUIDE_SHOP_ACCELERATE,this.handlerAccelerate,this),this.eventOn(m.default.GUIDE_SHOP_ACCELERATECONFIRM,this.handlerAccelerateConfirm,this),this.eventOn(m.default.GUIDE_SHOP_RAREREWARD,this.handlerRareReward,this),this.eventOn(m.default.GUIDE_SHOP_COMMONREWARD,this.handlerCommonReward,this),this.eventOn(m.default.GUIDE_SHOP_SENIORREWARD,this.handlerSeniorReward,this),this.eventOn(m.default.GUIDE_SHOP_REFRESH,this.handlerShopRefresh,this),this.eventOn(m.default.GUIDE_ENTER_CARD,this.handlerEnterCard,this),this.eventOn(m.default.GUIDE_SHOP_REFRESH_CONFIRM,this.handlerShopRefreshConfirm,this),this.eventOn(m.default.GUIDE_CHAPTERVIEW_AFTER_SHOP,this.handlerEnterChapterviewAfterShop,this),this.eventOn(m.default.GUIDE_FIGHTSCENE_AFTER_SHOP,this.handlerEnterFightAfterShop,this),this.eventOn(m.default.GUIDE_CARD_FIGHT,this.handlerEnterFightAfterCard,this),this.eventOn(m.default.GUIDE_CARD_CLICK,this.handlerCardClick,this),this.eventOn(m.default.GUIDE_CARD_EQUIP,this.handlerCardEquip,this),this.eventOn(m.default.GUIDE_CARD_CHAPTER,this.handlerCardChapter,this),this.eventOn(m.default.GUIDE_ENTER_EQUIPMENT,this.handlerEnterEquipment,this),this.eventOn(m.default.GUIDE_EQUIPMENT_CLICK,this.handlerClickEquipment,this),this.eventOn(m.default.GUIDE_EQUIPMENT_EQUIP,this.handlerEquipEquipment,this),this.eventOn(m.default.GUIDE_EQUIPMENT_CHAPTER,this.handlerEquipmentChapter,this),this.eventOn(m.default.GUIDE_EQUIPMENT_FIGHT,this.handlerEquipmentFight,this)},e.prototype.initArgs=function(){var t=this.getArgs();this.initialize(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);var e=y.default.GuideWordTable.findById(this.guideLine);e.isForce?this.isForce=!0:this.isForce=!1,e.isTalkBox?this.isTalkBox=!0:this.isTalkBox=!1,e.isLihui?this.isLihui=!0:this.isLihui=!1,e.isGuideRepeat?this.isGuideRepeat=!0:this.isGuideRepeat=!1,e.repeatInterval&&(this.repeatInterval=e.repeatInterval,this.idleCount=e.repeatInterval)},e.prototype.initLabel=function(){0!=this.isForce?(this.labName.getComponent(cc.Label).string=this.personName,this.labWord.getComponent(cc.Label).string=this.word):(this.labName.active=!1,this.labWord.active=!1)},e.prototype.initFinger=function(){this.finger=cc.instantiate(this.FingerPrefab),this.finger.parent=this.node,f.default.setWorldPos(this.finger,this.wPos),this.fingerComSpine=this.finger.addComponent(c.default),this.fingerComSpine.setComSke(this.finger.getComponent(sp.Skeleton)),this.isMove?(this.fingerComSpine.play(0,"play",!0),p.default.repeat(this.finger,cc.moveBy(1,this.size.width/2,0),cc.moveBy(2,-this.size.width,0),cc.moveBy(1,this.size.width/2,0))):this.fingerComSpine.play(0,"play_click",!0),this.guideLine==u.GuideLineEnum.GuidePlayerMoveHero&&(this.finger.active=!1)},e.prototype.initSwallow=function(){if(this.swallowNode=cc.instantiate(this.ComGuideSwallowNode),this.swallowNode.parent=this.nodeSwallow,this.isForce)(i=this.swallowNode.getComponent(v.default)).initialize(this.size,this.wPos,!1,this),this.swallowNode.x=this.finger.x,this.swallowNode.y=this.finger.y;else if(1==this.isGuideRepeat){if(null==this.repeatInterval)return void h.default.error("\u91cd\u590d\u6307\u5f15\u7684\u95f4\u9694\u6ca1\u6709\u914d\u7f6e\uff0c\u8bf7\u91cd\u65b0\u914d\u7f6e, \u65b0\u624b\u6307\u5f15ID: %s",this.guideLine);(i=this.swallowNode.getComponent(v.default)).initialize(this.size,this.wPos,!0,this),this.swallowNode.x=this.finger.x,this.swallowNode.y=this.finger.y,(e=this.seekC(this.swallowNode,"mask")).on(cc.Node.EventType.TOUCH_END,this.finishGuide,this),e._touchListener.setSwallowTouches(!1);var t=new cc.Node("touchNode");t.parent=this.node,f.default.setWorldPos(t,cc.v2(cc.winSize.width/2,cc.winSize.height/2)),t.width=cc.winSize.width,t.height=cc.winSize.height,t.on(cc.Node.EventType.TOUCH_END,this.resetIdleCount,this),t._touchListener.setSwallowTouches(!1)}else{var e,i=this.swallowNode.getComponent(v.default),n=cc.size(cc.winSize.width,cc.winSize.height),o=cc.v2(cc.winSize.width/2,cc.winSize.height/2);i.initialize(n,o,!0,this),this.swallowNode.x=this.finger.x,this.swallowNode.y=this.finger.y,(e=this.seekC(this.swallowNode,"mask")).on(cc.Node.EventType.TOUCH_END,this.finishGuide,this),e._touchListener.setSwallowTouches(!1)}},e.prototype.finishGuide=function(){l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf()},e.prototype.resetIdleCount=function(){this.idleCount=0},e.prototype.initLiHui=function(){if(this.nodeLiHui=this.getC("nodeLiHui"),0!=this.isForce){var t=f.default.getWorldPos(this.nodeLiHui);f.default.setWorldPos(this.nodeLiHui,t.x,this.wPos.y),this.nodeLiHui.y+=this.offsetY}else this.nodeLiHui.active=!1},e.prototype.handlerGuideClickRewardSkillOneSelect=function(){this.guideLine==u.GuideLineEnum.GuideClickSelectOneSkill&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerGuideClickRockerMove=function(){this.guideLine==u.GuideLineEnum.GuidePlayerMoveHero&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerGuideClickJump=function(){this.guideLine==u.GuideLineEnum.GuidePlayerTouchJumpBtn&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerGuideEnterFight=function(){this.guideLine==u.GuideLineEnum.GuideEnterFight&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerPlayerInitiativeSkill=function(){this.guideLine==u.GuideLineEnum.GuidePlayerInitiativeSkill&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEnterShop=function(){this.guideLine==u.GuideLineEnum.GuidePlayerEnterShop&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerAccelerate=function(){this.guideLine==u.GuideLineEnum.GuideShopAccelerate&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerAccelerateConfirm=function(){this.guideLine==u.GuideLineEnum.GuideShopAccelerateConfirm&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerRareReward=function(){this.guideLine==u.GuideLineEnum.GuideShopRareReward&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerCommonReward=function(){this.guideLine==u.GuideLineEnum.GuideShopCommonReward&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerSeniorReward=function(){this.guideLine==u.GuideLineEnum.GuideShopSeniorReward&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerShopRefresh=function(){this.guideLine==u.GuideLineEnum.GuideShopRefresh&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEnterCard=function(){},e.prototype.handlerShopRefreshConfirm=function(){this.guideLine==u.GuideLineEnum.GuideShopRefreshConfirm&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEnterChapterviewAfterShop=function(){this.guideLine==u.GuideLineEnum.GuideEnterChapterAfterShop&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEnterFightAfterShop=function(){this.guideLine==u.GuideLineEnum.GuideClickFightAfterShop&&(0==l.default.guideMgr.isFinishGuide(u.GuideLineEnum.GuideEnterChapterAfterShop)&&l.default.guideMgr.finishGuide(u.GuideLineEnum.GuideEnterChapterAfterShop),l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEnterFightAfterCard=function(){},e.prototype.handlerCardClick=function(){},e.prototype.handlerCardEquip=function(){},e.prototype.handlerCardChapter=function(){},e.prototype.handlerEnterEquipment=function(){this.guideLine==u.GuideLineEnum.GuideEnterEquipment&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerClickEquipment=function(){this.guideLine==u.GuideLineEnum.GuideClickEquipment&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEquipEquipment=function(){this.guideLine==u.GuideLineEnum.GuideEquipEquipment&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEquipmentChapter=function(){this.guideLine==u.GuideLineEnum.GuideEquipmentChapter&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.handlerEquipmentFight=function(){this.guideLine==u.GuideLineEnum.GuideEquipmentFight&&(l.default.guideMgr.finishGuide(this.guideLine),this.closeSelf())},e.prototype.update=function(t){this.checkIdle(t)},e.prototype.checkIdle=function(t){null!=this.repeatInterval&&this.guideLine!=u.GuideLineEnum.GuidePlayerMoveHero&&(this.idleCount+=t,this.idleCount>=this.repeatInterval?0==this.finger.active&&(this.finger.active=!0):1==this.finger.active&&(this.finger.active=!1))},s([b(cc.Node)],e.prototype,"labName",void 0),s([b(cc.Node)],e.prototype,"labWord",void 0),s([b(cc.Node)],e.prototype,"nodeSwallow",void 0),s([b(cc.Prefab)],e.prototype,"ComGuideSwallowNode",void 0),s([b(cc.Prefab)],e.prototype,"FingerPrefab",void 0),s([C],e)}(g.default);r.default=S,cc._RF.pop()},{}],UISkill:[function(t,e,i){"use strict";cc._RF.push(e,"11b82xo9BhBOIgLpaXuo0rk","UISkill");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("ENUMS"),u=o("RES"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.btnIntensify=null,e}return a(e,t),e.prototype.onLoad=function(){this.init(),this.onEventListener()},e.prototype.init=function(){this.node.zIndex=c.ZINDEX.SKILL;for(var t=l.default.resMgr.getPrefab(u.ResMainScene.prefab.skill),e=0;e<10;e++)cc.instantiate(t).parent=this.scrollView.content},e.prototype.onEventListener=function(){l.default.onClick(this.btnIntensify,this.onBtnIntensify,this)},e.prototype.onBtnIntensify=function(){cc.log(1111111111)},s([h(cc.ScrollView)],e.prototype,"scrollView",void 0),s([h(cc.Button)],e.prototype,"btnIntensify",void 0),s([d],e)}(cc.Component);r.default=f,cc._RF.pop()},{}],UITestViewItem:[function(t,e,i){"use strict";cc._RF.push(e,"cae2di5Xt9MIImpG0xt4PNY","UITestViewItem");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BaseComponent"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configs=[],e}return a(e,t),e.prototype.initialize=function(t){this.configs=t},e.prototype.start=function(){for(var t=this,e=function(e){var n=i.getC("btn"+(e+1));if(null==i.configs[e])return n.active=!1,"continue";i.seekC(n,"Label").getComponent(cc.Label).string=i.configs[e].name,l.default.onClick(n,function(){t.configs[e].func()})},i=this,n=0;n<this.configs.length;n++)e(n)},s([p],e)}(c.default));r.default=d,cc._RF.pop()},{}],UITestView:[function(t,e,i){"use strict";cc._RF.push(e,"d0c37LYaRpMU492xRpjEkan","UITestView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("AttributeConst"),u=o("ArrayUtils"),p=o("BaseView"),d=o("CCEvent"),h=o("UI"),f=o("BattleScene"),g=o("UITestViewItem"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){for(var t=this,e=(this.getC("scrollView"),this.getC("content")),i=this.getConf(),n=u.default.splitArray(i,3),o=0;o<n.length;o++){var r=n[o],a=cc.instantiate(this.item);a.parent=e,a.getComponent(g.default).initialize(r)}var s=this.getC("btnClose");l.default.onClick(s,function(){t.closeSelf(!1)})},e.prototype.getConf=function(){return[{name:"\u65e0\u9650\u6750\u6599",func:function(){l.default.bagMgr.addItem(1,1e7),l.default.bagMgr.addItem(2,1e7)}},{name:"\u589e\u52a0\u91d1\u5e01,100",func:function(){l.default.bagMgr.addItem(1,100)}},{name:"\u589e\u52a0\u91d1\u5e01,1000",func:function(){l.default.bagMgr.addItem(1,1e3)}},{name:"\u589e\u52a0\u91d1\u5e01,10000",func:function(){l.default.bagMgr.addItem(1,1e4)}},{name:"\u51cf\u5c11\u91d1\u5e01,100",func:function(){l.default.bagMgr.removeGold(100)}},{name:"\u51cf\u5c11\u91d1\u5e01,1000",func:function(){l.default.bagMgr.removeGold(1e3)}},{name:"\u51cf\u5c11\u91d1\u5e01,10000",func:function(){l.default.bagMgr.removeGold(1e4)}},{name:"\u589e\u52a0\u6d3b\u8dc3\u5ea650",func:function(){l.default.taskMgr.addActivity(50)}},{name:"\u4e13\u7cbe\u9053\u5177 10001,1000\u4e2a",func:function(){l.default.bagMgr.addItem(10001,1e3)}},{name:"\u589e\u52a0\u4e00\u5957\u4e13\u7cbe",func:function(){l.default.bagMgr.addItem(10001),l.default.bagMgr.addItem(10101),l.default.bagMgr.addItem(10201),l.default.bagMgr.addItem(10301),l.default.bagMgr.addItem(20001),l.default.bagMgr.addItem(20101),l.default.bagMgr.addItem(20201),l.default.bagMgr.addItem(20301),l.default.bagMgr.addItem(20401),l.default.bagMgr.addItem(20501),l.default.bagMgr.addItem(30001),l.default.bagMgr.addItem(30101),l.default.bagMgr.addItem(30201),l.default.bagMgr.addItem(30301),l.default.bagMgr.addItem(30401),l.default.bagMgr.addItem(30501),l.default.bagMgr.addItem(40001),l.default.bagMgr.addItem(40101),l.default.bagMgr.addItem(40201),l.default.bagMgr.addItem(40301),l.default.bagMgr.addItem(40401)}},{name:"\u4e13\u7cbe\u9053\u5177 10101,1000\u4e2a",func:function(){l.default.bagMgr.addItem(10101,1e3)}},{name:"\u4e13\u7cbe\u9053\u5177 10201,1000\u4e2a",func:function(){l.default.bagMgr.addItem(10201,1e3)}},{name:"\u4e13\u7cbe\u9053\u5177 10301,20\u4e2a",func:function(){l.default.bagMgr.addItem(10301,20)}},{name:"\u4e13\u7cbe\u9053\u5177 20001,20\u4e2a",func:function(){l.default.bagMgr.addItem(20001,20)}},{name:"\u4e13\u7cbe\u9053\u5177 20201,20\u4e2a",func:function(){l.default.bagMgr.addItem(20201,20)}},{name:"\u4e13\u7cbe\u9053\u5177 20301,1000\u4e2a",func:function(){l.default.bagMgr.addItem(20301,1e3)}},{name:"\u4e13\u7cbe\u9053\u5177 20401,1000\u4e2a",func:function(){l.default.bagMgr.addItem(20401,1e3)}},{name:"\u4e13\u7cbe\u9053\u5177 20501,1000\u4e2a",func:function(){l.default.bagMgr.addItem(20501,1e3)}},{name:"\u4e3b\u89d2\u6700\u5927\u8840\u91cf+1000000",func:function(){var t=cc.find("/Canvas").getComponent(f.default);t&&(t.getObjhero().addAttr(c.AttrTypeEnum.hpmax,1e6),t.getObjhero().addAttr(c.AttrTypeEnum.hp,1e6))}},{name:"\u52a0\u901f\u65f6\u949f\u52302\u500d",func:function(){var t=cc.find("/Canvas").getComponent(f.default);if(t){var e=t.getClock().getRate();t.setClockRate(2*e)}}},{name:"\u51cf\u901f\u65f6\u949f\u52302\u500d",func:function(){var t=cc.find("/Canvas").getComponent(f.default);if(t){var e=t.getClock().getRate();t.setClockRate(e/2)}}},{name:"\u8bbe\u7f6e\u5e27\u738715",func:function(){cc.game.setFrameRate(15)}},{name:"\u4f24\u5bb3\u589e\u52a0\u4e00\u5343\u500d",func:function(){l.default.setMulTestDemage(1e3)}},{name:"\u4f24\u5bb3\u51cf\u5c11\u4e00\u5343\u500d",func:function(){l.default.setMulTestDemage(.001)}},{name:"\u4e00\u952e\u6d4b\u8bd5",func:function(){cc.game.setFrameRate(15);var t=cc.find("/Canvas").getComponent(f.default),e=t.getClock().getRate();t.setClockRate(e/4),l.default.event.emit(d.default.KEYBOARD_SHOW_DEBUG),t&&(t.getObjhero().addAttr(c.AttrTypeEnum.hpmax,1e6),t.getObjhero().addAttr(c.AttrTypeEnum.hp,1e6))}},{name:"\u589e\u52a0\u4e00\u5957\u88c5\u5907",func:function(){l.default.bagMgr.addItem(1000100,1),l.default.bagMgr.addItem(1000200,1),l.default.bagMgr.addItem(1000301,1),l.default.bagMgr.addItem(1000402,1),l.default.bagMgr.addItem(1000504,1),l.default.bagMgr.addItem(1000505,1),l.default.bagMgr.addItem(1001100,1),l.default.bagMgr.addItem(1001200,1),l.default.bagMgr.addItem(1001301,1),l.default.bagMgr.addItem(1001402,1),l.default.bagMgr.addItem(1001504,1),l.default.bagMgr.addItem(1001505,1),l.default.bagMgr.addItem(1002100,1),l.default.bagMgr.addItem(1002200,1),l.default.bagMgr.addItem(1002301,1),l.default.bagMgr.addItem(1002402,1),l.default.bagMgr.addItem(1002504,1),l.default.bagMgr.addItem(1002505,1),l.default.bagMgr.addItem(1003100,1),l.default.bagMgr.addItem(1003200,1),l.default.bagMgr.addItem(1003301,1),l.default.bagMgr.addItem(1003402,1),l.default.bagMgr.addItem(1003504,1),l.default.bagMgr.addItem(1003505,1)}},{name:"\u589e\u52a0\u4e00\u4ef6\u88c5\u5907",func:function(){l.default.bagMgr.addItem(1000500,1)}},{name:"\u6253\u5f00\u88c5\u5907\u8be6\u60c5",func:function(){var t=l.default.equipmentMgr.getEquipmentList();l.default.viewMgr.showUI(h.UI.EQUIPMENT_DETAILS_VIEW,t[0].uid)}},{name:"\u83b7\u5f971000\u4e2a\u795e\u8bdd\u788e\u7247",func:function(){l.default.bagMgr.addItem(6,1e3)}},{name:"\u589e\u52a010\u70b9\u6d3b\u8dc3\u5ea6",func:function(){l.default.taskMgr.addActivity(10)}}]},s([v(cc.Prefab)],e.prototype,"item",void 0),s([m],e)}(p.default);r.default=_,cc._RF.pop()},{}],UIWarHonorTipsView:[function(t,e,i){"use strict";cc._RF.push(e,"7fd79of+JhB/6zKWOisLbTl","UIWarHonorTipsView");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.initialize=function(){},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this)},a([c(cc.Node)],e.prototype,"itemIcon1",void 0),a([c(cc.Node)],e.prototype,"itemIcon2",void 0),a([c(cc.Node)],e.prototype,"itemNum1",void 0),a([c(cc.Node)],e.prototype,"itemNum2",void 0),a([c(cc.Node)],e.prototype,"labName",void 0),a([c(cc.Node)],e.prototype,"nodeIcon",void 0),a([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],UIWarHonorView:[function(t,e,i){"use strict";cc._RF.push(e,"470beGRBI9M/rageCpdBuIa","UIWarHonorView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("CycleConst"),u=o("CommonConst"),p=o("TimeMgr"),d=o("ActionUtils"),h=o("AdaptUtils"),f=o("ArrayUtils"),g=o("GlobalUtils"),y=o("TipsUtils"),m=o("BaseView"),v=o("Tbl"),_=o("CCEvent"),C=cc._decorator,b=C.ccclass,S=C.property,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.WarHonorListPnl=null,e}return a(e,t),e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.addMask(),this.initData(),this.initScrollview(),this.initLevel(),this.initProgress(),this.addEventListener(),this.initResetTime(),this.initLabTips(),l.default.onClick(this.btnBack,function(){e.closeSelf()});var i=this.getC("btnTest");l.default.onClick(i,function(){l.default.warHonorMgr.addProgress(5)}),g.default.isDebug()||(i.active=!1)},e.prototype.onAdaptUI=function(){t.prototype.onAdaptUI.call(this);var e=this.getC("kz_img_11");h.default.adaptNodeToBottom(e),h.default.adaptBgHeight2Screen(e);var i=this.getC("zl_img_12");h.default.adaptNodeToTop(i);var n=this.getC("CardBg2");h.default.adaptNodeToTop(n);var o=this.getC("btnBack");h.default.adaptNodeToTopInsideSafeArea(o,25);var r=this.getC("nodeTopBar");h.default.adaptNodeToTopInsideSafeArea(r,0);var a=this.getC("nodeTopTime");h.default.adaptNodeToTop(a,0);var s=this.getC("nodeBottom");h.default.adaptNodeToBottom(s);var l=this.getC("zl_img_11"),c=this.getC("nodeScrollView");h.default.adaptScrollview(c,i,l)},e.prototype.addEventListener=function(){this.eventOn(_.default.WAR_HONOR_RECEIVE_AWARD_REPEAT,this.handlerReceiveAwardRepeat,this),this.eventOn(_.default.WAR_HONOR_PROGRESS_CHANGE,this.handlerProgressChange,this)},e.prototype.initData=function(){this.info=l.default.warHonorMgr.getWarHonorInfo()},e.prototype.initScrollview=function(){for(var t=v.default.WarHonorTable.VOList.concat(),e=f.default.splitArray(t,2),i=0;i<e.length;i++){var n=e[i],o=cc.instantiate(this.WarHonorListPnl);o.parent=this.content,o.getComponent("ComWarHonorListPnl").initialize(n[0].id,n[1].id,n[0].level,function(t){l.default.warHonorMgr.isEnoughtProgressToOpen(t)?l.default.warHonorMgr.isAwardReceive(t)?y.default.showTips("You've claimed chest~"):l.default.warHonorMgr.isVideoType(t)?l.default.adMgr.show({adType:u.AdTypeEnum.ZhanLingExtraReward,callback:function(e){e&&l.default.warHonorMgr.receiveAward(t)},errorCallback:null,timeout:3}):l.default.warHonorMgr.receiveAward(t):y.default.showTips("In progress,unable to claim~")})}},e.prototype.initLevel=function(){this.labLevel.getComponent(cc.Label).string=String(l.default.warHonorMgr.getLevel())},e.prototype.initProgress=function(){var t=l.default.warHonorMgr.getLevel(),e=l.default.warHonorMgr.getLevelPregress(t);-1==e&&(e=0);var i=l.default.warHonorMgr.getProgress(),n=l.default.warHonorMgr.getNextLevelProgress(),o=i-e,r=n-e;-1==n?(this.labProgress.getComponent(cc.Label).string="Completed",this.sprProgress.width=192):(this.labProgress.getComponent(cc.Label).string=o+"/"+r,this.sprProgress.width=192*o/r)},e.prototype.initResetTime=function(){var t=this,e=l.default.cycleMgr.getNextCycleTime(c.CycleTypeEnum.resetWeekTask),i=p.default.getTimestampMill(),n=e-i;this.labResetTime.getComponent(cc.Label).string=p.default.getTimestampToString2(n),d.default.repeat(this.labResetTime,function(){var i=p.default.getTimestampMill(),n=e-i;t.labResetTime.getComponent(cc.Label).string=p.default.getTimestampToString2(n)},1)},e.prototype.initLabTips=function(){var t=v.default.CommonTable.findByKey("WarHonorTips").string;this.labTips.getComponent(cc.Label).string=t},e.prototype.handlerReceiveAwardRepeat=function(){y.default.showTips("You've claimed reward!")},e.prototype.handlerProgressChange=function(){this.initProgress(),this.initLevel()},s([S(cc.Node)],e.prototype,"nodeScrollView",void 0),s([S(cc.Node)],e.prototype,"content",void 0),s([S(cc.Node)],e.prototype,"btnBack",void 0),s([S(cc.Node)],e.prototype,"sprProgress",void 0),s([S(cc.Node)],e.prototype,"labProgress",void 0),s([S(cc.Node)],e.prototype,"labLevel",void 0),s([S(cc.Node)],e.prototype,"labResetTime",void 0),s([S(cc.Node)],e.prototype,"nodeBottom",void 0),s([S(cc.Node)],e.prototype,"labTips",void 0),s([S(cc.Prefab)],e.prototype,"WarHonorListPnl",void 0),s([b],e)}(m.default);r.default=O,cc._RF.pop()},{}],UI:[function(t,e,i){"use strict";cc._RF.push(e,"3e8c9ly2+pIQJPwupPWv3QF","UI");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.UI=void 0;var r=n("SceneMgr"),a=n("RES");o.UI={HALL_ADDDESKTOP:{config:a.ResMainScene.prefab.HALL_ADDDESKTOP,zIndex:20},AD_INTERSTITIAL:{config:a.ResCommon.prefab.COM_AD_INTERSTITIAL,zIndex:40},AD_NATIVE:{config:a.ResCommon.prefab.COM_AD_NATIVE,zIndex:40},HIDE_REWARD:{config:a.ResMainScene.prefab.HALL_HIDEREWARD,zIndex:20},AD_BANNER:{config:a.ResCommon.prefab.COM_AD_BANNER,zIndex:40},SIGNIN_VIEW:{config:a.ResMainScene.prefab.HALL_SIGNINVIEW,zIndex:30},OFFLINE_REWARD:{config:a.ResCommon.prefab.UI_OFFLINE_REWARD,zIndex:21},REWARD_SKILL:{config:a.ResBattleScene.prefab.UI_REWARD_SKILL,zIndex:20},REWARD_SKILL_ONE:{config:a.ResBattleScene.prefab.UI_REWARD_SKILL_ONE,zIndex:20},FINAL_REPORT:{config:a.ResBattleScene.prefab.UIFINALE_REPORT,zIndex:20},WARNING_VIEW:{config:a.ResBattleScene.prefab.UI_WARNING_VIEW,zIndex:10},PAUSE_VIEW:{config:a.ResBattleScene.prefab.UI_PAUSE_VIEW,zIndex:90},REBORN_VIEW:{config:a.ResBattleScene.prefab.UI_REBORN_VIEW,zIndex:45},ARROW_VIEW:{config:a.ResBattleScene.prefab.UI_ARROW_VIEW,zIndex:20},HALL_SHOUQVIEW:{config:a.ResMainScene.prefab.HALL_SHOUQMAIN,zIndex:20},HALL_SHOUQMY:{config:a.ResMainScene.prefab.HALL_SHOUQMY,zIndex:20},AD_PAUSE_VIEW:{config:a.ResBattleScene.prefab.UI_AD_PAUSE_VIEW,zIndex:20},GUIDE_VIEW:{config:a.ResBattleScene.prefab.UI_GUIDE_VIEW,zIndex:100},CONFIRM_VIEW:{config:a.ResMainScene.prefab.UI_CONFIRM_VIEW,zIndex:21},PRIVACYSETTING_VIEW:{config:a.ResMainScene.prefab.UI_PRIVACYSETTING_VIEW,zIndex:21},REWARD_2SELECT1:{config:a.ResBattleScene.prefab.UI_REWARD_SKILL_2SELECT1,zIndex:20},COMMONREWARD_VIEW:{config:a.ResMainScene.prefab.UI_COMMONREWARD,zIndex:21},STORYBG_VIEW:{config:a.ResBattleScene.prefab.UI_STORYBG,zIndex:20},TEST_VIEW:{config:a.ResBattleScene.prefab.UI_TEST_VIEW,zIndex:20},LOADING_VIEW:{config:a.ResMainScene.prefab.UI_LOADING_VIEW,zIndex:50},RANDOMEVENT_VIEW:{config:a.ResMainScene.prefab.UI_RANDOMEVENT_VIEW,zIndex:20},RECORD_VIDEO_VIEW:{config:a.ResMainScene.prefab.UI_RECORD_VIDEO_VIEW,zIndex:20,parentName:r.SceneLayerConfig.TopsView.name},RECORD_VIDEO_SHARE_VIEW:{config:a.ResMainScene.prefab.UI_RECORD_VIDEO_SHARE_VIEW,zIndex:20,parentName:r.SceneLayerConfig.View2.name},EQUIPMENT_BREAK_DOWN_VIEW:{config:a.ResMainScene.prefab.EQUIPMENT_BREAK_DOWN_VIEW,zIndex:20},EQUIPMENT_DETAILS_VIEW:{config:a.ResMainScene.prefab.EQUIPMENT_DETAILS_VIEW,zIndex:20},GET_GOLD:{config:a.ResMainScene.prefab.HALL_GETGOLD,zIndex:20},GET_DIAMOND:{config:a.ResMainScene.prefab.HALL_GETDIAMOND,zIndex:20}},cc._RF.pop()},{}],UidUtils:[function(t,e,i){"use strict";cc._RF.push(e,"318e2iPvs5L8ZgrzNj2Bx5f","UidUtils");var n=i,o=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function t(){}var e;return e=t,t.getUid=function(){return e.UID=e.UID+1,e.UID},t.UID=0,e=o([a],t)}());n.default=s,cc._RF.pop()},{}],UserUtils:[function(t,e,i){"use strict";cc._RF.push(e,"4279c2v75FEypPS4WGqKPdk","UserUtils");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Singleton"),l=o("TypeUtils"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.setVal=function(t,e){cc.sys.localStorage.setItem(t,e)},e.getVal=function(t){return cc.sys.localStorage.getItem(t)},e.clearKey=function(t){cc.sys.localStorage.removeItem(t)},e.clearAll=function(){cc.sys.localStorage.clear()},e.getFloatVal=function(t,e){var i=this.getVal(t);return l.default.isAllNull(i)?e||0:Number(i)},e.setFloatVal=function(t,e){l.default.isAllNull(t)||l.default.isAllNull(e)?cc.warn("key == null or val == null,",t," ,",e):this.setVal(t,String(e))},e}(s.default);r.default=c,cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"a9a2bn3EFZNtJvWeKlAI08i","Utils");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("LoggerUtils"),a=function(){function t(){}return t.random=function(){var t=(new Date).getTime();return t+=100*Math.random(),Number("0."+Math.sin(t).toString().substr(6))},t.rand=function(e,i){return null==e&&null==i?t.random():(null==i&&(i=e,e=0),e==Math.ceil(e)&&i==Math.floor(i)||cc.error("\u9519\u8bef\u7684\u53c2\u6570\uff1amin:%s max:%s",e,i),Math.floor(t.random()*(i-e+1)+e))},t.randFloat=function(e,i){if(e==i)return e;var n=t.random(),o=Math.min(e,i);return o+n*(Math.max(e,i)-o)},t.isHitRate=function(t){return null!=t&&null!=t||console.info("RandomUtils.lua rate = nil"),t>1||!(t<0)&&this.random()<=t},t.randomInArrayByWeight=function(t){for(var e=0,i=0,n=t;i<n.length;i++)e+=(l=n[i])[1];for(var o=this.rand(1,e),a=0,s=t;a<s.length;a++){var l;if((o-=(l=s[a])[1])<=0)return l[0]}r.default.error("Utils.61 \u51fa\u95ee\u9898\u4e86\uff0c\u968f\u4e0d\u5230\u4e1c\u897f")},t.isColorEqual=function(t,e){return t.r==e.r&&t.g==e.g&&t.b==e.b&&t.a==e.a},t.isMobile=function(){return!1},t.isPlatform=function(t){return cc.sys.platform==t},t}();o.default=a,cc._RF.pop()},{}],ViewInfo:[function(t,e,i){"use strict";cc._RF.push(e,"1adc1Mt8yVHcblzQ4yZ4Tfy","ViewInfo");var n,o=i,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewUrl=null,e.args=null,e}return r(e,t),e.prototype.setViewUIData=function(t){this.uiData=t},e.prototype.getViewUIData=function(){return this.uiData},e.prototype.getViewUrl=function(){return this.uiData.config.url},e.prototype.setArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.args=t},e.prototype.getArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.args},a([l],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],ViewMgr:[function(t,e,i){"use strict";cc._RF.push(e,"08869SnqAZGO76DZyj7dV/7","ViewMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var l=o("CCEvent"),c=o("App"),u=o("SceneMgr"),p=o("LoggerUtils"),d=function(t){function e(){var e=t.call(this)||this;return e.cache=new Map,c.default.event.on(l.default.LOAD_SCENE,e.reset,e),e}return a(e,t),e.prototype.reset=function(){this.cache.clear()},e.prototype.showTips=function(){},e.prototype.showLoading=function(){},e.prototype.hideLoading=function(){},e.prototype.showConfirm=function(){},e.prototype.showAlert=function(){},e.prototype.hideUI=function(t,e){void 0===e&&(e=!0);var i=t.config.url;e&&c.default.audioMgr.playSoundByResId(102),p.default.info("============\u5173\u95ed\u754c\u9762:%s===============",i);var n=this.cache.get(i);c.default.event.emit(l.default.CLOSE_VIEW,i),n&&n.destroy(),this.cache.delete(i)},e.prototype.showUI=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];c.default.audioMgr.playSoundByResId(101);var o=this.cache.get(t.config.url);if(o)p.default.warn("ViewMgr >>>>>>>> 88 \u91cd\u590d\u663e\u793aUI:",t.config.url);else{var r=c.default.resMgr.getPrefab(t.config.url);r?this.create.apply(this,s([t,r],i)):this.loadUI(t,function(n,o){e.create.apply(e,s([t,o],i))})}},e.prototype.showUIWithoutSound=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=this.cache.get(t.config.url);if(o)p.default.warn("ViewMgr >>>>>>>> 88 \u91cd\u590d\u663e\u793aUI:",t.config.url);else{var r=c.default.resMgr.getPrefab(t.config.url);r?this.create.apply(this,s([t,r],i)):this.loadUI(t,function(n,o){e.create.apply(e,s([t,o],i))})}},e.prototype.loadUI=function(t,e){var i=this;c.default.resMgr.loadBundle(t.config.bundleName,function(n,o){n?i.loadUI(t,e):c.default.resMgr.loadBundleInnerRes(o,t.config.url,t.config.type,function(n,o){n?i.loadUI(t,e):e(n,o)})})},e.prototype.isViewShowing=function(t){return!!this.cache.get(t.config.url)},e.prototype.create=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o=cc.instantiate(e);t.parentName?o.parent=c.default.sceneMgr.getSceneLayer(t.parentName):o.parent=c.default.sceneMgr.getSceneLayer(u.SceneLayerConfig.View.name),o.active=!0,this.cache.set(t.config.url,o);var r=o.addComponent("ViewInfo");r.setViewUIData(t),r.setArgs.apply(r,i),p.default.info("============\u663e\u793a\u754c\u9762:%s===============",t.config.url),c.default.event.emit(l.default.SHOW_VIEW,t.config.url)},e}(o("Singleton").default);r.default=d,cc._RF.pop()},{}],VipMgr:[function(t,e,i){"use strict";cc._RF.push(e,"62b349TZWVMKquAItXIeXrD","VipMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("App"),c=o("Attribute"),u=o("DataHelper"),p=o("CommonConst"),d=o("TaskConst"),h=function(t){function e(){var e=t.call(this)||this;return e._vipInfo=null,e.init(p.DataNameEnum.VipMgr),e._vipInfo=e.getValue("vipInfo"),null==e._vipInfo&&(e._vipInfo={level:0,exp:0}),e}return a(e,t),e.prototype.onFix=function(){l.default.taskMgr.incrStep(d.TaskEventType.VipLevel,this._vipInfo.level)},e.prototype.saveData=function(){this.setValue("vipInfo",this._vipInfo)},e.prototype.addExp=function(t){if(!(null==t||t<=0)){for(this._vipInfo.exp+=t;;){var e=this._vipInfo.level+1,i=s.default.VipTable.findByLevel(e);if(null==i)break;if(this._vipInfo.exp<i.exp)break;this._vipInfo.level=e,l.default.taskMgr.incrStep(d.TaskEventType.VipLevel,this._vipInfo.level)}this.saveData()}},e.prototype.getLevel=function(){return this._vipInfo.level},e.prototype.getAttribute=function(){var t=new c.default,e=s.default.VipTable.findByLevel(this._vipInfo.level);return null==e?t:(t.initByConfig(e),t)},e}(u.default);r.default=h,cc._RF.pop()},{}],VipTable:[function(t,e,i){"use strict";cc._RF.push(e,"cddd9bKbQJMw4uBbXb2H53e","VipTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("VipVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("vip_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.level,n)}},t.prototype.findByLevel=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],VipVO:[function(t,e,i){"use strict";cc._RF.push(e,"1a16euOH9BGkp1t3/l5ogXQ","VipVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.level=t[0],this.exp=t[1],this.hpmax=t[2],this.dodge=t[3],this.attack=t[4],this.defense=t[5],this.crit=t[6],this.critDamage=t[7],this.tenacity=t[8],this.breakArmor=t[9],this.breakArmorRate=t[10],this.breakMagicDefense=t[11]},cc._RF.pop()},{}],WarHonorConst:[function(t,e,i){"use strict";cc._RF.push(e,"2a82bz1dR5DcogtkJZkUY7D","WarHonorConst");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],WarHonorMgr:[function(t,e,i){"use strict";cc._RF.push(e,"c0b16SJbQJA8r5u2dAFxMRE","WarHonorMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.BoxType=void 0;var s,l=o("Tbl"),c=o("CCEvent"),u=o("App"),p=o("DataHelper"),d=o("BagConst"),h=o("CommonConst"),f=o("TimeMgr"),g=o("ArrayUtils");(function(t){t[t.Video=1]="Video",t[t.Common=2]="Common"})(s=r.BoxType||(r.BoxType={}));var y=function(t){function e(){var e=t.call(this)||this;return e._info=null,e.init(h.DataNameEnum.WarHonorMgr),e}return a(e,t),e.prototype.getWarHonorInfo=function(){var t=f.default.getTimestampSec();return null==this._info&&(this._info=this.getValue("warHonorInfo"),null==this._info&&(this._info={startAt:t,progress:0,receivedList:[]},this.saveData())),this._info.startAt+604800<t&&(this._info={startAt:t,progress:0,receivedList:[]},this.saveData()),this._info},e.prototype.getWarHonorUIPerformanceInfo=function(){return null==this._UIPerformanceInfo&&(this._UIPerformanceInfo=this.getValue("WarHonorUIPerformanceInfo"),null==this._UIPerformanceInfo&&(this._UIPerformanceInfo={showUnlockAnimationBoxIdList:[]})),this._UIPerformanceInfo},e.prototype.setUnlockAnimationFinish=function(t){this.getWarHonorUIPerformanceInfo().showUnlockAnimationBoxIdList.push(t),this.saveData()},e.prototype.isUnlockAnimationHasShow=function(t){var e=this.getWarHonorUIPerformanceInfo();return!g.default.isInside(e.showUnlockAnimationBoxIdList,t)},e.prototype.saveData=function(){this.setValue("warHonorInfo",this.getWarHonorInfo()),this.setValue("WarHonorUIPerformanceInfo",this.getWarHonorUIPerformanceInfo())},e.prototype.addProgress=function(t){null==t||t<=0?console.error("[WarHonorMgr] addProgress invalid num! num:%s",t):(this.getWarHonorInfo().progress+=t,this.saveData(),u.default.event.emit(c.default.WAR_HONOR_PROGRESS_CHANGE))},e.prototype.getProgress=function(){return this.getWarHonorInfo().progress},e.prototype.getNextLevelProgress=function(){var t=this.getLevel()+1;return this.getLevelPregress(t)},e.prototype.getLevel=function(){var t,e=this.getLevelPregress(1),i=this.getProgress();return i<e?0:(l.default.WarHonorTable.forEach(function(e){null!=t?e.progrress<=i&&t.level<e.level&&(t=e):t=e}),t.level)},e.prototype.getLevelPregress=function(t){var e;return l.default.WarHonorTable.forEach(function(i){t==i.level&&(e=i)}),null==e?-1:e.progrress},e.prototype.receiveAward=function(t){var e=l.default.WarHonorTable.findById(t);if(null!=e){var i=this.getWarHonorInfo();if(-1==i.receivedList.indexOf(t)){i.receivedList.push(t),this.saveData();var n=e.award;u.default.bagMgr.addItemList(n,d.BagSourceEnum.TaskAward),u.default.event.emit(c.default.WAR_HONOR_RECEIVE_AWARD,{id:t,award:n})}else console.error("[WarHonorMgr] receiveAward is received! id:%s",t),u.default.event.emit(c.default.WAR_HONOR_RECEIVE_AWARD_REPEAT,t)}else console.error("[WarHonorMgr] receiveAward not find WarHonorVO! id:%s",t)},e.prototype.isAwardReceive=function(t){return-1!=this.getWarHonorInfo().receivedList.indexOf(t)},e.prototype.isWarHonorCanReceive=function(t){return!!this.isEnoughtProgressToOpen(t)&&!this.isAwardReceive(t)},e.prototype.isEnoughtProgressToOpen=function(t){var e=this.getProgress(),i=l.default.WarHonorTable.findById(t);return!(e<this.getLevelPregress(i.level))},e.prototype.isVideoType=function(t){var e=l.default.WarHonorTable.findById(t);return e.type==s.Video||e.type!=s.Common&&void 0},e}(p.default);r.default=y,cc._RF.pop()},{}],WarHonorMiniView:[function(t,e,i){"use strict";cc._RF.push(e,"8e6d2VN8vJARL26feyP9R/o","WarHonorMiniView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdVideoOPPO"),c=o("App"),u=o("CycleConst"),p=o("CommonConst"),d=o("ShopConst"),h=o("TimeMgr"),f=o("ActionUtils"),g=o("AdaptUtils"),y=o("ArrayUtils"),m=o("MathUtils"),v=o("ScrollViewUtils"),_=o("TipsUtils"),C=o("BaseView"),b=o("Tbl"),S=o("CCEvent"),O=o("UI"),E=cc._decorator,I=E.ccclass,w=E.property,A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ComWarHonorItem=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initTop(),this.initScrollview(),this.initLevel(),this.addEventListener(),this.initBtn(),this.initGold(),this.initDiamond()},e.prototype.start=function(){if(t.prototype.start.call(this),cc.sys.platform==p.PlatformTypeEnum.OPPO_GAME)c.default.adMgr.showBanner(l.OPPOAdUnitIdEnum.Banner_Warhonor);else if(cc.sys.platform==p.PlatformTypeEnum.VIVO_GAME){if(c.default.adMgr.showNativeInterstitialAd(),c.default.viewMgr.isViewShowing(O.UI.AD_BANNER))return;c.default.adMgr.createNativeBannerAd()}else cc.sys.platform==p.PlatformTypeEnum.HUAWEI_GAME&&(c.default.adMgr.showNativeInterstitialAd(),c.default.adMgr.showBanner())},e.prototype.initGold=function(){var t=this.getC("nodeGold");this.seekC(t,"labNum").getComponent(cc.Label).string=m.default.numToBigNum(c.default.bagMgr.getGoldNum());var e=this.seekC(t,"imgAdd");c.default.onClick(e,function(){c.default.viewMgr.showUI(O.UI.GET_GOLD)});var i=this.seekC(t,"redPoint");c.default.shopMgr.isCanBuy(d.ShopGoodEnum.LittleGold)?i.active=!0:i.active=!1},e.prototype.initDiamond=function(){var t=this.getC("nodeDiamond");this.seekC(t,"labNum").getComponent(cc.Label).string=m.default.numToBigNum(c.default.bagMgr.getDiamondNum());var e=this.seekC(t,"imgAdd");c.default.onClick(e,function(){c.default.viewMgr.showUI(O.UI.GET_DIAMOND)})},e.prototype.initBtn=function(){this.initBtnClose()},e.prototype.initBtnClose=function(){var t=this,e=this.getC("btnClose");c.default.onClick(e,function(){t.closeSelf()})},e.prototype.onAdaptUI=function(){t.prototype.onAdaptUI.call(this);var e=this.getC("sprBg");g.default.adaptSize2Winsize(e);var i=this.getC("nodeTop1");g.default.adaptNodeToTopInsideSafeArea(i,g.default.MainSceneTopSpace);var n=this.getC("scrollView");g.default.adaptScrollviewInsideSafeArea(n,i,null,0,g.default.MainSceneBottonSpace)},e.prototype.addEventListener=function(){this.eventOn(S.default.WAR_HONOR_RECEIVE_AWARD_REPEAT,this.handlerReceiveAwardRepeat,this),this.eventOn(S.default.WAR_HONOR_PROGRESS_CHANGE,this.handlerProgressChange,this),this.eventOn(S.default.WAR_HONOR_RECEIVE_AWARD,this.handlerWarHonorReceive,this),this.eventOn(S.default.BAG_ITEM_CHANGE,this.handlerItemChange,this)},e.prototype.handlerItemChange=function(){this.initGold(),this.initDiamond()},e.prototype.initLevel=function(){this.labLevel.getComponent(cc.Label).string=String(c.default.warHonorMgr.getLevel())},e.prototype.initTop=function(){this.nodeTop1=this.getC("nodeTop1"),this.nodeBar=this.getC("nodeBar"),this.sprBarProgress=this.getC("sprBarProgress"),this.labProgress=this.getC("labProgress"),this.labLevel=this.getC("labLevel"),this.labLastTime=this.getC("labLastTime"),this.initResetTime(),this.initProgress()},e.prototype.initScrollview=function(){var t=this;this.scrollView=this.getC("scrollView"),this.content=this.getC("content");var e=b.default.WarHonorTable.VOList.concat(),i=y.default.splitArray(e,2);i=i.reverse();for(var n=0;n<i.length;n++){var o=i[n],r=cc.instantiate(this.ComWarHonorItem);r.parent=this.content,r.getComponent("ComWarHonorItem").initialize(o[0].id,o[1].id,o[0].level)}var a=new cc.Node("");a.width=720,a.height=100,a.parent=this.content,f.default.sequence(this.scrollView,1/60,function(){v.default.scrollToItemIndex(t.scrollView,i.length-1)})},e.prototype.initResetTime=function(){var t=this,e=c.default.cycleMgr.getNextCycleTime(u.CycleTypeEnum.resetWeekTask),i=h.default.getTimestampMill(),n=e-i;this.labLastTime.getComponent(cc.Label).string=h.default.getTimestampToString2(n),f.default.repeat(this.labLastTime,function(){var i=h.default.getTimestampMill(),n=e-i;t.labLastTime.getComponent(cc.Label).string=h.default.getTimestampToString2(n)},1)},e.prototype.initProgress=function(){var t=c.default.warHonorMgr.getLevel(),e=c.default.warHonorMgr.getLevelPregress(t);-1==e&&(e=0);var i=c.default.warHonorMgr.getProgress(),n=c.default.warHonorMgr.getNextLevelProgress(),o=i-e,r=n-e;-1==n?(this.labProgress.getComponent(cc.Label).string="Completed",this.sprBarProgress.width=192):(this.labProgress.getComponent(cc.Label).string=o+"/"+r,this.sprBarProgress.width=192*o/r)},e.prototype.handlerProgressChange=function(){this.initProgress(),this.initLevel()},e.prototype.handlerReceiveAwardRepeat=function(){_.default.showTips("You've claimed reward!")},e.prototype.handlerWarHonorReceive=function(t){c.default.viewMgr.showUI(O.UI.COMMONREWARD_VIEW,t.award)},s([w(cc.Prefab)],e.prototype,"ComWarHonorItem",void 0),s([I],e)}(C.default);r.default=A,cc._RF.pop()},{}],WarHonorTable:[function(t,e,i){"use strict";cc._RF.push(e,"3df09fYGeBOqZUjLvXSLPd+","WarHonorTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("WarHonorVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("war_honor_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],WarHonorVO:[function(t,e,i){"use strict";cc._RF.push(e,"828e6qEWqhJPYj0iwV5+nM+","WarHonorVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.level=t[1],this.type=t[2],this.progrress=t[3],this.award=t[4],this.boxID=t[5],this.boxLevel=t[6]},cc._RF.pop()},{}],WarningRangeTable:[function(t,e,i){"use strict";cc._RF.push(e,"88bdbP3olpFMIeT4AjpnEbv","WarningRangeTable");var n=t,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ResMgr"),a=n("WarningRangeVO"),s=function(){function t(){this.VOMap=new Map,this.VOList=[],this.initVO(r.default.getInstance().getJson("warning_range_config"))}return t.prototype.initVO=function(t){for(var e=0,i=t.length;e<i;e++)if(0!=e){var n=new a.default(t[e]);this.VOList.push(n),this.VOMap.set(n.id,n)}},t.prototype.findById=function(t){return this.VOMap.get(t)},t.prototype.findFirst=function(t){for(var e=0,i=this.VOList.length;e<i;e++){var n=this.VOList[e];if(t(n))return n}},t.prototype.findAll=function(t){for(var e=[],i=0,n=this.VOList.length;i<n;i++){var o=this.VOList[i];t(o)&&e.push(o)}return e},t.prototype.forEach=function(t){for(var e=0,i=this.VOList.length;e<i;e++)t(this.VOList[e])},t}();o.default=s,cc._RF.pop()},{}],WarningRangeVO:[function(t,e,i){"use strict";cc._RF.push(e,"1d296MdNwNCSLbhiNKvzdHl","WarningRangeVO");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){this.id=t[0],this.desc=t[1],this.type=t[2],this.showTime=t[3],this.skillDelayShowTime=t[4],this.resId=t[5],this.param1=t[6],this.param2=t[7],this.param3=t[8]},cc._RF.pop()},{}],WarningView:[function(t,e,i){"use strict";cc._RF.push(e,"20383JDbEtMQbPL9RuDvH0N","WarningView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("LoggerUtils"),c=o("BaseView"),u=o("ENUMS"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ComBossComing=null,e.ComALotOfMonster=null,e.stWarningData=null,e}return a(e,t),e.prototype.initialize=function(){},e.prototype.onLoad=function(){},e.prototype.onEnable=function(){},e.prototype.start=function(){t.prototype.start.call(this),this.initData(),this.initUI()},e.prototype.onDestroy=function(){},e.prototype.onAdaptUI=function(){},e.prototype.initData=function(){l.default.warn("WarningView >>>>>>>> 46 ");var t=this.getArgs();l.default.info("WarningView >>>>>>>> 47 args = ",t),this.stWarningData=t[0],0!=this.stWarningData.warningType||this.closeSelf()},e.prototype.initUI=function(){var t,e=this,i=this.getC("pnlMain");if(this.stWarningData.warningType==u.WarningTypeEnum.BossComing)t=cc.instantiate(this.ComBossComing);else{if(this.stWarningData.warningType!=u.WarningTypeEnum.ALotOfMonster)return l.default.error("WarningView >>>>>>>> 57 \u8b66\u544a\u7c7b\u578b\u9519\u8bef",this.stWarningData.warningType),void this.closeSelf();t=cc.instantiate(this.ComALotOfMonster)}i.addChild(t),t.getComponent("ComWarningIcon").initialize(this.stWarningData,function(){e.closeSelf()})},s([h(cc.Prefab)],e.prototype,"ComBossComing",void 0),s([h(cc.Prefab)],e.prototype,"ComALotOfMonster",void 0),s([d],e)}(c.default);r.default=f,cc._RF.pop()},{}],ZIndexConst:[function(t,e,i){"use strict";cc._RF.push(e,"83e82L9IdpCGrLUijVIbGXQ","ZIndexConst");var n=i,o=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function t(){}return t.Map=1,t.Monster=9,t.Hero=10,t.drawNode=100,t.TipsLayer=1e5,o([a],t)}());n.default=s,cc._RF.pop()},{}],addDesktopView:[function(t,e,i){"use strict";cc._RF.push(e,"a0813SCmX9GdotesAPmPLly","addDesktopView");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("BagConst"),u=o("AdaptUtils"),p=o("LoggerUtils"),d=o("BaseView"),h=o("UI"),f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){this.initBtn()},e.prototype.initBtn=function(){var t=this,e=this.getC("btnAdd"),i=this.getC("btnRefuse"),n=this.getC("btnClose");l.default.onClick(e,function(){qg.installShortcut({successs:function(){l.default.bagMgr.addItem(c.ItemIdEnum.Diamond,200),l.default.viewMgr.showUI(h.UI.COMMONREWARD_VIEW,[[2,200]]),p.default.info("\u521b\u5efa\u6210\u529f")}})}),l.default.onClick(i,function(){t.closeSelf()}),l.default.onClick(n,function(){t.closeSelf()})},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.onAdaptUI=function(){var t=this.getC("sprBg");u.default.adaptSize2Winsize(t)},s([g],e)}(d.default));r.default=y,cc._RF.pop()},{}],loadingVIew:[function(t,e,i){"use strict";cc._RF.push(e,"4fd4bVjn5xP6Ldim7k25LAd","loadingVIew");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("AdaptUtils"),c=o("BaseView"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgRotate1=null,e.imgRotate2=null,e}return a(e,t),e.prototype.onLoad=function(){this.initData(),this.setTouchable(!1)},e.prototype.initData=function(){this.imgRotate1=this.getC("imgRotate1"),this.imgRotate2=this.getC("imgRotate2")},e.prototype.start=function(){t.prototype.start.call(this),this.rotateImg()},e.prototype.rotateImg=function(){cc.tween(this.imgRotate1).repeatForever(cc.tween(this.imgRotate1).by(1.5,{angle:-360})).start(),cc.tween(this.imgRotate2).repeatForever(cc.tween(this.imgRotate2).by(1.5,{angle:360})).start()},e.prototype.onAdaptUI=function(){var t=this.getC("imgBg");l.default.adaptSize2Winsize(t)},s([p],e)}(c.default));r.default=d,cc._RF.pop()},{}],protraitHallView:[function(t,e){"use strict";cc._RF.push(e,"c7e50gX/65ANLSFDGzmDnw5","protraitHallView"),cc.Class({extends:cc.Component,properties:{},start:function(){var t=this;cc.view.setResizeCallback(function(){var e=cc.game.canvas.getBoundingClientRect();e.width>e.height?(t.node.getChildByName("landscape").zIndex=0,t.node.getChildByName("landscape").active=1):(t.node.getChildByName("landscape").zIndex=0,t.node.getChildByName("landscape").active=0)})}}),cc._RF.pop()},{}],protrait:[function(t,e){"use strict";cc._RF.push(e,"b4959rhTHxL+IiAQ8R4Nd7X","protrait"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.view.setResizeCallback(function(){var t=cc.game.canvas.getBoundingClientRect();t.width>t.height?(cc.find("Canvas/landscape").zIndex=0,cc.find("Canvas/landscape").active=1):(cc.find("Canvas/landscape").zIndex=0,cc.find("Canvas/landscape").active=0)})}}),cc._RF.pop()},{}],redPointCheckerAwakeEquipment:[function(t,e,i){"use strict";cc._RF.push(e,"c9221OxA6VIgabIMnN6ZvJs","redPointCheckerAwakeEquipment");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.EQUIPMENT_GET,this.handlerEquipmentChange,this),l.default.event.on(s.default.EQUIPMENT_THROW,this.handlerEquipmentChange,this),l.default.event.on(s.default.EQUIPMENT_SLOT_CHANGE,this.handlerEquipmentChange,this)},e.prototype.handlerEquipmentChange=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.AwakeEquipment},e.prototype.check=function(){var t=this;l.default.timeMgr.delayCallback(function(){t.notifyAllListener("1")},.1)},e}(o("redPointChecker").default);r.default=c,cc._RF.pop()},{}],redPointCheckerCardUpgrade:[function(t,e,i){"use strict";cc._RF.push(e,"276a7YgGfVIBLrW7N1CYz56","redPointCheckerCardUpgrade");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=o("BagConst"),u=o("ArrayUtils"),p=o("ItemUtils"),d=function(t){function e(){var e=t.call(this)||this;return e.ignorCardIdList=[],e}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.CARD_ADD_CARD,this.handlerCardChangeCard,this),l.default.event.on(s.default.CARD_UPGRADE,this.handlerCardChangeCard,this),l.default.event.on(s.default.BAG_ITEM_CHANGE,this.handlerItemChange,this)},e.prototype.handlerItemChange=function(t){var e=t.itemId;p.default.getItemVO(e).type==c.ItemTypeEnum.Card&&t.changeNumber>0&&this.clearIgnorCardId(e),this.check()},e.prototype.handlerCardChangeCard=function(t){this.clearIgnorCardId(t),this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.CardHasUpgrade},e.prototype.clearIgnorCardId=function(t){u.default.removeVal(this.ignorCardIdList,t)},e.prototype.ignorCardId=function(t){this.ignorCardIdList.push(t),this.check()},e.prototype.isIgnorCardId=function(t){return-1!=this.ignorCardIdList.indexOf(t)},e.prototype.check=function(){for(var t=[],e=l.default.cardMgr.getCardListClone(),i=0;i<e.length;i++){var n=e[i];!this.isIgnorCardId(n.cardId)&&l.default.cardMgr.isCardEnoughtCardToUpgrade(n.cardId)&&l.default.cardMgr.isCardEnoughtGoldToUpgrade(n.cardId)&&t.push(n.cardId)}this.notifyAllListener(t)},e}(o("redPointChecker").default);r.default=d,cc._RF.pop()},{}],redPointCheckerEquipmentEquipt:[function(t,e,i){"use strict";cc._RF.push(e,"52e75AexYFBcpQgTlygQ8MW","redPointCheckerEquipmentEquipt");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.EQUIPMENT_GET,this.handlerEquipmentChange,this),l.default.event.on(s.default.EQUIPMENT_SLOT_CHANGE,this.handlerEquipmentChange,this),l.default.event.on(s.default.EQUIPMENT_SELL_EQUIP_INCOME,this.handlerEquipmentChange,this)},e.prototype.handlerEquipmentChange=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.EquipmentEquip},e.prototype.check=function(){var t=l.default.equipmentMgr.getHadEquipPos();this.notifyAllListener(t)},e}(o("redPointChecker").default);r.default=c,cc._RF.pop()},{}],redPointCheckerHonorMgr:[function(t,e,i){"use strict";cc._RF.push(e,"0a64agQN4FKKqHvn0OVreJQ","redPointCheckerHonorMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("WarHonorMgr"),p=function(t){function e(){return t.call(this)||this}return a(e,t),e.prototype.addEventListener=function(){c.default.event.on(l.default.WAR_HONOR_PROGRESS_CHANGE,this.handlerHonorChange,this),c.default.event.on(l.default.WAR_HONOR_RECEIVE_AWARD,this.handlerHonorChange,this)},e.prototype.handlerHonorChange=function(){this.check()},e.prototype.isCareFor=function(t){return t==l.CCEventRedPoint.HonorFreeBox},e.prototype.check=function(){for(var t=s.default.WarHonorTable.VOList.concat(),e=[],i=0;i<t.length;i++){var n=t[i];n.type==u.BoxType.Common&&c.default.warHonorMgr.isWarHonorCanReceive(n.id)&&e.push(n.id)}this.notifyAllListener(e)},e}(o("redPointChecker").default);r.default=p,cc._RF.pop()},{}],redPointCheckerNewCard:[function(t,e,i){"use strict";cc._RF.push(e,"4d75cfDZsZPPrkGOVcuI6oA","redPointCheckerNewCard");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.CARD_ADD_CARD,this.handlerCardChange,this),l.default.event.on(s.default.CARD_NEW_CHANGE,this.handlerCardChange,this)},e.prototype.handlerCardChange=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.CardHasNewCard},e.prototype.check=function(){for(var t=[],e=l.default.cardMgr.getCardListClone(),i=0;i<e.length;i++){var n=e[i];n.isNew&&t.push(n.cardId)}this.notifyAllListener(t)},e}(o("redPointChecker").default);r.default=c,cc._RF.pop()},{}],redPointCheckerNewEquipment:[function(t,e,i){"use strict";cc._RF.push(e,"483dfJuGQRH8pm94to/vzwJ","redPointCheckerNewEquipment");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.EQUIPMENT_GET,this.handlerEquipmentChange,this),l.default.event.on(s.default.EQUIPMENT_TOUCH,this.handlerEquipmentChange,this)},e.prototype.handlerEquipmentChange=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.NewEquipment},e.prototype.check=function(){for(var t=[],e=JSON.parse(JSON.stringify(l.default.equipmentMgr.getEquipmentList())),i=0;i<e.length;i++){var n=e[i];n.isNew&&t.push(n.uid)}this.notifyAllListener(t)},e}(o("redPointChecker").default);r.default=c,cc._RF.pop()},{}],redPointCheckerShopFreeBox:[function(t,e,i){"use strict";cc._RF.push(e,"449869EJX9NManOWwK+30bS","redPointCheckerShopFreeBox");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("ENUMS"),c=o("App"),u=o("ShopConst"),p=function(t){function e(){return t.call(this)||this}return a(e,t),e.prototype.addEventListener=function(){c.default.event.on(s.default.SHOP_SHOW_REWARD,this.handlerEvent,this),c.default.event.on(s.default.SCENE_LOAD_FINISH,this.handlerLoadSceneFinish,this)},e.prototype.handlerLoadSceneFinish=function(t){t==l.SCENE.MAIN?c.default.timeMgr.registerTimer(this.onTick,this,1):c.default.timeMgr.unRegisterTimer(this.onTick,this)},e.prototype.handlerEvent=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.ShopBox},e.prototype.check=function(){c.default.shopMgr.getPurchasedInfo(u.ShopGoodEnum.GoldCoin).cooldownAt-c.default.getTime()<=0?this.notifyAllListener(!0):this.notifyAllListener(!1)},e.prototype.onTick=function(){this.check()},e}(o("redPointChecker").default);r.default=p,cc._RF.pop()},{}],redPointCheckerSignin:[function(t,e,i){"use strict";cc._RF.push(e,"7e1falLqk5PyI53fuP4oWU2","redPointCheckerSignin");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.SIGNIN_CHANGE,this.handlerSignChagne,this)},e.prototype.handlerSignChagne=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.SigninChange},e.prototype.check=function(){var t=l.default.roleServer.isSignin();this.notifyAllListener(t)},e}(o("redPointChecker").default);r.default=c,cc._RF.pop()},{}],redPointCheckerStrenthEquipment:[function(t,e,i){"use strict";cc._RF.push(e,"ec6c5nta7lLULWIl/aSfEbJ","redPointCheckerStrenthEquipment");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=o("BagConst"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.BAG_ITEM_CHANGE,this.handlerGoldChange,this),l.default.event.on(s.default.EQUIPMENT_GET,this.handlerEquipmentChange,this),l.default.event.on(s.default.EQUIPMENT_SLOT_CHANGE,this.handlerEquipmentChange,this)},e.prototype.handlerGoldChange=function(t){t.itemId==c.ItemIdEnum.Gold&&this.check()},e.prototype.handlerEquipmentChange=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.StrenthEquipment},e.prototype.check=function(){var t=this;l.default.timeMgr.delayCallback(function(){t.notifyAllListener("1")},.1)},e}(o("redPointChecker").default);r.default=u,cc._RF.pop()},{}],redPointCheckerTaskAward:[function(t,e,i){"use strict";cc._RF.push(e,"77767sHeTlDAoQIpvmYA9HT","redPointCheckerTaskAward");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("CCEvent"),l=o("App"),c=o("TaskConst"),u=function(t){function e(){return t.call(this)||this}return a(e,t),e.prototype.addEventListener=function(){l.default.event.on(s.default.DailyActivity_Receive_Award,this.handlerDailyActivityReceiveAward,this)},e.prototype.handlerDailyActivityReceiveAward=function(){this.check()},e.prototype.isCareFor=function(t){return t==s.CCEventRedPoint.TaskAward},e.prototype.check=function(){for(var t=l.default.taskMgr.getShowTaskList(),e=[],i=0;i<t.length;i++){var n=t[i];n.task.status==c.TaskStatusEnum.CanGet&&e.push(n.VO.id)}this.notifyAllListener(e)},e}(o("redPointChecker").default);r.default=u,cc._RF.pop()},{}],redPointCheckerTaskDaily:[function(t,e,i){"use strict";cc._RF.push(e,"ceaa3Un8DlBzoe9v5UXJ6od","redPointCheckerTaskDaily");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("ArrayUtils"),p=function(t){function e(){return t.call(this)||this}return a(e,t),e.prototype.addEventListener=function(){c.default.event.on(l.default.DailyActivity_Receive_DayActivityAward,this.handlerDailyActivityReceiveAward,this)},e.prototype.handlerDailyActivityReceiveAward=function(){this.check()},e.prototype.isCareFor=function(t){return t==l.CCEventRedPoint.TaskDailyBox},e.prototype.check=function(){for(var t=c.default.taskMgr.getDailyActivity(),e=s.default.TaskDailyActivityTable.findAll(function(){return!0}),i=[],n=0;n<e.length;n++){var o=e[n];t.activity>=o.activity&&(u.default.isInside(t.receivedList,o.id)||i.push(o.id))}this.notifyAllListener(i)},e}(o("redPointChecker").default);r.default=p,cc._RF.pop()},{}],redPointCheckerTaskWeeklyBox:[function(t,e,i){"use strict";cc._RF.push(e,"a224eON1hZLAqGiy+WAi4Vd","redPointCheckerTaskWeeklyBox");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tbl"),l=o("CCEvent"),c=o("App"),u=o("ArrayUtils"),p=function(t){function e(){return t.call(this)||this}return a(e,t),e.prototype.addEventListener=function(){c.default.event.on(l.default.DailyActivity_Receive_WeekActivityAward,this.handlerDailyActivityReceiveAward,this)},e.prototype.handlerDailyActivityReceiveAward=function(){this.check()},e.prototype.isCareFor=function(t){return t==l.CCEventRedPoint.TaskWeeklyBox},e.prototype.check=function(){var t=c.default.taskMgr.getWeeklyActivity(),e=s.default.TaskWeekActivityTable.findAll(function(){return!0}),i=[];t.activity>=e[0].activity&&(u.default.isInside(t.receivedList,e[0].id)||i.push(e[0].id)),t.activity>=e[1].activity&&(u.default.isInside(t.receivedList,e[1].id)||i.push(e[1].id)),this.notifyAllListener(i)},e}(o("redPointChecker").default);r.default=p,cc._RF.pop()},{}],redPointChecker:[function(t,e,i){"use strict";cc._RF.push(e,"67d3fjJKHFKYJOEKLzGSPZa","redPointChecker");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ArrayUtils"),l=function(t){function e(){var e=t.call(this)||this;return e.eventList=[],e.addEventListener(),e}return a(e,t),e.prototype.addEventListener=function(){},e.prototype.isCareFor=function(){return!0},e.prototype.registerEvent=function(t){this.isCareFor(t.eventName)&&(this.eventList.push(t),this.check())},e.prototype.removeEvent=function(t){if(this.isCareFor(t.eventName))for(var e=0;e<this.eventList.length;e++){var i=this.eventList[e];i.eventName==t.eventName&&i.handler==t.handler&&i.target==t.target&&s.default.removeVal(this.eventList,t)}},e.prototype.check=function(){},e.prototype.notifyAllListener=function(t){for(var e=0;e<this.eventList.length;e++){var i=this.eventList[e];i.handler.call(i.target,t)}},e}(o("Singleton").default);r.default=l,cc._RF.pop()},{}],redPointMgr:[function(t,e,i){"use strict";cc._RF.push(e,"2faedqUoUZCyKxkeQ4Sv9/V","redPointMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Singleton"),l=o("redPointCheckerAwakeEquipment"),c=o("redPointCheckerEquipmentEquipt"),u=o("redPointCheckerNewEquipment"),p=o("redPointCheckerShopFreeBox"),d=o("redPointCheckerSignin"),h=o("redPointCheckerStrenthEquipment"),f=o("redPointCheckerTaskAward"),g=o("redPointCheckerTaskDaily"),y=o("redPointCheckerTaskWeeklyBox"),m=function(t){function e(){var e=t.call(this)||this;return e.doFuncList=[],e.checkerList=[],e.initialize(),e}return a(e,t),e.prototype.initialize=function(){this.initData(),this.initChecker()},e.prototype.initData=function(){this.checkFuncMap=new Map},e.prototype.initChecker=function(){this.checkerList.push(y.default.getInstance()),this.checkerList.push(g.default.getInstance()),this.checkerList.push(f.default.getInstance()),this.checkerList.push(p.default.getInstance()),this.checkerList.push(c.default.getInstance()),this.checkerList.push(d.default.getInstance()),this.checkerList.push(u.default.getInstance()),this.checkerList.push(h.default.getInstance()),this.checkerList.push(l.default.getInstance())},e.prototype.registerEventListener=function(t){if(null!=t.eventName&&null!=t.eventName)for(var e=0;e<this.checkerList.length;e++)this.checkerList[e].registerEvent(t);else console.error("\u6ca1\u6709\u4e8b\u4ef6\u540d\uff0c\u8bf7\u68c0\u67e5\uff01")},e.prototype.removeEventListener=function(t){for(var e=0;e<this.checkerList.length;e++)this.checkerList[e].removeEvent(t)},e}(s.default);r.default=m,cc._RF.pop()},{}],sdkMgr:[function(t,e,i){"use strict";cc._RF.push(e,"e9790e8/eJA5KON7QFdcZmP","sdkMgr");var n,o=t,r=i,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("App"),c=o("CommonConst"),u=o("LoggerUtils"),p=o("Singleton"),d=o("TipsUtils"),h=o("CCEvent"),f=cc._decorator.ccclass,g=function(t){function e(){var e=t.call(this)||this;return e.bannerAd=null,e.sdkCtrl=null,e.adInterval=0,e.auditId=null,e.banneradUnitId=null,e.sceneId=null,e.interstitialAd=null,e.interstitialAdUnitId=null,e.interstitialInterval=0,e.switch=!1,e.initialize(),e}return a(e,t),e.prototype.initialize=function(){cc.sys.platform,c.PlatformTypeEnum.WECHAT_GAME},e.prototype.onLoad=function(){},e.prototype.getSceneId=function(){return this.sceneId},e.prototype.initShouQSDK=function(){var t=this;this.sdkCtrl=window.dyb,this.auditId="5188abe3353adec2a0067d04e2cc75d9",this.sdkCtrl.getDybUserInfo(function(t){u.default.info("getDybUserInfo:"+JSON.stringify(t))}),this.adInterval=l.default.getTime(),this.sdkCtrl.onShare({title:"\u4e00\u8d77\u6765\u73a9\u50f5\u5c38\u522b\u6478\u6211\u9e2d\uff01",imageUrl:"",query:"a=b"},function(t){u.default.info(t)}),this.banneradUnitId="45b7fac28bba5f3a86502cda12b87759";var e={adUnitId:this.banneradUnitId,style:{left:0,top:.8*qq.getSystemInfoSync().windowHeight,width:qq.getSystemInfoSync().windowWidth}};this.bannerAd=qq.createBannerAd(e),this.bannerAd.onLoad(function(){u.default.info("banner init")}),this.interstitialAdUnitId="39c9452681277fe1e1b2fd5248e9eb87";var i={adUnitId:this.interstitialAdUnitId};this.interstitialAd=qq.createInterstitialAd(i),this.interstitialInterval=l.default.getTime(),this.sceneId=qq.getLaunchOptionsSync().scene,cc.assetManager.loadRemote("https://game-jsbmw-1304634540.cos.ap-guangzhou.myqcloud.com/shouQ/switch.json",function(e,i){t.switch=i.json[0],u.default.info("switch: ",t.switch)})},e.prototype.createRole=function(){null!=this.sdkCtrl&&(cc.sys.platform,c.PlatformTypeEnum.WECHAT_GAME)},e.prototype.passLevel=function(t,e){if(null!=this.sdkCtrl){var i=t+"00"+e;this.sdkCtrl.gameLevel(i,function(t){u.default.info("game_level:"+JSON.stringify(t))})}},e.prototype.getHongbaoInfo=function(t){if(null!=this.sdkCtrl){var e=l.default;this.sdkCtrl.get_package(t,function(i){var n;1==i.code?n=i.data:0==i.code&&(n=null),u.default.info(i,"getpppp"),u.default.info("day: ",i.data.day),u.default.info("dayone",i.data.video_one),u.default.info("daytwo",i.data.video_two),u.default.info("daythree",i.data.video_three),u.default.info("dayfour",i.data.video_four),u.default.info("dayfour",e),u.default.info("dayfour",e.hongbaoMgr),cc.game.emit(h.default.HONGBAO_INFO_GET,n),e.hongbaoMgr.setHongbaoVideoGet(t,n)})}},e.prototype.showAd=function(t,e){null!=this.sdkCtrl?this.sdkCtrl.createVideoAd(this.auditId,function(i){u.default.info(JSON.stringify(i),"createRewardedVideoAd"),"close"==i.state&&(i.isEnded?(u.default.info("\u89c6\u9891\u5b8c\u6574\u770b\u5b8c\uff0c\u53d1\u653e\u5956\u52b1"),t(!0,!1)):(u.default.info("\u89c6\u9891\u6ca1\u770b\u5230"),e())),"error"==i.state&&e()}):e()},e.prototype.autoShowAd=function(t,e,i){if(null!=this.sdkCtrl){var n=l.default.getTime();u.default.info("\u51b7\u5374\u65f6\u95f4\uff1a",n-this.adInterval),n-this.adInterval<120?(u.default.info("\u51b7\u5374\u65f6\u95f4\u672a\u5230\uff0c\u4e0d\u80fd\u81ea\u52a8\u89c2\u770b"),i()):(u.default.info("\u51b7\u5374\u65f6\u95f4\u5230\u4e86\uff0c\u81ea\u52a8\u89c2\u770b"),this.adInterval=n,this.sdkCtrl.createVideoAd(this.auditId,function(n){u.default.info(JSON.stringify(n),"createRewardedVideoAd"),"close"==n.state&&(n.isEnded?(u.default.info("\u89c6\u9891\u5b8c\u6574\u770b\u5b8c\uff0c\u53d1\u653e\u5956\u52b1"),t(!0,!1)):(u.default.info("\u89c6\u9891\u6ca1\u770b\u5230"),i())),"error"==n.state&&e()}))}else i()},e.prototype.createHongbaoAd=function(t){null!=this.sdkCtrl&&this.sdkCtrl.createHongbaoAd(this.auditId,function(e){u.default.info(e),"send"==e.state&&t(),"error"==e.state&&d.default.showTips("Network error,please try again later!")})},e.prototype.saveDesktop=function(t){this.sdkCtrl.saveDesktop(function(e){u.default.info("\u684c\u9762:"+JSON.stringify(e)),1==e.code&&t&&t()})},e.prototype.showBanner=function(){null!=this.bannerAd&&(u.default.info("try show banner"),this.bannerAd.show())},e.prototype.hideBanner=function(){null!=this.bannerAd&&(u.default.info("try hide banner"),this.bannerAd.hide())},e.prototype.destoryBanner=function(){null!=this.bannerAd&&this.bannerAd.destroy()},e.prototype.changeBannerPos=function(t,e){this.bannerAd.style.left=qq.getSystemInfoSync().windowWidth*t,this.bannerAd.style.top=qq.getSystemInfoSync().windowHeight*e},e.prototype.showInterstitialAd=function(){if(null==this.interstitialAd)return!1;if(l.default.roleServer.isShouQNewHand()&&l.default.roleServer.getEnterFightTimes()<=2)return!1;var t=l.default.getTime();return!(t-this.interstitialInterval<180||(this.interstitialInterval=t,this.interstitialAd.show(),0))},e.prototype.listenBannerOnResize=function(){null!=this.bannerAd&&this.bannerAd.onResize(function(t){u.default.info("banner: width: %s, height: %s",t.width,t.height)})},s([f],e)}(p.default);r.default=g,cc._RF.pop()},{}],sttgBornAppear:[function(t,e,i){"use strict";cc._RF.push(e,"1ccd2CWaQ1DaL+8nRcw6gtK","sttgBornAppear");var n=i,o=function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function t(t){this.objMonster=null,this.objMonster=t}return t.prototype.born=function(){},o([a],t)}());n.default=s,cc._RF.pop()},{}]},{},["ActionUtils","AdMgr","AdUtils","AdVideoAndroid","AdVideoBase","AdVideoH5TT","AdVideoHuawei","AdVideoIOS","AdVideoOPPO","AdVideoShouQ","AdVideoVIVO","AdVideoWechat","AdaptUtils","AiConst","Alias","AnimationEnum","App","ArrayUtils","ArrowView","AtlasUtils","Attribute","AttributeConst","AttributeTable","AttributeVO","AudioMgr","AudioTable","AudioVO","BagConst","BagMgr","BaseAi","BaseBehavior","BaseComponent","BaseMiniView","BaseScene","BaseView","BattleScene","BornEnum","Buff","BuffTable","BuffVO","Bullet100Collision","BulletFeature","BulletFeatureTable","BulletFeatureVO","Bullet_1","Bullet_100","Bullet_101","Bullet_102","Bullet_103","Bullet_104","Bullet_105","Bullet_106","Bullet_107","Bullet_108","Bullet_109","Bullet_200","Bullet_300","Bullet_400","CCEvent","CHAPTER","CardConst","CardMgr","CardMiniView","ChannelMgr","Chapter","ChapterLevelTable","ChapterLevelVO","ChapterMiniView","ChapterTable","ChapterVO","CircleUtils","ClientTable","ClientVO","Clock","CollisionUtils","ColorUtils","ComBannerAd","ComBattleCamera","ComBattleScene","ComBlood","ComBossBlood","ComCard","ComCard1","ComCardBag","ComCardBagItemNew","ComCardBagNew","ComCardClick","ComCardIcon","ComCardSlot","ComCardSlotNew","ComChapter","ComCircleRocker","ComCollision","ComCompoundBox","ComConfirmView","ComDamageNumber","ComDamgeWudi","ComDropIconP","ComEquipmentBox","ComEquipmentBoxSelect","ComFollowDog","ComGetDiamond","ComGetGold","ComGravite","ComGuideSwallowNode","ComIcon","ComIconInSign","ComIconWithName","ComInterstitialAd","ComItemDropMover","ComKeyboard","ComLayoutGrid","ComLayoutV","ComMap","ComMapList","ComMonsterCondition","ComMonsterMgr","ComMonsterTipsPrefab","ComMover","ComNativeAd","ComOfflineReward","ComPauseSkillPnl","ComPauseView","ComPrivacySettingView","ComRedPoint","ComRewardSkillPnl","ComRocker","ComShadow","ComShopView","ComShouQMain","ComShouQMy","ComSigninView","ComSkillBtn","ComSkillIcon","ComSkillSelect","ComSkin","ComSlotPnl","ComSpine","ComTaskIcon","ComTipsWord","ComTouchMove","ComUIBattle","ComWarHonorBox","ComWarHonorItem","ComWarHonorListPnl","ComWarningIcon","CombatConst","CombatUtils","CommonCfgUtils","CommonConst","CommonHongbaoTable","CommonHongbaoVO","CommonRewardPnl","CommonRewardView","CommonTable","CommonVO","CoolDownMgr","CostarTable","CostarVO","CountingBuyTable","CountingBuyVO","CountingMgr","CountingTable","CountingVO","CycleConst","CycleMgr","CycleTable","CycleVO","DailyTaskView","DamageNumberMgr","DataHelper","DataMgr","DigitTable","DigitVO","DropTable","DropVO","ENUMS","Effect","EffectConst","EffectFactory","EffectTable","EffectVO","Effect_1","Effect_100","Effect_101","Effect_102","Effect_103","Effect_104","Effect_105","Effect_106","Effect_107","Effect_108","Effect_109","Effect_110","Effect_111","Effect_2","Effect_200","Effect_201","Effect_3","Effect_300","Effect_301","Effect_350","Effect_351","Effect_363","Effect_4","EquipmentBreakDownView","EquipmentDetailsAwakenView","EquipmentDetailsDetailView","EquipmentDetailsUnGetView","EquipmentDetailsUpgradeView","EquipmentDetailsView","EquipmentMgr","EquipmentMiniVIew","EquipmentPosTable","EquipmentPosVO","EquipmentStarLevelTable","EquipmentStarLevelVO","EquipmentStrengthenTable","EquipmentStrengthenVO","EquipmentTable","EquipmentVO","ErrorEnum","EventConst","EventMgr","FinalReport","FinalReward","FloorCollision","GenieGroupTable","GenieGroupVO","GenieTable","GenieVO","GlobalUtils","GoodsIconTable","GoodsIconVO","GuideMgr","GuideWordTable","GuideWordVO","HallView","HeroAttrTable","HeroAttrVO","HeroCollision","HeroMgr","HeroTable","HeroVO","HideRewardView","HongbaoConst","HongbaoEnterView","HongbaoMgr","HongbaoRewardView","HongbaoView","IntensifyCeilTable","IntensifyCeilVO","IntensifyCostTable","IntensifyCostVO","IntensifyDetailTable","IntensifyDetailVO","ItemGiftPackTable","ItemGiftPackVO","ItemTable","ItemUtils","ItemVO","Language","LevelMgr","LevelOutputFilter","LevelServer","LevelTable","LevelVO","LoadScene","LoggerUtils","MainScene","MapMgr","MapStruct","MapTable","MapUtils","MapVO","MathUtils","MonsterAITable","MonsterAIVO","MonsterAi","MonsterAppear","MonsterBehavior","MonsterBornPointTable","MonsterBornPointVO","MonsterFighting","MonsterGroupTable","MonsterGroupVO","MonsterMgr","MonsterMoving","MonsterMovingTo","MonsterStanding","MonsterTable","MonsterUsingSkill","MonsterVO","NodePoolMgr","NodeStruct","NodeUtils","NullScene","ObjBase","ObjBullet","ObjConst","ObjFight","ObjFightAttr","ObjGun1","ObjHero","ObjMonster","ObjSpine","ObjStruct","ObjSummons","ObjSummonsEmptyPlane","ObjSummonsFixedTurret","ObjSummonsMovingTurret","OfflineRewardTable","OfflineRewardVO","OutputFilter","OutputMgr","OutputStorage","PointUtils","PrefabUtils","RES","RandomEventPreconditionTable","RandomEventPreconditionVO","RandomEventTable","RandomEventVO","RandomRewardUtils","RebornView","RecordShareView","RecordVideoView","Recorder","RecorderAndroidHelper","RecorderConst","RecorderHelper","RecorderHuaweiHelper","RecorderIosHelper","RecorderMgrTT","RecorderOPPOHelper","RecorderShouQHelper","RecorderTTHelper","RecorderVIVOHelper","RecorderWindowHelper","RectUtils","RedPointUtils","RelatedGroupTable","RelatedGroupVO","RelatedItemTable","RelatedItemVO","ResGroupBundlePreloader","ResGroupLoader","ResMgr","RewardSkill","RewardSkill2Pick1","RewardSkillRandom","RewardSkillSelectOne","RewardStruct","RoleServer","SceneMgr","ScrollViewUtils","ShareTT","ShopConst","ShopGiftTable","ShopGiftVO","ShopMgr","ShopMiniView","ShopTable","ShopTypeTable","ShopTypeVO","ShopVO","SigninRewardTable","SigninRewardVO","SingleGroupTable","SingleGroupVO","Singleton","Skill","SkillCombo","SkillCombo1","SkillCombo10","SkillCombo11","SkillCombo12","SkillCombo13","SkillCombo2","SkillComboConst","SkillComboFactory","SkillComboTable","SkillComboVO","SkillConst","SkillTable","SkillVO","SkillbulletGroupTable","SkillbulletGroupVO","SkillbulletTable","SkillbulletVO","SortUtils","SpecialHongbaoTable","SpecialHongbaoVO","SpineUtils","SpriteFrameUtils","StageMonsterTable","StageMonsterVO","StaticGroupTable","StaticGroupVO","StepCollision","StoryBgView","StringUtils","SummonsConst","SummonsTable","SummonsVO","SystemOpenConst","SystemOpenMgr","SystemOpenTable","SystemOpenVO","TalentAttrTable","TalentAttrVO","TalentCeilTable","TalentCeilVO","TalkingDataAndroid","TalkingDataIos","TalkingDataUtils","TaskConst","TaskDailyActivityTable","TaskDailyActivityVO","TaskEventDispatcher","TaskMgr","TaskMiniView","TaskTable","TaskVO","TaskWeekActivityTable","TaskWeekActivityVO","Tbl","TimeMgr","TipsUtils","TryItemTable","TryItemVO","TypeUtils","UI","UIAdPauseView","UICardInfoView","UICardInfoViewNew","UICardView","UIChapter","UIGuideView","UISkill","UITestView","UITestViewItem","UIWarHonorTipsView","UIWarHonorView","UidUtils","UserUtils","Utils","ViewInfo","ViewMgr","VipMgr","VipTable","VipVO","WarHonorConst","WarHonorMgr","WarHonorMiniView","WarHonorTable","WarHonorVO","WarningRangeTable","WarningRangeVO","WarningView","ZIndexConst","addDesktopView","loadingVIew","protrait","protraitHallView","redPointChecker","redPointCheckerAwakeEquipment","redPointCheckerCardUpgrade","redPointCheckerEquipmentEquipt","redPointCheckerHonorMgr","redPointCheckerNewCard","redPointCheckerNewEquipment","redPointCheckerShopFreeBox","redPointCheckerSignin","redPointCheckerStrenthEquipment","redPointCheckerTaskAward","redPointCheckerTaskDaily","redPointCheckerTaskWeeklyBox","redPointMgr","sdkMgr","sttgBornAppear"]);